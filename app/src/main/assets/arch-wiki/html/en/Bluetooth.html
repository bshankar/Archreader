<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Bluetooth - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Bluetooth skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Bluetooth</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/ArchWiki:Archive.html" title="Bluez4" class="mw-redirect">Bluez4</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Bluetooth_mouse.html" title="Bluetooth mouse">Bluetooth mouse</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Bluetooth_headset.html" title="Bluetooth headset">Bluetooth headset</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Blueman.html" title="Blueman">Blueman</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="http://www.bluetooth.org/">Bluetooth</a> is a standard for the short-range wireless interconnection of cellular phones, computers, and other electronic devices. In Linux, the canonical implementation of the Bluetooth protocol stack is <a rel="nofollow" class="external text" href="http://www.bluez.org/">BlueZ</a>.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuration_via_the_CLI"><span class="tocnumber">2</span> <span class="toctext">Configuration via the CLI</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Bluetoothctl"><span class="tocnumber">2.1</span> <span class="toctext">Bluetoothctl</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#Configuration_with_a_graphical_front-end"><span class="tocnumber">3</span> <span class="toctext">Configuration with a graphical front-end</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#GNOME_Bluetooth"><span class="tocnumber">3.1</span> <span class="toctext">GNOME Bluetooth</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Bluedevil"><span class="tocnumber">3.2</span> <span class="toctext">Bluedevil</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Blueberry"><span class="tocnumber">3.3</span> <span class="toctext">Blueberry</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Blueman"><span class="tocnumber">3.4</span> <span class="toctext">Blueman</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#Using_Obex_for_sending_and_receiving_files"><span class="tocnumber">4</span> <span class="toctext">Using Obex for sending and receiving files</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#ObexFS"><span class="tocnumber">4.1</span> <span class="toctext">ObexFS</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#ObexFTP_transfers"><span class="tocnumber">4.2</span> <span class="toctext">ObexFTP transfers</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Obex_Object_Push"><span class="tocnumber">4.3</span> <span class="toctext">Obex Object Push</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Using_your_computer.27s_speakers_as_a_bluetooth_headset"><span class="tocnumber">4.4</span> <span class="toctext">Using your computer's speakers as a bluetooth headset</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Audio"><span class="tocnumber">5</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-1 tocsection-15">
<a href="#Troubleshooting"><span class="tocnumber">6</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#bluetoothctl_2"><span class="tocnumber">6.1</span> <span class="toctext">bluetoothctl</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#gnome-bluetooth"><span class="tocnumber">6.2</span> <span class="toctext">gnome-bluetooth</span></a></li>
<li class="toclevel-2 tocsection-18">
<a href="#Bluetooth_USB_Dongle"><span class="tocnumber">6.3</span> <span class="toctext">Bluetooth USB Dongle</span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Audio_devices_start_to_skip_at_short_distance_from_dongle"><span class="tocnumber">6.3.1</span> <span class="toctext">Audio devices start to skip at short distance from dongle</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-20"><a href="#Logitech_Bluetooth_USB_Dongle"><span class="tocnumber">6.4</span> <span class="toctext">Logitech Bluetooth USB Dongle</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#hcitool_scan:_Device_not_found"><span class="tocnumber">6.5</span> <span class="toctext">hcitool scan: Device not found</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#rfkill_unblock:_Do_not_unblock"><span class="tocnumber">6.6</span> <span class="toctext">rfkill unblock: Do not unblock</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#My_computer_is_not_visible"><span class="tocnumber">6.7</span> <span class="toctext">My computer is not visible</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Logitech_keyboard_does_not_pair"><span class="tocnumber">6.8</span> <span class="toctext">Logitech keyboard does not pair</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#HSP.2FHFP_profiles"><span class="tocnumber">6.9</span> <span class="toctext">HSP/HFP profiles</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Thinkpad_Bluetooth_Laser_Mouse_problems"><span class="tocnumber">6.10</span> <span class="toctext">Thinkpad Bluetooth Laser Mouse problems</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Foxconn_.2F_Hon_Hai_.2F_Lite-On_Broadcom_device"><span class="tocnumber">6.11</span> <span class="toctext">Foxconn / Hon Hai / Lite-On Broadcom device</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bluez">bluez</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> packages. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bluez">bluez</a></span> package provides the Bluetooth protocol stack, and the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> package provides the <code>bluetoothctl</code> utility. 
</p>
<p>Load the generic bluetooth driver, if not already loaded:
</p>
<pre># modprobe btusb
</pre>
<p>Then <a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">start</a> the <code>bluetooth.service</code> systemd unit. You can <a href="../en/Systemd.html#Using_units" title="Enable" class="mw-redirect">enable</a> it to start automatically at boot time.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>
<ul>
<li> By default the bluetooth daemon will only give out bnep0 devices to users that are a member of the <code>lp</code> group. Make sure to add your user to that group if you intend to connect to a bluetooth tether. You can change the group that is required in the file <code>/etc/dbus-1/system.d/bluetooth.conf</code>.</li>
<li> Some Bluetooth adapters are bundled with a Wi-Fi card (e.g. <a rel="nofollow" class="external text" href="http://www.intel.com/content/www/us/en/wireless-products/centrino-advanced-n-6235.html">Intel Centrino</a>). These require that the Wi-Fi card is firstly enabled (typically a keyboard shortcut on a laptop) in order to make the Bluetooth adapter visible to the kernel.</li>
<li> Some Bluetooth cards (e.g. Broadcom) conflict with the network adapter. Thus, you need to make sure that your Bluetooth device get connected before the network service boot.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Configuration_via_the_CLI">Configuration via the CLI</span></h2>
<h3><span class="mw-headline" id="Bluetoothctl">Bluetoothctl</span></h3>
<p>Pairing a device from the shell is one of the simplest and most reliable options.  The exact procedure depends on the devices involved and their input functionality.  What follows is a general outline of pairing a device using <code>/usr/bin/bluetoothctl</code>:
</p>
<p>Start the <code>bluetoothctl</code> interactive command. There one can input <code>help</code> to get a list of available commands. 
</p>
<ul>
<li> Turn the power to the controller on by entering <code>power on</code>. It is off by default.</li>
<li> Enter <code>devices</code> to get the MAC Address of the device with which to pair.</li>
<li> Enter device discovery mode with <code>scan on</code> command if device is not yet on the list.</li>
<li> Turn the agent on with <code>agent on</code>.</li>
<li> Enter <code>pair <i>MAC Address</i></code> to do the pairing (tab completion works).</li>
<li> If using a device without a PIN, one may need to manually trust the device before it can reconnect successfully. Enter <code>trust <i>MAC Address</i></code> to do so.</li>
<li> Finally, use <code>connect <i>MAC_address</i></code> to establish a connection.</li>
</ul>
<p>An example session may look this way:
</p>
<pre># bluetoothctl 
[NEW] Controller 00:10:20:30:40:50 pi [default]
[bluetooth]# agent KeyboardOnly 
Agent registered
[bluetooth]# default-agent 
Default agent request successful
[bluetooth]# scan on
Discovery started
[CHG] Controller 00:10:20:30:40:50 Discovering: yes
[NEW] Device 00:12:34:56:78:90 myLino
[CHG] Device 00:12:34:56:78:90 LegacyPairing: yes
[bluetooth]# pair 00:12:34:56:78:90
Attempting to pair with 00:12:34:56:78:90
[CHG] Device 00:12:34:56:78:90 Connected: yes
[CHG] Device 00:12:34:56:78:90 Connected: no
[CHG] Device 00:12:34:56:78:90 Connected: yes
Request PIN code
[agent] Enter PIN code: 1234
[CHG] Device 00:12:34:56:78:90 Paired: yes
Pairing successful
[CHG] Device 00:12:34:56:78:90 Connected: no
[bluetooth]# connect 00:12:34:56:78:90
Attempting to connect to 00:12:34:56:78:90
[CHG] Device 00:12:34:56:78:90 Connected: yes
Connection successful
</pre>
<p>In order to have the device active after a reboot, a udev rule is needed:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-local.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Set bluetooth power up
ACTION=="add", KERNEL=="hci0", RUN+="/usr/bin/hciconfig %k up"</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>Replace <code>KERNEL=="hci0"</code> with <code>KERNEL=="hci[0-9]*"</code> to match all interfaces.</div>
<p>After a suspend/resume-cycle, the device can be powered on automatically using a custom <i>systemd</i> service:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/bluetooth-auto-power@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[Unit]
Description=Bluetooth auto power on
After=bluetooth.service sys-subsystem-bluetooth-devices-%i.device suspend.target

[Service]
Type=oneshot
ExecStart=/usr/bin/hciconfig %i up

[Install]
WantedBy=suspend.target
</pre>
<p><a href="../en/Systemd.html#Using_units" title="Enable" class="mw-redirect">Enable</a> an instance of the unit using your bluetooth device name, for example <code>bluetooth-auto-power@hci0.service</code>.
</p>
<h2><span class="mw-headline" id="Configuration_with_a_graphical_front-end">Configuration with a graphical front-end</span></h2>
<p>The following packages allow for a graphical interface to customize Bluetooth.
</p>
<h3><span class="mw-headline" id="GNOME_Bluetooth">GNOME Bluetooth</span></h3>
<p><a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/GnomeBluetooth">GNOME Bluetooth</a> is <a href="../en/GNOME.html" title="GNOME">GNOME</a>'s Bluetooth tool. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-bluetooth">gnome-bluetooth</a></span> package provides the back-end, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-shell">gnome-shell</a></span> provides the status monitor applet, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-control-center">gnome-control-center</a></span> provides the configuration front-end GUI that can be accessed by typing Bluetooth on the Activities overview, or with the <code>gnome-control-center bluetooth</code> command. You can also launch the <code>bluetooth-sendto</code> command directly to send files to a remote device.
</p>
<p>To receive files, you must install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-user-share">gnome-user-share</a></span> package. You can then go to <i>Settings -&gt; Sharing</i> to authorize receiving files from paired devices over Bluetooth.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>To add a Bluetooth entry to the <i>Send To</i> menu in Thunar's file properties menu, see instructions <a rel="nofollow" class="external text" href="http://docs.xfce.org/xfce/thunar/send-to">here</a>. (The command that needs to be configured is <code>bluetooth-sendto %F</code>).</div>
<h3><span class="mw-headline" id="Bluedevil">Bluedevil</span></h3>
<p><a rel="nofollow" class="external text" href="https://projects.kde.org/projects/kde/workspace/bluedevil">Bluedevil</a> is <a href="../en/KDE.html" title="KDE">KDE</a>'s Bluetooth tool. It can be <a href="../en/Help:Reading.html#Installation_of_packages" title="Installed" class="mw-redirect">installed</a> with the package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bluedevil">bluedevil</a></span> (KDE Plasma 5).
</p>
<p>If there is no Bluetooth icon visible in Dolphin and in the system tray, enable it in the system tray options or add a widget. You can configure Bluedevil and detect Bluetooth devices by clicking the icon. An interface is also available from the KDE System Settings.
</p>
<h3><span class="mw-headline" id="Blueberry">Blueberry</span></h3>
<p><i>Blueberry</i> is an alternative front-end for GNOME Bluetooth, which works in all desktop environments. It can be installed with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=blueberry">blueberry</a></span> package. It provides a configuration tool (<i>blueberry</i>) and a system tray applet (<i>blueberry-tray</i>).
</p>
<h3><span class="mw-headline" id="Blueman">Blueman</span></h3>
<p>See <a href="../en/Blueman.html" title="Blueman">Blueman</a>.
</p>
<h2><span class="mw-headline" id="Using_Obex_for_sending_and_receiving_files">Using Obex for sending and receiving files</span></h2>
<h3><span class="mw-headline" id="ObexFS">ObexFS</span></h3>
<p>Another option, rather than using KDE or Gnome Bluetooth packages, is ObexFS which allows for the mounting of phones which are treated like any other filesystem.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>To use ObexFS, one needs a device that provides an ObexFTP service.</div>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=obexfs">obexfs</a></span> and mount supported phones by running:
</p>
<pre>$ obexfs -b <i>MAC_address_of_device</i> /mountpoint
</pre>
<p>Once you have finished, to unmount the device use the command:
</p>
<pre>$ fusermount -u /mountpoint
</pre>
<p>For more mounting options see <a rel="nofollow" class="external free" href="http://dev.zuckschwerdt.org/openobex/wiki/ObexFs">http://dev.zuckschwerdt.org/openobex/wiki/ObexFs</a>
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Ensure that the bluetooth device you are mounting is <b>not</b> set to mount <i>read-only</i>. You should be able to do this from the device's settings. If the device is mounted <i>read-only</i> you may encounter a permissions error when trying to transfer files to the device.</div>
<h3><span class="mw-headline" id="ObexFTP_transfers">ObexFTP transfers</span></h3>
<p>If your device supports the Obex FTP service but you do not wish to mount the device you can transfer files to and from the device using the obexftp command.
</p>
<p>To send a file to a device run the command:
</p>
<pre>$ obexftp -b <i>MAC_address_of_device</i> -p /path/to/file
</pre>
<p>To retrieve a file from a device run the command:
</p>
<pre>$ obexftp -b <i>MAC_address_of_device</i> -g filename
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Ensure that the file you are retrieving is in the device's <i>exchange folder</i>. If the file is in a subfolder of the exchange folder then provide the correct path in the command.</div>
<h3><span class="mw-headline" id="Obex_Object_Push">Obex Object Push</span></h3>
<p>For devices that do not support Obex FTP service, check if Obex Object Push is supported.
</p>
<pre># sdptool browse <i>XX:XX:XX:XX:XX:XX</i>
</pre>
<p>Read the output, look for Obex Object Push, remember the channel for this service.  If supported, one can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=ussp-push">ussp-push</a></span> to send files to this device:
</p>
<pre># ussp-push <i>XX:XX:XX:XX:XX:XX</i>@<i>CHANNEL</i> <i>file</i> <i>wanted_file_name_on_phone</i>
</pre>
<h3><span class="mw-headline" id="Using_your_computer.27s_speakers_as_a_bluetooth_headset">Using your computer's speakers as a bluetooth headset</span></h3>
<p>This can allow you to do things such as playing what is on your phone through your computer speakers.
</p>
<p>Add the following to the file <code>/etc/bluetooth/audio.conf</code> (create it if not present):
</p>
<pre>[General]
Enable=Source
</pre>
<p>More info in:
</p>
<ul>
<li> <a rel="nofollow" class="external free" href="https://gist.github.com/joergschiller/1673341">https://gist.github.com/joergschiller/1673341</a>
</li>
<li> <a rel="nofollow" class="external free" href="http://www.lightofdawn.org/blog/?viewDetailed=00031">http://www.lightofdawn.org/blog/?viewDetailed=00031</a>
</li>
</ul>
<h2><span class="mw-headline" id="Audio">Audio</span></h2>
<p>In order to be able to use audio equipment like bluetooth headphones, you need to install the additional <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=pulseaudio-bluetooth">pulseaudio-bluetooth</a></span> package.
</p>
<p>Please have a look at the <a href="../en/Bluetooth_headset.html" title="Bluetooth headset">Bluetooth headset</a> page for more information about bluetooth audio and bluetooth headsets.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="bluetoothctl_2">bluetoothctl</span></h3>
<p>If bluetoothctl cannot find any controller, the bluetooth device may be blocked. Try to unblock it using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=rfkill">rfkill</a></span>:
</p>
<pre># rfkill unblock bluetooth
</pre>
<h3><span class="mw-headline" id="gnome-bluetooth">gnome-bluetooth</span></h3>
<p>If you see this when trying to enable receiving files in bluetooth-properties:
</p>
<pre>Bluetooth OBEX start failed: Invalid path
Bluetooth FTP start failed: Invalid path
</pre>
<p>Then install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xdg-user-dirs">xdg-user-dirs</a></span> and issue:
</p>
<pre>$ xdg-user-dirs-update
</pre>
<p>You can edit the paths using:
</p>
<pre>$ vi ~/.config/user-dirs.dirs
</pre>
<h3><span class="mw-headline" id="Bluetooth_USB_Dongle">Bluetooth USB Dongle</span></h3>
<p>If you are using a USB dongle, you should check that your Bluetooth dongle is recognized. You can do that by running <code>journalctl -f</code> when you have plugged in the USB dongle (or inspecting <code>/var/log/messages.log</code>). It should look something like the following (look out for hci):
</p>
<pre>
Feb 20 15:00:24 hostname kernel: [ 2661.349823] usb 4-1: new full-speed USB device number 3 using uhci_hcd
Feb 20 15:00:24 hostname bluetoothd[4568]: HCI dev 0 registered
Feb 20 15:00:24 hostname bluetoothd[4568]: Listening for HCI events on hci0
Feb 20 15:00:25 hostname bluetoothd[4568]: HCI dev 0 up
Feb 20 15:00:25 hostname bluetoothd[4568]: Adapter /org/bluez/4568/hci0 has been enabled
</pre>
<p>If you only get the first two lines, you may see that it found the device but you need to bring it up.
Example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">hciconfig -a hci0</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
hci0:	Type: USB
	BD Address: 00:00:00:00:00:00 ACL MTU: 0:0 SCO MTU: 0:0
	DOWN 
	RX bytes:0 acl:0 sco:0 events:0 errors:0
        TX bytes:0 acl:0 sco:0 commands:0 errors:
</pre>
<pre># hciconfig hci0 up
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">hciconfig -a hci0</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
hci0:	Type: USB
	BD Address: 00:02:72:C4:7C:06 ACL MTU: 377:10 SCO MTU: 64:8
	UP RUNNING 
	RX bytes:348 acl:0 sco:0 events:11 errors:0
        TX bytes:38 acl:0 sco:0 commands:11 errors:0
</pre>
<p>If this fails with an error like:
</p>
<pre>Operation not possible due to RF-kill
</pre>
<p>it could be due either to the <code>rfkill</code> utility, in which case it should be resolved with
</p>
<pre># rfkill unblock all
</pre>
<p>or, it could simply be the hardware switch of the computer. The hardware bluetooth switch (at least sometimes) controls access to USB bluetooth dongles also. Flip/press this switch and try bringing the device up again.
</p>
<p>To verify that the device was detected you can use <code>hcitool</code> which is part of the <code>bluez-utils</code>. You can get a list of available devices and their identifiers and their MAC address by issuing:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ hcitool dev</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
Devices:
        hci0	00:1B:DC:0F:DB:40
</pre>
<p>More detailed information about the device can be retrieved by using <code>hciconfig</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ hciconfig -a hci0</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
hci0:   Type: USB
        BD Address: 00:1B:DC:0F:DB:40 ACL MTU: 310:10 SCO MTU: 64:8
        UP RUNNING PSCAN ISCAN
        RX bytes:1226 acl:0 sco:0 events:27 errors:0
        TX bytes:351 acl:0 sco:0 commands:26 errors:0
        Features: 0xff 0xff 0x8f 0xfe 0x9b 0xf9 0x00 0x80
        Packet type: DM1 DM3 DM5 DH1 DH3 DH5 HV1 HV2 HV3
        Link policy: RSWITCH HOLD SNIFF PARK
        Link mode: SLAVE ACCEPT 
        Name: 'BlueZ (0)'
        Class: 0x000100
        Service Classes: Unspecified
        Device Class: Computer, Uncategorized
        HCI Ver: 2.0 (0x3) HCI Rev: 0xc5c LMP Ver: 2.0 (0x3) LMP Subver: 0xc5c
        Manufacturer: Cambridge Silicon Radio (10)
</pre>
<h4><span class="mw-headline" id="Audio_devices_start_to_skip_at_short_distance_from_dongle">Audio devices start to skip at short distance from dongle</span></h4>
<p>If other devices share the same USB host, they can <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1440161#p1440161">interrupt communication with audio devices</a>. Make sure it is the only device attached to its bus. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsusb</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
Bus 002 Device 002: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 004: ID 048d:1345 Integrated Technology Express, Inc. Multi Cardreader
Bus 001 Device 003: ID 0424:a700 Standard Microsystems Corp. 2 Port Hub
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</pre>
<h3><span class="mw-headline" id="Logitech_Bluetooth_USB_Dongle">Logitech Bluetooth USB Dongle</span></h3>
<p>There are Logitech dongles (ex. Logitech MX5000) that can work in two modes: Embedded and HCI. In embedded mode dongle emulates a USB device so it seems to your PC that you are using a normal USB mouse/keyoard.
</p>
<p>If you hold the little red Button on the USB BT mini-receiver it will enable the other mode. Hold the red button on the BT dongle and plug it into the computer, and after 3-5 seconds of holding the button, the Bluetooth icon will appear in the system tray. <a rel="nofollow" class="external text" href="http://ubuntuforums.org/showthread.php?t=1332197">Discussion</a>
</p>
<p>Alternatively, you can install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bluez-hid2hci">bluez-hid2hci</a></span> package. When you connect your Logitech dongle it will automatically switch.
</p>
<h3><span class="mw-headline" id="hcitool_scan:_Device_not_found">hcitool scan: Device not found</span></h3>
<ul><li> On some Dell laptops (e.g. Studio 15) you have to switch the Bluetooth mode from HID to HCI. Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bluez-hid2hci">bluez-hid2hci</a></span> package, then <a href="../en/Udev.html" title="Udev">udev</a> should do this automatically. Alternatively, you can run this command to switch to HCI manually:</li></ul>
<pre># /usr/lib/udev/hid2hci
</pre>
<ul><li> If the device will not show up and you have a Windows operating system on your machine, try booting it and enable the bluetooth adapter from windows.</li></ul>
<ul><li> Sometimes also this simple command helps:</li></ul>
<pre># hciconfig hci0 up
</pre>
<h3><span class="mw-headline" id="rfkill_unblock:_Do_not_unblock">rfkill unblock: Do not unblock</span></h3>
<p>If your device still soft blocked and you run connman, try this:
</p>
<pre>$ connmanctl enable bluetooth
</pre>
<h3><span class="mw-headline" id="My_computer_is_not_visible">My computer is not visible</span></h3>
<p>Cannot discover computer from your phone? Enable PSCAN and ISCAN:
</p>
<pre># enable PSCAN and ISCAN
$ hciconfig hci0 piscan 
# check it worked
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ hciconfig</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
hci0:   Type: USB
        BD Address: 00:12:34:56:78:9A ACL MTU: 192:8 SCO MTU: 64:8
        <b>UP RUNNING PSCAN ISCAN</b>
        RX bytes:20425 acl:115 sco:0 events:526 errors:0
        TX bytes:5543 acl:84 sco:0 commands:340 errors:0
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Check DiscoverableTimeout and PairableTimeout in <code>/etc/bluetooth/main.conf</code>
</div>
<p>Try changing device class in <code>/etc/bluetooth/main.conf</code> as following:
</p>
<pre># Default device class. Only the major and minor device class bits are
# considered.
#Class = 0x000100 (from default config)
Class = 0x100100
</pre>
<p>This was the only solution to make my computer visible for my phone.
</p>
<h3><span class="mw-headline" id="Logitech_keyboard_does_not_pair">Logitech keyboard does not pair</span></h3>
<p>If you do not get the passkey when you try to pair your Logitech keyboard, type the following command:
</p>
<pre># hciconfig hci0 sspmode 0
</pre>
<p>If after pairing, the keyboard still does not connect, check the output of <code>hcidump -at</code>. If the latter indicates repeatedly connections-disconnections like the following message:
</p>
<pre>   status 0x00 handle 11 reason 0x13
   Reason: Remote User Terminated Connection
</pre>
<p>then, the only solution for now is to install <a href="../en/ArchWiki:Archive.html" title="Bluez4" class="mw-redirect">the old Bluetooth stack</a>.
</p>
<h3><span class="mw-headline" id="HSP.2FHFP_profiles">HSP/HFP profiles</span></h3>
<p>bluez5 removed support for the HSP/HFP profiles (telephony headset for <a href="../en/TeamSpeak.html" title="TeamSpeak">TeamSpeak</a>, <a href="../en/Skype.html" title="Skype">Skype</a>, etc.). You need to install <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> (&gt;= version 6) or another application that implements HSP/HFP itself.
</p>
<h3><span class="mw-headline" id="Thinkpad_Bluetooth_Laser_Mouse_problems">Thinkpad Bluetooth Laser Mouse problems</span></h3>
<p>If you are experiencing that your Thinkpad Bluetooth Laser Mouse rapidly connects and then (after a few milliseconds) disconnects again every few seconds (when you move the mouse or press a button), try pairing it with the code <code>0000</code> instead pairing without a code.
</p>
<h3><span class="mw-headline" id="Foxconn_.2F_Hon_Hai_.2F_Lite-On_Broadcom_device">Foxconn / Hon Hai / Lite-On Broadcom device</span></h3>
<p>Some of these devices require the firmware to be flashed into the device at boot. The firmware is not provided but can converted from a Microsoft Windows <i>.hex</i> file into a <i>.hcd</i> using <a rel="nofollow" class="external text" href="https://github.com/jessesung/hex2hcd">hex2hcd</a> (which is installed with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>).
</p>
<p>In order to get the right <i>.hex</i> file, try searching the device vendor:product code obtained with <i>lsusb</i>, for example:
</p>
<pre>   ...
   Bus 002 Device 004: ID <b>04ca:2006</b> Lite-On Technology Corp. Broadcom BCM43142A0 Bluetooth Device
   ...
</pre>
<p>or
</p>
<pre>   Bus 004 Device 004: Id <b>0489:e031</b> Foxconn / Hon Hai
</pre>
<p>Alternatively, boot into Windows (a virtual machine installation will suffice) and get the firmware name from the Device Manager utility. If you want to know the model of your device but cannot see it in <i>lsusb</i>, you might see it in <i>lsusb -v</i> as <code>iProduct</code>.
</p>
<p>The <i>.hex</i> file can be extracted from the downloaded Windows driver without having to run Windows for it. Download the right driver, for example <a rel="nofollow" class="external text" href="http://www.fujitsupc.com/downloads/mobile/BLUETOOTH_WIDCOMM_V6.5.0.3100_WIN7-32_FPC46-1771-01.EXE">Bluetooth Widcomm</a> (listed among the drivers for <a rel="nofollow" class="external text" href="http://support.fujitsupc.com/CS/Portal/supportsearch.do?srch=DOWNLOADS&amp;Series=P%20Series&amp;Model=P771&amp;ProductType=Notebook%20PC">Lifebook P771</a>), which contains the drivers for many Broadcomm devices. In case of Bluetooth Widcomm, the driver is a self-extracting RAR archive, so it can be extracted using <i><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=unrar">unrar</a></span> x</i>. To find out which of the many <i>.hex</i> files is the right one for you, look in the file <code>Win32/bcbtums-win7x86-brcm.inf</code> and search for <code>[RAMUSB<b>E031</b>.CopyList]</code>, where <code>E031</code> should be replaced with the product code (the second hex number in <i>lsusb</i>) of your device in upper-case. Underneath you should see the file name of the right <i>.hex</i> file.
</p>
<p>Once you have the <i>.hcd</i> file, copy it into <code>/lib/firmware/brcm/BCM.hcd</code> - this filename is suggested by <code>dmesg</code> and it may change in your case so check your <i>dmesg</i> output in order to verify. Then reload the <i>btusb</i> module:
</p>
<pre># rmmod btusb
# modprobe btusb
</pre>
<p>In some cases (with older kernels?), you have to flash the <i>.hcd</i> file with the <i>brcm_patchram_plus</i> utility, provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/brcm_patchram_plus-git/">brcm_patchram_plus-git</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/brcm_patchram_plus-git">aur-mirror</a>]</sup>. First, make sure in <i>dmesg</i> that the device is recognized by <i>btusb</i> as a bluetooth device. Then, run the following (replace <i>04ca 2006</i> with your vendor product pair):
</p>
<pre># echo '04ca 2006' &gt; /sys/bus/usb/drivers/btusb/new_id
    
</pre>
<p>Turn on the device:
</p>
<pre># hciconfig hci0 up
</pre>
<p>Flash the firmware: 
</p>
<pre># brcm_patchram_plus_usb --patchram fw-04ca_2006.hcd hci0
</pre>
<p>The device should now be available. See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=162688">BBS#162688</a> for information on making these changes persistent.
</p>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Bluetooth.html" title="Category:Bluetooth">Bluetooth</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
