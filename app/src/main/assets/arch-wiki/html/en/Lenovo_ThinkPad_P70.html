<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Lenovo ThinkPad P70 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Lenovo_ThinkPad_P70 skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Lenovo ThinkPad P70</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p>This is a guide of steps aggregated from other sources to installation of Arch on the Lenovo ThinkPad P70. This guide was written for ARCH_201604 ISO. The laptop features a 17.3" IPS display and has connectors for up to four SSDs (two M.2 <a href="../en/Solid_State_Drives/NVMe.html" title="NVMe" class="mw-redirect">NVMe</a>, two SATA).
</p>
<table class="wikitable" style="float: right;">
<tr>
<td> <b>Device</b> </td>
<td> <b>Status</b> </td>
<td> <b>Modules</b>
</td>
</tr>
<tr>
<td> Intel </td>
<td style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working </td>
<td> xf86-video-intel
</td>
</tr>
<tr>
<td> NVIDIA (Quadro M3000M, M4000M) </td>
<td style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working* </td>
<td> nvidia
</td>
</tr>
<tr>
<td> HDMI </td>
<td style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working </td>
<td>
</td>
</tr>
<tr>
<td> Ethernet </td>
<td style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working </td>
<td>
</td>
</tr>
<tr>
<td> Wireless </td>
<td style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working </td>
<td> iwlwifi
</td>
</tr>
<tr>
<td> Audio </td>
<td style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working </td>
<td>
</td>
</tr>
<tr>
<td> Trackpad </td>
<td style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working </td>
<td> xf86-input-libinput
</td>
</tr>
<tr>
<td> Trackpoint </td>
<td style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working </td>
<td> xf86-input-libinput
</td>
</tr>
<tr>
<td> Camera </td>
<td style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working </td>
<td>
</td>
</tr>
<tr>
<td> Card Reader </td>
<td style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">untested </td>
<td>
</td>
</tr>
<tr>
<td> Bluetooth </td>
<td style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">untested</td>
<td>
</td>
</tr>
</table>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Hardware"><span class="tocnumber">1</span> <span class="toctext">Hardware</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Preliminaries"><span class="tocnumber">2</span> <span class="toctext">Preliminaries</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Installation"><span class="tocnumber">3</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#Configuration"><span class="tocnumber">4</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Keyboard"><span class="tocnumber">4.1</span> <span class="toctext">Keyboard</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Sound"><span class="tocnumber">4.2</span> <span class="toctext">Sound</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Integrated_Graphics"><span class="tocnumber">4.3</span> <span class="toctext">Integrated Graphics</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Dedicated_Graphics"><span class="tocnumber">4.4</span> <span class="toctext">Dedicated Graphics</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#External_Displays"><span class="tocnumber">4.5</span> <span class="toctext">External Displays</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#HiDPI"><span class="tocnumber">4.6</span> <span class="toctext">HiDPI</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Xfce"><span class="tocnumber">4.7</span> <span class="toctext">Xfce</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Hardware">Hardware</span></h2>
<p><code>lspci</code> returns something like:
</p>
<pre>00:00.0 Host bridge: Intel Corporation Skylake Host Bridge/DRAM Registers (rev 07)
00:01.0 PCI bridge: Intel Corporation Skylake PCIe Controller (x16) (rev 07)
00:02.0 VGA compatible controller: Intel Corporation Device 191d (rev 06)
00:14.0 USB controller: Intel Corporation Sunrise Point-H USB 3.0 xHCI Controller (rev 31)
00:14.2 Signal processing controller: Intel Corporation Sunrise Point-H Thermal subsystem (rev 31)
00:16.0 Communication controller: Intel Corporation Sunrise Point-H CSME HECI #1 (rev 31)
00:16.3 Serial controller: Intel Corporation Sunrise Point-H KT Redirection (rev 31)
00:17.0 SATA controller: Intel Corporation Sunrise Point-H SATA controller [AHCI mode] (rev 31)
00:1c.0 PCI bridge: Intel Corporation Sunrise Point-H PCI Express Root Port #1 (rev f1)
00:1c.2 PCI bridge: Intel Corporation Sunrise Point-H PCI Express Root Port #3 (rev f1)
00:1c.4 PCI bridge: Intel Corporation Sunrise Point-H PCI Express Root Port #5 (rev f1)
00:1d.0 PCI bridge: Intel Corporation Sunrise Point-H PCI Express Root Port #9 (rev f1)
00:1d.4 PCI bridge: Intel Corporation Sunrise Point-H PCI Express Root Port #13 (rev f1)
00:1f.0 ISA bridge: Intel Corporation Sunrise Point-H LPC Controller (rev 31)
00:1f.2 Memory controller: Intel Corporation Sunrise Point-H PMC (rev 31)
00:1f.3 Audio device: Intel Corporation Sunrise Point-H HD Audio (rev 31)
00:1f.4 SMBus: Intel Corporation Sunrise Point-H SMBus (rev 31)
00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection (2) I219-LM (rev 31)
01:00.0 VGA compatible controller: NVIDIA Corporation GM204GLM [Quadro M3000M] (rev a1)
04:00.0 Network controller: Intel Corporation Wireless 8260 (rev 3a)
70:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller (rev 01)
71:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. RTS525A PCI Express Card Reader (rev 01)
</pre>
<p><code>lsusb</code> returns something like:
</p>
<pre>Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 001 Device 003: ID 138a:0090 Validity Sensors, Inc. 
Bus 001 Device 002: ID 04f2:b52c Chicony Electronics Co., Ltd 
Bus 001 Device 005: ID 0765:5010 X-Rite, Inc. 
Bus 001 Device 004: ID 058f:9540 Alcor Micro Corp. AU9540 Smartcard Reader
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</pre>
<h2><span class="mw-headline" id="Preliminaries">Preliminaries</span></h2>
<ol>
<li> Create a recovery device in Windows 10. It required a USB-only (no SD card, no optical media?) flash drive greater than 8 GB. Formatting FAT32 works.</li>
<li> <a rel="nofollow" class="external text" href="https://support.lenovo.com/us/en/documents/yast-3jwkjx">Update the BIOS.</a> As of writing, the latest BIOS was 2.00 (2016-04-17). You may be able to do this in Linux/OS-independently.</li>
<li> Getting <b>into</b> the BIOS is difficult, so <a rel="nofollow" class="external text" href="https://support.lenovo.com/us/en/documents/sf13-t0025">here are some instructions</a> that seemed to work. The easiest way was through Windows 10.</li>
<li> In the BIOS, you will want to disable UEFI Secure Boot, change the boot order to look at USB devices first, allow <code>F12</code> to bypass the BIOS, and possibly enable the verbose mode because it is easier to press the appropriate buttons on time.</li>
</ol>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>This machine can boot either via EFI or grub.
</p>
<p>This section assumes that you've successfully created bootable Arch install media (hint: unetbootin) to a USB drive. The label of the USB installer must be correct (ARCH_201604 in this case). Restart the computer boot from the USB drive. You may need to press <code>F12</code> at some point to trigger a boot order override.
</p>
<p>You need an internet connection; this guide got both ethernet and wifi to work. Find the interfaces with <code>ip link</code>.
</p>
<p>Ethernet: turn on DHCP with
</p>
<pre># dhcpcd <i>&lt;interface&gt;</i> 
</pre>
<p>Wifi: wifi-menu worked here, the appropriate SSID was selected with the right password.
</p>
<p>The font sizes will make you feel very far away. To deal with this, fonts are in <code>/usr/share/kbd/consolefonts</code>.
</p>
<p>You can see the currently selected font with showconsolefont. The font was changed here to <code>sun12x22</code> with: <code>setfont sun12x22</code>. It is a little better.
</p>
<p>Following the <a href="../en/Installation_guide.html" title="Beginner's guide" class="mw-redirect">Beginner's guide</a> to install Arch.
</p>
<p>Shutdown, remove the USB drive, and then boot the computer, and make sure the installed drive is first in the BIOS.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="Keyboard">Keyboard</span></h3>
<p>To control the keyboard backlight, you change the value using:
</p>
<pre>echo 1 | sudo dd of=/sys/class/leds/tpacpi\:\:kbd_backlight/brightness
</pre>
<p>for values 0–2.
</p>
<h3><span class="mw-headline" id="Sound">Sound</span></h3>
<h3><span class="mw-headline" id="Integrated_Graphics">Integrated Graphics</span></h3>
<p>The integrated Intel GPU should work (mostly) without configuration using the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> package. If you experience crashes or hangs, please see <a href="../en/Intel_graphics.html#Skylake_support" title="Intel graphics">Intel graphics#Skylake support</a> for additional configuration.
</p>
<h3><span class="mw-headline" id="Dedicated_Graphics">Dedicated Graphics</span></h3>
<p>There is a BIOS option for turning off the Intel Integrated Graphics and only running the NVIDIA discrete card. While it is possible to get the console working with this configuration, there are no confirmed reports of X.org working in this setup.
</p>
<p><a href="../en/NVIDIA_Optimus.html#Using_nvidia" title="NVIDIA Optimus">NVIDIA Optimus#Using nvidia</a> contains instructions on configuring Xorg to use your Nvidia Quadro GPU. The official <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia">nvidia</a></span> driver package supports hybrid GPU configuration without requiring the use of Noveau/PRIME or Bumblebee, but this has not yet been confirmed to work with this hardware.
</p>
<h3><span class="mw-headline" id="External_Displays">External Displays</span></h3>
<p>HDMI has been confirmed to work using Bumblebee and <code>intel-virtual-output</code>. So far, there are no confirmed reports of mini Displayport output working.
</p>
<h3><span class="mw-headline" id="HiDPI">HiDPI</span></h3>
<h3><span class="mw-headline" id="Xfce">Xfce</span></h3>

</div>
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Lenovo.html" title="Category:Lenovo">Lenovo</a></li></ul>
</div></div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
