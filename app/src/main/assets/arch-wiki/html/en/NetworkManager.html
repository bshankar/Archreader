<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>NetworkManager - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-NetworkManager skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">NetworkManager</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Network_configuration.html" title="Network configuration">Network configuration</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Wireless_network_configuration.html" title="Wireless network configuration">Wireless network configuration</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Category:Network_configuration.html" title="Category:Network configuration">Category:Network configuration</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="http://projects.gnome.org/NetworkManager/">NetworkManager</a> is a program for providing detection and configuration for systems to automatically connect to network.  NetworkManager's functionality can be useful for both wireless and wired networks.  For wireless networks, NetworkManager prefers known wireless networks and has the ability to switch to the most reliable network.  NetworkManager-aware applications can switch from online and offline mode.  NetworkManager also prefers wired connections over wireless ones, has support for modem connections and certain types of VPN.  NetworkManager was originally developed by Red Hat and now is hosted by the <a href="../en/GNOME.html" title="GNOME">GNOME</a> project.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>By default, Wi-Fi passwords are stored in clear text. See section <a href="#Encrypted_Wi-Fi_passwords">#Encrypted Wi-Fi passwords</a>
</div>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#VPN_support"><span class="tocnumber">1.1</span> <span class="toctext">VPN support</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#PPPoE_.2F_DSL_support"><span class="tocnumber">1.2</span> <span class="toctext">PPPoE / DSL support</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#Front-ends"><span class="tocnumber">2</span> <span class="toctext">Front-ends</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#GNOME"><span class="tocnumber">2.1</span> <span class="toctext">GNOME</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#KDE_Plasma"><span class="tocnumber">2.2</span> <span class="toctext">KDE Plasma</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Xfce"><span class="tocnumber">2.3</span> <span class="toctext">Xfce</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Openbox"><span class="tocnumber">2.4</span> <span class="toctext">Openbox</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Other_desktops_and_window_managers"><span class="tocnumber">2.5</span> <span class="toctext">Other desktops and window managers</span></a></li>
<li class="toclevel-2 tocsection-10">
<a href="#Command_line"><span class="tocnumber">2.6</span> <span class="toctext">Command line</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#nmcli"><span class="tocnumber">2.6.1</span> <span class="toctext">nmcli</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#nmtui"><span class="tocnumber">2.6.2</span> <span class="toctext">nmtui</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#nmcli-dmenu"><span class="tocnumber">2.6.3</span> <span class="toctext">nmcli-dmenu</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-14">
<a href="#Configuration"><span class="tocnumber">3</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Enable_NetworkManager"><span class="tocnumber">3.1</span> <span class="toctext">Enable NetworkManager</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Enable_NetworkManager_Wait_Online"><span class="tocnumber">3.2</span> <span class="toctext">Enable NetworkManager Wait Online</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Set_up_PolicyKit_permissions"><span class="tocnumber">3.3</span> <span class="toctext">Set up PolicyKit permissions</span></a></li>
<li class="toclevel-2 tocsection-18">
<a href="#Network_services_with_NetworkManager_dispatcher"><span class="tocnumber">3.4</span> <span class="toctext">Network services with NetworkManager dispatcher</span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Avoiding_the_dispatcher_timeout"><span class="tocnumber">3.4.1</span> <span class="toctext">Avoiding the dispatcher timeout</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Start_OpenNTPD"><span class="tocnumber">3.4.2</span> <span class="toctext">Start OpenNTPD</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Mount_remote_folder_with_sshfs"><span class="tocnumber">3.4.3</span> <span class="toctext">Mount remote folder with sshfs</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Use_dispatcher_to_connect_to_a_VPN_after_a_network_connection_is_established"><span class="tocnumber">3.4.4</span> <span class="toctext">Use dispatcher to connect to a VPN after a network connection is established</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#Use_dispatcher_to_handle_mounting_of_CIFS_shares"><span class="tocnumber">3.4.5</span> <span class="toctext">Use dispatcher to handle mounting of CIFS shares</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-24"><a href="#Proxy_settings"><span class="tocnumber">3.5</span> <span class="toctext">Proxy settings</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Disable_NetworkManager"><span class="tocnumber">3.6</span> <span class="toctext">Disable NetworkManager</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#Testing"><span class="tocnumber">4</span> <span class="toctext">Testing</span></a></li>
<li class="toclevel-1 tocsection-27">
<a href="#Troubleshooting"><span class="tocnumber">5</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="#No_prompt_for_password_of_secured_Wi-Fi_networks"><span class="tocnumber">5.1</span> <span class="toctext">No prompt for password of secured Wi-Fi networks</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#No_traffic_via_PPTP_tunnel"><span class="tocnumber">5.2</span> <span class="toctext">No traffic via PPTP tunnel</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Network_management_disabled"><span class="tocnumber">5.3</span> <span class="toctext">Network management disabled</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Problems_with_internal_DHCP_client"><span class="tocnumber">5.4</span> <span class="toctext">Problems with internal DHCP client</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Customizing_resolv.conf"><span class="tocnumber">5.5</span> <span class="toctext">Customizing resolv.conf</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#DHCP_problems_with_dhclient"><span class="tocnumber">5.6</span> <span class="toctext">DHCP problems with dhclient</span></a></li>
<li class="toclevel-2 tocsection-34">
<a href="#Hostname_problems"><span class="tocnumber">5.7</span> <span class="toctext">Hostname problems</span></a>
<ul>
<li class="toclevel-3 tocsection-35"><a href="#Configure_dhclient_to_push_the_hostname_to_the_DHCP_server"><span class="tocnumber">5.7.1</span> <span class="toctext">Configure dhclient to push the hostname to the DHCP server</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#Configure_NetworkManager_to_use_a_specific_DHCP_client"><span class="tocnumber">5.7.2</span> <span class="toctext">Configure NetworkManager to use a specific DHCP client</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-37"><a href="#Missing_default_route"><span class="tocnumber">5.8</span> <span class="toctext">Missing default route</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#3G_modem_not_detected"><span class="tocnumber">5.9</span> <span class="toctext">3G modem not detected</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#Switching_off_WLAN_on_laptops"><span class="tocnumber">5.10</span> <span class="toctext">Switching off WLAN on laptops</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#Static_IP_address_settings_revert_to_DHCP"><span class="tocnumber">5.11</span> <span class="toctext">Static IP address settings revert to DHCP</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Cannot_edit_connections_as_normal_user"><span class="tocnumber">5.12</span> <span class="toctext">Cannot edit connections as normal user</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#Forget_hidden_wireless_network"><span class="tocnumber">5.13</span> <span class="toctext">Forget hidden wireless network</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#VPN_not_working_in_GNOME"><span class="tocnumber">5.14</span> <span class="toctext">VPN not working in GNOME</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="#Unable_to_connect_to_visible_European_wireless_networks"><span class="tocnumber">5.15</span> <span class="toctext">Unable to connect to visible European wireless networks</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="#Automatic_connect_to_VPN_on_boot_is_not_working"><span class="tocnumber">5.16</span> <span class="toctext">Automatic connect to VPN on boot is not working</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="#Systemd_Bottleneck"><span class="tocnumber">5.17</span> <span class="toctext">Systemd Bottleneck</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="#Regular_network_disconnects.2C_latency_and_lost_packets_.28WiFi.29"><span class="tocnumber">5.18</span> <span class="toctext">Regular network disconnects, latency and lost packets (WiFi)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-48">
<a href="#Tips_and_tricks"><span class="tocnumber">6</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-49">
<a href="#Encrypted_Wi-Fi_passwords"><span class="tocnumber">6.1</span> <span class="toctext">Encrypted Wi-Fi passwords</span></a>
<ul>
<li class="toclevel-3 tocsection-50"><a href="#Using_Gnome-Keyring"><span class="tocnumber">6.1.1</span> <span class="toctext">Using Gnome-Keyring</span></a></li>
<li class="toclevel-3 tocsection-51"><a href="#Using_KDE_Wallet"><span class="tocnumber">6.1.2</span> <span class="toctext">Using KDE Wallet</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-52">
<a href="#Sharing_internet_connection_over_Wi-Fi"><span class="tocnumber">6.2</span> <span class="toctext">Sharing internet connection over Wi-Fi</span></a>
<ul>
<li class="toclevel-3 tocsection-53"><a href="#Ad-hoc"><span class="tocnumber">6.2.1</span> <span class="toctext">Ad-hoc</span></a></li>
<li class="toclevel-3 tocsection-54"><a href="#Real_AP"><span class="tocnumber">6.2.2</span> <span class="toctext">Real AP</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-55"><a href="#Sharing_internet_connection_over_Ethernet"><span class="tocnumber">6.3</span> <span class="toctext">Sharing internet connection over Ethernet</span></a></li>
<li class="toclevel-2 tocsection-56"><a href="#Checking_if_networking_is_up_inside_a_cron_job_or_script"><span class="tocnumber">6.4</span> <span class="toctext">Checking if networking is up inside a cron job or script</span></a></li>
<li class="toclevel-2 tocsection-57"><a href="#Connect_to_network_with_secret_on_boot"><span class="tocnumber">6.5</span> <span class="toctext">Connect to network with secret on boot</span></a></li>
<li class="toclevel-2 tocsection-58">
<a href="#Automatically_unlock_keyring_after_login"><span class="tocnumber">6.6</span> <span class="toctext">Automatically unlock keyring after login</span></a>
<ul>
<li class="toclevel-3 tocsection-59"><a href="#GNOME_2"><span class="tocnumber">6.6.1</span> <span class="toctext">GNOME</span></a></li>
<li class="toclevel-3 tocsection-60"><a href="#SLiM_login_manager"><span class="tocnumber">6.6.2</span> <span class="toctext">SLiM login manager</span></a></li>
<li class="toclevel-3 tocsection-61"><a href="#Troubleshooting_2"><span class="tocnumber">6.6.3</span> <span class="toctext">Troubleshooting</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-62"><a href="#Ignore_specific_devices"><span class="tocnumber">6.7</span> <span class="toctext">Ignore specific devices</span></a></li>
<li class="toclevel-2 tocsection-63"><a href="#Enable_DNS_Caching"><span class="tocnumber">6.8</span> <span class="toctext">Enable DNS Caching</span></a></li>
<li class="toclevel-2 tocsection-64"><a href="#Configuring_MAC_Address_Randomization"><span class="tocnumber">6.9</span> <span class="toctext">Configuring MAC Address Randomization</span></a></li>
<li class="toclevel-2 tocsection-65"><a href="#Enable_IPv6_Privacy_Extensions"><span class="tocnumber">6.10</span> <span class="toctext">Enable IPv6 Privacy Extensions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-66"><a href="#See_also"><span class="tocnumber">7</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>NetworkManager can be <a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">installed</a> with the package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=networkmanager">networkmanager</a></span>. The package does not include the tray applet <i>nm-applet</i> which is part of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span>. It has functionality for basic DHCP support. For full featured DHCP and if you require IPv6 support, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=dhclient">dhclient</a></span> integrates it. 
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>You must ensure that no other service that wants to configure the network is running; in fact, multiple networking services will conflict. You can find a list of the currently running services with <code>systemctl --type=service</code> and then <a href="../en/Systemd.html#Using_units" title="Stop" class="mw-redirect">stop</a> them. See <a href="#Configuration">#Configuration</a> to enable the NetworkManager service.</div>
<h3><span class="mw-headline" id="VPN_support">VPN support</span></h3>
<p>NetworkManager VPN support is based on a plug-in system. If you need VPN support via NetworkManager, you have to install one of the following packages:
</p>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=networkmanager-openconnect">networkmanager-openconnect</a></span>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=networkmanager-openvpn">networkmanager-openvpn</a></span>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=networkmanager-pptp">networkmanager-pptp</a></span>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=networkmanager-vpnc">networkmanager-vpnc</a></span>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-l2tp/">networkmanager-l2tp</a></span><sup><small>AUR</small></sup>
</li>
</ul>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>VPN support is <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/buglist.cgi?quicksearch=networkmanager%20vpn">unstable</a>, check the daemon processes options set via the GUI correctly and double-check with each package release.<a rel="nofollow" class="external autonumber" href="https://bugzilla.gnome.org/show_bug.cgi?id=755350">[1]</a> <a rel="nofollow" class="external autonumber" href="https://bugzilla.gnome.org/show_bug.cgi?id=758772">[2]</a> <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/47535">FS#47535</a>
</div>
<h3><span class="mw-headline" id="PPPoE_.2F_DSL_support">PPPoE / DSL support</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=rp-pppoe">rp-pppoe</a></span> for PPPoE / DSL connection support.
</p>
<h2><span class="mw-headline" id="Front-ends">Front-ends</span></h2>
<p>To configure and have easy access to NetworkManager, most users will want to install an applet. This GUI front-end usually resides in the system tray (or notification area) and allows network selection and configuration of NetworkManager. Various applets exist for different types of desktops.
</p>
<h3><span class="mw-headline" id="GNOME">GNOME</span></h3>
<p><a href="../en/GNOME.html" title="GNOME">GNOME</a>'s <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span> works in all environments.
</p>
<p>To store authentication details for connections (Wireless/DSL) install and configure <a href="../en/GNOME/Keyring.html" title="GNOME Keyring" class="mw-redirect">GNOME Keyring</a>.
</p>
<p>Be aware that after enabling the tick-box option <code>Make available to other users</code> for a connection, NetworkManager stores the password in plain-text, though the respective file is accessible only to root (or other users via <code>nm-applet</code>). See <a href="#Encrypted_Wi-Fi_passwords">#Encrypted Wi-Fi passwords</a>.
</p>
<h3><span class="mw-headline" id="KDE_Plasma">KDE Plasma</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=plasma-nm">plasma-nm</a></span> applet.
</p>
<h3><span class="mw-headline" id="Xfce">Xfce</span></h3>
<p>While <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span> works in <a href="../en/Xfce.html" title="Xfce">Xfce</a>, in order to see notifications, including error messages, <code>nm-applet</code> needs an implementation of the Freedesktop desktop notifications specification (see the <a rel="nofollow" class="external text" href="http://www.galago-project.org/specs/notification/0.9/index.html">Galapago Project</a>) to display them. To enable notifications install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xfce4-notifyd">xfce4-notifyd</a></span>, a package that provides an implementation for the specification.
</p>
<p>Without such a notification daemon, <code>nm-applet</code> outputs the following errors to stdout/stderr:
</p>
<pre>(nm-applet:24209): libnotify-WARNING **: Failed to connect to proxy
** (nm-applet:24209): WARNING **: get_all_cb: couldn't retrieve
system settings properties: (25) Launch helper exited with unknown
return code 1.
** (nm-applet:24209): WARNING **: fetch_connections_done: error
fetching connections: (25) Launch helper exited with unknown return
code 1.
** (nm-applet:24209): WARNING **: Failed to register as an agent:
(25) Launch helper exited with unknown return code 1
</pre>
<p><code>nm-applet</code> will still work fine, though, but without notifications.
</p>
<p>If <code>nm-applet</code> is not prompting for a password when connecting to new wifi networks, and is just disconnecting immediately, you may need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-keyring">gnome-keyring</a></span>. 
</p>
<p>Should the applet not appear, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xfce4-indicator-plugin/">xfce4-indicator-plugin</a></span><sup><small>AUR</small></sup> package. <a rel="nofollow" class="external autonumber" href="http://askubuntu.com/questions/449658/networkmanager-tray-nm-applet-is-gone-after-upgrade-to-14-04-trusty">[3]</a>
</p>
<h3><span class="mw-headline" id="Openbox">Openbox</span></h3>
<p>To work properly in <a href="../en/Openbox.html" title="Openbox">Openbox</a>, the GNOME applet requires the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xfce4-notifyd">xfce4-notifyd</a></span> notification daemon for the same reason as in XFCE and the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-icon-theme">gnome-icon-theme</a></span> package to be able to display the applet in the systray.
</p>
<p>If you want to store authentication details (Wireless/DSL) install and configure <a href="../en/GNOME/Keyring.html" title="Gnome-keyring" class="mw-redirect">gnome-keyring</a>.
</p>
<p><code>nm-applet</code> installs the autostart file at <code>/etc/xdg/autostart/nm-applet.desktop</code>. If you have issues with it (e.g. <code>nm-applet</code> is started twice or is not started at all), see <a href="../en/Openbox.html#autostart" title="Openbox">Openbox#autostart</a> or <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=993738">[4]</a> for solution.
</p>
<h3><span class="mw-headline" id="Other_desktops_and_window_managers">Other desktops and window managers</span></h3>
<p>In all other scenarios it is recommended to use the GNOME applet. You will also need to be sure that the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-icon-theme">gnome-icon-theme</a></span> package is installed to be able to display the applet.
</p>
<p>To store connection secrets install and configure <a href="../en/GNOME/Keyring.html" title="GNOME Keyring" class="mw-redirect">GNOME Keyring</a>.
</p>
<p>In order to run <code>nm-applet</code> without a systray, you can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=trayer">trayer</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=stalonetray">stalonetray</a></span>. For example, you can add a script like this one in your path:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nmgui</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
#!/bin/sh
nm-applet    2&gt;&amp;1 &gt; /dev/null &amp;
stalonetray  2&gt;&amp;1 &gt; /dev/null
killall nm-applet
</pre>
<p>When you close the <i>stalonetray</i> window, it closes <code>nm-applet</code> too, so no extra memory is used once you are done with network settings.
</p>
<h3><span class="mw-headline" id="Command_line">Command line</span></h3>
<p>The following applications can be useful for configuring and managing networks without X.
</p>
<h4><span class="mw-headline" id="nmcli">nmcli</span></h4>
<p>A command line frontend, <i>nmcli</i>, is included with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=networkmanager">networkmanager</a></span>.
</p>
<p>For usage information, see <span class="plainlinks archwiki-template-man" title="$ man 1 nmcli"><a rel="nofollow" class="external text" href="https://www.mankier.com/1/nmcli">nmcli(1)</a></span>. Examples:
</p>
<ul>
<li> To connect to a wifi network: <pre>nmcli dev wifi connect &lt;name&gt; password &lt;password&gt;</pre>
</li>
<li> To connect to a wifi on the <code>wlan1</code> wifi interface: <pre>nmcli dev wifi connect &lt;name&gt; password &lt;password&gt; iface wlan1 [profile name]</pre>
</li>
<li> To disconnect an interface: <pre>nmcli dev disconnect iface eth0</pre>
</li>
<li> To reconnect an interface marked as disconnected: <pre>nmcli con up uuid &lt;uuid&gt;</pre>
</li>
<li> To get a list of UUIDs: <pre>nmcli con show</pre>
</li>
<li> To see a list of network devices and their state: <pre>nmcli dev</pre>
</li>
<li> To turn off wifi: <pre>nmcli r wifi off</pre>
</li>
</ul>
<h4><span class="mw-headline" id="nmtui">nmtui</span></h4>
<p>A curses based graphical frontend, <i>nmtui</i>, is included with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=networkmanager">networkmanager</a></span>.
</p>
<p>For usage information, see <span class="plainlinks archwiki-template-man" title="$ man 1 nmtui"><a rel="nofollow" class="external text" href="https://www.mankier.com/1/nmtui">nmtui(1)</a></span>.
</p>
<h4><span class="mw-headline" id="nmcli-dmenu">nmcli-dmenu</span></h4>
<p>Alternatively there is <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-dmenu-git/">networkmanager-dmenu-git</a></span><sup><small>AUR</small></sup> which is a small script to manage NetworkManager connections with <i>dmenu</i> instead of <code>nm-applet</code>. It provides all essential features such as connect to existing NetworkManager wifi or wired connections, connect to new wifi connections, requests passphrase if required, connect to existing VPN connections, enable/disable networking, launch <i>nm-connection-editor</i> GUI.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>NetworkManager will require some additional steps to be able run properly. Make sure you have configured <code>/etc/hosts</code> as described in <a href="../en/Network_configuration.html#Set_the_hostname" title="Network configuration">Network configuration#Set the hostname</a> section.
</p>
<h3><span class="mw-headline" id="Enable_NetworkManager">Enable NetworkManager</span></h3>
<p>NetworkManager is <a href="../en/Systemd.html#Using_units" title="Systemd">controlled</a> via <code>NetworkManager.service</code>. Once the NetworkManager daemon is started, it will automatically connect to any available "system connections" that have already been configured. Any "user connections" or unconfigured connections will need <i>nmcli</i> or an applet to configure and connect.
</p>
<p>NetworkManager has a global configuration file at <code>/etc/NetworkManager/NetworkManager.conf</code>. Usually no configuration needs to be done to the global defaults.
</p>
<h3><span class="mw-headline" id="Enable_NetworkManager_Wait_Online">Enable NetworkManager Wait Online</span></h3>
<p>If you have services which fail if they are started before the network is up, you may use <code>NetworkManager-wait-online.service</code> in addition to <code>NetworkManager.service</code>. This is, however, rarely necessary because most networked daemons start up okay, even if the network has not been configured yet.
</p>
<p>In some cases, the service will still fail to start successfully on boot due to the timeout setting in <code>/usr/lib/systemd/system/NetworkManager-wait-online.service</code> being too short. Change the default timeout from 30 to a higher value.
</p>
<h3><span class="mw-headline" id="Set_up_PolicyKit_permissions">Set up PolicyKit permissions</span></h3>
<p>See <a href="../en/General_troubleshooting.html#Session_permissions" title="General troubleshooting">General troubleshooting#Session permissions</a> for setting up a working session.
</p>
<p>With a working session, you have several options for granting the necessary privileges to NetworkManager:
</p>
<ul>
<li> <i>Option 1.</i> Run a <a href="../en/Polkit.html" title="Polkit">Polkit</a> authentication agent when you log in, such as <code>/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1</code> (part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=polkit-gnome">polkit-gnome</a></span>).  You will be prompted for your password whenever you add or remove a network connection.</li>
<li> <i>Option 2.</i> <a href="../en/Users_and_groups.html#Group_management" title="Users and groups">Add</a> yourself to the <code>wheel</code> group.  You will not have to enter your password, but your user account may be granted other permissions as well, such as the ability to use <a href="../en/Sudo.html" title="Sudo">sudo</a> without entering the root password.</li>
<li> <i>Option 3.</i> <a href="../en/Users_and_groups.html#Group_management" title="Users and groups">Add</a> yourself to the <code>network</code> group and create the following file:</li>
</ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/polkit-1/rules.d/50-org.freedesktop.NetworkManager.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
polkit.addRule(function(action, subject) {
  if (action.id.indexOf("org.freedesktop.NetworkManager.") == 0 &amp;&amp; subject.isInGroup("network")) {
    return polkit.Result.YES;
  }
});
</pre>
<dl><dd> All users in the <code>network</code> group will be able to add and remove networks without a password. This will not work under <a href="../en/Systemd.html" title="Systemd">systemd</a> if you do not have an active session with <i>systemd-logind</i>.</dd></dl>
<h3><span class="mw-headline" id="Network_services_with_NetworkManager_dispatcher">Network services with NetworkManager dispatcher</span></h3>
<p>There are quite a few network services that you will not want running until NetworkManager brings up an interface. Good examples are <a href="../en/Network_Time_Protocol_daemon.html" title="NTPd" class="mw-redirect">NTPd</a> and network filesystem mounts of various types (e.g. <b>netfs</b>). NetworkManager has the ability to start these services when you connect to a network and stop them when you disconnect. To activate the feature you need to <a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">start</a> the <code>NetworkManager-dispatcher.service</code>.
</p>
<p>Once the feature is active, scripts can be added to the <code>/etc/NetworkManager/dispatcher.d</code> directory.  These scripts must be <b>owned by root</b>, otherwise the dispatcher will not execute them. For added security, set group ownership to root as well:
</p>
<pre># chown root:root <i>scriptname</i>
</pre>
<p>Also, the script must have <b>write permission for owner only</b>, otherwise the dispatcher will not execute them:
</p>
<pre># chmod 755 <i>scriptname</i>
</pre>
<p>The scripts will be run in alphabetical order at connection time, and in reverse alphabetical order at disconnect time. They receive two arguments: the name of the interface (e.g. <code>eth0</code>) and the status (<i>up</i> or <i>down</i> for interfaces and <i>vpn-up</i> or <i>vpn-down</i> for vpn connections). To ensure what order they come up in, it is common to use numerical characters prior to the name of the script (e.g. <code>10_portmap</code> or <code>30_netfs</code> (which ensures that the <i>portmapper</i> is up before NFS mounts are attempted).
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>If you connect to foreign or public networks, be aware of what services you are starting and what servers you expect to be available for them to connect to. You could make a security hole by starting the wrong services while connected to a public network</div>
<h4><span class="mw-headline" id="Avoiding_the_dispatcher_timeout">Avoiding the dispatcher timeout</span></h4>
<p>If the above is working, then this section is not relevant. However, there is a general problem related to running dispatcher scripts which take longer to be executed. Initially an internal timeout of three seconds only was used. If the called script did not complete in time, it was killed. Later the timeout was extended to about 20 seconds (see the <a rel="nofollow" class="external text" href="https://bugzilla.redhat.com/show_bug.cgi?id=982734">Bugtracker</a> for more information). If the timeout still creates the problem, a work around may be to modify the dispatcher service file <code>/usr/lib/systemd/system/NetworkManager-dispatcher.service</code> to remain active after exit: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/NetworkManager-dispatcher.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">.include /usr/lib/systemd/system/NetworkManager-dispatcher.service
[Service]
RemainAfterExit=yes</pre>
<p>Now start and enable the modified <code>NetworkManager-dispatcher</code> service.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Adding the <code>RemainAfterExit</code> line to it will prevent the dispatcher from closing. Unfortunately, the dispatcher <b>has</b> to close before it can run your scripts again. With it the dispatcher will not time out but it also will not close, which means that the scripts will only run once per boot. Therefore, do not add the line unless the timeout is definitely causing a problem.</div>
<h4><span class="mw-headline" id="Start_OpenNTPD">Start OpenNTPD</span></h4>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=networkmanager-dispatcher-openntpd">networkmanager-dispatcher-openntpd</a></span> package.
</p>
<h4><span class="mw-headline" id="Mount_remote_folder_with_sshfs">Mount remote folder with sshfs</span></h4>
<p>As the script is run in a very restrictive environment, you have to export <code>SSH_AUTH_SOCK</code> in order to connect to your SSH agent. There are different ways to accomplish this, see <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1042030#p1042030">this message</a> for more information. The example below works with <a href="../en/GNOME/Keyring.html" title="GNOME Keyring" class="mw-redirect">GNOME Keyring</a>, and will ask you for the password if not unlocked already. In case NetworkManager connects automatically on login, it is likely <i>gnome-keyring</i> has not yet started and the export will fail (hence the sleep). The <code>UUID</code> to match can be found with the command <code>nmcli con status</code> or <code>nmcli con list</code>.     
</p>
<pre>
#!/bin/sh
USER='username'
REMOTE='user@host:/remote/path'
LOCAL='/local/path'

interface=$1 status=$2
if [ "$CONNECTION_UUID" = "<i>uuid</i>" ]; then
  case $status in
    up)
      export SSH_AUTH_SOCK=$(find /tmp -maxdepth 1 -type s -user "$USER" -name 'ssh')
      su "$USER" -c "sshfs $REMOTE $LOCAL"
      ;;
    down)
      fusermount -u "$LOCAL"
      ;;
  esac
fi
</pre>
<h4><span class="mw-headline" id="Use_dispatcher_to_connect_to_a_VPN_after_a_network_connection_is_established">Use dispatcher to connect to a VPN after a network connection is established</span></h4>
<p>In this example we want to connect automatically to a previously defined VPN connection after connecting to a specific Wi-Fi network. First thing to do is to create the dispatcher script that defines what to do after we are connected to the network.
</p>
<dl><dd>1. Create the dispatcher script:</dd></dl>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/vpn-up</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
#!/bin/sh
VPN_NAME="name of VPN connection defined in NetworkManager"
ESSID="Wi-Fi network ESSID (not connection name)"

interface=$1 status=$2
case $status in
  up|vpn-down)
    if iwgetid | grep -qs ":\"$ESSID\""; then
      nmcli con up id "$VPN_NAME"
    fi
    ;;
  down)
    if iwgetid | grep -qs ":\"$ESSID\""; then
      if nmcli con show --active | grep "$VPN_NAME"; then
        nmcli con down id "$VPN_NAME"
      fi
    fi
    ;;
esac
</pre>
<p>If you would like to attempt to automatically connect to VPN for all Wi-Fi networks, you can use the following definition of the ESSID: <code>ESSID=$(iwgetid -r)</code>. Remember to set the script's permissions <a href="#Network_services_with_NetworkManager_dispatcher">accordingly</a>. 
</p>
<p>If you require and tick the <code>nm-applet</code> option to <i>Make the VPN connection available to all users</i>, trying to connect may still fail and NetworkManager will complain about 'no valid VPN secrets', because of <a rel="nofollow" class="external text" href="http://developer.gnome.org/NetworkManager/0.9/secrets-flags.html">the way VPN secrets are stored</a>, which brings us to step 2:
</p>
<dl><dd>2. Either edit the VPN connection configuration file to make NetworkManager store the secrets by itself rather than inside a keyring <a rel="nofollow" class="external text" href="https://bugzilla.redhat.com/show_bug.cgi?id=710552">that will be inaccessible for root</a>: open up <code>/etc/NetworkManager/system-connections/<i>name of your VPN connection</i></code> and change the <code>password-flags</code> and <code>secret-flags</code> from <code>1</code> to <code>0</code>.</dd></dl>
<p>Alternatively put the password directly in the configuration file adding the section <code>vpn-secrets</code>:
</p>
<pre> [vpn]
 ....
 password-flags=0
 
 [vpn-secrets]
 password=<i>your_password</i>
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>It may now be necessary to re-open the NetworkManager connection editor and save the VPN passwords/secrets again.</div>
<h4><span class="mw-headline" id="Use_dispatcher_to_handle_mounting_of_CIFS_shares">Use dispatcher to handle mounting of CIFS shares</span></h4>
<p>Some CIFS shares are only available on certain networks or locations (e.g. at home). You can use the dispatcher to only mount CIFS shares that are present at your current location.
</p>
<p>The following script will check if we connected to a specific network and mount shares accordingly:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/mount_cifs</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
#!/bin/bash
if [ "$2" = "up" ]
  if [ "$CONNECTION_UUID" = "uuid" ]
    mount /your/mount/point &amp; 
    # add more shares as needed
  fi
fi
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>You can get a list of uuids using <a href="#nmcli">nmcli</a>.</div>
<p>The following script will unmount all CIFS before a disconnect from a specific network:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/pre-down.d/mount_cifs</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
#!/bin/bash
umount -a -l -t cifs
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Make sure this script is located in the pre-down.d subdirectory as shown above, otherwise it will unmount all shares on any connection state change.</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Ever since NetworkManager 0.9.8, the 'pre-down' and 'down' actions are not executed on shutdown or restart, so the above script will only work if you manually disconnect from the network. See <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=701242">this bug report</a> for more info.</div>
<p>As before, do not forget to set the script permissions <a href="#Network_services_with_NetworkManager_dispatcher">accordingly</a>.
</p>
<p>See also <a href="../en/NFS.html#NetworkManager_dispatcher" title="NFS">NFS#NetworkManager dispatcher</a> for another example script that parses <code>/etc/fstab</code> mounts during dispatcher actions.
</p>
<h3><span class="mw-headline" id="Proxy_settings">Proxy settings</span></h3>
<p>NetworkManager does not directly handle proxy settings, but if you are using GNOME or KDE, you could use <a rel="nofollow" class="external text" href="http://marin.jb.free.fr/proxydriver/">proxydriver</a> wich handles proxy settings using NetworkManager's informations. proxydriver is found in the package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/proxydriver/">proxydriver</a></span><sup><small>AUR</small></sup>.
</p>
<p>In order for <i>proxydriver</i> to be able to change the proxy settings, you would need to execute this command, as part of the GNOME startup process (System -&gt; Preferences -&gt; Startup Applications):
</p>
<pre>xhost +si:localuser:<i>your_username</i>
</pre>
<p>See: <a href="../en/Proxy_settings.html" title="Proxy settings">Proxy settings</a>.
</p>
<h3><span class="mw-headline" id="Disable_NetworkManager">Disable NetworkManager</span></h3>
<p>It might not be obvious, but the service automatically starts through <i>dbus</i>. To completely disable it you can <a href="../en/Systemd.html#Using_units" title="Mask" class="mw-redirect">mask</a> the services <code>NetworkManager</code> and <code>NetworkManager-dispatcher</code>.
</p>
<h2><span class="mw-headline" id="Testing">Testing</span></h2>
<p>NetworkManager applets are designed to load upon login so no further configuration should be necessary for most users.  If you have already disabled your previous network settings and disconnected from your network, you can now test if NetworkManager will work. The first step is to <a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">start</a> <code>NetworkManager.service</code>.
</p>
<p>Some applets will provide you with a <code>.desktop</code> file so that the NetworkManager applet can be loaded through the application menu.  If it does not, you are going to either have to discover the command to use or logout and login again to start the applet.  Once the applet is started, it will likely begin polling network connections with for auto-configuration with a DHCP server.
</p>
<p>To start the GNOME applet in non-xdg-compliant window managers like <a href="../en/Awesome.html" title="Awesome">awesome</a>:
</p>
<pre>nm-applet --sm-disable &amp;
</pre>
<p>For static IP addresses, you will have to configure NetworkManager to understand them.  The process usually involves right-clicking the applet and selecting something like 'Edit Connections'.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="No_prompt_for_password_of_secured_Wi-Fi_networks">No prompt for password of secured Wi-Fi networks</span></h3>
<p>When trying to connect to a secured Wi-Fi network, no prompt for a password is shown and no connection is established. This happens when no keyring package is installed. An easy solution is to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-keyring">gnome-keyring</a></span>. If you want the passwords to be stored in encrypted form, follow <a href="../en/GNOME/Keyring.html" title="GNOME Keyring" class="mw-redirect">GNOME Keyring</a> to set up the <i>gnome-keyring-daemon</i>.
</p>
<h3><span class="mw-headline" id="No_traffic_via_PPTP_tunnel">No traffic via PPTP tunnel</span></h3>
<p>PPTP connection logins successfully; you see a ppp0 interface with the correct VPN IP address, but you cannot even ping the remote IP address. It is due to lack of MPPE (Microsoft Point-to-Point Encryption) support in stock Arch pppd. It is recommended to first try with the stock Arch <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=ppp">ppp</a></span> as it may work as intended.
</p>
<p>To solve the problem it should be sufficient to install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ppp-mppe/">ppp-mppe</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/ppp-mppe">aur-mirror</a>]</sup> package.
</p>
<p>See also <a href="../en/WPA2_Enterprise.html#MS-CHAPv2" title="WPA2 Enterprise">WPA2 Enterprise#MS-CHAPv2</a>.
</p>
<h3><span class="mw-headline" id="Network_management_disabled">Network management disabled</span></h3>
<p>When NetworkManager shuts down but the pid (state) file is not removed, you will see a <code>Network management disabled</code> message. If this happens, remove the file manually:
</p>
<pre># rm /var/lib/NetworkManager/NetworkManager.state
</pre>
<h3><span class="mw-headline" id="Problems_with_internal_DHCP_client">Problems with internal DHCP client</span></h3>
<p>If you have problems with getting an IP address using the internal DHCP client, consider <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=dhclient">dhclient</a></span> as DHCP client.
</p>
<p>After installation, update the NetworkManager config file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/NetworkManager.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">dhcp=dhclient</pre>
<p>This workaround might solve problems in big wireless networks like eduroam.
</p>
<h3><span class="mw-headline" id="Customizing_resolv.conf">Customizing resolv.conf</span></h3>
<p>See the main page: <a href="../en/Resolv.conf.html" title="Resolv.conf">resolv.conf</a>. If you use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=dhclient">dhclient</a></span>, you may try the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-dispatch-resolv/">networkmanager-dispatch-resolv</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/networkmanager-dispatch-resolv">aur-mirror</a>]</sup> package.
</p>
<h3><span class="mw-headline" id="DHCP_problems_with_dhclient">DHCP problems with dhclient</span></h3>
<p>If you have problems with getting an IP address via DHCP, try to add the following to your <code>/etc/dhclient.conf</code>:
</p>
<pre> interface "eth0" {
   send dhcp-client-identifier 01:aa:bb:cc:dd:ee:ff;
 }
</pre>
<p>Where <code>aa:bb:cc:dd:ee:ff</code> is the MAC address of this NIC. The MAC address can be found using the <code>ip link show <i>interface</i></code> command from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=iproute2">iproute2</a></span> package.
</p>
<h3><span class="mw-headline" id="Hostname_problems">Hostname problems</span></h3>
<p>It depends on the NetworkManager plugins used, whether the hostname is forwarded to a router on connect. The generic "keyfile" plugin does not forward the hostname in default configuration. To make it forward the hostname, add the following to <code>/etc/NetworkManager/NetworkManager.conf</code>:
</p>
<pre>[keyfile]
hostname=<i>your_hostname</i>
</pre>
<p>The options under <code>[keyfile]</code> will be applied to network connections in the default <code>/etc/NetworkManager/system-connections</code> path. 
</p>
<p>Another option is to configure the DHCP client, which NetworkManager starts automatically, to forward it. NetworkManager utilizes <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=dhclient">dhclient</a></span> in default and falls back to its internal DHCP funtionality, if the former is not installed. To make <i>dhclient</i> forward the hostname requires to set a non-default option, <i>dhcpcd</i> forwards the hostname by default. 
</p>
<p>First, check which DHCP client is used (<i>dhclient</i> in this example):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># journalctl -b | egrep "dhc"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
...
Nov 17 21:03:20 zenbook dhclient[2949]: Nov 17 21:03:20 zenbook dhclient[2949]: Bound to *:546
Nov 17 21:03:20 zenbook dhclient[2949]: Listening on Socket/wlan0
Nov 17 21:03:20 zenbook dhclient[2949]: Sending on   Socket/wlan0
Nov 17 21:03:20 zenbook dhclient[2949]: XMT: Info-Request on wlan0, interval 1020ms.
Nov 17 21:03:20 zenbook dhclient[2949]: RCV: Reply message on wlan0 from fe80::126f:3fff:fe0c:2dc.
</pre>
<h4><span class="mw-headline" id="Configure_dhclient_to_push_the_hostname_to_the_DHCP_server">Configure dhclient to push the hostname to the DHCP server</span></h4>
<p>Copy the example configuration file:
</p>
<pre># cp /usr/share/dhclient/dhclient.conf.example /etc/dhclient.conf
</pre>
<p>Take a look at the file - there will only really be one line we want to keep and <i>dhclient</i> will use it's defaults (as it has been using if you did not have this file) for the other options. This is the important line:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhclient.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">send host-name = pick-first-value(gethostname(), "ISC-dhclient");</pre>
<p>Force an IP address renewal by your favorite means, and you should now see your hostname on your DHCP server.
</p>
<p>IPv6 push host name:
</p>
<pre># cp /usr/share/dhclient/dhclient.conf.example /etc/dhclient6.conf
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhclient6.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">send fqdn.fqdn = pick-first-value(gethostname(), "ISC-dhclient");</pre>
<h4><span class="mw-headline" id="Configure_NetworkManager_to_use_a_specific_DHCP_client">Configure NetworkManager to use a specific DHCP client</span></h4>
<p>If you want to explicitly set the DHCP client used by NetworkManager, it can be set in the global configuration: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/NetworkManager.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">dhcp=internal</pre>
<p>The alternative <code>dhcp=dhclient</code> is used per default, if this option is not set. 
</p>
<p>Then <a href="../en/Systemd.html#Using_units" title="Restart" class="mw-redirect">restart</a> <code>NetworkManager.service</code>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Support for <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=dhcpcd">dhcpcd</a></span> has been <a rel="nofollow" class="external text" href="https://projects.archlinux.org/svntogit/packages.git/commit/trunk?h=packages/networkmanager&amp;id=a1df79cbcebaec0c043789eb31965e57d17b6cdb">disabled</a> in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=networkmanager">networkmanager</a></span>-1.0.0-2 (2015-02-14).</div>
<h3><span class="mw-headline" id="Missing_default_route">Missing default route</span></h3>
<p>On at least one KDE4 system, no default route was created when establishing wireless connections with NetworkManager. Changing the route settings of the wireless connection to remove the default selection "Use only for resources on this connection" solved the issue.
</p>
<h3><span class="mw-headline" id="3G_modem_not_detected">3G modem not detected</span></h3>
<p>See <a href="../en/USB_3G_Modem.html#Network_Manager" title="USB 3G Modem">USB 3G Modem#Network Manager</a>.
</p>
<h3><span class="mw-headline" id="Switching_off_WLAN_on_laptops">Switching off WLAN on laptops</span></h3>
<p>Sometimes NetworkManager will not work when you disable your Wi-Fi adapter with a switch on your laptop and try to enable it again afterwards. This is often a problem with <i>rfkill</i>. <a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=rfkill">rfkill</a></span> package and use:
</p>
<pre>$ watch -n1 rfkill list all
</pre>
<p>to check if the driver notifies <i>rfkill</i> about the wireless adapter's status. If one identifier stays blocked after you switch on the adapter you could try to manually unblock it with (where X is the number of the identifier provided by the above output):
</p>
<pre># rfkill event unblock X
</pre>
<h3><span class="mw-headline" id="Static_IP_address_settings_revert_to_DHCP">Static IP address settings revert to DHCP</span></h3>
<p>Due to an unresolved bug, when changing default connections to a static IP address, <code>nm-applet</code> may not properly store the configuration change, and will revert to automatic DHCP.
</p>
<p>To work around this issue you have to edit the default connection (e.g. "Auto eth0") in <code>nm-applet</code>, change the connection name (e.g. "my eth0"), uncheck the "Available to all users" checkbox, change your static IP address settings as desired, and click <b>Apply</b>.  This will save a new connection with the given name.
</p>
<p>Next, you will want to make the default connection not connect automatically.  To do so, run <code>nm-connection-editor</code> (<b>not</b> as root). In the connection editor, edit the default connection (e.g. "Auto eth0") and uncheck "Connect automatically".  Click <b>Apply</b> and close the connection editor.
</p>
<h3><span class="mw-headline" id="Cannot_edit_connections_as_normal_user">Cannot edit connections as normal user</span></h3>
<p>See <a href="#Set_up_PolicyKit_permissions">#Set up PolicyKit permissions</a>.
</p>
<h3><span class="mw-headline" id="Forget_hidden_wireless_network">Forget hidden wireless network</span></h3>
<p>Since hidden networks are not displayed in the selection list of the Wireless view, they cannot be forgotten (removed) with the GUI. You can delete one with the following command:
</p>
<pre># rm /etc/NetworkManager/system-connections/<i>SSID</i>
</pre>
<p>This works for any other connection.
</p>
<h3><span class="mw-headline" id="VPN_not_working_in_GNOME">VPN not working in GNOME</span></h3>
<p>When setting up OpenConnect or vpnc connections in NetworkManager while using GNOME, you will sometimes never see the dialog box pop up and the following error appears in <code>/var/log/errors.log</code>:
</p>
<pre>localhost NetworkManager[399]: &lt;error&gt; [1361719690.10506] [nm-vpn-connection.c:1405] get_secrets_cb(): Failed to request VPN secrets #3: (6) No agents were available for this request.
</pre>
<p>This is caused by the GNOME NM Applet expecting dialog scripts to be at <code>/usr/lib/gnome-shell</code>, when NetworkManager's packages put them in <code>/usr/lib/networkmanager</code>.
As a "temporary" fix (this bug has been around for a while now), make the following symlink(s):
</p>
<ul>
<li> For OpenConnect: <code>ln -s /usr/lib/networkmanager/nm-openconnect-auth-dialog /usr/lib/gnome-shell/</code>
</li>
<li> For VPNC (i.e. Cisco VPN): <code>ln -s /usr/lib/networkmanager/nm-vpnc-auth-dialog /usr/lib/gnome-shell/</code>
</li>
</ul>
<p>This may need to be done for any other NM VPN plugins as well, but these are the two most common.
</p>
<h3><span class="mw-headline" id="Unable_to_connect_to_visible_European_wireless_networks">Unable to connect to visible European wireless networks</span></h3>
<p>WLAN chips are shipped with a default <a href="../en/Wireless_network_configuration.html#Respecting_the_regulatory_domain" title="Wireless network configuration">regulatory domain</a>. If your access point does not operate within these limitations, you will not be able to connect to the network. Fixing this is easy:
</p>
<ol>
<li> <a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=crda">crda</a></span>
</li>
<li> Uncomment the correct Country Code in <code>/etc/conf.d/wireless-regdom</code>
</li>
<li> Reboot the system, because the setting is only read on boot</li>
</ol>
<h3><span class="mw-headline" id="Automatic_connect_to_VPN_on_boot_is_not_working">Automatic connect to VPN on boot is not working</span></h3>
<p>The problem occurs when the system (i.e. NetworkManager running as the root user) tries to establish a VPN connection, but the password is not accessible because it is stored in the Gnome keyring of a particular user. 
</p>
<p>A solution is to keep the password to your VPN in plaintext, as described in step (2.) of <a href="#Use_dispatcher_to_connect_to_a_VPN_after_a_network_connection_is_established">#Use dispatcher to connect to a VPN after a network connection is established</a>. 
</p>
<p>You do not need to use the dispatcher described in step (1.) to auto-connect anymore, if you use the new "auto-connect VPN" option from the <code>nm-applet</code> GUI.
</p>
<h3><span class="mw-headline" id="Systemd_Bottleneck">Systemd Bottleneck</span></h3>
<p>Over time the log files (<code>/var/log/journal</code>) can become very large. This can have a big impact on boot performance when using NetworkManager, see: <a href="../en/Systemd.html#Boot_time_increasing_over_time" title="Systemd">Systemd#Boot time increasing over time</a>.
</p>
<h3><span class="mw-headline" id="Regular_network_disconnects.2C_latency_and_lost_packets_.28WiFi.29">Regular network disconnects, latency and lost packets (WiFi)</span></h3>
<p>NetworkManager does a scan every 2 minutes.
</p>
<p>Some WiFi drivers have issues when scanning for base stations whilst connected/associated. Symptoms include VPN disconnects/reconnects and lost packets, web pages failing to load and then refresh fine.
</p>
<p>Running <code>journalctl -f</code> will indicate that this is taking place, messages like the following will be contained in the logs at regular intervals.
</p>
<pre>NetworkManager[410]: &lt;info&gt;  (wlp3s0): roamed from BSSID 00:14:48:11:20:CF (my-wifi-name) to (none) ((none))
</pre>
<p>There is a patched version of NetworkManager which should prevent this type of scanning: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-noscan/">networkmanager-noscan</a></span><sup><small>AUR</small></sup>.
</p>
<p>Alternatively, if roaming is not important, the periodic scanning behavior can be disabled by locking the BSSID of the access point in the WiFi connection profile.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Encrypted_Wi-Fi_passwords">Encrypted Wi-Fi passwords</span></h3>
<p>By default, NetworkManager stores passwords in clear text in the connection files at <code>/etc/NetworkManager/system-connections/</code>. To print the stored passwords, use the following command:
</p>
<pre># grep -H '^psk=' /etc/NetworkManager/system-connections/*
</pre>
<p>The passwords are accessible to the root user in the filesystem and to users with access to settings via the GUI (e.g. <code>nm-applet</code>). 
</p>
<p>If it is preferable to save the passwords in encrypted form in a keyring instead of clear text. The downside of using a keyring is that the connections have to be set up for each user.
</p>
<h4><span class="mw-headline" id="Using_Gnome-Keyring">Using Gnome-Keyring</span></h4>
<p>The keyring daemon has to be started and the keyring needs to be unlocked for the following to work.
</p>
<p>Furthermore, NetworkManager needs to be configured not to store the password for all users. Using GNOME <code>nm-applet</code>, run <code>nm-connection-editor</code> from a terminal, select a network connection,  click <code>Edit</code>, select the <code>Wifi-Security</code> tab and click on the right icon of password and check <code>Store the password only for this user</code>.
</p>
<h4><span class="mw-headline" id="Using_KDE_Wallet">Using KDE Wallet</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=plasma-nm">plasma-nm</a></span> has a different interface. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:NetworkManager">Talk:NetworkManager#</a>)</div>
</div>
<p>Using KDE's <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=kdeplasma-applets-plasma-nm">kdeplasma-applets-plasma-nm</a></span><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/kdeplasma-applets-plasma-nm">aur-mirror</a>]</sup>, click the applet, click on the top right <code>Settings</code> icon, double click on a network connection, in the <code>General settings</code> tab, untick <code>all users may connect to this network</code>. If the option is ticked, the passwords will still be stored in clear text, even if a keyring daemon is running.
</p>
<p>If the option was selected previously and you un-tick it, you may have to use the <code>reset</code> option first to make the password disappear from the file. Alternatively, delete the connection first and set it up again.
</p>
<h3><span class="mw-headline" id="Sharing_internet_connection_over_Wi-Fi">Sharing internet connection over Wi-Fi</span></h3>
<p>You can share your internet connection (e.g. 3G or wired) with a few clicks using nm. You will need a supported Wi-Fi card (Cards based on Atheros AR9xx or at least AR5xx are probably best choice). Please note that a <a href="../en/Firewalls.html" title="Firewall" class="mw-redirect">firewall</a> may interfere with internet sharing.
</p>
<h4><span class="mw-headline" id="Ad-hoc">Ad-hoc</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> "I think so"... (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:NetworkManager">Talk:NetworkManager#</a>)</div>
</div>
<ul>
<li> <a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> package to be able to actually share the connection.</li>
<li> Custom <code>dnsmasq.conf</code> may interfere with NetworkManager (not sure about this, but I think so).</li>
<li> Click on applet and choose "Create new wireless network".</li>
<li> Follow wizard (if using WEP, be sure to use 5 or 13 character long password, different lengths will fail).</li>
<li> Settings will remain stored for the next time you need it.</li>
</ul>
<h4><span class="mw-headline" id="Real_AP">Real AP</span></h4>
<p>Support of infrastructure mode (which is needed by Android phones as they intentionally do not support ad-hoc) is added by NetworkManager as of late 2012.
</p>
<p>See <a rel="nofollow" class="external text" href="https://fedoraproject.org/wiki/Features/RealHotspot">Fedora's wiki</a>.
</p>
<h3><span class="mw-headline" id="Sharing_internet_connection_over_Ethernet">Sharing internet connection over Ethernet</span></h3>
<p>Scenario: your device has internet connection over wi-fi and you want to share the internet connection to other devices over ethernet.
</p>
<p>Requirements:
</p>
<ul>
<li> <a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> package to be able to actually share the connection.</li>
<li> Your internet connected device and the other devices are connected over a suitable ethernet cable (this usually means a cross over cable or a switch in between).</li>
<li> Internet sharing is not blocked by a <a href="../en/Firewalls.html" title="Firewall" class="mw-redirect">firewall</a>.</li>
</ul>
<p>Steps:
</p>
<ul>
<li> Run <code>nm-connection-editor</code> from terminal.</li>
<li> Add a new ethernet connection.</li>
<li> Give it some sensible name. For example "Shared Internet"</li>
<li> Go to "IPv4 Settings".</li>
<li> For "Method:" select "Shared to other computers".</li>
<li> Save</li>
</ul>
<p>Now you should have a new option "Shared Internet" under the Wired connections in NetworkManager.
</p>
<h3><span class="mw-headline" id="Checking_if_networking_is_up_inside_a_cron_job_or_script">Checking if networking is up inside a cron job or script</span></h3>
<p>Some <i>cron</i> jobs require networking to be up to succeed. You may wish to avoid running these jobs when the network is down. To accomplish this, add an <b>if</b> test for networking that queries NetworkManager's <i>nm-tool</i> and checks the state of networking. The test shown here succeeds if any interface is up, and fails if they are all down. This is convenient for laptops that might be hardwired, might be on wireless, or might be off the network.
</p>
<pre>
if [ $(nm-tool|grep State|cut -f2 -d' ') == "connected" ]; then
    #Whatever you want to do if the network is online
else
    #Whatever you want to do if the network is offline - note, this and the else above are optional
fi
</pre>
<p>This useful for a <code>cron.hourly</code> script that runs <i>fpupdate</i> for the F-Prot virus scanner signature update, as an example. Another way it might be useful, with a little modification, is to differentiate between networks using various parts of the output from <i>nm-tool</i>; for example, since the active wireless network is denoted with an asterisk, you could grep for the network name and then grep for a literal asterisk.
</p>
<h3><span class="mw-headline" id="Connect_to_network_with_secret_on_boot">Connect to network with secret on boot</span></h3>
<p>By default, NetworkManager will not connect to networks requiring a secret automatically on boot. This is because it locks such connections to the user who makes it by default, only connecting after they have logged in. To change this, do the following:
</p>
<ol>
<li> Right click on the <code>nm-applet</code> icon in your panel and select Edit Connections and open the Wireless tab</li>
<li> Select the connection you want to work with and click the Edit button</li>
<li> Check the boxes Connect Automatically and Available to all users</li>
</ol>
<p>Log out and log back in to complete.
</p>
<h3><span class="mw-headline" id="Automatically_unlock_keyring_after_login">Automatically unlock keyring after login</span></h3>
<p>NetworkManager requires access to the login keyring to connect to networks requiring a secret. Under most circumstances, this keyring is unlocked automatically at login, but if it isn't, and NetworkManager isn't connecting on login, you can try the following.
</p>
<h4><span class="mw-headline" id="GNOME_2">GNOME</span></h4>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The following method is dated and known not to work on at least one machine!</div>
<ul><li> In <code>/etc/pam.d/gdm</code> (or your corresponding daemon in <code>/etc/pam.d</code>), add these lines at the end of the "auth" and "session" blocks if they do not exist already: </li></ul>
<pre> auth            optional        pam_gnome_keyring.so
 session         optional        pam_gnome_keyring.so  auto_start
</pre>
<ul><li> In <code>/etc/pam.d/passwd</code>, use this line for the 'password' block:</li></ul>
<pre> password    optional    pam_gnome_keyring.so
</pre>
<dl><dd>Next time you log in, you should be asked if you want the password to be unlocked automatically on login.</dd></dl>
<h4><span class="mw-headline" id="SLiM_login_manager">SLiM login manager</span></h4>
<p>See <a href="../en/SLiM.html#Gnome_Keyring" title="SLiM">SLiM#Gnome Keyring</a>.
</p>
<h4><span class="mw-headline" id="Troubleshooting_2">Troubleshooting</span></h4>
<p>While you may type both values at connection time, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=kdeplasma-applets-plasma-nm">kdeplasma-applets-plasma-nm</a></span><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/kdeplasma-applets-plasma-nm">aur-mirror</a>]</sup> 0.9.3.2-1 and above are capable of retrieving OpenConnect username and password directly from KWallet.
</p>
<p>Open "KDE Wallet Manager" and look up your OpenConnect VPN connection under "Network Management|Maps". Click "Show values" and 
enter your credentials in key "VpnSecrets" in this form (replace <i>username</i> and <i>password</i> accordingly):
</p>
<pre>form:main:username%SEP%<i>username</i>%SEP%form:main:password%SEP%<i>password</i>
</pre>
<p>Next time you connect, username and password should appear in the "VPN secrets" dialog box.
</p>
<h3><span class="mw-headline" id="Ignore_specific_devices">Ignore specific devices</span></h3>
<p>Sometimes it may be desired that NetworkManager ignores specific devices and does not try to configure addresses and routes for them.You can quickly and easily ignore devices by MAC or interface-name by using the following in <code>/etc/NetworkManager/NetworkManager.conf</code>:
</p>
<pre>[keyfile]
unmanaged-devices=mac:00:22:68:1c:59:b1;mac:00:1E:65:30:D1:C4;interface-name:eth0
</pre>
<p>After you have put this in, <a href="../en/Daemons.html" title="Daemon" class="mw-redirect">restart</a> NetworkManager, and you should be able to configure interfaces without NetworkManager altering what you have set.
</p>
<h3><span class="mw-headline" id="Enable_DNS_Caching">Enable DNS Caching</span></h3>
<p>See <a href="../en/Dnsmasq.html#NetworkManager" title="Dnsmasq">dnsmasq#NetworkManager</a> to enable the plugin that allows DNS caching using <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a>.
</p>
<h3><span class="mw-headline" id="Configuring_MAC_Address_Randomization">Configuring MAC Address Randomization</span></h3>
<p>As of version 1.4.0, NetworkManager supports two types MAC Address Randomization: randomization during scanning, and stable randomization. Both modes can be configured by modifying <code>/etc/networkManager/NetworkManager.conf</code>. 
</p>
<p>Randomization during Wi-Fi scanning is enabled by default starting on version 1.2.0, and it can be disabled by adding the following lines to <code>/etc/NetworkManager/NetworkManager.conf</code>:
</p>
<pre>[device]
wifi.scan-rand-mac-address=no
</pre>
<p>In contrast, stable randomization generates a different MAC address for each different connection. This is specially useful when, for example, a portal remembers your login status based on your MAC address. To enable this mode, you can use the option
</p>
<pre>[connection]
wifi.cloned-mac-address=random
</pre>
<p>or
</p>
<pre>[connection]
ethernet.cloned-mac-address=random
</pre>
<p>You can read more about it <a rel="nofollow" class="external text" href="https://blogs.gnome.org/thaller/2016/08/26/mac-address-spoofing-in-networkmanager-1-4-0/">here</a>
</p>
<h3><span class="mw-headline" id="Enable_IPv6_Privacy_Extensions">Enable IPv6 Privacy Extensions</span></h3>
<p>See <a href="../en/IPv6.html#NetworkManager" title="IPv6">IPv6#NetworkManager</a>
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li> <a rel="nofollow" class="external text" href="http://blogs.gnome.org/dcbw/2015/02/16/networkmanager-for-administrators-part-1/">NetworkManager for Administrators Part 1</a>
</li></ul>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Network_configuration.html" title="Category:Network configuration">Network configuration</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
