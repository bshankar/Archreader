<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>hdparm - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Hdparm skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">hdparm</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p><span></span>
</p>
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Securely_wipe_disk.html#hdparm" title="Securely wipe disk">Securely wipe disk#hdparm</a></li>
</ul>
</div>
<p>hdparm is a command line utility to set and view hardware parameters of <a href="https://en.wikipedia.org/wiki/Hard_disk_drive" class="extiw" title="wikipedia:Hard disk drive">hard disk drives</a>. It can also be used as a simple <a href="../en/Benchmarking.html" title="Benchmarking">benchmarking</a> tool.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Be careful, changing default parameters can damage the drive or freeze the system.</div>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Disk_info"><span class="tocnumber">2.1</span> <span class="toctext">Disk info</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Benchmarking"><span class="tocnumber">2.2</span> <span class="toctext">Benchmarking</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Power_management_configuration"><span class="tocnumber">2.3</span> <span class="toctext">Power management configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Tips_and_tricks"><span class="tocnumber">3</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Persistent_configuration_using_udev_rule"><span class="tocnumber">3.1</span> <span class="toctext">Persistent configuration using udev rule</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Putting_a_drive_to_sleep_directly_after_boot"><span class="tocnumber">3.2</span> <span class="toctext">Putting a drive to sleep directly after boot</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#APM_level_reset_after_suspend"><span class="tocnumber">4.1</span> <span class="toctext">APM level reset after suspend</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Drive_is_not_supported"><span class="tocnumber">4.2</span> <span class="toctext">Drive is not supported</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=hdparm">hdparm</a></span> package. For use with SCSI devices, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=sdparm">sdparm</a></span> package.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<h3><span class="mw-headline" id="Disk_info">Disk info</span></h3>
<p>To get information about your hard disk, run the following:
</p>
<pre># hdparm -I /dev/sda
</pre>
<h3><span class="mw-headline" id="Benchmarking">Benchmarking</span></h3>
<p>See <a href="../en/Benchmarking/Data_storage_devices.html" title="Benchmarking/Data storage devices">Benchmarking/Data storage devices</a>.
</p>
<h3><span class="mw-headline" id="Power_management_configuration">Power management configuration</span></h3>
<p>Modern hard drives support numerous power management features, the most common ones are summarized in the following table. See <code>hdparm(8)</code> for the complete list.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Too aggressive power management can reduce the lifespan of your hard drive due to frequent parking and spindowns.</div>
<table class="wikitable">
<tr>
<th> Parameter </th>
<th> Description
</th>
</tr>
<tr>
<td> <code>-B</code> </td>
<td> Set the <a href="https://en.wikipedia.org/wiki/Advanced_Power_Management" class="extiw" title="wikipedia:Advanced Power Management">Advanced Power Management</a> feature. Possible values are between 1 and 255, low values mean more aggressive power management and higher values mean better performance. Values from 1 to 127 permit spin-down, whereas values from 128 to 254 do not. A value of 255 completely disables the feature.
</td>
</tr>
<tr>
<td> <code>-S</code> </td>
<td> Set the standby (spindown) timeout for the drive. The timeout specifies how long to wait in idle (with no disk activity) before turning off the motor to save power. The value of 0 disables spindown, the values from 1 to 240 specify multiples of 5 seconds and values from 241 to 251 specify multiples of 30 minutes.
</td>
</tr>
<tr>
<td> <code>-M</code> </td>
<td> Set the <a href="https://en.wikipedia.org/wiki/Automatic_Acoustic_Management" class="extiw" title="wikipedia:Automatic Acoustic Management">Automatic Acoustic Management</a> feature. Most modern hard disk drives have the ability to speed down the head movements to reduce their noise output. The possible value depends on the disk, some disks may not support this feature.
</td>
</tr>
</table>
<p>To query current value, pass the parameter without a value. For example:
</p>
<pre># hdparm -B /dev/sda
</pre>
<p>To apply different value, for example set APM to 127:
</p>
<pre># hdparm -B 127 /dev/sda
</pre>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Persistent_configuration_using_udev_rule">Persistent configuration using udev rule</span></h3>
<p>To make the setting persistent, adapt the following <a href="../en/Udev.html" title="Udev">udev</a> rule for your values:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/50-hdparm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
ACTION=="add", SUBSYSTEM=="block", KERNEL=="sda", RUN+="/usr/bin/hdparm -B 254 -S 0 /dev/sda"
</pre>
<p>If you have more than one hard drive you could make the rule more flexible. For example, to apply power-saving settings for all external drives (assuming there is only one internal drive, <code>/dev/sda</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/50-hdparm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
ACTION=="add|change", KERNEL=="sd[b-z]", ATTR{queue/rotational}=="1", RUN+="/usr/bin/hdparm -B 127 -S 12 /dev/%k"
</pre>
<h3><span class="mw-headline" id="Putting_a_drive_to_sleep_directly_after_boot">Putting a drive to sleep directly after boot</span></h3>
<p>A device which is rarely needed can be put to sleep directly at the end of the boot process.
This does not work with the above udev rule because it happens too early.
In order to issue the command when the boot is completed, just create a <a href="../en/Systemd.html" title="Systemd">systemd</a> service.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/hdparm.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[Unit]
Description=hdparm sleep

[Service]
Type=oneshot
ExecStart=/usr/bin/hdparm -q -S 120 -y /dev/sdb

[Install]
WantedBy=multi-user.target
</pre>
<p>Then <a href="../en/Systemd.html#Using_units" title="Enable" class="mw-redirect">enable</a> it.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="APM_level_reset_after_suspend">APM level reset after suspend</span></h3>
<p>The APM level may get reset after a suspend, so you will probably also have to re-execute the command after each resume. This can be automated with the following <a href="../en/Systemd.html" title="Systemd">systemd</a> unit (adapted from a <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=151640">forum thread</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/apm.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Local system resume actions
After=suspend.target hybrid-sleep.target hibernate.target

[Service]
Type=simple
ExecStart=/usr/bin/hdparm -B 254 /dev/sda

[Install]
WantedBy=sleep.target</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The <code>sleep.target</code> is pulled by all <code>suspend</code>, <code>hybrid-sleep</code> and <code>hibernate</code> targets, but it finishes starting up <i>before</i> the system is suspended, so the three targets have to be specified explicitly. See <a rel="nofollow" class="external autonumber" href="https://wiki.archlinux.org/index.php?title=Talk:Hdparm&amp;oldid=440457#Troubleshooting_APM_settings_after_suspend.2C_hibernate_or_hybrid-sleep">[1]</a>.</div>
<p>Alternatively you can create a <a href="../en/Power_management.html#Hooks_in_.2Fusr.2Flib.2Fsystemd.2Fsystem-sleep" title="Power management">hook in /usr/lib/systemd/system-sleep</a>.
</p>
<h3><span class="mw-headline" id="Drive_is_not_supported">Drive is not supported</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-go-next.png" class="image"><img alt="Tango-go-next.png" src="../File:Tango-go-next.png" width="48" height="48"></a><b>This article or section is a candidate for moving to <a href="../en/Power_management.html#Hard_disk_drive" title="Power management">Power_management#Hard_disk_drive</a>.</b><a href="../File:Tango-go-next.png" class="image"><img alt="Tango-go-next.png" src="../File:Tango-go-next.png" width="48" height="48"></a></p>
<div>
<b>Notes:</b> Not related to hdparm in any way. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Hdparm">Talk:Hdparm#</a>)</div>
</div>
<p>In this case you could consider using a different approach and the tool <a rel="nofollow" class="external text" href="http://hd-idle.sourceforge.net/">hd-idle</a>.
</p>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:File_systems.html" title="Category:File systems">File systems</a></li>
<li><a href="../en/Category:Storage.html" title="Category:Storage">Storage</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Move.html" title="Category:Pages or sections flagged with Template:Move">Pages or sections flagged with Template:Move</a></li></ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
