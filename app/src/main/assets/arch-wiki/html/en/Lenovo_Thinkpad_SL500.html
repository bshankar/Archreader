<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Lenovo Thinkpad SL500 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Lenovo_Thinkpad_SL500 skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Lenovo Thinkpad SL500</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Kernel 2.6 (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Lenovo_Thinkpad_SL500">Talk:Lenovo Thinkpad SL500#</a>)</div>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> See <a href="../en/Category:Laptops.html" title="Category:Laptops">Category:Laptops</a> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Lenovo_Thinkpad_SL500">Talk:Lenovo Thinkpad SL500#</a>)</div>
</div>
<p>The support for this laptop is not as bad as it first seems. In fact, pretty much everything works fine. I am very happy with this machine!
</p>
<p>While this guide if for the Thinkpad SL500, the steps should be easily applicable to the SL300 and SL400 models.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Wireless"><span class="tocnumber">2</span> <span class="toctext">Wireless</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Sound"><span class="tocnumber">3</span> <span class="toctext">Sound</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#lenovo-sl-laptop_Kernel_Module"><span class="tocnumber">4</span> <span class="toctext">lenovo-sl-laptop Kernel Module</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Configuration"><span class="tocnumber">4.1</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Building_Manually"><span class="tocnumber">4.2</span> <span class="toctext">Building Manually</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#USB_and_SD_auto_mounting"><span class="tocnumber">5</span> <span class="toctext">USB and SD auto mounting</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#xD-Picture_Card"><span class="tocnumber">6</span> <span class="toctext">xD-Picture Card</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Other_notes"><span class="tocnumber">7</span> <span class="toctext">Other notes</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Untested"><span class="tocnumber">8</span> <span class="toctext">Untested</span></a></li>
<li class="toclevel-1 tocsection-11">
<a href="#Power_management"><span class="tocnumber">9</span> <span class="toctext">Power management</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Modules_array"><span class="tocnumber">9.1</span> <span class="toctext">Modules array</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#.2Fetc.2Frc.local"><span class="tocnumber">9.2</span> <span class="toctext">/etc/rc.local</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#.2Fetc.2Facpid.2Fhandler.sh"><span class="tocnumber">9.3</span> <span class="toctext">/etc/acpid/handler.sh</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#.2Fetc.2Fpm.2Fsleep.d.2F60rc.local"><span class="tocnumber">9.4</span> <span class="toctext">/etc/pm/sleep.d/60rc.local</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#.2Fpath.2Fto.2Fpowermanagement.sh"><span class="tocnumber">9.5</span> <span class="toctext">/path/to/powermanagement.sh</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#References"><span class="tocnumber">10</span> <span class="toctext">References</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>Despite the Thinkpad name, the SL series laptops actually contain IdeaPad firmware, making it incompatible with the thinkpad_acpi modules. A new module, lenovo-sl-laptop has been written to expose most of the lost functionality. Thinkwiki has a page for the <a rel="nofollow" class="external text" href="http://www.thinkwiki.org/wiki/Category:SL_Series">SL series</a> with good general information and howtos.
</p>
<h2><span class="mw-headline" id="Wireless">Wireless</span></h2>
<p>There are two possible wireless chipsets: <a href="../en/Wireless_network_configuration.html#iwl3945.2C_iwl4965_and_iwl5000-series" title="Wireless" class="mw-redirect">Intel WiFi Link 5100</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" title="ArchWiki:Requests">broken link</a>: invalid section]</sup> or a <a href="../en/Wireless_network_configuration.html#madwifi" title="Wireless" class="mw-redirect">Atheros AR5007EG</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" title="ArchWiki:Requests">broken link</a>: invalid section]</sup>.
</p>
<p>With the Intel WiFi Link 5100 series all functionality is supported out of the box. Follow the  <a href="../en/Wireless_network_configuration.html" title="Wireless Setup" class="mw-redirect">wireless setup</a> guide for further information.
</p>
<h2><span class="mw-headline" id="Sound">Sound</span></h2>
<p>See <a href="../en/Advanced_Linux_Sound_Architecture.html" title="ALSA" class="mw-redirect">ALSA</a>.
</p>
<h2><span class="mw-headline" id="lenovo-sl-laptop_Kernel_Module">lenovo-sl-laptop Kernel Module</span></h2>
<p><b>This modules is no longer required in 2.6.32 for most hotkey support; the mainline asus-laptop module has been patched to support these models. However, some features still require the lenovo-sl-laptop. Check the git <a rel="nofollow" class="external text" href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=14f8af311e7d3e4198cbaade84a34f86505dcb37">commit</a> for clarification. Note that it's recommened to blacklist the asus-laptop module when the lenovo-sl-laptop module is used to avoid problems with hotkey support.</b>
</p>
<p>This experimental kernel module was written to control bluetooth, hotkeys, fan, and screen brightness in place of the incompatible thinkpad_acpi module. A <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages.php?ID=23667">package</a> is currently available in the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>. After installation, be sure to load the module, and to load on startup, add lenovo-sl-laptop to the MODULES array in <a href="../en/SysVinit.html" title="Rc.conf" class="mw-redirect">rc.conf</a>.
</p>
<p>Despite it's experimental status, it works quite well. Sadly, there is no support for the <a href="../en/Hard_Drive_Active_Protection_System.html" title="HDAPS" class="mw-redirect">HDAPS</a>.
</p>
<h4><span class="mw-headline" id="Configuration">Configuration</span></h4>
<p>To allow control of the backlight, first edit /etc/modprobe.d/modprobe.conf as follows:
</p>
<pre>options lenovo-sl-laptop control_backlight=1
</pre>
<p>Then turn off ACPI control of the backlight by performing the command on startup.
</p>
<pre>echo 0 &gt; /sys/module/video/parameters/brightness_switch_enabled
</pre>
<p>A preferable alternative is to add the following to your kernel boot line to do so on startup.
</p>
<pre>acpi_backlight=vendor
</pre>
<h4><span class="mw-headline" id="Building_Manually">Building Manually</span></h4>
<p>Instead of installing the AUR package, the module can built manually from source.
</p>
<p>To do so, first obtain the source from <a rel="nofollow" class="external text" href="http://github.com/tetromino/lenovo-sl-laptop/tree/master">here</a> and perform the following
</p>
<pre>make
sudo install -m=644 -D lenovo-sl-laptop.ko /lib/modules/`uname -r`/kernel/lenovo_sl_laptop/lenovo-sl-laptop.ko
depmod -a
modprobe lenovo-sl-laptop control_backlight=1
</pre>
<p>The bluetooth light on the front of your laptop should turn on.
</p>
<p>Finally, add lenovo-sl-laptop to your MODULES array in your <a href="../en/SysVinit.html" title="Rc.conf" class="mw-redirect">rc.conf</a>.
</p>
<h2><span class="mw-headline" id="USB_and_SD_auto_mounting">USB and SD auto mounting</span></h2>
<p>Check out the <a href="../en/Udev.html" title="Udev">Udev</a> rules for automounting USB and sd cards, very handy.
</p>
<h2><span class="mw-headline" id="xD-Picture_Card">xD-Picture Card</span></h2>
<p>In order to be able to access a xd-Picture card one has to enable the following two modules. This will enable the card to be mounted as a block device with the proper file system, recognised by device managers such as tunar-volman.
</p>
<pre>$ modprobe r852 ssfdc
</pre>
<h2><span class="mw-headline" id="Other_notes">Other notes</span></h2>
<p>The SD card reader seems a bit buggy.
</p>
<h2><span class="mw-headline" id="Untested">Untested</span></h2>
<p>Fingerprint reader,
Bluetooth,
Modem.
</p>
<h2><span class="mw-headline" id="Power_management">Power management</span></h2>
<p>This section covers tools and settings which help to establish a suitable power management to reduce power consumption and determine the optimal settings depending on the AC state. This is particularly useful for systems which use window managers rather than desktop environments and their power management.
</p>
<h3><span class="mw-headline" id="Modules_array">Modules array</span></h3>
<p>There are certain modules to be enabled in /etc/rc.conf in order to have a proper working power management. 
</p>
<pre>MODULES=(lenovo-sl-laptop asus-laptop acpi-cpufreq cpufreq_powersave)
</pre>
<h3><span class="mw-headline" id=".2Fetc.2Frc.local">/etc/rc.local</span></h3>
<p>The /etc/rc.local enables fan control which requires the <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages.php?ID=52256">lenovo-sl-laptop module</a> from AUR to be installed. Furthermore there must be entered the right path to the powermanagement.sh script.
</p>
<pre>#!/bin/bash
#
# /etc/rc.local: Local multi-user startup script.
#

# Enable fan control
# The following if statement is necessary because the folder containing the fan control changes between hwmon1 and hwmon0 from time to time
fanDirectory="/sys/devices/platform/lenovo-sl-laptop/hwmon/hwmon1"

if [ -d $fanDirectory ]; then
 	 echo 1 &gt; /sys/devices/platform/lenovo-sl-laptop/hwmon/hwmon1/pwm1_enable
	 echo 70 &gt; /sys/devices/platform/lenovo-sl-laptop/hwmon/hwmon1/pwm1

else
 
	 echo 1 &gt; /sys/devices/platform/lenovo-sl-laptop/hwmon/hwmon0/pwm1_enable
        echo 70 &gt; /sys/devices/platform/lenovo-sl-laptop/hwmon/hwmon0/pwm1
	
fi


# Set settings according to AC state
exec /path/to/powermanagement.sh
</pre>
<h3><span class="mw-headline" id=".2Fetc.2Facpid.2Fhandler.sh">/etc/acpid/handler.sh</span></h3>
<p>The <a href="../en/Acpid.html" title="Acpid">Acpid</a> daemon is a very handy tool which listens for Acpi changes. However getting it to work with the Lenovo SL500 is not able by default as this laptop listens on different acpi signals. The following handler.sh changes the governor and the brightness level depending on whether the system is connected to AC or not. Furthermore it suspends the system using pm-suspend and locks the screen using slimlock after the lid is closed or the sleep button is pressed. 
</p>
<pre>#!/bin/sh
# Default acpi script that takes an entry for all actions

# NOTE: This is a 2.6-centric script.  If you use 2.4.x, you'll have to
#       modify it to not use /sys

minspeed=`cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_min_freq`
maxspeed=`cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq`
setspeed="/sys/devices/system/cpu/cpu0/cpufreq/scaling_setspeed"

set $*

case "$1" in
    button/power)
        #echo "PowerButton pressed!"&gt;/dev/tty5
        case "$2" in
            PBTN|PWRF)  logger "PowerButton pressed: $2" ;;
            *)          logger "ACPI action undefined: $2" ;;
        esac
        ;;
    button/sleep)
       case "$2" in
           SLPB)   #echo -n mem &gt;/sys/power/state ;;

		    # Suspend the system and lock the screen
		    /usr/sbin/pm-suspend 
		    DISPLAY=:0.0 su -c - robert /usr/bin/slimlock
	    ;;
           *)      logger "ACPI action undefined: $2" ;;
       esac
       ;;
    ac_adapter)
        case "$2" in
            AC0|ACAD|ADP0)
                case "$4" in
                    00000001)
                        #echo -n $minspeed &gt;$setspeed
                        #/etc/laptop-mode/laptop-mode start
			 
                        # System is connected to AC 

			 # Set governor to performance level for both CPUs
			 echo "performance" &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
			 echo "performance" &gt; /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor

			 # Set brightness to maximum
			 echo "15" &gt; /sys/class/backlight/acpi_video0/brightness
                    ;;
                    00000000)
                        #echo -n $maxspeed &gt;$setspeed
                        #/etc/laptop-mode/laptop-mode stop
			 
                        # System is not connected to AC 
	
			 # Set governor to powersave level for both CPUs
			 echo "powersave" &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
			 echo "powersave" &gt; /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor
 
			 # Set brightness to a minimum level 
			 echo "5" &gt; /sys/class/backlight/acpi_video0/brightness
                    ;;
                esac
                ;;
            *)  logger "ACPI action undefined: $2" ;;
        esac
        ;;
    battery)
        case "$2" in
            BAT0)
                case "$4" in
                    00000000)   #echo "offline" &gt;/dev/tty5
                    ;;
                    00000001)   #echo "online"  &gt;/dev/tty5
                    ;;
                esac
                ;;
            CPU0)	
                ;;
            *)  logger "ACPI action undefined: $2" ;;
        esac
        ;;
    button/lid)
        #echo "LID switched!"&gt;/dev/tty5
	 # Suspend the system and lock the screen
	 /usr/sbin/pm-suspend  
 	 DISPLAY=:0.0 su -c - user /usr/bin/slimlock
        ;;
    *)
        logger "ACPI group/action undefined: $1 / $2"
        ;;
esac
</pre>
<h3><span class="mw-headline" id=".2Fetc.2Fpm.2Fsleep.d.2F60rc.local">/etc/pm/sleep.d/60rc.local</span></h3>
<p>This script executes the rc.local after suspend to ensure that the right settings according to AC state are set.
</p>
<pre>#!/bin/sh

. "${PM_FUNCTIONS}"

case $1 in
    resume|thaw)
        [ -e /etc/rc.local ] &amp;&amp; /etc/rc.local &amp;
        ;;
    *)
        exit $NA
        ;;
esac
exit 0
</pre>
<h3><span class="mw-headline" id=".2Fpath.2Fto.2Fpowermanagement.sh">/path/to/powermanagement.sh</span></h3>
<p>This script actually changes the governor and the brightness depending on the AC state.
</p>
<pre>#!/bin/bash

if [ "`sed -e "s/.[^ ]* *//" /proc/acpi/ac_adapter/AC0/state`" = "on-line" ]
        then
               # System is on-line
		# Set governor to performance level for both CPUs
		echo "performance" &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
		echo "performance" &gt; /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor

		# Set brightness to maximum
		echo "15" &gt; /sys/class/backlight/acpi_video0/brightness
		
        else
               # System is off-line
		# Set governor to powersave level for both CPUs
		echo "powersave" &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
		echo "powersave" &gt; /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor

		# Set brightness to a minimum level
		echo "5" &gt; /sys/class/backlight/acpi_video0/brightness
fi
</pre>
<h2><span class="mw-headline" id="References">References</span></h2>
<p><a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=82447">Thread</a> on the forums concerning configuration of Arch Linux on the SL series
</p>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Lenovo.html" title="Category:Lenovo">Lenovo</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
