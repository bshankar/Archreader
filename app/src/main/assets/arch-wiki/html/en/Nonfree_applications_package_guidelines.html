<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Nonfree applications package guidelines - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Nonfree_applications_package_guidelines skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Nonfree applications package guidelines</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="toc" style="display:block; text-align: center; margin-bottom: 1em;">
<b><a href="../en/Creating_packages.html" title="Creating packages">Package creation guidelines</a></b>
<hr>
<p><a href="../en/CLR_package_guidelines.html" title="CLR package guidelines">CLR</a> – <a href="../en/Cross-compiling_tools_package_guidelines.html" title="Cross-compiling tools package guidelines">Cross</a> – <a href="../en/Eclipse_plugin_package_guidelines.html" title="Eclipse plugin package guidelines">Eclipse</a> – <a href="../en/Free_Pascal_package_guidelines.html" title="Free Pascal package guidelines">Free Pascal</a> – <a href="../en/GNOME_package_guidelines.html" title="GNOME package guidelines">GNOME</a> – <a href="../en/Go_package_guidelines.html" title="Go package guidelines">Go</a> – <a href="../en/Haskell_package_guidelines.html" title="Haskell package guidelines">Haskell</a> – <a href="../en/Java_package_guidelines.html" title="Java package guidelines">Java</a> – <a href="../en/KDE_package_guidelines.html" title="KDE package guidelines">KDE</a> – <a href="../en/Kernel_module_package_guidelines.html" title="Kernel module package guidelines">Kernel</a> – <a href="../en/Lisp_package_guidelines.html" title="Lisp package guidelines">Lisp</a> – <a href="../en/MinGW_package_guidelines.html" title="MinGW package guidelines">MinGW</a> – <a href="../en/Node.js_package_guidelines.html" title="Node.js package guidelines">Node.js</a> – <strong class="selflink">Nonfree</strong> – <a href="../en/OCaml_package_guidelines.html" title="OCaml package guidelines">OCaml</a> – <a href="../en/Perl_package_guidelines.html" title="Perl package guidelines">Perl</a> – <a href="../en/PHP_package_guidelines.html" title="PHP package guidelines">PHP</a> – <a href="../en/Python_package_guidelines.html" title="Python package guidelines">Python</a> – <a href="../en/Ruby_Gem_package_guidelines.html" title="Ruby Gem package guidelines">Ruby</a> – <a href="../en/VCS_package_guidelines.html" title="VCS package guidelines">VCS</a> – <a href="../en/Web_application_package_guidelines.html" title="Web application package guidelines">Web</a> – <a href="../en/Wine_package_guidelines.html" title="Wine package guidelines">Wine</a>
</p>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> cover about encrypting archives, symlinking etc. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Nonfree_applications_package_guidelines">Talk:Nonfree applications package guidelines#</a>)</div>
</div>
<p>For many applications (most of which are Windows ones) there are neither sources nor tarballs available. Many of such applications can not be freely distributed because of license restrictions and/or lack of legal ways to obtain installer for no fee. Such software obviously can not be included into the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a> but due to nature of <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> it is still possible to privately <a href="../en/Makepkg.html" title="Makepkg">build packages</a> for it, manageable with <a href="../en/Pacman.html" title="Pacman">pacman</a>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>All information here is package-agnostic, for information specific to the most typical nonfree software see <a href="../en/Wine_package_guidelines.html" title="Wine PKGBUILD guidelines" class="mw-redirect">Wine PKGBUILD guidelines</a>.</div>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Rationale"><span class="tocnumber">1</span> <span class="toctext">Rationale</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Common_rules"><span class="tocnumber">2</span> <span class="toctext">Common rules</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Avoid_nonfree_software_when_possible"><span class="tocnumber">2.1</span> <span class="toctext">Avoid nonfree software when possible</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Use_open_source_variants_where_possible"><span class="tocnumber">2.2</span> <span class="toctext">Use open source variants where possible</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Keep_it_simple"><span class="tocnumber">2.3</span> <span class="toctext">Keep it simple</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Package_naming"><span class="tocnumber">3</span> <span class="toctext">Package naming</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#File_placement"><span class="tocnumber">4</span> <span class="toctext">File placement</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Missing_files"><span class="tocnumber">5</span> <span class="toctext">Missing files</span></a></li>
<li class="toclevel-1 tocsection-9">
<a href="#Advanced_topics"><span class="tocnumber">6</span> <span class="toctext">Advanced topics</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Custom_DLAGENTS"><span class="tocnumber">6.1</span> <span class="toctext">Custom DLAGENTS</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Unpacking"><span class="tocnumber">6.2</span> <span class="toctext">Unpacking</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Getting_icons_for_.desktop_files"><span class="tocnumber">6.3</span> <span class="toctext">Getting icons for .desktop files</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Rationale">Rationale</span></h2>
<p>There are multiple reasons for packaging even non-packageable software:
</p>
<ul><li> Simplification of installation/removal process</li></ul>
<dl>
<dd>This is applicable even to the simplest of apps, which consist of a single script to be installed into <code>/usr/bin</code>. Instead of issuing:</dd>
<dd><pre>$ chmod +x <i>filename</i></pre></dd>
<dd><pre># cp <i>filename</i> /usr/bin/</pre></dd>
<dd>you can type just</dd>
<dd><pre># makepkg -i</pre></dd>
<dd>Most non-free applications are obviously much more complicated, but the burden of downloading an archive/installer from a homepage (often full of advertising), unpacking/decrypting it, hand-writing stereotypical launcher scripts and doing other similar tasks can be effectively lightened by a well-written packaging script.</dd>
</dl>
<ul><li> Utilizing pacman capabilities</li></ul>
<dl><dd>The ability to track state, perform automatic updates of any installed piece of software, determine ownership of every single file, and store compressed packages in a well-organized cache is what makes GNU/Linux distributions so powerful.</dd></dl>
<ul><li> Sharing code and knowledge</li></ul>
<dl><dd>It is simpler to apply tweaks, fix bugs and seek/provide help in a single public place like AUR versus submitting patches to proprietary developers who may have ceased support or asking vague questions on general purpose forums.</dd></dl>
<h2><span class="mw-headline" id="Common_rules">Common rules</span></h2>
<h3><span class="mw-headline" id="Avoid_nonfree_software_when_possible">Avoid nonfree software when possible</span></h3>
<p>Yes, it's better to leave this guide and spend some time searching (or maybe even creating) alternatives to an application you wanted to package because:
</p>
<ol>
<li> Packaging nonfree software is often messy and often against <a href="../en/Arch_terminology.html#The_Arch_Way" title="The Arch Way" class="mw-redirect">The Arch Way</a>
</li>
<li> It is better to support software that is owned by us all than software that is owned by a company</li>
<li> It is better to support software that is actively maintained</li>
<li> It is better to support software that can be fixed if just one person out of millions cares enough</li>
</ol>
<h3><span class="mw-headline" id="Use_open_source_variants_where_possible">Use open source variants where possible</span></h3>
<p>Many commercial games (<a href="../en/List_of_games.html" title="List of Applications/Games" class="mw-redirect">some are listed in this Wiki</a>) have open source engines and many old games can be played with emulators such as <a href="https://en.wikipedia.org/wiki/ScummVM" class="extiw" title="wikipedia:ScummVM">ScummVM</a>. Using open source engines together with the original game assets gives users access to bug fixes and eliminates several issues caused by binary packages.
</p>
<h3><span class="mw-headline" id="Keep_it_simple">Keep it simple</span></h3>
<p>If the packaging of some program requires more effort and hacks than buying and using the original version - do the simplest thing, it is Arch!
</p>
<h2><span class="mw-headline" id="Package_naming">Package naming</span></h2>
<p>Before choosing a name on your own, search in AUR for existing versions of the software you want to package. Try to use established naming conversion (e.g. do not create something like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gish-hb/">gish-hb</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/gish-hb">aur-mirror</a>]</sup> when there are already <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/aquaria-hib/">aquaria-hib</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/penumbra-overture-hib/">penumbra-overture-hib</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/uplink-hib/">uplink-hib</a></span><sup><small>AUR</small></sup>). Use suffix <code>-bin</code> <b>always</b> unless you are sure there will never be a source-based package—its creator would have to ask you (or in worst case TUs) to orphan existing package for him and you both will end up with PKGBUILDs cluttered with additional <code>replaces</code> and <code>conflicts</code>.
</p>
<h2><span class="mw-headline" id="File_placement">File placement</span></h2>
<p>Again, analyze existing packages (if present) and decide whether or not you want to conflict with them. Do not place things under <code>/opt</code> unless you want to use some ugly hacks like giving ownership <code>root:games</code> to the package directory (so users in group <code>games</code> running the game can write files in the game's own folder).
</p>
<h2><span class="mw-headline" id="Missing_files">Missing files</span></h2>
<p>For most commercial games there is no way to (legally) download game files, which is the preferable way to get them for normal packages. Even when it is possible to download files after providing a password (like with all <a href="https://en.wikipedia.org/wiki/Humble_Indie_Bundle" class="extiw" title="wikipedia:Humble Indie Bundle">Humble Indie Bundle</a> games) asking user for this password and downloading somewhere in <code>build</code> function is not recommended for a variety of reasons (for example, the user may have no Internet access but have all files downloaded and stored locally). The following options should be considered:
</p>
<ul><li> <b>There is only one way to obtain files</b>
</li></ul>
<dl>
<dd><ul><li> Software is distributed in archive/installer</li></ul></dd>
<dd>Add the required file to <code>sources</code> array:</dd>
<dd><pre>sources=(... "<i>originalname</i>::<b>file://</b><i>originalname</i>")</pre></dd>
<dd>This way the link to file in AUR web interface will look different from names of files included in source tarball.</dd>
<dd>Add following comment on package page:</dd>
<dd><pre>Need archive/installer to work.</pre></dd>
<dd>and explain the details in PKGBUILD source.</dd>
</dl>
<dl>
<dd><ul><li> Software is distributed on compact-disk</li></ul></dd>
<dd>Add installer script and <code>.install</code> file to package contents, like in package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tsukihime-en/">tsukihime-en</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/tsukihime-en">aur-mirror</a>]</sup>.</dd>
</dl>
<ul><li> <b>There are several ways to obtain files</b>
</li></ul>
<p>Copying files from disk / downloading from Net / getting from archive during <code>build</code> phase may look like a good idea but it is not recommended because it limits the user's possibilities and makes package installation interactive (which is generally discouraged and just annoying). Again, a good installer script and <code>.install</code> file can work instead.
</p>
<p>Few examples of various strategies for obtaining files required for package:
</p>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/worldofgoo/">worldofgoo</a></span><sup><small>AUR</small></sup> – dependency on user-provided file</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/umineko-en/">umineko-en</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/umineko-en">aur-mirror</a>]</sup> – combining files from freely available patch and user-provided compact-disk</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/worldofgoo-demo/">worldofgoo-demo</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/worldofgoo-demo">aur-mirror</a>]</sup> – autonomic fetching installer during build phase</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ut2004-anthology/">ut2004-anthology</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/ut2004-anthology">aur-mirror</a>]</sup> – searching for disk via mountpoints</li>
</ul>
<h2><span class="mw-headline" id="Advanced_topics">Advanced topics</span></h2>
<h3><span class="mw-headline" id="Custom_DLAGENTS">Custom DLAGENTS</span></h3>
<p>Some software authors aggressively  protect their software from automatic downloading: ban certain "User-Agent" strings, create temporary links to files etc. You can still conveniently download this files by using <code>DLAGENTS</code> variable in PKGBUILD (see <code>man makepkg.conf</code>). This is used by some packages in <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>, for example <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=ttf-baekmuk">ttf-baekmuk</a></span>.
</p>
<p>Following one-liner disguises curl as the most popular browser among novice computer users:
</p>
<pre>DLAGENTS=("http::/usr/bin/curl -A 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)' -fLC - --retry 3 --retry-delay 3 -o %o %u")
</pre>
<p>And following allows to extract temporary link to file from download page:
</p>
<pre>DLAGENTS=("http::/usr/bin/wget -r -np -nd -H %u")
</pre>
<h3><span class="mw-headline" id="Unpacking">Unpacking</span></h3>
<p>Many proprietary programs are shipped in nasty installers which sometimes do not even run in Wine. Following tools may be of some help:
</p>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=unzip">unzip</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=unrar">unrar</a></span> unpack executable SFX archives, based on this formats</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=cabextract">cabextract</a></span> can unpack most <code>.cab</code> files (including ones with <code>.exe</code> extension)</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=unshield">unshield</a></span> can extract CAB files from InstallShield installers</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=p7zip">p7zip</a></span> unpacks not only many archive formats but also <a href="https://en.wikipedia.org/wiki/NSIS" class="extiw" title="wikipedia:NSIS">NSIS</a>-based <code>.exe</code> installers
<ul><li> it even can extract single sections from common PE (<code>.exe</code> &amp; <code>.dll</code>) files!</li></ul>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=upx">upx</a></span> is sometimes used to encrypt above-listed executables and can be used for decryption as well</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/innoextract/">innoextract</a></span><sup><small>AUR</small></sup> can unpack <code>.exe</code> installers created with <a href="https://en.wikipedia.org/wiki/Inno_Setup" class="extiw" title="wikipedia:Inno Setup">Inno Setup</a> (used for example by GOG.com games)</li>
</ul>
<p>In order to determine exact type of file run <code>file <i>file_of_unknown_type</i></code>.
</p>
<h3><span class="mw-headline" id="Getting_icons_for_.desktop_files">Getting icons for .desktop files</span></h3>
<p>Proprietary software often have no separate icon files, so there is nothing to use in <a href="../en/Desktop_entries.html" title=".desktop" class="mw-redirect">.desktop</a> file creation. Happily <code>.ico</code> files can be easily extracted from executables with programs from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=icoutils">icoutils</a></span> package. You can even do it on fly during <code>build</code> phase (example can be found in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/sugarsdelight/">sugarsdelight</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/sugarsdelight">aur-mirror</a>]</sup>).
</p>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Package_development.html" title="Category:Package development">Package development</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
