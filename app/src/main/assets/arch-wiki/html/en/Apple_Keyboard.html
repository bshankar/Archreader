<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Apple Keyboard - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Apple_Keyboard skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Apple Keyboard</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Continues the tradition of Apple* articles of violating <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> in every way imaginable (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Apple_Keyboard">Talk:Apple Keyboard#</a>)</div>
</div>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#More_Information"><span class="tocnumber">1</span> <span class="toctext">More Information</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Numlock_is_on"><span class="tocnumber">2</span> <span class="toctext">Numlock is on</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Repeating_Keys"><span class="tocnumber">3</span> <span class="toctext">Repeating Keys</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#Function_keys_do_not_work"><span class="tocnumber">4</span> <span class="toctext">Function keys do not work</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#If_the_above_doesn.27t_work_for_your_wireless_keyboard"><span class="tocnumber">4.1</span> <span class="toctext">If the above doesn't work for your wireless keyboard</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#.3C_and_.3E_have_changed_place_with_.C2.A7_and_.C2.BD"><span class="tocnumber">5</span> <span class="toctext">&lt; and &gt; have changed place with § and ½</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#.3C_and_.3E_have_changed_place_with_.5E_and_.C2.B0_.28or_.40_and_.23.29"><span class="tocnumber">6</span> <span class="toctext">&lt; and &gt; have changed place with ^ and ° (or @ and #)</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#The_.60_and_.7E_keys_output_.3C_and_.3E"><span class="tocnumber">7</span> <span class="toctext">The ` and ~ keys output &lt; and &gt;</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Media_Keys"><span class="tocnumber">8</span> <span class="toctext">Media Keys</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#PrintScreen_and_SysRq"><span class="tocnumber">9</span> <span class="toctext">PrintScreen and SysRq</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Treating_Apple_Keyboards_Like_Regular_Keyboards"><span class="tocnumber">10</span> <span class="toctext">Treating Apple Keyboards Like Regular Keyboards</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Swap_the_Alt_key_and_Command_key.28Meta.2FSuper.29"><span class="tocnumber">11</span> <span class="toctext">Swap the Alt key and Command key(Meta/Super)</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Swap_the_Fn_key_and_Left_Ctrl_key"><span class="tocnumber">12</span> <span class="toctext">Swap the Fn key and Left Ctrl key</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="More_Information">More Information</span></h2>
<p>For background information see this page: <a rel="nofollow" class="external free" href="https://help.ubuntu.com/community/AppleKeyboard">https://help.ubuntu.com/community/AppleKeyboard</a>
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Some of the settings can be made permanent with a configuration file for a <a href="../en/Kernel_modules.html" title="Kernel module" class="mw-redirect">kernel module</a>. For this to work, the file has to be added to FILES in <a href="../en/Mkinitcpio.html" title="Mkinitcpio.conf" class="mw-redirect">mkinitcpio.conf</a> cause the kernel module will be autoloaded while booting.</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>If you want to use <a href="../en/Sudo.html" title="Sudo">sudo</a> to write into a system directory you can't use shell redirection.  Use <code>tee</code> like so
<pre>$ echo 0 | sudo tee /sys/module/hid_apple/parameters/iso_layout
</pre>
</div>
<h2><span class="mw-headline" id="Numlock_is_on">Numlock is on</span></h2>
<p>You may experience that numlock is on. The symptoms are present when only the physical keys, 7,8,9,u,i,o,j,k,l and surounding keys only work and output numbers. To fix this hit <code>Fn</code>+<code>F6</code> twice.
</p>
<h2><span class="mw-headline" id="Repeating_Keys">Repeating Keys</span></h2>
<p>Unpair the keyboard and then re-pair it. The trick is to hold down the power button throughout the entire pairing proccess (it's a two hand job)
</p>
<h2><span class="mw-headline" id="Function_keys_do_not_work">Function keys do not work</span></h2>
<p>If your <code>F&lt;num&gt;</code> keys do not work, this is probably because the kernel driver for the keyboard has defaulted to using the media keys and requiring you to use the <code>Fn</code> key to get to the <code>F&lt;num&gt;</code> keys. To change this behaviour, you have to change the driver setting. Do the following as root:
</p>
<pre># echo 2 &gt; /sys/module/hid_apple/parameters/fnmode
</pre>
<p>If it tells you that the file doesn't exist, you probably have an older kernel and will have to do the following instead:
</p>
<pre># echo 2 &gt; /sys/module/hid/parameters/pb_fnmode
</pre>
<p>Place whatever option worked for you in <code>/etc/modprobe.d/hid_apple.conf</code> to make the setting permanent:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/hid_apple.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
options hid_apple fnmode=2
</pre>
<p>Don't forget to add this file to FILES in <a href="../en/Mkinitcpio.html" title="Mkinitcpio.conf" class="mw-redirect">mkinitcpio.conf</a> and rebuild the initial ramdisk, otherwise it will not work.
</p>
<h3><span class="mw-headline" id="If_the_above_doesn.27t_work_for_your_wireless_keyboard">If the above doesn't work for your wireless keyboard</span></h3>
<p>If <code>hid_apple/parameters</code> and/or <code>hid/parameters/pb_fnmode</code> is missing in a recent Apple Bluetooth keyboard model and kernel 3.4.
</p>
<p>First thing: identify your keyboard. Execute as root (<code>hidd</code> is part of package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bluez">bluez</a></span> from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>):
</p>
<pre># hidd --show
</pre>
<p>You should see something like:
</p>
<pre>40:CA:EC:32:85:AB Apple Wireless Keyboard [05ac:0255] connected 
</pre>
<p>So with the vendor (05ac) and device (0255) ID it's easier to find out if the current kernel has support for it.
Actually, the above device is listed in the linux kernel 3.4. If you check <code>drivers/hid/hid-ids.h</code> you should see the following line:
</p>
<pre>#define USB_DEVICE_ID_APPLE_ALU_WIRELESS_2011_ANSI  0x0255
</pre>
<p>But support for the Function Key is missing.
</p>
<p>In order to fix it rebuild your kernel from <a href="../en/Arch_Build_System.html" title="Abs" class="mw-redirect">abs</a> with the following patch:
<a rel="nofollow" class="external free" href="http://pastebin.com/CvFJz3Fn">http://pastebin.com/CvFJz3Fn</a>
</p>
<p>This bug is already reported upstream
<a rel="nofollow" class="external free" href="https://bugzilla.kernel.org/show_bug.cgi?id=43135">https://bugzilla.kernel.org/show_bug.cgi?id=43135</a>
and part of the vanilla kernel since 3.5
</p>
<h2><span class="mw-headline" id=".3C_and_.3E_have_changed_place_with_.C2.A7_and_.C2.BD">&lt; and &gt; have changed place with § and ½</span></h2>
<p>If the <b>&lt;</b> and <b>&gt;</b> are switched with the <b>§</b> and <b>½</b> keys, run the following command in your graphical environment:
</p>
<pre>$ setxkbmap -option apple:badmap
</pre>
<p>Place that command into <code>~/.bashrc</code> file to have it run automatically when you log in.
</p>
<p>You can also apply the change system-wide by creating (or editing) <code>/etc/X11/xorg.conf.d/10-keymap.conf</code> as such:
</p>
<pre>Section "InputClass"
    Identifier "keyboard catchall"
    MatchIsKeyboard "true"
    Driver "evdev"
    Option "XkbOptions" "apple:badmap"
EndSection
</pre>
<p><br>
If the above approach doesn't seem to work, you can add these two lines to your <code>~/.Xmodmap</code> file:
</p>
<pre>keycode  49 = less greater less greater bar brokenbar
keycode  94 = section degree section degree notsign notsign
</pre>
<p>If you use a Canadian multilingual layout (where the "ù" and the "/" is switch) use this :
</p>
<pre>keycode  94 = slash backslash slash backslash bar brokenbar
keycode  49 = ugrave Ugrave ugrave Ugrave notsign notsign
</pre>
<p>Then run <code>xmodmap ~/.Xmodmap</code>. This command can also go into <code>~/.bashrc</code>.
</p>
<h2><span class="mw-headline" id=".3C_and_.3E_have_changed_place_with_.5E_and_.C2.B0_.28or_.40_and_.23.29">&lt; and &gt; have changed place with ^ and ° (or @ and #)</span></h2>
<p>With German layout, circumflex/degree symbol and 'smaller than'/'bigger than' are exchanged. With French layout, @/# are exchanged.
</p>
<p><b>The new way:</b>
</p>
<p>First, try if the new method works for you (you have to be root)
</p>
<pre># echo 0 &gt; /sys/module/hid_apple/parameters/iso_layout
</pre>
<p>To make the changes permanent add the following line to <code>/etc/modprobe.d/hid_apple.conf</code>:
</p>
<pre>options hid_apple iso_layout=0
</pre>
<p><b>To fix this the old way, do the following:</b>
</p>
<pre>$ xmodmap -e 'keycode 49 = less greater less greater bar brokenbar bar' -e 'keycode 94 = dead_circumflex degree dead_circumflex degree U2032 U2033 U2032'
</pre>
<p>Now try your keys. When it works, you may want the change permanently. So execute this:
</p>
<pre>$ xmodmap -pke | grep " 49" &gt;&gt; ~/.Xmodmap
$ xmodmap -pke | grep " 94" &gt;&gt; ~/.Xmodmap
</pre>
<h2><span class="mw-headline" id="The_.60_and_.7E_keys_output_.3C_and_.3E">The ` and ~ keys output &lt; and &gt;</span></h2>
<p>With the US layout, the backtick and tilde keys output lessthan or graterthan.
</p>
<p>First, try if the new method works for you (you have to be root)
</p>
<pre># echo 0 &gt; /sys/module/hid_apple/parameters/iso_layout
</pre>
<p>To make the changes permanent add
</p>
<pre>options hid_apple iso_layout=0
</pre>
<p>to <code>/etc/modprobe.d/hid_apple.conf</code> and run <code>mkinitcpio -p linux</code> as root.
</p>
<h2><span class="mw-headline" id="Media_Keys">Media Keys</span></h2>
<p>The evdev driver should produce keycodes that map to the appropriate keysyms for your media keys by default. You can confirm that by running <code>xev</code> in a console window and watching the console output as you press your media keys.
</p>
<p>For these keys to have any effect, you will have to assign actions to them. Refer to <a href="../en/Extra_keyboard_keys_in_Xorg.html" title="Extra keyboard keys in Xorg">Extra keyboard keys in Xorg</a> for more about that.
</p>
<p><br>
If you have confirmed that your media keys are <i>not</i> producing the correct keycodes, create or edit the <code>~/.Xmodmap</code> file so that it includes these lines:
</p>
<pre>keycode 160 = XF86AudioMute
keycode 176 = XF86AudioRaiseVolume
keycode 174 = XF86AudioLowerVolume

keycode 144 = XF86AudioPrev
keycode 162 = XF86AudioPlay
keycode 153 = XF86AudioNext

keycode 101 = XF86MonBrightnessDown
keycode 212 = XF86MonBrightnessUp

keycode 204 = XF86Eject</pre>
<p>and then run <code>xmodmap ~/.Xmodmap</code>. Place that command in the <code>~/.bashrc</code> file to have it run automatically when you log in.
</p>
<h2><span class="mw-headline" id="PrintScreen_and_SysRq">PrintScreen and SysRq</span></h2>
<p>Apple Keyboards have an <code>F13</code> key instead of a <code>PrintScreen</code>/<code>SysRq</code> key. This means that <a href="../en/Keyboard_shortcuts.html#Kernel" title="Keyboard shortcuts">Alt+SysRq sequences</a> do not work, and application actions associated with <code>PrintScreen</code> (such as taking screenshots in many games that work under <a href="../en/Wine.html" title="Wine">Wine</a>) do not work.
Both issues can be addressed by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/keyfuzz/">keyfuzz</a></span><sup><small>AUR</small></sup> from the <a href="../en/Arch_User_Repository.html" title="Arch User Repository">Arch User Repository</a>.
</p>
<p>With keyfuzz installed, run the following command:
</p>
<pre>echo "458856 99" | /usr/sbin/keyfuzz -s -d /dev/input/by-id/usb-Apple__Inc_Apple_keyboard-event-kbd
</pre>
<p>458856 (0x070068) is the scancode of <code>F13</code>, and 99 is the keycode of <code>PrintScreen</code>/<code>SysRq</code>.  You can determine the scancode of a particular key with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/getscancodes/">getscancodes</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/getscancodes">aur-mirror</a>]</sup> from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>, and the keycode from <code>/usr/include/linux/input.h</code>.
</p>
<p>Other versions of the Apple Aluminum Keyboard may require a slightly different device path, so adjust it as needed. You can make this change permanent by putting the command in <code>/etc/rc.local</code>.
</p>
<h2><span class="mw-headline" id="Treating_Apple_Keyboards_Like_Regular_Keyboards">Treating Apple Keyboards Like Regular Keyboards</span></h2>
<p>If you want to use your Apple keyboard like a regular US-layout keyboard, with <code>Alt</code> on the left side of <code>Meta</code>, you can use the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/un-apple-keyboard/">un-apple-keyboard</a></span><sup><small>AUR</small></sup>.  Currently it only works for the aluminium USB model.  The package does the following things:
</p>
<ul>
<li>Adds a <code>/etc/modprobe.d/hid_apple.conf</code> file which enables the <code>F</code> keys by default, as above.</li>
<li>Uses keyfuzz to remap <code>F13-15</code> to <code>PrintScreen</code>/<code>SysRq</code>, <code>Scroll Lock</code>, and <code>Pause</code>, respectively</li>
<li>Swaps the ordering of the <code>Alt</code> and <code>Meta</code> (<code>Command</code>) keys to match all other keyboards, again using <code>/etc/modprobe.d/hid_apple.conf</code>.</li>
<li>Applies these changes automatically when you plug in your keyboard, with a <a href="../en/Udev.html" title="Udev">udev</a> rule.</li>
</ul>
<p>You will need to add <code>/etc/modprobe.d/hid_apple.conf</code> to FILES in <a href="../en/Mkinitcpio.html" title="Mkinitcpio.conf" class="mw-redirect">mkinitcpio.conf</a>.  Otherwise if you boot your computer with the Apple keyboard plugged in, the F keys will not be the default.
</p>
<h2><span class="mw-headline" id="Swap_the_Alt_key_and_Command_key.28Meta.2FSuper.29">Swap the Alt key and Command key(Meta/Super)</span></h2>
<p><b>Temporarily</b>
</p>
<p>The following command will swap cmd and Alt keys with immediate effect, but restarting will reset the configuration:
</p>
<pre>$ echo 1 | sudo tee /sys/module/hid_apple/parameters/swap_opt_cmd
</pre>
<p><b>Permanently</b>
</p>
<p>Run the following command to append the configuration line to the file /etc/modprobe.d/hid_apple.conf creating it if necessary: 
</p>
<pre>$ echo options hid_apple swap_opt_cmd=1 | sudo tee -a /etc/modprobe.d/hid_apple.conf
</pre>
<p>Then reboot.
</p>
<h2><span class="mw-headline" id="Swap_the_Fn_key_and_Left_Ctrl_key">Swap the Fn key and Left Ctrl key</span></h2>
<p>While the original hid-apple module doesn't have an option to swap the fn and left ctrl keys, there is a patch adding this functionality to the module: <a rel="nofollow" class="external free" href="https://github.com/free5lot/hid-apple-patched">https://github.com/free5lot/hid-apple-patched</a>.
</p>
<p>You could install this module from aur: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hid-apple-patched-git/">hid-apple-patched-git</a></span><sup><small>AUR</small></sup>
</p>
<p>Once installed you can either to temporarily or permanently swap fn and left ctrl key.
</p>
<p><b>Temporarily</b>
</p>
<p>The following command will swap fn and left ctrl keys with immediate effect, but restarting will reset the configuration:
</p>
<pre>$ echo 1 | sudo tee /sys/module/hid_apple/parameters/swap_fn_leftctrl
</pre>
<p><b>Permanently</b>
</p>
<p>Run the following command to append the configuration line to the file /etc/modprobe.d/hid_apple.conf creating it if necessary: 
</p>
<pre>$ echo options hid_apple swap_fn_leftctrl=1 | sudo tee -a /etc/modprobe.d/hid_apple.conf
</pre>
<p>Then reboot.
</p>
<p><br>
Note: This patch also provides an option to use ejectcd key as the missing delete key on Apple keyboard. Just replace <code>swap_fn_leftctrl</code> with <code>ejectcd_as_delete</code> in the above command to enable it.
</p>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Keyboards.html" title="Category:Keyboards">Keyboards</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
