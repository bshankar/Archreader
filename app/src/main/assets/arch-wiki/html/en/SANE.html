<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>SANE - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-SANE skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">SANE</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/SANE/Scanner-specific_problems.html" title="SANE/Scanner-specific problems">SANE/Scanner-specific problems</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Scanner_Button_Daemon.html" title="Scanner Button Daemon">Scanner Button Daemon</a></li>
</ul>
</div>
<p>SANE (<a href="https://en.wikipedia.org/wiki/Scanner_Access_Now_Easy" class="extiw" title="wikipedia:Scanner Access Now Easy">Scanner Access Now Easy</a>) provides a library and a command-line tool to use scanners under GNU/Linux.
<a rel="nofollow" class="external text" href="http://www.sane-project.org/sane-supported-devices.html">Here</a> you can check if sane supports your scanner.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Installing_a_scanner_driver"><span class="tocnumber">3</span> <span class="toctext">Installing a scanner driver</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Firmware"><span class="tocnumber">3.1</span> <span class="toctext">Firmware</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Install_a_frontend"><span class="tocnumber">4</span> <span class="toctext">Install a frontend</span></a></li>
<li class="toclevel-1 tocsection-6">
<a href="#Network_scanning"><span class="tocnumber">5</span> <span class="toctext">Network scanning</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Sharing_your_scanner_over_a_network"><span class="tocnumber">5.1</span> <span class="toctext">Sharing your scanner over a network</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Accessing_your_scanner_from_a_remote_workstation"><span class="tocnumber">5.2</span> <span class="toctext">Accessing your scanner from a remote workstation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#Troubleshooting"><span class="tocnumber">6</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-10">
<a href="#Invalid_argument"><span class="tocnumber">6.1</span> <span class="toctext">Invalid argument</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Missing_firmware_file"><span class="tocnumber">6.1.1</span> <span class="toctext">Missing firmware file</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Wrong_firmware_file_permissions"><span class="tocnumber">6.1.2</span> <span class="toctext">Wrong firmware file permissions</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Multiple_backends_claim_scanner"><span class="tocnumber">6.1.3</span> <span class="toctext">Multiple backends claim scanner</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Communication_via_xHCI_not_working_.28older_scanner_models.29"><span class="tocnumber">6.1.4</span> <span class="toctext">Communication via xHCI not working (older scanner models)</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#Slow_startup"><span class="tocnumber">6.2</span> <span class="toctext">Slow startup</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Permission_problem"><span class="tocnumber">6.3</span> <span class="toctext">Permission problem</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=sane">sane</a></span> package.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Now you can try to see if sane recognizes your scanner
</p>
<pre>$ scanimage -L
</pre>
<p>If that fails, check that your scanner is plugged into the computer. You also might have to unplug/plug your scanner for <code>/etc/udev/rules.d/sane.rules</code> to recognize your scanner.
</p>
<p>Now you can see if it actually works
</p>
<pre>$ scanimage --format=tiff &gt; test.tiff
</pre>
<p>If the scanning fails with the message <code>scanimage: sane_start: Invalid argument</code> you may need to specify the device.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ scanimage -L</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
device `v4l:/dev/video0' is a Noname Video WebCam virtual device
device `pixma:04A91749_247936' is a CANON Canon PIXMA MG5200 multi-function peripheral</pre>
<p>Then you would need to run
</p>
<pre>$ scanimage --device pixma:04A91749_247936 --format=tiff &gt; test.tiff
</pre>
<p>Sane provides many special backend options for numerous scanner types. To see what these are for your device:
</p>
<pre>$ scanimage -A
</pre>
<h2><span class="mw-headline" id="Installing_a_scanner_driver">Installing a scanner driver</span></h2>
<p>Most scanners should work out of the box. If yours does not, see <a href="../en/SANE/Scanner-specific_problems.html" title="SANE/Scanner-specific problems">SANE/Scanner-specific problems</a> for installation instructions.
</p>
<h3><span class="mw-headline" id="Firmware">Firmware</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>This section is only needed if you need to upload firmware to your scanner.</div>
<p>Firmwares usually have the <b><code>.bin</code></b> extension. 
</p>
<p>Firstly you need to put the firmware someplace safe, it is recommended to put it in a subdirectory of <code>/usr/share/sane</code>.
</p>
<p>Then you need to tell sane where the firmware is:
</p>
<ul>
<li>Find the name of the backend for your scanner from the <a rel="nofollow" class="external text" href="http://www.sane-project.org/sane-supported-devices.html">sane supported devices list</a>.</li>
<li>Open the file <code>/etc/sane.d/&lt;backend-name&gt;.conf</code>.</li>
<li>Make sure the firmware entry is uncommented and let the file-path point to where you put the firmware file for your scanner. Be sure that members of the group <code>scanner</code> can access the <code>/etc/sane.d/&lt;backend-name&gt;.conf</code> file.</li>
</ul>
<p>If the backend of your scanner is not part of the sane package (such as hpaio.conf which is part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=hplip">hplip</a></span>), you need to uncomment the relevant entry in <code>/etc/sane.d/dll.conf</code>.
</p>
<h2><span class="mw-headline" id="Install_a_frontend">Install a frontend</span></h2>
<p>Many frontends exist for SANE, a non-exhaustive list of which can be found on the <a rel="nofollow" class="external text" href="http://www.sane-project.org/sane-frontends.html">sane-project website</a>. Another way to find them is to use <code>pacman</code> to <a href="../en/Pacman.html#Querying_package_databases" title="Pacman">search the repositories</a> for keywords such as "sane" or "scanner".
</p>
<ul><li> <b><a href="https://en.wikipedia.org/wiki/Scanner_Access_Now_Easy#gscan2pdf" class="extiw" title="wikipedia:Scanner Access Now Easy">gscan2pdf</a></b> — A GTK2-based GUI to produce PDFs, TIFFs or DjVus from scanned documents. It is also able to apply OCR in the process using different engines.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://gscan2pdf.sourceforge.net/">http://gscan2pdf.sourceforge.net/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gscan2pdf/">gscan2pdf</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li> <b><a href="https://en.wikipedia.org/wiki/Scanner_Access_Now_Easy#Simple_Scan" class="extiw" title="wikipedia:Scanner Access Now Easy">Simple Scan</a></b> — A simplified GUI that is intended to be easier to use and better integrated into the <a href="../en/GNOME.html" title="GNOME">GNOME</a> desktop than XSane. It was initially written for Ubuntu and is maintained by Robert Ancell of Canonical Ltd. for GNU/Linux.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://launchpad.net/simple-scan">http://launchpad.net/simple-scan</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=simple-scan">simple-scan</a></span>
</dd></dl>
<ul><li> <b><a href="https://en.wikipedia.org/wiki/Skanlite" class="extiw" title="wikipedia:Skanlite">Skanlite</a></b> — A simple image scanning application that does nothing more than scan and save images, based on the KSane backend.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.kde.org/applications/graphics/skanlite">https://www.kde.org/applications/graphics/skanlite</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=skanlite">skanlite</a></span>
</dd></dl>
<ul><li> <b><a href="https://en.wikipedia.org/wiki/Scanner_Access_Now_Easy#XSane" class="extiw" title="wikipedia:Scanner Access Now Easy">XSane</a></b> —  A full-featured GTK-based frontend looking a bit old but providing extended functionalities.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://www.xsane.org/">http://www.xsane.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xsane">xsane</a></span>
</dd></dl>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Scanning directly to PDF using XSane in 16bit color depth mode is known to produces <a rel="nofollow" class="external text" href="https://bugs.launchpad.net/ubuntu/+source/xsane/+bug/539162">corrupted files</a> and a note in <code>pacman</code> output warns so. 8bit mode is known to work.</div>
<h2><span class="mw-headline" id="Network_scanning">Network scanning</span></h2>
<h3><span class="mw-headline" id="Sharing_your_scanner_over_a_network">Sharing your scanner over a network</span></h3>
<p>You can share your scanner with other hosts on your network who use sane, xsane or xsane-enabled Gimp. To set up the server, first indicate which hosts on your network are allowed access.
</p>
<p>Change the <code>/etc/sane.d/saned.conf</code> file to your liking, for example:
</p>
<pre># required
localhost
# allow local subnet
192.168.0.0/24
</pre>
<p>If you use iptables, insert the <code>nf_conntrack_sane</code> module to let the firewall track saned connections.
</p>
<p>Now start/enable <code>saned.socket</code> <a href="../en/Systemd.html#Using_units" title="Systemd">using systemd</a>. Your scanner is now available over the network. For more information, see <code>man saned</code>.
</p>
<h3><span class="mw-headline" id="Accessing_your_scanner_from_a_remote_workstation">Accessing your scanner from a remote workstation</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Some network scanners require a different approach. See <a href="../en/SANE/Scanner-specific_problems.html" title="SANE/Scanner-specific problems">SANE/Scanner-specific problems</a>.</div>
<p>You can access your network-enabled scanner from a remote Arch Linux workstation.
</p>
<p>First, specify the server's host name or IP address in the <code>/etc/sane.d/net.conf</code> file:
</p>
<pre># static IP address
192.168.0.1
# or host name
stratus
</pre>
<p>Now test your workstation's connection:
</p>
<pre>$ scanimage -L
</pre>
<p>The network scanner should now also show up in any <a href="#Install_a_frontend">front-end</a>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<dl><dd>See also: <a href="../en/SANE/Scanner-specific_problems.html" title="SANE/Scanner-specific problems">SANE/Scanner-specific problems</a>
</dd></dl>
<h3><span class="mw-headline" id="Invalid_argument">Invalid argument</span></h3>
<p>If you get an "Invalid argument" error with xsane or another sane front-end, this could be caused by one of the following reasons:
</p>
<h4><span class="mw-headline" id="Missing_firmware_file">Missing firmware file</span></h4>
<p>No firmware file was provided for the used scanner (see <a href="#Firmware">#Firmware</a> for details).
</p>
<h4><span class="mw-headline" id="Wrong_firmware_file_permissions">Wrong firmware file permissions</span></h4>
<p>The permissions for the used firmware file are wrong. Correct them using
</p>
<pre># chown root:scanner /usr/share/sane/SCANNER_MODEL/FIRMWARE_FILE
# chmod ug+r /usr/share/sane/SCANNER_MODEL/FIRMWARE_FILE
</pre>
<h4><span class="mw-headline" id="Multiple_backends_claim_scanner">Multiple backends claim scanner</span></h4>
<p>It may happen, that multiple backends support (or pretend to support) your scanner, and sane chooses one that does not do after all (the scanner will not be displayed by scanimage -L then). This has happend with older Epson scanners and the <code>epson2</code> resp. <code>epson</code> backends. In this case, the solution is to comment out the unwanted backend in <code>/etc/sane.d/dll.conf</code>. In the Epson case, that would be to change
</p>
<pre> epson2
 #epson
</pre>
<p>to 
</p>
<pre> #epson2
 epson
</pre>
<p>It may also be possible that the independant <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=iscan">iscan</a></span> epkowa backend interferes with your snapscan backend (epson scanners). You may get this error right after using the <code>scanimage -L</code> command. Starting the scanner app (like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xsane">xsane</a></span>) twice can also solve the problem. Otherwise check your <code>/etc/sane.d/epkowa.conf</code> for wrong configuations or remove the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=iscan">iscan</a></span> package.
</p>
<h4><span class="mw-headline" id="Communication_via_xHCI_not_working_.28older_scanner_models.29">Communication via xHCI not working (older scanner models)</span></h4>
<p>Some older Scanner models do not work when connected via an USB3 port. This is not a big issue if USB2 ports are available. In case the machine running arch-linux has only USB3 ports, there are two ways to resolve the issue.
</p>
<ul>
<li> Disable xHCI via Bios/EFI. eHCI will consequently be used and communication with the scanner will work. On the downside, USB3 speed can not be reached on any port.</li>
<li> On (some) intel chipsets the 'setpci' command can be used to route specific usb ports to either the xHCI or the eHCI controller. See <a rel="nofollow" class="external text" href="https://forums.opensuse.org/showthread.php/507627-Suse-13-2-scanner-no-longer-working-on-64-bit-version?p=2714695#post2714695">Here</a> and <a rel="nofollow" class="external text" href="http://superuser.com/questions/812022/force-a-single-usb-3-0-port-to-work-as-usb-2-0">Here</a> (scroll down to where it says "setpci") for further information. With this it is possible to toggle single USB ports with a simple shell script.</li>
</ul>
<h3><span class="mw-headline" id="Slow_startup">Slow startup</span></h3>
<p>If you encounter slow startup issue (e.g. <code>xsane</code> or <code>scanimage -L</code> take a lot to find scanner) it may be that more than one driver supporting it is available. 
</p>
<p>Have a look at <code>/etc/sane.d/dll.conf</code> and try commenting out one (e.g. you may have epson, epson2 and epkowa enabled at the same time, try leaving only epson or epkowa uncommented)
</p>
<p>You can also try to comment out "net" driver, if there are no network scanners.
</p>
<h3><span class="mw-headline" id="Permission_problem">Permission problem</span></h3>
<p>After systemd, the <code>scanner</code> and <code>lp</code> groups are deprecated. No need to add your user to those groups. See <a href="../en/Users_and_groups.html#Pre-systemd_groups" title="Users and groups">Users and groups#Pre-systemd groups</a> for detail.
</p>
<p>You can also try to change permissions of usb device but this is not recommended, a better solution is to fix the Udev rules so that your scanner is recognized.
</p>
<p>First, as root, check connected usb devices with <code>lsusb</code>:
</p>
<pre>#Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
#Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
#Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
#Bus 003 Device 003: ID 04d9:1603 Holtek Semiconductor, Inc. 
#Bus 003 Device 002: ID 04fc:0538 Sunplus Technology Co., Ltd 
#Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
#Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
#Bus 001 Device 006: ID 03f0:2504 Hewlett-Packard 
#Bus 001 Device 002: ID 046d:0802 Logitech, Inc. Webcam C200
#Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</pre>
<p>In our example we see the scanner: <code>Bus 001 Device 006: ID 03f0:2504 Hewlett-Packard</code>. Here <code>03f0</code> is the <i>vendorID</i> and <code>2504</code> is the <i>productID</i>.
</p>
<p>Now open <code>/usr/lib/udev/rules.d/49-sane.rules</code> and see if there is there is a line with the vendorID and productID of your scanner. If there is not any, create the new file <code>/etc/udev/rules.d/49-sane-missing-scanner.rules</code>, with the following contents:
</p>
<pre>ATTRS{idVendor}=="<b>vendorID</b>", ATTRS{idProduct}=="<b>productID</b>", MODE="0664", GROUP="scanner", ENV{libsane_matched}="yes"
</pre>
<p>Save the file, plug out and back in your scanner and the file permissions should be now correct.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> The scanner needs to be added to the right backend file, <code>hp4200.conf</code> will not work for any scanner. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:SANE">Talk:SANE#</a>)</div>
</div>
<p>Another tip, is that you can add your device (scanner) in backend file:
</p>
<p>Add <code>usb 0x03f0 0x2504</code> to <code>/etc/sane.d/hp4200.conf</code> so it looks like this:
</p>
<pre>#
# Configuration file for the hp4200 backend
#
#
# HP4200
#usb 0x03f0 0x0105
usb 0x03f0 0x2504
</pre>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Imaging.html" title="Category:Imaging">Imaging</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
