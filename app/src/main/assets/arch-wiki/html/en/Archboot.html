<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Archboot - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Archboot skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Archboot</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p>Archboot is a set of scripts to generate bootable media for CD/USB/PXE, designed for installation or rescue operation.
</p>
<p>It only runs in RAM, without any special filesystems like squashfs, thus it is limited to the RAM which is installed in your system.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#The_difference_to_the_archiso_install_media"><span class="tocnumber">2</span> <span class="toctext">The difference to the archiso install media</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Archboot_ISO_Releases"><span class="tocnumber">3</span> <span class="toctext">Archboot ISO Releases</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Burning_Release"><span class="tocnumber">3.1</span> <span class="toctext">Burning Release</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#PXE_booting_.2F_Rescue_system"><span class="tocnumber">3.2</span> <span class="toctext">PXE booting / Rescue system</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Supported_boot_modes_of_Archboot_media"><span class="tocnumber">3.3</span> <span class="toctext">Supported boot modes of Archboot media</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#How_to_do_a_remote_installation_with_ssh.3F"><span class="tocnumber">3.4</span> <span class="toctext">How to do a remote installation with ssh?</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Interactive_setup_features"><span class="tocnumber">3.5</span> <span class="toctext">Interactive setup features</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#FAQ.2C_Known_Issues_and_limitations"><span class="tocnumber">3.6</span> <span class="toctext">FAQ, Known Issues and limitations</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#History"><span class="tocnumber">3.7</span> <span class="toctext">History</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Bugs"><span class="tocnumber">3.8</span> <span class="toctext">Bugs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Archboot_BETA_ISO_Release"><span class="tocnumber">4</span> <span class="toctext">Archboot BETA ISO Release</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Links"><span class="tocnumber">5</span> <span class="toctext">Links</span></a></li>
<li class="toclevel-1 tocsection-14">
<a href="#Howto:_Create_image_files"><span class="tocnumber">6</span> <span class="toctext">Howto: Create image files</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Requirements"><span class="tocnumber">6.1</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Create_archboot_chroots"><span class="tocnumber">6.2</span> <span class="toctext">Create archboot chroots</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Install_archboot_and_update_to_latest_packages"><span class="tocnumber">6.3</span> <span class="toctext">Install archboot and update to latest packages</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Generate_images"><span class="tocnumber">6.4</span> <span class="toctext">Generate images</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=archboot">archboot</a></span> package.
</p>
<h2><span class="mw-headline" id="The_difference_to_the_archiso_install_media">The difference to the archiso install media</span></h2>
<ul>
<li> It provides an additional interactive setup and quickinst script.</li>
<li> It contains [core] repository on media.</li>
<li> It runs a modified Arch Linux system in initramfs.</li>
<li> It is restricted to RAM usage, everything which is not necessary like</li>
</ul>
<dl><dd> man or info pages etc. is not provided.</dd></dl>
<ul>
<li> It doesn't mount anything during boot process.</li>
<li> It supports remote installation through ssh.</li>
</ul>
<h2><span class="mw-headline" id="Archboot_ISO_Releases">Archboot ISO Releases</span></h2>
<ul><li> Hybrid image files and torrents are provided, which include i686/x86_64 and [core] repository,</li></ul>
<dl><dd> network labeled images don't include [core] repository.</dd></dl>
<ul>
<li> Please check md5sum before using it.</li>
<li> <a rel="nofollow" class="external text" href="https://downloads.archlinux.de/iso/archboot/2016.08">Download 2016.08 „2k16-R2“</a> / <a rel="nofollow" class="external text" href="ftp://ftp.archlinux.org/iso/archboot/Changelog-2016.08-1.txt">Changelog</a> / <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=182439">Forum thread</a>
</li>
</ul>
<dl>
<dd> kernel: 4.7.2-1</dd>
<dd> pacman: 5.0.1-4</dd>
<dd> systemd: 231-1</dd>
<dd> RAM recommendations: 600 MB</dd>
</dl>
<h3><span class="mw-headline" id="Burning_Release">Burning Release</span></h3>
<p>Hybrid image file is a standard CD-burnable image and also a raw disk image. 
</p>
<ul>
<li> Can be burned to CD(RW) media using most CD-burning utilities. </li>
<li> Can be raw-written to a drive using 'dd' or similar utilities. This method is intended for use with USB thumb drives.</li>
</ul>
<pre>'dd if=&lt;imagefile&gt; of=/dev/&lt;yourdevice&gt; bs=1M'</pre>
<h3><span class="mw-headline" id="PXE_booting_.2F_Rescue_system">PXE booting / Rescue system</span></h3>
<p><a rel="nofollow" class="external text" href="https://downloads.archlinux.de/iso/archboot/2016.08/boot">Download 2016.05 „2k16-R1“</a> needed files from the directory.
</p>
<ul>
<li> vmlinuz_i686 + initramfs_i686.img (i686)</li>
<li> vmlinuz_x86_64 +  initramfs_x86_64.img(x86_64)</li>
<li> intel-ucode.img (x86_64/i686)</li>
<li> For PXE booting add the kernel and initrd to your tftp setup and you will get a running installation/rescue system.</li>
<li> For Rescue booting add an entry to your bootloader pointing to the kernel and initrd.</li>
</ul>
<h3><span class="mw-headline" id="Supported_boot_modes_of_Archboot_media">Supported boot modes of Archboot media</span></h3>
<ul>
<li> It supports BIOS booting with syslinux.</li>
<li> It supports UEFI/UEFI_CD booting with <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a> and <a href="../en/EFISTUB.html" title="EFISTUB">EFISTUB</a>.</li>
<li> It support UEFI_MIX_MODE booting with grub.</li>
<li> It supports Secure Boot with prebootloader.</li>
<li> It supports grub(2)'s iso loopback support.</li>
</ul>
<dl>
<dd> variables used (below for example):</dd>
<dd> iso_loop_dev=PARTUUID=XXXX</dd>
<dd> iso_loop_path=/blah/archboot.iso</dd>
</dl>
<pre>menuentry "Archboot" --class iso {
loopback loop (hdX,X)/&lt;archboot.iso&gt;
linux (loop)/boot/vmlinuz_x86_64 iso_loop_dev=/dev/sdXX iso_loop_path=/&lt;archboot.iso&gt;
initrd (loop)/boot/initramfs_x86_64.img
}</pre>
<ul><li> It supports booting using syslinux's memdisk (only in BIOS mode).</li></ul>
<pre>menuentry "Archboot Memdisk" {
   linux16 /memdisk iso
   initrd16 hd(X,X)/&lt;archboot.iso&gt;
}</pre>
<h3><span class="mw-headline" id="How_to_do_a_remote_installation_with_ssh.3F">How to do a remote installation with ssh?</span></h3>
<ul>
<li> During boot all network interfaces will try to obtain an IP address through dhcp.</li>
<li> root password is not set by default! If you need privacy during installation set a password.</li>
</ul>
<pre>'ssh root@&lt;yourip&gt;'</pre>
<h3><span class="mw-headline" id="Interactive_setup_features">Interactive setup features</span></h3>
<ul>
<li> Media and Network installation mode</li>
<li> Changing keymap and consolefont</li>
<li> Changing time and date</li>
<li> Setup network with netctl</li>
<li> Preparing storage disk, like auto-prepare, partitioning, GUID (gpt) support, 4k sector drive support etc.</li>
<li> Creation of software raid/raid partitions, lvm2 devices and luks encrypted devices</li>
<li> Supports standard linux,raid/raid_partitions,dmraid/fakeraid,lvm2 and encrypted devices</li>
<li> Filesystem support: ext2/3/4, btrfs, f2fs, nilfs2, reiserfs,xfs,jfs,ntfs-3g,vfat</li>
<li> Name scheme support: PARTUUID, PARTLABEL, FSUUID, FSLABEL and KERNEL</li>
<li> Mount support of grub(2) loopback and memdisk installation media</li>
<li> Package selection support</li>
<li> hwdetect script is used for preconfiguration</li>
<li> Auto/Preconfiguration of fstab, kms mode, ssd, mkinitcpio.conf, systemd, crypttab and mdadm.conf</li>
<li> Configuration of basic system files</li>
<li> Setting root password</li>
<li> grub(2) (BIOS and UEFI), refind-efi, systemd-boot, syslinux (BIOS and UEFI) bootloader support</li>
</ul>
<h3><span class="mw-headline" id="FAQ.2C_Known_Issues_and_limitations">FAQ, Known Issues and limitations</span></h3>
<ul>
<li> Release specific known issues and workarounds are posted in changelog files.</li>
<li> Check also the forum threads for posted fixes and workarounds.</li>
<li> Why screen stays blank or other weird screen issues happen?</li>
</ul>
<dl><dd><dl><dd> Some hardware doesn't like the KMS activation, use radeon.modeset=0, i915.modeset=0 or nouveau.modeset=0 on boot prompt.</dd></dl></dd></dl>
<ul><li> dmraid/fakeraid might be broken on some boards, support is not perfect here. </li></ul>
<dl><dd><dl>
<dd> The reason is there are so many different hardware components out there. At the moment 1.0.0rc16 is included, with latest fedora patchset, development has been stopped.</dd>
<dd> mdadm supports some isw and ddf fakeraid chipsets, but assembling during boot is deactivated in /etc/mdadm.conf! </dd>
</dl></dd></dl>
<ul><li> grub2 cannot detect correct bios boot order:</li></ul>
<dl><dd><dl>
<dd> It may happen that hd(x,x) entries are not correct, thus first reboot may not work. </dd>
<dd> Reason: grub cannot detect bios boot order. </dd>
<dd> Fix: Either change bios boot order or change menu.lst to correct entries after successful boot. This cannot be fixed it is a restriction in grub2!</dd>
</dl></dd></dl>
<ul><li> Why is parted used in setup routine, instead of cfdisk in msdos partitiontable mode?</li></ul>
<dl><dd><dl>
<dd> parted is the only linux partition program that can handle all type of things the setup routine offers.</dd>
<dd> cfdisk cannot handle GPT/GUID nor it can allign partitions correct with 1MB spaces for 4k sector disks.</dd>
<dd> cfdisk is a nice tool but is too limited to be the standard partitioner anymore.</dd>
<dd> cfdisk is still included but has to be run in an other terminal.</dd>
</dl></dd></dl>
<h3><span class="mw-headline" id="History">History</span></h3>
<p>History of old releases can be found <a rel="nofollow" class="external text" href="ftp://ftp.archlinux.org/iso/archboot/history">here</a>.
</p>
<h3><span class="mw-headline" id="Bugs">Bugs</span></h3>
<p><a rel="nofollow" class="external text" href="https://bugs.archlinux.org">Arch Linux Bugtracker</a>
</p>
<h2><span class="mw-headline" id="Archboot_BETA_ISO_Release">Archboot BETA ISO Release</span></h2>
<ul>
<li> Hybrid image file is provided, which only supports network installation. </li>
<li> Please read the according Changelog files for RAM limitations.</li>
<li> Please check md5sum before using it.</li>
<li> No beta ISO available at the moment.</li>
</ul>
<h2><span class="mw-headline" id="Links">Links</span></h2>
<ul><li> <a rel="nofollow" class="external text" href="https://projects.archlinux.org/archboot.git/">GIT repository</a>
</li></ul>
<h2><span class="mw-headline" id="Howto:_Create_image_files">Howto: Create image files</span></h2>
<p>(Quick regeneration of installation media with latest available core packages)
</p>
<h3><span class="mw-headline" id="Requirements">Requirements</span></h3>
<ul>
<li> x86_64 architecture</li>
<li> ~ 3GB free space on disk</li>
</ul>
<h3><span class="mw-headline" id="Create_archboot_chroots">Create archboot chroots</span></h3>
<ul><li> Install archboot:</li></ul>
<pre># pacman -S archboot
# mkdir -p <i>x86_64_chroot</i>/var/lib/pacman
# pacman --root "<i>x86_64_chroot</i>" -Sy base --noconfirm --noprogressbar
</pre>
<ul><li> For i686 containers:</li></ul>
<pre># mkdir -p <i>i686_chroot</i>/var/lib/pacman
# linux32 pacman --root "<i>i686_chroot</i>" -Sy base --noconfirm --noprogressbar
</pre>
<ul><li> Enter archboot x86_64 container:</li></ul>
<pre># systemd-nspawn --capability=CAP_MKNOD --register=no -M $(uname -m) -D <i>x86_64_chroot</i>
</pre>
<ul><li> Enter archboot i686 container:</li></ul>
<pre># linux32 systemd-nspawn --capability=CAP_MKNOD --register=no -M $(uname -m) -D <i>i686_chroot</i>
</pre>
<h3><span class="mw-headline" id="Install_archboot_and_update_to_latest_packages">Install archboot and update to latest packages</span></h3>
<p>Install in both chroots archboot:
</p>
<pre># pacman -S archboot
</pre>
<p>Update in both chroots to latest available packages:
</p>
<pre># pacman -Syu
</pre>
<h3><span class="mw-headline" id="Generate_images">Generate images</span></h3>
<pre>
# run in both chroots (needs quite some time ...)
archboot-allinone.sh -t
# put the generated tarballs in one directory and run (needs quite some time ...)
archboot-allinone.sh -g
</pre>
<ul><li> Finished you get a bunch of images.</li></ul>
<p>Have fun!
tpowa
(Archboot Developer)
</p>
</div>
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:System_recovery.html" title="Category:System recovery">System recovery</a></li>
<li><a href="../en/Category:Getting_and_installing_Arch.html" title="Category:Getting and installing Arch">Getting and installing Arch</a></li>
<li><a href="../en/Category:Live_Arch_systems.html" title="Category:Live Arch systems">Live Arch systems</a></li>
</ul>
</div></div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
