<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>ownCloud - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-OwnCloud skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">ownCloud</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p><span></span>
</p>
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Nextcloud.html" title="Nextcloud">Nextcloud</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Apache_HTTP_Server.html" title="LAMP" class="mw-redirect">LAMP</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Nginx.html" title="Nginx">Nginx</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/OpenSSL.html" title="OpenSSL">OpenSSL</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/WebDAV.html" title="WebDAV">WebDAV</a></li>
</ul>
</div>
<p>From <a href="https://en.wikipedia.org/wiki/ownCloud" class="extiw" title="wikipedia:ownCloud">Wikipedia</a>: "ownCloud is a software suite that provides a location-independent storage area for data (cloud storage)."
The ownCloud installation and configuration mainly depends on what web server and database you decide to run. Currently the wiki discusses <a href="#Apache_configuration">Apache configuration</a> and <a href="#Nginx">Nginx configuration</a>.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Prerequisites"><span class="tocnumber">1</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Database_support"><span class="tocnumber">2.1</span> <span class="toctext">Database support</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Caching"><span class="tocnumber">2.2</span> <span class="toctext">Caching</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Exif_support"><span class="tocnumber">2.3</span> <span class="toctext">Exif support</span></a></li>
<li class="toclevel-2 tocsection-6">
<a href="#Optional_but_recommended_security_hardening"><span class="tocnumber">2.4</span> <span class="toctext">Optional but recommended security hardening</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Setting_strong_permissions_for_the_filesystem"><span class="tocnumber">2.4.1</span> <span class="toctext">Setting strong permissions for the filesystem</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Protection_from_hacking_with_fail2ban"><span class="tocnumber">2.4.2</span> <span class="toctext">Protection from hacking with fail2ban</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Maintenance_associated_with_Arch_package_updates"><span class="tocnumber">3</span> <span class="toctext">Maintenance associated with Arch package updates</span></a></li>
<li class="toclevel-1 tocsection-10">
<a href="#Database_Setup"><span class="tocnumber">4</span> <span class="toctext">Database Setup</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Mariadb"><span class="tocnumber">4.1</span> <span class="toctext">Mariadb</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Webserver_Setup"><span class="tocnumber">5</span> <span class="toctext">Webserver Setup</span></a>
<ul>
<li class="toclevel-2 tocsection-13">
<a href="#Apache_configuration"><span class="tocnumber">5.1</span> <span class="toctext">Apache configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#WebDAV"><span class="tocnumber">5.1.1</span> <span class="toctext">WebDAV</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Running_ownCloud_in_a_subdirectory"><span class="tocnumber">5.1.2</span> <span class="toctext">Running ownCloud in a subdirectory</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16">
<a href="#Nginx"><span class="tocnumber">5.2</span> <span class="toctext">Nginx</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#php-fpm_configuration"><span class="tocnumber">5.2.1</span> <span class="toctext">php-fpm configuration</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-18">
<a href="#uWSGI_configuration"><span class="tocnumber">5.3</span> <span class="toctext">uWSGI configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Configuration"><span class="tocnumber">5.3.1</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Activation"><span class="tocnumber">5.3.2</span> <span class="toctext">Activation</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-21">
<a href="#Synchronization"><span class="tocnumber">6</span> <span class="toctext">Synchronization</span></a>
<ul>
<li class="toclevel-2 tocsection-22">
<a href="#Desktop"><span class="tocnumber">6.1</span> <span class="toctext">Desktop</span></a>
<ul>
<li class="toclevel-3 tocsection-23"><a href="#Calendar"><span class="tocnumber">6.1.1</span> <span class="toctext">Calendar</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#Contacts"><span class="tocnumber">6.1.2</span> <span class="toctext">Contacts</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#Mounting_files_with_davfs2"><span class="tocnumber">6.1.3</span> <span class="toctext">Mounting files with davfs2</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-26"><a href="#Android"><span class="tocnumber">6.2</span> <span class="toctext">Android</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27">
<a href="#Important_notes"><span class="tocnumber">7</span> <span class="toctext">Important notes</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="#SABnzbd"><span class="tocnumber">7.1</span> <span class="toctext">SABnzbd</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#An_all-in-one_alternative_with_Docker"><span class="tocnumber">8</span> <span class="toctext">An all-in-one alternative with Docker</span></a></li>
<li class="toclevel-1 tocsection-30">
<a href="#Troubleshooting"><span class="tocnumber">9</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#Self-signed_certificate_not_accepted"><span class="tocnumber">9.1</span> <span class="toctext">Self-signed certificate not accepted</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Self-signed_certificate_for_Android_devices"><span class="tocnumber">9.2</span> <span class="toctext">Self-signed certificate for Android devices</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Cannot_write_into_config_directory.21"><span class="tocnumber">9.3</span> <span class="toctext">Cannot write into config directory!</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Cannot_create_data_directory_.28.2Fpath.2Fto.2Fdir.29"><span class="tocnumber">9.4</span> <span class="toctext">Cannot create data directory (/path/to/dir)</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#CSync_failed_to_find_a_specific_file."><span class="tocnumber">9.5</span> <span class="toctext">CSync failed to find a specific file.</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Seeing_white_page_after_login"><span class="tocnumber">9.6</span> <span class="toctext">Seeing white page after login</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#GUI_sync_client_fails_to_connect"><span class="tocnumber">9.7</span> <span class="toctext">GUI sync client fails to connect</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Some_files_upload.2C_but_give_an_error_.27Integrity_constraint_violation....27"><span class="tocnumber">9.8</span> <span class="toctext">Some files upload, but give an error 'Integrity constraint violation...'</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#.22Cannot_write_into_apps_directory.22"><span class="tocnumber">9.9</span> <span class="toctext">"Cannot write into apps directory"</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#Security_warnings_even_though_the_recommended_settings_have_been_included_in_nginx.conf"><span class="tocnumber">9.10</span> <span class="toctext">Security warnings even though the recommended settings have been included in nginx.conf</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Password_not_saved"><span class="tocnumber">9.11</span> <span class="toctext">Password not saved</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-42"><a href="#Upload_and_Share_from_File_Manager"><span class="tocnumber">10</span> <span class="toctext">Upload and Share from File Manager</span></a></li>
<li class="toclevel-1 tocsection-43"><a href="#See_also"><span class="tocnumber">11</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Prerequisites">Prerequisites</span></h2>
<p><i>ownCloud</i> needs a <a href="../en/Category:Web_server.html" title="Category:Web server">web server</a>, <a href="../en/PHP.html" title="PHP">PHP</a> and a <a href="../en/Category:Database_management_systems.html" title="Category:Database management systems">database</a>. For instance, a classic <a href="../en/Apache_HTTP_Server.html" title="LAMP" class="mw-redirect">LAMP stack</a> should work fine and is the <a rel="nofollow" class="external text" href="https://doc.owncloud.org/server/8.2/admin_manual/installation/system_requirements.html#recommended-setup-for-running-owncloud">recommended configuration</a>.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=owncloud">owncloud</a></span> package.
</p>
<p>Uncomment the following <a rel="nofollow" class="external text" href="https://doc.owncloud.org/server/8.2/admin_manual/installation/source_installation.html#prerequisites">required</a> extensions in <code>/etc/php/php.ini</code>:
</p>
<pre>gd.so
iconv.so
xmlrpc.so
zip.so
</pre>
<p>It is also <a rel="nofollow" class="external text" href="https://doc.owncloud.org/server/8.2/admin_manual/installation/source_installation.html#prerequisites">recommended</a> to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=php-intl">php-intl</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=php-mcrypt">php-mcrypt</a></span> and uncomment the following extensions:
</p>
<pre>bz2.so
curl.so
intl.so
mcrypt.so
</pre>
<h3><span class="mw-headline" id="Database_support">Database support</span></h3>
<p>Depending on which database backend you are going to use, uncomment the following extensions in <code>/etc/php/php.ini</code>:
</p>
<ul>
<li> For <a href="../en/MySQL.html" title="MySQL">MySQL</a>, uncomment <code>pdo_mysql.so</code>.</li>
<li> For <a href="../en/PostgreSQL.html" title="PostgreSQL">PostgreSQL</a>, uncomment <code>pdo_pgsql.so</code> and <code>pgsql.so</code>, and install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=php-pgsql">php-pgsql</a></span>.</li>
<li> For <a href="../en/SQLite.html" title="SQLite">SQLite</a>, uncomment <code>pdo_sqlite.so</code> and <code>sqlite3.so</code>, and install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=php-sqlite">php-sqlite</a></span>.</li>
</ul>
<h3><span class="mw-headline" id="Caching">Caching</span></h3>
<p>For enhanced performance, it is recommended to implement PHP caching using APCu, as described in <a href="../en/PHP.html#APCu" title="PHP">PHP#APCu</a>. It is also beneficial to enable OPCache, as described in <a href="../en/PHP.html#OPCache" title="PHP">PHP#OPCache</a>.
</p>
<p>Then, after enabling APCu, add the following directive to <code>/etc/webapps/owncloud/config/config.php</code>:
</p>
<pre>'memcache.local' =&gt; '\OC\Memcache\APCu',
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Make sure to add <code>apc.enable_cli=1</code> under the <code>[apc]</code> portion of your <a href="../en/PHP.html#Configuration" title="PHP">PHP configuration</a> and uncomment <code>extension=apcu.so</code> in <code>/etc/php/conf.d/apcu.ini</code>. As of 2015-07-12, <a rel="nofollow" class="external text" href="https://github.com/owncloud/core/issues/17329#issuecomment-119248944">several</a> <a rel="nofollow" class="external text" href="https://github.com/owncloud/documentation/issues/1233#issuecomment-120664134">things</a> will not work properly without it.</div>
<p>See <a rel="nofollow" class="external text" href="https://doc.owncloud.org/server/8.1/admin_manual/configuration_server/config_sample_php_parameters.html#memory-caching-backend-configuration">the official documentation</a>.
</p>
<h3><span class="mw-headline" id="Exif_support">Exif support</span></h3>
<p>Additionally enable exif support by installing the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=exiv2">exiv2</a></span> package and uncommenting the <code>exif.so</code> extension in <code>php.ini</code>.
</p>
<h3><span class="mw-headline" id="Optional_but_recommended_security_hardening">Optional but recommended security hardening</span></h3>
<h4><span class="mw-headline" id="Setting_strong_permissions_for_the_filesystem">Setting strong permissions for the filesystem</span></h4>
<p>From the <a rel="nofollow" class="external text" href="https://doc.owncloud.org/server/8.2/admin_manual/installation/installation_wizard.html#setting-strong-directory-permissions">official installation manual</a>:
</p>
<dl><dd>For hardened security we recommend setting the permissions on your ownCloud directories as strictly as possible, and for proper server operations. This should be done immediately after the initial installation and before running the setup. Your HTTP user must own the <code>config/</code>, <code>data/</code> and <code>apps/</code> directories so that you can configure ownCloud, create, modify and delete your data files, and install apps via the ownCloud Web interface.</dd></dl>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">oc-perms</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
#!/bin/bash
ocpath='/usr/share/webapps/owncloud'
htuser='http'
htgroup='http'
rootuser='root'

printf "Creating possible missing Directories\n"
mkdir -p $ocpath/data
mkdir -p $ocpath/assets

printf "chmod Files and Directories\n"
find ${ocpath}/ -type f -print0 | xargs -0 chmod 0640
find ${ocpath}/ -type d -print0 | xargs -0 chmod 0750

printf "chown Directories\n"
chown -R ${rootuser}:${htgroup} ${ocpath}/
chown -R ${htuser}:${htgroup} ${ocpath}/apps/
chown -R ${htuser}:${htgroup} ${ocpath}/config/
chown -R ${htuser}:${htgroup} ${ocpath}/data/
chown -R ${htuser}:${htgroup} ${ocpath}/themes/
chown -R ${htuser}:${htgroup} ${ocpath}/assets/

chmod +x ${ocpath}/occ

printf "chmod/chown .htaccess\n"
if [ -f ${ocpath}/.htaccess ]
 then
  chmod 0644 ${ocpath}/.htaccess
  chown ${rootuser}:${htgroup} ${ocpath}/.htaccess
fi
if [ -f ${ocpath}/data/.htaccess ]
 then
  chmod 0644 ${ocpath}/data/.htaccess
  chown ${rootuser}:${htgroup} ${ocpath}/data/.htaccess
fi
</pre>
<p>If you have customized your ownCloud installation and your filepaths are different than the standard installation, then modify this script accordingly.
</p>
<h4><span class="mw-headline" id="Protection_from_hacking_with_fail2ban">Protection from hacking with fail2ban</span></h4>
<p>Setting up <a href="../en/Fail2ban.html" title="Fail2ban">fail2ban</a> is highly recommended.  Once installed, create the following files:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fail2ban/filter.d/owncloud.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[Definition]
failregex={"reqId":".*","remoteAddr":".*","app":"core","message":"Login failed: '.*' \(Remote IP: '&lt;HOST&gt;'\)","level":2,"time":".*"}

ignoreregex =
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fail2ban/jail.local</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[owncloud]
enabled = true
filter  = owncloud
port    =  http,https
logpath = /usr/share/webapps/owncloud/data/owncloud.log
# optionally whitelist internal LAN IP addresses
ignoreip = 192.168.1.1/24
</pre>
<p><a href="../en/Systemd.html#Using_units" title="Restart" class="mw-redirect">Restart</a> the <code>fail2ban</code> service.  One can test the configuration by running the following:
</p>
<pre>fail2ban-regex /usr/share/webapps/owncloud/data/owncloud.log /etc/fail2ban/filter.d/owncloud.conf -v
</pre>
<h2><span class="mw-headline" id="Maintenance_associated_with_Arch_package_updates">Maintenance associated with Arch package updates</span></h2>
<p>When the Arch owncloud package is updated via pacman, it may become necessary to connect via the web interface to manually trigger an update of the associated files.  Alternatively, one can run use <code>/usr/share/webapps/owncloud/occ upgrade</code> from the shell but it must be run as the <i>http</i> user:
</p>
<pre># sudo -u http /usr/share/webapps/owncloud/occ upgrade
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Failure to do so will render the mobile app unable to connect.</div>
<h2><span class="mw-headline" id="Database_Setup">Database Setup</span></h2>
<h3><span class="mw-headline" id="Mariadb">Mariadb</span></h3>
<p>After <a href="../en/MySQL.html#Installation" title="MySQL">MySQL#Installation</a> and the initial setup described therein, a database and user for owncloud needs to be created within mariadb:
</p>
<pre>$ mysql -u root -p
create database owncloud;
create user ownclouduser@localhost identified by 'password';
grant all privileges on owncloud.* to ownclouduser@localhost identified by 'password';
flush privileges;
exit;
</pre>
<h2><span class="mw-headline" id="Webserver_Setup">Webserver Setup</span></h2>
<h3><span class="mw-headline" id="Apache_configuration">Apache configuration</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Make sure PHP is enabled, as described in <a href="../en/Apache_HTTP_Server.html#PHP" title="Apache HTTP Server">Apache HTTP Server#PHP</a>.</div>
<p>Copy the Apache configuration file to its configuration directory:
</p>
<pre># cp /etc/webapps/owncloud/apache.example.conf /etc/httpd/conf/extra/owncloud.conf
</pre>
<p>And include it at the bottom of <code>/etc/httpd/conf/httpd.conf</code>:
</p>
<pre>Include conf/extra/owncloud.conf
</pre>
<p>Now restart Apache (<code>httpd.service</code>).
</p>
<p>Open <a rel="nofollow" class="external free" href="http://localhost/owncloud">http://localhost/owncloud</a> in your browser. You should now be able to create a user account and follow the installation wizard.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Moving your data folder to another location might conflict with the open_basedir option set in the default apache configuration file.</div>
<h4><span class="mw-headline" id="WebDAV">WebDAV</span></h4>
<p>ownCloud comes with its own <a href="../en/WebDAV.html" title="WebDAV">WebDAV</a> implementation enabled, which may conflict with the one shipped with Apache. If you have enabled WebDAV (not enabled by default with Apache), disable <code>mod_dav</code> and <code>mod_dav_fs</code> in <code>/etc/httpd/conf/httpd.conf</code>. See <a rel="nofollow" class="external free" href="https://forum.owncloud.org/viewtopic.php?f=17&amp;t=7240">https://forum.owncloud.org/viewtopic.php?f=17&amp;t=7240</a> for details.
</p>
<h4><span class="mw-headline" id="Running_ownCloud_in_a_subdirectory">Running ownCloud in a subdirectory</span></h4>
<p>By including the default <code>owncloud.conf</code> in <code>httpd.conf</code>, ownCloud will take control of port 80 and your localhost domain. 
</p>
<p>If you would like to have ownCloud run in a subdirectory, then edit the <code>/etc/httpd/conf/extra/owncloud.conf</code> you included and comment out the <code>&lt;VirtualHost *:80&gt; ... &lt;/VirtualHost&gt;</code> part of the include file.
</p>
<h3><span class="mw-headline" id="Nginx">Nginx</span></h3>
<h4><span class="mw-headline" id="php-fpm_configuration">php-fpm configuration</span></h4>
<p><i>ownCloud</i> official documentation uses <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=php-fpm">php-fpm</a></span> for <a href="../en/PHP.html" title="PHP">PHP</a> and as such it is the best supported configuration. See <a href="../en/Nginx.html#PHP_implementation" title="Nginx">Nginx#PHP implementation</a> to set up <i>php-fpm</i> and <a href="../en/Nginx.html#TLS.2FSSL" title="Nginx">Nginx#TLS/SSL</a> to acquire and/or set up a TLS certificate.
</p>
<p>By default, the only things you need to change from the <a rel="nofollow" class="external text" href="https://doc.owncloud.org/server/9.0/admin_manual/installation/nginx_configuration.html">recommended server configuration</a> for ownCloud to run on Arch Linux are the <code>server_name</code>, <code>ssl_certificate</code>, <code>ssl_certificate_key</code>, <code>root</code> and <code>fastcgi_pass</code> directives:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nginx/nginx.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
server {
  listen 80;
  server_name cloud.example.com;
  # enforce https
  return 301 https://$server_name$request_uri;
}

server {
  listen 443 ssl;
  server_name cloud.example.com;

  ssl_certificate /path/to/domain-cert.crt;
  ssl_certificate_key /path/to/private-key.key;

  # Add headers to serve security related headers
  add_header Strict-Transport-Security "max-age=15768000; includeSubDomains; preload;";
  add_header X-Content-Type-Options nosniff;
  add_header X-Frame-Options "SAMEORIGIN";
  add_header X-XSS-Protection "1; mode=block";
  add_header X-Robots-Tag none;
  add_header X-Download-Options noopen;
  add_header X-Permitted-Cross-Domain-Policies none;

  # Path to the root of your installation
  root /usr/share/webapps/owncloud/;
  # set max upload size
  client_max_body_size 10G;
  fastcgi_buffers 64 4K;

  # Disable gzip to avoid the removal of the ETag header
  gzip off;

  # Uncomment if your server is build with the ngx_pagespeed module
  # This module is currently not supported.
  #pagespeed off;

  index index.php;
  error_page 403 /core/templates/403.php;
  error_page 404 /core/templates/404.php;

  rewrite ^/.well-known/carddav /remote.php/carddav/ permanent;
  rewrite ^/.well-known/caldav /remote.php/caldav/ permanent;

  # The following 2 rules are only needed for the user_webfinger app.
  # Uncomment it if you're planning to use this app.
  #rewrite ^/.well-known/host-meta /public.php?service=host-meta last;
  #rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;

  location = /robots.txt {
    allow all;
    log_not_found off;
    access_log off;
  }

  location ~ ^/(build|tests|config|lib|3rdparty|templates|data)/ {
    deny all;
  }

  location ~ ^/(?:\.|autotest|occ|issue|indie|db_|console) {
    deny all;
  }

  location / {
    rewrite ^/remote/(.*) /remote.php last;
    rewrite ^(/core/doc/[^\/]+/)$ $1/index.html;
    try_files $uri $uri/ =404;
  }

  location ~ \.php(?:$|/) {
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_param PATH_INFO $fastcgi_path_info;
    fastcgi_param HTTPS on;
    fastcgi_param modHeadersAvailable true; #Avoid sending the security headers twice
    fastcgi_pass unix:/run/php-fpm/php-fpm.sock;
    fastcgi_intercept_errors on;
  }

  # Adding the cache control header for js and css files
  # Make sure it is BELOW the location ~ \.php(?:$|/) { block
  location ~* \.(?:css|js)$ {
    add_header Cache-Control "public, max-age=7200";
    # Add headers to serve security related headers
    add_header Strict-Transport-Security "max-age=15768000; includeSubDomains; preload;";
    add_header X-Content-Type-Options nosniff;
    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-XSS-Protection "1; mode=block";
    add_header X-Robots-Tag none;
    add_header X-Download-Options noopen;
    add_header X-Permitted-Cross-Domain-Policies none;
    # Optional: Don't log access to assets
    access_log off;
  }

  # Optional: Don't log access to other assets
  location ~* \.(?:jpg|jpeg|gif|bmp|ico|png|swf)$ {
    access_log off;
  }
}
</pre>
<p><i>php-fpm</i> is already configured to run as the user <code>http</code>, so assuming you are using the permissions described above it should function fine. It is not recommended to manually copy the <code>config.example.php</code> in the ownCloud configuration, and instead let it be automatically generated on first run.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Automatic configuration relies on the <code>data/</code> directory creation, as done in <a href="#Setting_strong_permissions_for_the_filesystem">#Setting strong permissions for the filesystem</a>.</div>
<h3><span class="mw-headline" id="uWSGI_configuration">uWSGI configuration</span></h3>
<p>You can run <i>ownCloud</i> in its own process and service by using the <a href="../en/UWSGI.html" title="UWSGI">uWSGI</a> application server with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=uwsgi-plugin-php">uwsgi-plugin-php</a></span>. This allows you to define a <a href="../en/PHP.html#Configuration" title="PHP">PHP  configuration</a> only for this instance of PHP, without the need to edit the global <code>php.ini</code> and thus keeping your web application configurations compartmentalized. <i>uWSGI</i> itself has a wealth of features to limit the resource use and to harden the security of the application, and by being a separate process it can run under its own user.
</p>
<h4><span class="mw-headline" id="Configuration">Configuration</span></h4>
<p>The only part that differs from <a href="#php-fpm_configuration">#php-fpm configuration</a> is the <code>location ~ \.php(?:$|/) {}</code> block:
</p>
<pre>
  location ~ \.php(?:$|/) {
    include uwsgi_params;
    uwsgi_modifier1 14;
    # Avoid duplicate headers confusing OC checks
    uwsgi_hide_header X-Frame-Options;
    uwsgi_hide_header X-XSS-Protection;
    uwsgi_hide_header X-Content-Type-Options;
    uwsgi_hide_header X-Robots-Tag;
    uwsgi_pass unix:/run/uwsgi/owncloud.sock;
    }
</pre>
<p>Then create a config file for <i>uWSGI</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/uwsgi/owncloud.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[uwsgi]
; load the required plugins
plugins = php
; force the sapi name to 'apache', this will enable the opcode cache  
php-sapi-name = apache

; set master process name and socket
; '%n' refers to the name of this configuration file without extension
procname-master = uwsgi %n
master = true
socket = /run/uwsgi/%n.sock

; drop privileges
uid    = http
gid    = http
umask  = 027

; run with at least 1 process but increase up to 4 when needed
processes = 4
cheaper = 1

; reload whenever this config file changes
; %p is the full path of the current config file
touch-reload = %p

; disable uWSGI request logging
;disable-logging = true

; enforce a DOCUMENT_ROOT
php-docroot     = /usr/share/webapps/%n
; limit allowed extensions
php-allowed-ext = .php
; and search for index.php if required
php-index = index.php

; set php configuration for this instance of php, no need to edit global php.ini
php-set = date.timezone=Etc/UTC
;php-set = open_basedir=/tmp/:/usr/share/webapps/owncloud:/etc/webapps/owncloud:/dev/urandom
php-set = expose_php=false
; avoid security risk of leaving sessions in world-readable /tmp
php-set = session.save_path=/usr/share/webapps/owncloud/data

; port of php directives set upstream in /usr/share/webapps/owncloud/.user.ini for use with PHP-FPM
php-set = upload_max_filesize=513M
php-set = post_max_size=513M
php-set = memory_limit=512M
php-set = output_buffering=off

; load all extensions only in this instance of php, no need to edit global php.ini
;; required core modules
php-set = extension=gd.so
php-set = extension=iconv.so
;php-set = extension=zip.so     # enabled by default in global php.ini

;; database connectors
;; uncomment your selected driver
;php-set = extension=pdo_sqlite.so
;php-set = extension=pdo_mysql.so
;php-set = extension=pdo_pgsql.so

;; recommended extensions
;php-set = extension=curl.so    # enabled by default in global php.ini
php-set = extension=bz2.so
php-set = extension=intl.so
php-set = extension=mcrypt.so

;; required for specific apps
;php-set = extension=ldap.so    # for LDAP integration
;php-set = extension=ftp.so     # for FTP storage / external user authentication
;php-set = extension=imap.so    # for external user authentication, requires php-imap

;; recommended for specific apps
;php-set = extension=exif.so    # for image rotation in pictures app, requires exiv2
;php-set = extension=gmp.so     # for SFTP storage

;; for preview generation
;; provided by packages in AUR
; php-set = extension=imagick.so

; opcache
php-set = zend_extension=opcache.so

; user cache
; provided by php-acpu, to be enabled **either** here **or** in /etc/php/conf.d/apcu.ini
php-set = extension=apcu.so
; per https://github.com/krakjoe/apcu/blob/simplify/INSTALL
php-set = apc.ttl=7200
php-set = apc.enable_cli=1

cron2 = minute=-15,unique=1 /usr/bin/php -f /usr/share/webapps/owncloud/cron.php 1&gt;/dev/null
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>
<ul>
<li> Do not forget to set your timezone and uncomment the required database connector in the uWSGI config file</li>
<li> Starting with PHP 7, the <a href="../en/PHP.html#Configuration" title="PHP">open_basedir</a> directive is <a rel="nofollow" class="external text" href="https://www.archlinux.org/news/php-70-packages-released/">no longer set by default</a> to keep in line with upstream. A commented out version functional until at least OC 8.2 has been left in the config for users wishing to harden security. Be aware that it may <a rel="nofollow" class="external text" href="https://github.com/owncloud/core/search?q=open_basedir&amp;type=Issues&amp;utf8=%E2%9C%93">occasionally break things</a>.</li>
</ul>
</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>The way the <a rel="nofollow" class="external text" href="https://doc.owncloud.org/server/9.0/admin_manual/configuration_server/background_jobs_configuration.html">ownCloud background job</a> is currently set up with <a rel="nofollow" class="external text" href="https://uwsgi-docs.readthedocs.org/en/latest/Cron.html">uWSGI cron</a> will make use of the default global configuration from <code>/etc/php/php.ini</code>. This means that none of the specific parameters defined (e.g. required modules) will be enabled, <a rel="nofollow" class="external text" href="https://github.com/owncloud/core/issues/12678#issuecomment-66114448">leading to various issues</a>. One solution is to copy <code>/etc/php/php.ini</code> to e.g. <code>/etc/uwsgi/cron-php.ini</code>, make the required modifications there (mirroring <code>/etc/uwsgi/owncloud.ini</code> parameters) and referencing it in the cron directive by adding the <code>-c /etc/uwsgi/cron-php.ini</code> option to <i>php</i> invocation.</div>
<h4><span class="mw-headline" id="Activation">Activation</span></h4>
<p><a href="../en/UWSGI.html" title="UWSGI">uWSGI</a> provides a <a href="../en/Systemd.html#Using_units" title="Systemd">template unit</a> that allows to start and enable application using their configuration file name as instance identifier. For example:
</p>
<pre># systemctl start uwsgi@owncloud.socket
</pre>
<p>would start it on demand referencing the configuration file <code>/etc/uwsgi/owncloud.ini</code>. 
</p>
<p>To enable the uwsgi service by default at start-up, run:
</p>
<pre># systemctl enable uwsgi@owncloud.socket
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Here we make use of <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/socket-activation.html">systemd socket activation</a> to prevent unnecessary resources consumption when no connections are made to the instance. If you would rather have it constantly active, simply remove the <code>.socket</code> part to start and enable the service instead.</div>
<p>See also <a href="../en/UWSGI.html#Starting_service" title="UWSGI">UWSGI#Starting service</a>.
</p>
<h2><span class="mw-headline" id="Synchronization">Synchronization</span></h2>
<h3><span class="mw-headline" id="Desktop">Desktop</span></h3>
<p>The official client can be installed with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=owncloud-client">owncloud-client</a></span> package. Alternative versions are avaiable in the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/owncloud-client-beta/">owncloud-client-beta</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/owncloud-client-beta">aur-mirror</a>]</sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/owncloud-client-git/">owncloud-client-git</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/owncloud-client-qt5/">owncloud-client-qt5</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/owncloud-client-qt5">aur-mirror</a>]</sup>. Its use is described in <a rel="nofollow" class="external text" href="http://doc.owncloud.org/server/7.0/user_manual/files/sync.html">this page</a> of the documentation.
</p>
<h4><span class="mw-headline" id="Calendar">Calendar</span></h4>
<p>To access your <i>ownCloud</i> calendars using Mozilla <a href="../en/Thunderbird.html" title="Thunderbird">Thunderbird</a>'s <a href="../en/Thunderbird.html#Lightning_-_Calendar" title="Thunderbird">Lightning calendar</a> you would use the following URL:
</p>
<pre>https://ADDRESS/remote.php/caldav/calendars/USERNAME/CALENDARNAME
</pre>
<p>To access your <i>ownCloud</i> calendars using CalDAV-compatible programs like Kontact or <a href="../en/GNOME/Evolution.html" title="Evolution" class="mw-redirect">Evolution</a>, you would use the following URL:
</p>
<pre>https://ADDRESS/remote.php/caldav
</pre>
<p>For details see the <a rel="nofollow" class="external text" href="http://doc.owncloud.org/server/7.0/user_manual/pim/calendar.html#synchronizing-calendars-using-caldav">official documentation</a>.
</p>
<h4><span class="mw-headline" id="Contacts">Contacts</span></h4>
<p>To sync contacts with <a href="../en/Thunderbird.html" title="Thunderbird">Thunderbird</a> you must install the <a rel="nofollow" class="external text" href="http://www.sogo.nu/downloads/frontends.html">SOGo frontend</a>, <a href="../en/Thunderbird.html#Lightning_-_Calendar" title="Thunderbird">Lightning extension</a> and follow <a rel="nofollow" class="external text" href="http://doc.owncloud.org/server/7.0/user_manual/pim/sync_thunderbird.html">those instructions</a> from the official doc.
</p>
<h4><span class="mw-headline" id="Mounting_files_with_davfs2">Mounting files with davfs2</span></h4>
<p>If you want to mount your ownCloud permanently install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=davfs2">davfs2</a></span> (as described in <a href="../en/Davfs.html" title="Davfs">Davfs</a>) first.
</p>
<p>Considering your ownCloud were at <code><a rel="nofollow" class="external free" href="https://own.example.com">https://own.example.com</a></code>, your WebDAV URL would be <code><a rel="nofollow" class="external free" href="https://own.example.com/remote.php/webdav">https://own.example.com/remote.php/webdav</a></code> (as of ownCloud 6.0).
</p>
<p>To mount your ownCloud, use:
</p>
<pre># mount -t davfs <a rel="nofollow" class="external free" href="https://own.example.com/remote.php/webdav">https://own.example.com/remote.php/webdav</a> /path/to/mount
</pre>
<p>You can also create an entry for this in <code>/etc/fstab</code>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
<a rel="nofollow" class="external free" href="https://own.example.com/remote.php/webdav">https://own.example.com/remote.php/webdav</a> /path/to/mount davfs rw,user,noauto 0 0
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>In order to allow automount you can also store your username (and password if you like) in a file as described in <a href="../en/Davfs.html#Mounting_as_regular_user" title="Davfs">Davfs#Mounting as regular user</a>.</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong> If creating/copying files is not possible, while the same operations work on directories, see <a href="../en/Davfs.html#Creating.2Fcopying_files_not_possible" title="Davfs">Davfs#Creating/copying files not possible</a>.</div>
<h3><span class="mw-headline" id="Android">Android</span></h3>
<p>There is an official Android app available for a <a rel="nofollow" class="external text" href="https://play.google.com/store/apps/details?id=at.bitfire.davdroid">small donation on the Play Store</a> and for free <a rel="nofollow" class="external text" href="https://f-droid.org/app/at.bitfire.davdroid">on F-Droid</a>.
</p>
<p>To enable contacts and calendar sync:
</p>
<ul><li> if using Android 4+:
<ol>
<li> download <a rel="nofollow" class="external autonumber" href="https://davdroid.bitfire.at/">[1]</a> (<a rel="nofollow" class="external text" href="https://play.google.com/store/apps/details?id=at.bitfire.davdroid">Play Store</a>, <a rel="nofollow" class="external text" href="https://f-droid.org/app/at.bitfire.davdroid">F-Droid</a>)</li>
<li> Enable mod_rewrite.so in httpd.conf</li>
<li> create a new DAVdroid account in the <i>Account</i> settings, and specify your "short" server address and login/password couple, e.g. <code>https://cloud.example.com</code> (there is no need for the <code>/remote.php/{carddav,webdav}</code> part if you configured your web server with the proper redirections, as illustrated previously in the article; <i>DAVdroid</i> will find itself the right URLs)</li>
</ol>
</li></ul>
<dl><dd>For an older version of the app but with still useful info, see <a rel="nofollow" class="external text" href="http://www.slsmk.com/sync-android-contacts-calendar-and-files-to-owncloud/">this article</a>.</dd></dl>
<ul><li> if using an Android version below 4.0 and favouring Free/Libre software solutions, give a try to <a rel="nofollow" class="external text" href="https://f-droid.org/repository/browse/?fdfilter=caldav&amp;fdid=com.morphoss.acal">aCal</a> for calendar and contacts sync or CalDAV Sync Adapter (<a rel="nofollow" class="external text" href="https://f-droid.org/repository/browse/?fdfilter=caldav&amp;fdid=org.gege.caldavsyncadapter">F-Droid</a>) for just calendar sync; if you are willing to use non-libre software, then the <a rel="nofollow" class="external text" href="http://doc.owncloud.org/server/7.0/user_manual/pim/contacts.html#synchronizing-with-android">recommended solution</a> is to use <a rel="nofollow" class="external text" href="http://dmfs.org/">CardDAV-Sync and CalDAV-Sync</a>.</li></ul>
<h2><span class="mw-headline" id="Important_notes">Important notes</span></h2>
<ul><li> When using a subdomain (like cloud.example.net), make sure it is covered by your certificate. Otherwise, connection via the ownCloud client or webdav might fail.</li></ul>
<ul><li> If you are planning on using ownCloud's <a rel="nofollow" class="external text" href="http://owncloud.org/sync-clients/">sync-clients</a>, make sure to have <a href="../en/Network_Time_Protocol_daemon.html" title="Ntpd" class="mw-redirect">ntpd</a> installed and running on your ownCloud server, otherwise the sync-clients will fail.</li></ul>
<ul><li> Add some <a href="../en/Apache_HTTP_Server.html#TLS.2FSSL" title="LAMP" class="mw-redirect">SSL encryption</a> to your connection!</li></ul>
<p>(If adding SSL encryption as above, be sure to edit /etc/httpd/conf/extra/httpd-ssl.conf and change DocumentRoot "/srv/http" to DocumentRoot "/usr/share/webapps/owncloud" )
</p>
<ul><li> More Apps for ownCloud can be found <a rel="nofollow" class="external text" href="http://apps.owncloud.com/">here</a>
</li></ul>
<ul><li> To install an new application, download the zip from the apps store, extract it into  /srv/http/owncloud/apps/.</li></ul>
<p>Afterwards restart httpd:
</p>
<pre># systemctl restart httpd
</pre>
<p>log into your server go to the app sections you should see the new apps in there,
</p>
<ul><li> If you are protecting access to your ownCloud location with HTTP basic auth, the file "status.php" must be excluded from auth and be publicly accessible. <a rel="nofollow" class="external autonumber" href="https://github.com/owncloud/mirall/issues/734">[2]</a>
</li></ul>
<h3><span class="mw-headline" id="SABnzbd">SABnzbd</span></h3>
<p>When using <a href="../en/SABnzbd.html" title="SABnzbd">SABnzbd</a>, you might want to set
</p>
<pre>folder_rename 0
</pre>
<p>in your sabnzbd.ini file, because ownCloud will scan the files as soon as they get uploaded, preventing SABnzbd from removing UNPACKING prefixes etc.
</p>
<h2><span class="mw-headline" id="An_all-in-one_alternative_with_Docker">An all-in-one alternative with Docker</span></h2>
<p>A alternative to installing and configuring your own <i>ownCloud</i> is to use a 3rd party supported <a href="../en/Docker.html" title="Docker">Docker</a> image. You can find several images of fully working LAMP stack with pre-installed <i>ownCloud</i> in the <a rel="nofollow" class="external text" href="https://index.docker.io/search?q=ownCloud">Docker repositories</a>. <i>Docker</i> containers are generally safer than a <a href="../en/Change_root.html" title="Chroot" class="mw-redirect">chroot</a> environment and the overhead is very low; <i>ownCloud</i> in Docker works smoothly even on quite old machines. The whole setup including installing <i>Docker</i> and <i>ownCloud</i> image is considerably easier and quicker than a native installation but you must trust the third party whom you have now given complete control to regarding the installation of your ownCloud instance.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Docker images are not officially supported by ownCloud.</div>
<p><br>
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Self-signed_certificate_not_accepted">Self-signed certificate not accepted</span></h3>
<p>ownCloud uses <a href="https://en.wikipedia.org/wiki/cURL" class="extiw" title="wikipedia:cURL">Wikipedia:cURL</a> and <a href="https://en.wikipedia.org/wiki/SabreDAV" class="extiw" title="wikipedia:SabreDAV">Wikipedia:SabreDAV</a> to check if WebDAV is enabled. If you use SSL/TLS with a self-signed certificate, e.g. as shown in <a href="../en/Apache_HTTP_Server.html" title="LAMP" class="mw-redirect">LAMP</a>, and access ownCloud's admin panel, you will see the following error message:
</p>
<pre>Your web server is not yet properly setup to allow files synchronization because the WebDAV interface seems to be broken.
</pre>
<p>Assuming that you followed the <a href="../en/Apache_HTTP_Server.html" title="LAMP" class="mw-redirect">LAMP</a> tutorial, execute the following steps:
</p>
<p>Create a local directory for non-distribution certificates and copy <a href="../en/Apache_HTTP_Server.html" title="LAMP" class="mw-redirect">LAMPs</a> certificate there. This will prevent <code>ca-certificates</code>-updates from overwriting it.
</p>
<pre># cp /etc/httpd/conf/server.crt /usr/share/ca-certificates/<i>WWW.EXAMPLE.COM.crt</i>
</pre>
<p>Add <i>WWW.EXAMPLE.COM.crt</i> to <code>/etc/ca-certificates.conf</code>:
</p>
<pre><i>WWW.EXAMPLE.COM.crt</i>
</pre>
<p>Now, regenerate your certificate store:
</p>
<pre># update-ca-certificates
</pre>
<p>Restart the httpd service to activate your certificate.
</p>
<p>Should this not work, consider disabling <code>mod_curl</code> in <code>/etc/php/php.ini</code>.
</p>
<h3><span class="mw-headline" id="Self-signed_certificate_for_Android_devices">Self-signed certificate for Android devices</span></h3>
<p>Once you have followed the setup for SSL, as on <a href="../en/Apache_HTTP_Server.html#TLS.2FSSL" title="LAMP" class="mw-redirect">LAMP</a> for example, early versions of DAVdroid will reject the connection because the certificate is not trusted. A certificate can be made as follows on your server:
</p>
<pre> # openssl x509 -req -days 365 -in /etc/httpd/conf/server.csr -signkey /etc/httpd/conf/server.key -extfile android.txt -out CA.crt
 # openssl x509 -inform PEM -outform DER -in CA.crt -out CA.der.crt 
</pre>
<p>The file <code>android.txt</code> should contain the following:
</p>
<pre> basicConstraints=CA:true
</pre>
<p>Then import <code>CA.der.crt</code> to your Android device:
</p>
<p>Put the <code>CA.der.crt</code> file onto the sdcard of your Android device (usually to the internal one, e.g. save from a mail attachment). It should be in the root directory. Go to <i>Settings &gt; Security &gt; Credential storage</i> and select <i>Install from device storage</i>.
The <code>.crt</code> file will be detected and you will be prompted to enter a certificate name. After importing the certificate, you will find it in <i>Settings &gt; Security &gt; Credential storage &gt; Trusted credentials &gt; User</i>.
</p>
<p>Thanks to: <a rel="nofollow" class="external autonumber" href="http://www.leftbrainthings.com/2013/10/13/creating-and-importing-self-signed-certificate-to-android-device/">[3]</a>
</p>
<p>Another way is to import the certificate directly from your server via <a rel="nofollow" class="external text" href="https://play.google.com/store/apps/details?id=at.bitfire.cadroid">CAdroid</a> and follow the instructions there.
</p>
<h3><span class="mw-headline" id="Cannot_write_into_config_directory.21">Cannot write into config directory!</span></h3>
<p>Check your httpd configuration file (like <code>owncloud.conf</code>). Add your configuration directory (<code>/etc/webapps</code> by default) to 
</p>
<pre>php_admin_value open_basedir "/srv/http/:/home/:/tmp/:/usr/share/pear/:/usr/share/webapps/:/path/to/dir/"
</pre>
<p>Restart the httpd or php-fpm service to activate the change.
</p>
<h3><span class="mw-headline" id="Cannot_create_data_directory_.28.2Fpath.2Fto.2Fdir.29">Cannot create data directory (/path/to/dir)</span></h3>
<p>Check your httpd configuration file (like <code>owncloud.conf</code>). Add your data directory to
</p>
<pre>php_admin_value open_basedir "/srv/http/:/home/:/tmp/:/usr/share/pear/:/usr/share/webapps/:/path/to/dir/"
</pre>
<p>Restart the httpd or php-fpm service to activate the change.
</p>
<h3><span class="mw-headline" id="CSync_failed_to_find_a_specific_file.">CSync failed to find a specific file.</span></h3>
<p>This is most likely a certificate issue. Recreate it, and do not leave the common name empty or you will see the error again.
</p>
<pre># openssl req -new -x509 -nodes -newkey rsa:4096 -keyout server.key -out server.crt
</pre>
<h3><span class="mw-headline" id="Seeing_white_page_after_login">Seeing white page after login</span></h3>
<p>The cause is probably a new app that you installed. To fix that, you can use the occ command as described <a rel="nofollow" class="external text" href="https://doc.owncloud.org/server/8.2/admin_manual/configuration_server/occ_command.html">here</a>. So with
</p>
<pre>sudo -u http php /usr/share/webapps/owncloud/occ app:list
</pre>
<p>you can list all apps (if you installed owncloud in the standard directory), and with 
</p>
<pre>sudo -u http php /usr/share/webapps/owncloud/occ app:disable &lt;nameOfExtension&gt;
</pre>
<p>you can disable the troubling app.
</p>
<p>Alternatively, you can either use <a href="../en/PhpMyAdmin.html" title="PhpMyAdmin">phpMyAdmin</a> to edit the <code>oc_appconfig</code> table (if you got lucky and the table has an edit option), or do it by hand with mysql:
</p>
<pre>mysql -u root -p owncloud
MariaDB [owncloud]&gt; <b>delete from</b> oc_appconfig <b>where</b> appid='&lt;nameOfExtension&gt;' <b>and</b> configkey='enabled' <b>and</b> configvalue='yes';
MariaDB [owncloud]&gt; <b>insert into</b> oc_appconfig (appid,configkey,configvalue) <b>values</b> ('&lt;nameOfExtension&gt;','enabled','no');
</pre>
<p>This should delete the relevant configuration from the table and add it again.
</p>
<h3><span class="mw-headline" id="GUI_sync_client_fails_to_connect">GUI sync client fails to connect</span></h3>
<p>If using HTTP basic authentication, make sure to exclude "status.php", which must be publicly accessible. <a rel="nofollow" class="external autonumber" href="https://github.com/owncloud/mirall/issues/734">[4]</a>
</p>
<h3><span class="mw-headline" id="Some_files_upload.2C_but_give_an_error_.27Integrity_constraint_violation....27">Some files upload, but give an error 'Integrity constraint violation...'</span></h3>
<p>You may see the following error in the ownCloud sync client:
</p>
<pre>   SQLSTATE[23000]: Integrity constraint violation: ... Duplicate entry '...' for key 'fs_storage_path_hash')...
</pre>
<p>This is caused by an issue with the File Locking app, which is often not sufficient to keep conflicts from occurring on some webserver configurations. A more complete <a rel="nofollow" class="external text" href="https://doc.owncloud.org/server/8.1/admin_manual/configuration_files/files_locking_transactional.html">Transactional File Locking</a> is available that rids these errors, but you must be using the Redis php-caching method. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=redis">redis</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/php-redis/">php-redis</a></span><sup><small>AUR</small></sup>, comment out your current php-cache mechanism, and then in <code>/etc/php/conf.d/redis.ini</code> uncomment <code>extension=redis.so</code>. Then in <code>config.php</code> make the following changes:
</p>
<pre>   'memcache.local' =&gt; '\OC\Memcache\Redis',
   'filelocking.enabled' =&gt; 'true',
   'memcache.locking' =&gt; '\OC\Memcache\Redis',
   'redis' =&gt; array(
        'host' =&gt; 'localhost',
        'port' =&gt; 6379,
        'timeout' =&gt; 0.0,
         ),
</pre>
<p>and start Redis:
</p>
<pre>   systemctl enable redis.service
   systemctl start redis.service
</pre>
<p>Finally, disable the File Locking App, as the Transational File Locking will take care of it (and would conflict).
</p>
<p>If everything is working, you should see 'Transactional File Locking Enabled' under Server Status on the Admin page, and syncs should no longer cause issues.
</p>
<h3><span class="mw-headline" id=".22Cannot_write_into_apps_directory.22">"Cannot write into apps directory"</span></h3>
<p>As mentioned in the <a rel="nofollow" class="external text" href="http://doc.owncloud.org/server/6.0/admin_manual/configuration/configuration_apps.html">official admin manual</a>, either you need an apps directory that is writable by the http user, or you need to set <code>appstoreenabled</code> to <code>false</code>. 
</p>
<p><i>Also</i>, not mentioned there, the directory needs to be in the <code>open_basedir</code> line in <code>/etc/php/php.ini</code>.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Does not seem to work with 8.0.2 (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:OwnCloud">Talk:OwnCloud#</a>)</div>
</div>
<p>One clean method is to have the package-installed directory at <code>/usr/share/webapps/owncloud/apps</code> stay owned by root, and have the user-installed apps go into e.g. <code>/var/www/owncloud/apps</code>, which is owned by http. Then you can set <code>appstoreenabled</code> to <code>true</code> and package upgrades of apps should work fine as well. Relevant lines from <code>/etc/webapps/owncloud/config/config.php</code>:
</p>
<pre>
  'apps_paths' =&gt; 
  array (
    0 =&gt; 
    array (
      'path' =&gt; '/usr/share/webapps/owncloud/apps',
      'url' =&gt; '/apps',
      'writable' =&gt; false,
    ),
    1 =&gt; 
    array (
      'path' =&gt; '/var/www/owncloud/apps',
      'url' =&gt; '/wapps',
      'writable' =&gt; true,
    ),
  ),
</pre>
<p>Example <code>open_basedir</code> line from <code>/etc/php/php.ini</code> (you might have other directories in there as well):
</p>
<pre>open_basedir = /srv/http/:/usr/share/webapps/:/var/www/owncloud/apps/
</pre>
<p>Directory permissions:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -ld /usr/share/webapps/owncloud/apps /var/www/owncloud/apps/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
 drwxr-xr-x 26 root root 4096 des.  14 20:48 /usr/share/webapps/owncloud/apps
 drwxr-xr-x  2 http http   48 jan.  20 20:01 /var/www/owncloud/apps/</pre>
<h3><span class="mw-headline" id="Security_warnings_even_though_the_recommended_settings_have_been_included_in_nginx.conf">Security warnings even though the recommended settings have been included in nginx.conf</span></h3>
<p>At the top of the admin page there might be a warning to set the <code>Strict-Transport-Security</code>, <code>X-Content-Type-Options</code>, <code>X-Frame-Options</code>, <code>X-XSS-Protection</code> and <code>X-Robots-Tag</code> according to <a rel="nofollow" class="external free" href="https://doc.owncloud.org/server/8.1/admin_manual/configuration_server/harden_server.html">https://doc.owncloud.org/server/8.1/admin_manual/configuration_server/harden_server.html</a> even though they are already set like that.
</p>
<p>A possible cause could be that because owncloud sets those settings, uwsgi passed them along and nginx added them again:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ curl -I <a rel="nofollow" class="external free" href="https://domain.tld">https://domain.tld</a></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
...
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Frame-Options: Sameorigin
X-Robots-Tag: none
Strict-Transport-Security: max-age=15768000; includeSubDomains; preload;
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Robots-Tag: none</pre>
<p>While the fast_cgi sample config has a parameter to avoid that ( <code>fastcgi_param modHeadersAvailable true; #Avoid sending the security headers twice</code> ), when using uwsgi and nginx the following modification of the uwsgi part in nginx.conf could help:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"> /etc/nginx/nginx.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
...
        # pass all .php or .php/path urls to uWSGI
        location ~ ^(.+\.php)(.*)$ {
            include uwsgi_params;
            uwsgi_modifier1 14;
            # hode following headers received from uwsgi, because otherwise we would send them twice since we already add them in nginx itself
            uwsgi_hide_header X-Frame-Options;
            uwsgi_hide_header X-XSS-Protection;
            uwsgi_hide_header X-Content-Type-Options;
            uwsgi_hide_header X-Robots-Tag;
            uwsgi_hide_header X-Frame-Options;
            #Uncomment line below if you get connection refused error. Remember to commet out line with "uwsgi_pass 127.0.0.1:3001;" below
            uwsgi_pass unix:/run/uwsgi/owncloud.sock;
            #uwsgi_pass 127.0.0.1:3001;
        }
...</pre>
<h3><span class="mw-headline" id="Password_not_saved">Password not saved</span></h3>
<p>If the password are not saved and asked on every startup try to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-keyring">gnome-keyring</a></span>, helped under xfce4.
</p>
<p>Optional dependencies for gnome-keyring: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=libgnome-keyring">libgnome-keyring</a></span>. This worked under <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/groups/x86_64/deepin/">deepin</a></span>
</p>
<h2><span class="mw-headline" id="Upload_and_Share_from_File_Manager">Upload and Share from File Manager</span></h2>
<p>You can use the following script to quickly upload and share files to your ownCloud installation from Thunar (and possibly other filemanagers): <a rel="nofollow" class="external free" href="https://github.com/schiesbn/shareLinkCreator">https://github.com/schiesbn/shareLinkCreator</a>
You need to edit the file with the proper configuration settings.
<b>Note: password is stored as plain text.</b>
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external text" href="http://owncloud.org/">ownCloud official website</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://doc.owncloud.org/server/8.2/admin_manual/">ownCloud 8.2 Admin Documentation</a>
</li>
</ul>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Web_server.html" title="Category:Web server">Web server</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
