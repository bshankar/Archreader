<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Hpfall - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Hpfall skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Hpfall</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p><b>hpfall</b> is a simple daemon providing HDD shock protection for HP laptops supporting the feature officially called "HP Mobile Data Protection System 3D" or "HP 3D DriveGuard".
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Testing"><span class="tocnumber">3</span> <span class="toctext">Testing</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Testing_Shock_protection"><span class="tocnumber">3.1</span> <span class="toctext">Testing Shock protection</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>You can install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hpfall-git/">hpfall-git</a></span><sup><small>AUR</small></sup>, which is available in the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>You need to set your HDD in <code>/etc/conf.d/hpfall</code>.
</p>
<p>If your HDD is <code>/dev/sda</code>, your config file should look like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/conf.d/hpfall</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
#
# Parameters to be passed to hpfall
#
DEVICE=/dev/sda
</pre>
<p><a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">Start</a> and <a href="../en/Systemd.html#Using_units" title="Enable" class="mw-redirect">enable</a> <code>hpfall.service</code>
</p>
<h2><span class="mw-headline" id="Testing">Testing</span></h2>
<p>After reboot with new kernel, check if hp_accel driver was initialised correctly:
</p>
<pre># dmesg | grep hp_accel</pre>
<h3><span class="mw-headline" id="Testing_Shock_protection">Testing Shock protection</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Be careful while performing this test and keep your laptop above something soft. Simulating free fall over the desk is bad idea.</div>
<p>Find your HDD's unload_heads file:
</p>
<pre># find /sys -name unload_heads</pre>
<p>Go to it's directory and run:
</p>
<pre># watch --difference=permanent cat unload_heads</pre>
<p>Lift you laptop into free space and simulate free fall while holding it firmly with your hands. About 10 cm should be enough.
If the disk protection works then you should hear your HDD making "click" sound, see one of your laptop's LEDs flashing and the watch value's background should permanently turn black.
</p>
</div>
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:HP.html" title="Category:HP">HP</a></li></ul>
</div></div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
