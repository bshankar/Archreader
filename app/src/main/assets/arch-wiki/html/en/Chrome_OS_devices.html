<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Chrome OS devices - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Chrome_OS_devices skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Chrome OS devices</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Chrome_OS_devices/Chromebook.html" title="Chrome OS devices/Chromebook">Chrome OS devices/Chromebook</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Chrome_OS_devices/Custom_firmware.html" title="Chrome OS devices/Custom firmware">Chrome OS devices/Custom firmware</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Laptop.html" title="Laptop">Laptop</a></li>
</ul>
</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>This article relies on third-party scripts and modifications, and may irreparably damage your hardware or data. Proceed at your own risk.</div>
<p>This article was created to provide information on how to get Arch installed on the series of Chrome OS devices built by Acer, HP, Samsung, Toshiba, and Google. Currently this page is being overhauled, and more model specific pages are being built with some of the information listed below. 
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-2 tocsection-2">
<a href="#Legacy_boot"><span class="tocnumber">1.1</span> <span class="toctext">Legacy boot</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#Models_without_SeaBIOS"><span class="tocnumber">1.1.1</span> <span class="toctext">Models without SeaBIOS</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-4"><a href="#Firmware_write_protection_intro"><span class="tocnumber">1.2</span> <span class="toctext">Firmware write protection intro</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Prerequisites"><span class="tocnumber">1.3</span> <span class="toctext">Prerequisites</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Chrome_OS_devices"><span class="tocnumber">2</span> <span class="toctext">Chrome OS devices</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#General_hardware_recommendations_and_remarks"><span class="tocnumber">2.1</span> <span class="toctext">General hardware recommendations and remarks</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Installation"><span class="tocnumber">3</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Enabling_developer_mode"><span class="tocnumber">3.1</span> <span class="toctext">Enabling developer mode</span></a></li>
<li class="toclevel-2 tocsection-10">
<a href="#Accessing_the_superuser_shell"><span class="tocnumber">3.2</span> <span class="toctext">Accessing the superuser shell</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Accessing_the_superuser_shell_without_Chrome_OS_configuration"><span class="tocnumber">3.2.1</span> <span class="toctext">Accessing the superuser shell without Chrome OS configuration</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Accessing_the_superuser_shell_with_Chrome_OS_configuration"><span class="tocnumber">3.2.2</span> <span class="toctext">Accessing the superuser shell with Chrome OS configuration</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13">
<a href="#Enabling_SeaBIOS"><span class="tocnumber">3.3</span> <span class="toctext">Enabling SeaBIOS</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Boot_to_SeaBIOS_by_default"><span class="tocnumber">3.3.1</span> <span class="toctext">Boot to SeaBIOS by default</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#Flashing_a_custom_firmware"><span class="tocnumber">3.4</span> <span class="toctext">Flashing a custom firmware</span></a></li>
<li class="toclevel-2 tocsection-16">
<a href="#Installing_Arch_Linux"><span class="tocnumber">3.5</span> <span class="toctext">Installing Arch Linux</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#Preparing_the_installation_media"><span class="tocnumber">3.5.1</span> <span class="toctext">Preparing the installation media</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Booting_the_installation_media"><span class="tocnumber">3.5.2</span> <span class="toctext">Booting the installation media</span></a></li>
<li class="toclevel-3 tocsection-19">
<a href="#Alternative_installation.2C_Install_Arch_Linux_in_addition_to_Chrome_OS"><span class="tocnumber">3.5.3</span> <span class="toctext">Alternative installation, Install Arch Linux in addition to Chrome OS</span></a>
<ul>
<li class="toclevel-4 tocsection-20"><a href="#Re-partition_the_drive"><span class="tocnumber">3.5.3.1</span> <span class="toctext">Re-partition the drive</span></a></li>
<li class="toclevel-4 tocsection-21"><a href="#Fixing_the_filesystem"><span class="tocnumber">3.5.3.2</span> <span class="toctext">Fixing the filesystem</span></a></li>
<li class="toclevel-4 tocsection-22"><a href="#Continue_the_installation_process"><span class="tocnumber">3.5.3.3</span> <span class="toctext">Continue the installation process</span></a></li>
<li class="toclevel-4 tocsection-23"><a href="#Choosing_between_Arch_Linux_and_Chrome_OS"><span class="tocnumber">3.5.3.4</span> <span class="toctext">Choosing between Arch Linux and Chrome OS</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-24">
<a href="#Post_installation_configuration"><span class="tocnumber">4</span> <span class="toctext">Post installation configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Patched_kernels"><span class="tocnumber">4.1</span> <span class="toctext">Patched kernels</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Video_driver"><span class="tocnumber">4.2</span> <span class="toctext">Video driver</span></a></li>
<li class="toclevel-2 tocsection-27">
<a href="#Touchpad_and_touchscreen"><span class="tocnumber">4.3</span> <span class="toctext">Touchpad and touchscreen</span></a>
<ul>
<li class="toclevel-3 tocsection-28">
<a href="#Touchpad_and_touchscreen_kernel_modules"><span class="tocnumber">4.3.1</span> <span class="toctext">Touchpad and touchscreen kernel modules</span></a>
<ul>
<li class="toclevel-4 tocsection-29"><a href="#What_to_do_if_your_touchpad_or_touchscreen_is_not_supported.3F"><span class="tocnumber">4.3.1.1</span> <span class="toctext">What to do if your touchpad or touchscreen is not supported?</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-30"><a href="#Touchpad_configuration"><span class="tocnumber">4.3.2</span> <span class="toctext">Touchpad configuration</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#Chromium_OS_input_drivers"><span class="tocnumber">4.3.3</span> <span class="toctext">Chromium OS input drivers</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-32">
<a href="#Fixing_suspend"><span class="tocnumber">4.4</span> <span class="toctext">Fixing suspend</span></a>
<ul>
<li class="toclevel-3 tocsection-33"><a href="#With_kernel_parameters"><span class="tocnumber">4.4.1</span> <span class="toctext">With kernel parameters</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="#With_systemd"><span class="tocnumber">4.4.2</span> <span class="toctext">With systemd</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-35">
<a href="#Fixing_audio"><span class="tocnumber">4.5</span> <span class="toctext">Fixing audio</span></a>
<ul>
<li class="toclevel-3 tocsection-36"><a href="#Haswell_based_models"><span class="tocnumber">4.5.1</span> <span class="toctext">Haswell based models</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="#Chromebook_Pixel_2015"><span class="tocnumber">4.5.2</span> <span class="toctext">Chromebook Pixel 2015</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-38">
<a href="#Hotkeys"><span class="tocnumber">4.6</span> <span class="toctext">Hotkeys</span></a>
<ul>
<li class="toclevel-3 tocsection-39"><a href="#xkeyboard_configuration"><span class="tocnumber">4.6.1</span> <span class="toctext">xkeyboard configuration</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Sxhkd_configuration"><span class="tocnumber">4.6.2</span> <span class="toctext">Sxhkd configuration</span></a></li>
<li class="toclevel-3 tocsection-41">
<a href="#Xbindkeys_configuration"><span class="tocnumber">4.6.3</span> <span class="toctext">Xbindkeys configuration</span></a>
<ul>
<li class="toclevel-4 tocsection-42"><a href="#Alternate_xbindkeys_configuration"><span class="tocnumber">4.6.3.1</span> <span class="toctext">Alternate xbindkeys configuration</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-43"><a href="#Patch_xkeyboard-config"><span class="tocnumber">4.6.4</span> <span class="toctext">Patch xkeyboard-config</span></a></li>
<li class="toclevel-3 tocsection-44"><a href="#Mapping_in_Gnome_with_gsettings_set"><span class="tocnumber">4.6.5</span> <span class="toctext">Mapping in Gnome with gsettings set</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-45">
<a href="#Power_key_and_lid_switch_handling"><span class="tocnumber">4.7</span> <span class="toctext">Power key and lid switch handling</span></a>
<ul>
<li class="toclevel-3 tocsection-46"><a href="#Ignore_using_logind"><span class="tocnumber">4.7.1</span> <span class="toctext">Ignore using logind</span></a></li>
<li class="toclevel-3 tocsection-47"><a href="#Ignore_by_Gnome"><span class="tocnumber">4.7.2</span> <span class="toctext">Ignore by Gnome</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-48">
<a href="#Known_issues"><span class="tocnumber">5</span> <span class="toctext">Known issues</span></a>
<ul>
<li class="toclevel-2 tocsection-49"><a href="#Syslinux"><span class="tocnumber">5.1</span> <span class="toctext">Syslinux</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-50"><a href="#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<h3><span class="mw-headline" id="Legacy_boot">Legacy boot</span></h3>
<p>Some of the newer Chrome OS devices (Intel's Haswell and Broadwell based models) feature a "legacy boot" mode that makes it easier to boot Linux and other operating systems. The legacy boot mode is provided by the <a rel="nofollow" class="external text" href="http://www.coreboot.org/SeaBIOS">SeaBIOS</a> payload of  <a rel="nofollow" class="external text" href="http://www.coreboot.org/">Coreboot</a>, which is the firmware for the Intel based Chrome OS devices (with the exception of the first generation of Chromebooks). SeaBIOS behaves like a traditional BIOS that boots into the MBR of the disk, and from there into standard bootloaders like Syslinux and GRUB.
</p>
<p>On the Chrome OS devices that shipped with SeaBIOS, the installation process of Arch Linux should be similar with a few minor adjustments.
</p>
<h4><span class="mw-headline" id="Models_without_SeaBIOS">Models without SeaBIOS</span></h4>
<p>One of the following approaches can be taken in order to install Arch Linux on Chrome OS devices that did not shipped with SeaBIOS as part of the installed firmware:
</p>
<ul>
<li> With a very few models it is possible to only flash a SeaBIOS payload to the <code>RW_LEGACY</code> part of the firmware flash memory (e.g. Acer C740, Acer C910 and Google Chromebook Pixel 2), it is possible to update the <code>RW_LEGACY</code> manually with Chrome OS' <code>flashrom</code> or leave it to John Lewis' <code>flash_chromebook_rom.sh</code> script to flash SeaBIOS if the script support for a specific device is limited to <code>RW_LEGACY</code> update, the advantage with this method is that the stock firmware is not changed (as <code>RW_LEGACY</code> was missing).</li>
<li> Flash a full <a href="../en/Chrome_OS_devices/Custom_firmware.html" title="Custom firmware for Chrome OS devices" class="mw-redirect">custom firmware</a> which includes a SeaBIOS payload.</li>
<li> Only write to the <code>BOOT_STUB</code> part of the firmware flash memory, this method adds a SeaBIOS payload and update the firmware to only load this payload, it is a much safer approach than flashing the full firmware but there might be some limitations (e.g. no support in suspend or VMX), this is the <code>Modify ROM to run SeaBIOS exclusively</code> option in John Lewis' <code>flash_chromebook_rom.sh</code> script.</li>
<li> Take the ChrUbuntu approach which uses the Chrome OS kernel and modules.</li>
<li> Build and sign your own kernel, see <a rel="nofollow" class="external autonumber" href="https://plus.google.com/+OlofJohansson/posts/34PYU79eUqP">[1]</a> <a rel="nofollow" class="external autonumber" href="http://pomozok.wordpress.com/2014/10/11/building-chromeos-kernel-without-chroot/">[2]</a> <a rel="nofollow" class="external autonumber" href="https://github.com/drsn0w/chromebook_kernel_tools/blob/master/install_linux.md">[3]</a>.</li>
</ul>
<p>The <a href="#Installation">Installation</a> process described on this page tries to cover the method of installing Arch Linux on these non SeaBIOS models by flashing a custom firmware.
</p>
<h3><span class="mw-headline" id="Firmware_write_protection_intro">Firmware write protection intro</span></h3>
<p>All Chrome OS devices features a firmware write protection. It is important to be aware of it as one might need to disable the write protection as part of the installation process (to update GBB flags or flash a custom firmware).
</p>
<p>For more details see <a href="../en/Chrome_OS_devices/Custom_firmware.html#Firmware_write_protection" title="Custom firmware for Chrome OS devices" class="mw-redirect">Firmware write protection</a>.
</p>
<h3><span class="mw-headline" id="Prerequisites">Prerequisites</span></h3>
<ul>
<li> You should claim your free 100GB-1TB of Google Drive space before you install Arch. This needs to happen from ChromeOS(version &gt; 23), not linux. This will sync/backup ChromeOS, as designed</li>
<li> Visit the ArchWiki page for your <a href="#Chrome_OS_devices">Chrome OS device</a>.</li>
<li> If there is no ArchWiki page for your device then before proceeding, gather information about the device and if you succeed in installing Arch Linux, then consider adding a new ArchWiki page for your model (you can use the <a href="../en/Acer_C720_Chromebook.html" title="Acer C720" class="mw-redirect">Acer C720</a> as an example for device shipped with SeaBios or the <a href="../en/Acer_C710_Chromebook.html" title="Acer C710 Chromebook">Acer C710</a> as device that did not ship with it).</li>
<li> Read this guide completely and make sure you understand all the steps before making any changes.</li>
</ul>
<h2><span class="mw-headline" id="Chrome_OS_devices">Chrome OS devices</span></h2>
<p>See <a href="../en/Chrome_OS_devices/Chromebook.html" title="Chrome OS devices/Chromebook">Chromebook models</a> for hardware comparison with details about SeaBIOS availability and storage expansion.
</p>
<h3><span class="mw-headline" id="General_hardware_recommendations_and_remarks">General hardware recommendations and remarks</span></h3>
<ul>
<li> MyDigitalSSD M.2 NGFF SSD drives are probably the most popular choice when upgrading the internal SSD of a Chrome OS device. There are multiple accounts of failing MyDigitalSSD SSD drives at the Acer C720 topic on the Arch forums <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1461993#p1461993">[4]</a> <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1474680#p1474680">[5]</a> <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1460460#p1460460">[6]</a> and much more on the web. If the SSD was upgraded to a MyDigitalSSD model then it is highly recommended to backup the system and data frequently. It might be advisable to upgrade the SDD with a different brand. Notice that this might be due to a SSD firmware issue so updating the SSD firmware is highly recommended.</li>
<li> Transcend MTS400 M.2 NGFF SSD drives are failing (at least with stock Coreboot firmware) when ALPM is enabled, ATM there is no SSD firmware update that fixing this bug, so it is highly advisable to disabled ALPM if a power management daemon has been installed (which enabled it), see <a href="../en/Solid_State_Drives.html#Resolving_SATA_power_management_related_errors" title="Solid State Drives">Resolving SATA power management related errors</a> and <a rel="nofollow" class="external text" href="http://superuser.com/questions/887916/transcend-mts400-ssd-crashes-my-acer-c720-chromebook-how-to-disable-sata-power">how to disable ALPM in Chrome OS</a>.</li>
</ul>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Installation on Chrome OS devices that do not ship with SeaBIOS requires flashing a custom firmware, a process that may brick your device. Proceed at your own risk.</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>While the following information should fit all the Chrome OS devices with Coreboot firmware (shipped with SeaBIOS payload or without), it is possible that with some models you may need to make further adjustments.</div>
<p>The general installation procedure:
</p>
<ul>
<li> Enable developer mode.</li>
<li> Chrome OS device with SeaBIOS:
<ul>
<li> Enable legacy boot / SeaBIOS.</li>
<li> Set SeaBIOS as default (optional but recommended, requires disabling the write protection).</li>
</ul>
</li>
<li> Chrome OS device without SeaBIOS:
<ul><li> Flash a custom firmware.</li></ul>
</li>
<li> Prepare the installation media.</li>
<li> Boot Arch Linux installation media and install Arch.</li>
</ul>
<h3><span class="mw-headline" id="Enabling_developer_mode">Enabling developer mode</span></h3>
<p><a rel="nofollow" class="external text" href="http://www.chromium.org/chromium-os/developer-information-for-chrome-os-devices/acer-c720-chromebook#TOC-Developer-Mode">Developer Mode</a> is necessary in order to access the superuser shell inside Chrome OS, which is required for making changes to the system like allow booting through SeaBIOS.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Enabling Developer Mode will wipe all of your data.</div>
<p>To enable developer mode: 
</p>
<ul>
<li> Turn on the Chrome OS device.</li>
<li> Press and hold the <code>Esc + F3 (Refresh)</code> keys, then press the <code>Power</code> button. This enters Recovery Mode.</li>
<li> Press <code>Ctrl + D</code> (no prompt). It will ask you to confirm, then the system will revert its state and enable Developer Mode.</li>
</ul>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Press <code>Ctrl + D</code> (or wait 30 seconds for the beep and boot) at the white boot splash screen to enter Chrome OS.</div>
<h3><span class="mw-headline" id="Accessing_the_superuser_shell">Accessing the superuser shell</span></h3>
<p>After you have enabled the Developer Mode you will need to access the superuser shell. How you do this depends on whether you have configured Chrome OS or not.
</p>
<h4><span class="mw-headline" id="Accessing_the_superuser_shell_without_Chrome_OS_configuration">Accessing the superuser shell without Chrome OS configuration</span></h4>
<p>If you have not configured Chrome OS, just press <code>Ctrl + Alt + F2</code> (F2 is the "forward" arrow on the top row, →), you will see a login prompt.
</p>
<ul>
<li> Use <code>chronos</code> as the username, it should not prompt you for a password.</li>
<li> Become superuser with <code>sudo bash</code>.</li>
</ul>
<h4><span class="mw-headline" id="Accessing_the_superuser_shell_with_Chrome_OS_configuration">Accessing the superuser shell with Chrome OS configuration</span></h4>
<p>If you have configured Chrome OS already:
</p>
<ul>
<li> Open a crosh window with <code>Ctrl + Alt + T</code>.</li>
<li> Open a bash shell with the <code>shell</code> command.</li>
<li> Become superuser with <code>sudo bash</code>
</li>
</ul>
<h3><span class="mw-headline" id="Enabling_SeaBIOS">Enabling SeaBIOS</span></h3>
<p>If your Chrome OS device did not ship with SeaBIOS or you prefer to install a custom firmware, then continue to <a href="#Flashing_a_custom_firmware">Flashing a custom firmware</a>.
</p>
<p>This method will allow you to access the pre-installed version of SeaBIOS through the Developer Mode screen in Coreboot.
</p>
<ul><li> Inside your superuser shell enter:</li></ul>
<pre># crossystem dev_boot_usb=1 dev_boot_legacy=1
</pre>
<ul><li> Reboot the machine.</li></ul>
<p>You can now start SeaBIOS by pressing <code>Ctrl + L</code> at the white boot splash screen.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If you intend to stay using pre-installed SeaBIOS route and think you will not appreciate having to press <code>Ctrl + L</code> every time you boot to reach SeaBIOS then you can set Coreboot to boot to SeaBIOS by default. This currently must be done inside of Chrome OS and requires disabling the write protection (hardware and software), it might be a good idea to do this now so that you will not have to re-install Chrome OS later with recovery install media. If you are choosing to keep Chrome OS (installing Arch on external storage or  <a href="#Alternative_installation.2C_Install_Arch_Linux_in_addition_to_Chrome_OS">on the internal storage side by side with Chrome OS</a> then set SeaBIOS to default later.</div>
<p>You should now have SeaBIOS enabled on your Chrome OS device, if you choose to not set it as default then you can continue to <a href="#Installing_Arch_Linux">Installing Arch Linux</a>.
</p>
<h4><span class="mw-headline" id="Boot_to_SeaBIOS_by_default">Boot to SeaBIOS by default</span></h4>
<p>To boot SeaBIOS by default, you will need to run <a rel="nofollow" class="external text" href="https://chromium.googlesource.com/chromiumos/platform/vboot_reference/+/master/scripts/image_signing/set_gbb_flags.sh"><code>set_gbb_flags.sh</code></a> in Chrome OS (already included in Chrome OS, it will not work correctly in Arch Linux).
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>If you do not set the GBB flags then your system might become corrupted on empty battery, resetting <code>dev_boot_usb</code> <code>dev_boot_legacy</code> to their default values, forcing you to recover Chrome OS and wiping your Arch Linux installation on the internal storage, though it might be possible to modify Chrome OS recovery image to set these values again <a rel="nofollow" class="external autonumber" href="http://dev.chromium.org/chromium-os/developer-information-for-chrome-os-devices/workaround-for-battery-discharge-in-dev-mode">[7]</a>.</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>If you do not disable the write protection before setting the GBB flags you endanger wiping out the RW-LEGACY part of the firmware (i.e. SeaBIOS) and your system might not boot (should be recoverable with Chrome OS recovery media). Updated versions of <a rel="nofollow" class="external text" href="https://chromium.googlesource.com/chromiumos/platform/vboot_reference/+/master/scripts/image_signing/set_gbb_flags.sh"><code>set_gbb_flags.sh</code></a> will not let you set the GBB flags without disabling the write protection.</div>
<ul><li> Disable the hardware write protection.</li></ul>
<p>To find the location of the hardware write-protect screw/switch/jumper and how to disable it visit the ArchWiki page for your <a href="#Chrome_OS_devices">Chrome OS device</a>. If there is no information about your device on the ArchWiki then turn to <a rel="nofollow" class="external text" href="http://www.chromium.org/chromium-os/developer-information-for-chrome-os-devicesDeveloper">Information for Chrome OS Devices</a> and <a rel="nofollow" class="external text" href="http://www.coreboot.org/Chromebooks">Coreboot's Chromebooks page</a>.
</p>
<p>More information about the firmware protection available at the <a href="../en/Chrome_OS_devices/Custom_firmware.html#Firmware_write_protection" title="Custom firmware for Chrome OS devices" class="mw-redirect">Custom firmware for Chrome OS devices</a> page.
</p>
<ul><li> Inside your <a href="#Accessing_the_superuser_shell">superuser shell</a> enter:</li></ul>
<pre># sudo su
</pre>
<ul><li> Disable the software write protection.</li></ul>
<pre># flashrom --wp-disable
</pre>
<ul><li> Check that write protection is disabled.</li></ul>
<pre># flashrom --wp-status
</pre>
<ul><li> Run <code>set_gbb_flags.sh</code> with no parameters.</li></ul>
<pre># set_gbb_flags.sh
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Recent versions of Chrome OS have moved the script to /usr/share/vboot/bin/set_gbb_flags.sh which is not in $PATH by default.</div>
<ul><li> Make sure you get the following output, see <a rel="nofollow" class="external autonumber" href="https://johnlewis.ie/how-to-make-seabios-the-default-on-your-acer-c720/">[8]</a>.</li></ul>
<pre>GBB_FLAG_DEV_SCREEN_SHORT_DELAY 0x00000001
GBB_FLAG_FORCE_DEV_SWITCH_ON 0x00000008
GBB_FLAG_FORCE_DEV_BOOT_LEGACY 0x00000080
GBB_FLAG_DEFAULT_DEV_BOOT_LEGACY 0x00000400
</pre>
<ul><li> Now set SeaBIOS as default.</li></ul>
<pre># set_gbb_flags.sh 0x489
</pre>
<ul><li> Enable back the software write protection.</li></ul>
<pre># flashrom --wp-enable
</pre>
<p>Your Chrome OS device now will boot to SeaBIOS by default, you can continue to <a href="#Installing_Arch_Linux">Installing Arch Linux</a>, if your device is booting correctly then you should re-enable the hardware write protection.
</p>
<h3><span class="mw-headline" id="Flashing_a_custom_firmware">Flashing a custom firmware</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The following steps explain how to flash a custom firmware from Chrome OS, for information on how to flash a custom firmware from Arch Linux visit the <a href="../en/Chrome_OS_devices/Custom_firmware.html" title="Custom firmware for Chrome OS devices" class="mw-redirect">Custom firmware for Chrome OS devices</a> page</div>
<ul><li> Disable the hardware write protection.</li></ul>
<p>To find the location of the hardware write-protect screw/switch/jumper and how to disable it visit the ArchWiki page for your <a href="#Chrome_OS_devices">Chrome OS device</a>. If there is no information about your device on the ArchWiki then turn to <a rel="nofollow" class="external text" href="http://www.chromium.org/chromium-os/developer-information-for-chrome-os-devicesDeveloper">Information for Chrome OS Devices</a> and <a rel="nofollow" class="external text" href="http://www.coreboot.org/Chromebooks">Coreboot's Chromebooks page</a>.
</p>
<p>More information about the firmware protection available at the <a href="../en/Chrome_OS_devices/Custom_firmware.html#Firmware_write_protection" title="Custom firmware for Chrome OS devices" class="mw-redirect">Custom firmware for Chrome OS devices</a> page.
</p>
<ul><li> Enter the command shown on the <a rel="nofollow" class="external text" href="https://johnlewis.ie/custom-chromebook-firmware/rom-download/">Download ROM page at John Lewis site</a>.</li></ul>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The reason for not posting here is to force you to visit the site and read the page before proceeding.</div>
<ul><li> After the script exited copy the backed up firmware to an external storage before rebooting the system.</li></ul>
<p>You should now have a custom firmware installed on your device, cross your fingers and reboot.
</p>
<p>After flashing the firmware you can continue to <a href="#Installing_Arch_Linux">Installing Arch Linux</a>.
</p>
<h3><span class="mw-headline" id="Installing_Arch_Linux">Installing Arch Linux</span></h3>
<h4><span class="mw-headline" id="Preparing_the_installation_media">Preparing the installation media</span></h4>
<p>Create an <a href="../en/USB_flash_installation_media.html" title="USB flash installation media">Arch Linux Installer USB drive</a>.
</p>
<h4><span class="mw-headline" id="Booting_the_installation_media">Booting the installation media</span></h4>
<ul>
<li> Plug the USB drive to the Chrome OS device and start SeaBIOS with <code>Ctrl + L</code> at the white boot splash screen (if SeaBIOS is not set as default).</li>
<li> Press <code>Esc</code> to get a boot menu and select the number corresponding to your USB drive.</li>
</ul>
<p>The Arch Linux installer boot menu should appear and the <a href="../en/Installation_guide.html" title="Installation" class="mw-redirect">installation</a> process can proceed as normal.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>For now choose <a href="../en/GRUB.html" title="GRUB">GRUB</a> as your bootloader: you can choose MBR or GPT: <a href="/index.php?title=Parttitioning&amp;action=edit&amp;redlink=1" class="new" title="Parttitioning (page does not exist)">Parttitioning</a>. If you choose GPT then do not forget to add a <a href="../en/GRUB.html#GUID_Partition_Table_.28GPT.29_specific_instructions" title="GRUB">BIOS Boot Partition</a>. Also see <a href="#Syslinux">Known Issues</a>.</div>
<p>After finishing installing Arch Linux continue by following the <a href="#Post_installation_configuration">Post Installation Configuration</a>.
</p>
<h4><span class="mw-headline" id="Alternative_installation.2C_Install_Arch_Linux_in_addition_to_Chrome_OS">Alternative installation, Install Arch Linux in addition to Chrome OS</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> needs more details and convert the use of the script to manually re-partitioning steps with cgpt (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Chrome_OS_devices">Talk:Chrome OS devices#</a>)</div>
</div>
<p>It is possible to have both Arch Linux and Chrome OS installed on the internal drive.
</p>
<h5><span class="mw-headline" id="Re-partition_the_drive">Re-partition the drive</span></h5>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Dubious script from untrusted and obfuscated source. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Chrome_OS_devices">Talk:Chrome OS devices#</a>)</div>
</div>
<p>In order to partition the drive, we will run the first stage of the ChruBuntu script in Chrome OS. After logging in, open a shell with <code>Ctrl + Alt + T</code>, run <code>shell</code>, then <code>cd ~/</code> to enter the home directory. Once there, run the following:
</p>
<pre>curl -L -O <a rel="nofollow" class="external free" href="http://goo.gl/9sgchs">http://goo.gl/9sgchs</a>; sudo bash 9sgchs
</pre>
<p>It will ask how much space to partition for the alternate partition. 8GB is a safe number for the 16GB SSD. More than 9 may not work.
</p>
<h5><span class="mw-headline" id="Fixing_the_filesystem">Fixing the filesystem</span></h5>
<p>Reboot the system so Chrome OS will repair the filesystem after the previous re-partitioning process.
Once this is done, verify that the disk space has been reduced by opening a file manager and clicking the gear in the top right of the window.
</p>
<h5><span class="mw-headline" id="Continue_the_installation_process">Continue the installation process</span></h5>
<p><a href="#Installing_Arch_Linux">Continue the installation process</a> but instead of wiping the internal drive and creating a new filesystem you should install Arch to the existing empty partition that we designated for Arch in the previous step.
</p>
<p>So after booting the installation media:
</p>
<ul>
<li> Run the command <code>fdisk -l</code> to list drives and partitions. Find the internal drive and note the name of the partition matching the size you specified in the ChrUbuntu script.</li>
<li> Use <code>mkfs.ext4 /dev/sdxY</code> (where xY is drive letter and partition number, eg. /dev/sda7) This will create the filesystem for arch.</li>
<li> Following the <a href="../en/GRUB.html#GUID_Partition_Table_.28GPT.29_specific_instructions" title="GRUB2" class="mw-redirect">instructions for installing GRUB on GPT</a>, use gdisk to create a 1007kb partition and set the type to EF02.</li>
</ul>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Contrary to what some people say, the grub partition does <b>not</b> need to be the first partition on the disk. The existing ChromeOS partitions make this difficult to do anyways.</div>
<h5><span class="mw-headline" id="Choosing_between_Arch_Linux_and_Chrome_OS">Choosing between Arch Linux and Chrome OS</span></h5>
<p>Reboot your system and press <code>Ctrl + l</code> to load SeaBIOS in order to boot into Arch, or press <code>Ctrl + d</code> in order to boot into ChromeOS.
</p>
<p>Now you can also <a href="#Boot_to_SeaBIOS_by_default">set SeaBIOS as default</a> (or even later as you are keeping Chrome OS).
</p>
<h2><span class="mw-headline" id="Post_installation_configuration">Post installation configuration</span></h2>
<h3><span class="mw-headline" id="Patched_kernels">Patched kernels</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>You can most likely ignore this section unless your device requires patched kernel support.</div>
<p>It is recommended to use the official <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=linux">linux</a></span> package for most Chrome OS devices with the exception being newer devices which might need patched kernel support such as the Chromebook Pixel 2015.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-samus4/">linux-samus4</a></span><sup><small>AUR</small></sup> provides patches for the Chromebook Pixel 2015 to fix touchpad, touchscreen, and sound functionality which has not been merged into upstream linux yet. More information is available at <a rel="nofollow" class="external text" href="https://github.com/raphael/linux-samus">its GitHub page</a>.
</p>
<p>If your devices requires a patched kernel, it is advised to review the list of patches and decide if the patch list is getting decidedly small enough that you no longer require a patched kernel and instead you can use the official <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=linux">linux</a></span> package instead. 
</p>
<p>See <a href="../en/Kernels.html" title="Kernels">kernels</a> for more information.
</p>
<h3><span class="mw-headline" id="Video_driver">Video driver</span></h3>
<p>See <a href="../en/Intel_graphics.html" title="Intel graphics">Intel graphics</a>.
</p>
<h3><span class="mw-headline" id="Touchpad_and_touchscreen">Touchpad and touchscreen</span></h3>
<p>See <a href="../en/Touchpad_Synaptics.html" title="Touchpad Synaptics">Touchpad Synaptics</a>, <a href="../en/Libinput.html" title="Libinput">libinput</a>, and and <a href="../en/Touchscreen.html" title="Touchscreen">Touchscreen</a>.
</p>
<h4><span class="mw-headline" id="Touchpad_and_touchscreen_kernel_modules">Touchpad and touchscreen kernel modules</span></h4>
<p>Since kernel 3.17 all the related patches merged into the upstream sources, meaning the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=linux">linux</a></span> package in core supports these devices.
</p>
<h5><span class="mw-headline" id="What_to_do_if_your_touchpad_or_touchscreen_is_not_supported.3F">What to do if your touchpad or touchscreen is not supported?</span></h5>
<ul>
<li> Review the list of patches in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-chromebook/">linux-chromebook</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/linux-chromebook">aur-mirror</a>]</sup>, if a related patch for your Chromebook model exist then <a href="#Patched_kernels">install this package</a>.</li>
<li> If there is no such patch do not worry as the developers should be able to add it by request as the Chromium OS sources includes the related changes.</li>
<li> You can also try to find the related commits by yourself and create a proper patch, some hints:
<ul>
<li> Dig into your Chrome OS system, look at the obvious suspects like boot log, <code>/proc/bus/input/devices</code> and <code>/sys/devices</code>.</li>
<li> The Linux kernel sources for Chromium OS are at <a rel="nofollow" class="external autonumber" href="https://chromium.googlesource.com/chromiumos/third_party/kernel">[9]</a>.</li>
<li> Each kernel source for the latest Chromium OS release has its own branch, name convention: <code>release-R*-*-chromeos-KERNELVER</code>, where <code>R*-*</code> is the Chromium OS release and <code>KERNELVER</code> is the kernel version.</li>
<li> Review the git log of <code>drivers/platform</code>, <code>drivers/i2c/busses</code> and <code>drivers/input/touchscreen</code>.</li>
</ul>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-samus4/">linux-samus4</a></span><sup><small>AUR</small></sup> includes touchpad and touchscreen support for the Chromebook Pixel 2015.  More information is available at <a rel="nofollow" class="external text" href="https://github.com/raphael/linux-samus">its GitHub page</a>.</li>
</ul>
<h4><span class="mw-headline" id="Touchpad_configuration">Touchpad configuration</span></h4>
<p>There are few options how to set the touchpad:
</p>
<ul>
<li> Visit the ArchWiki page for your Chromebook model (see <a href="#Chromebook_Models">Chromebook models</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" title="ArchWiki:Requests">broken link</a>: invalid section]</sup>) for touchpad xorg.conf.d file.</li>
<li> Use a <a href="../en/Touchpad_Synaptics.html#Configuration_on_the_fly" title="Touchpad Synaptics">touchpad configuration tool</a> like <a href="../en/Touchpad_Synaptics.html#Graphical_tools" title="Touchpad Synaptics">Synaptics</a> for <a href="../en/KDE.html" title="KDE">KDE</a>, although it is said to be currently unmaintained and seems to crash under KDE 4.11, it works well with KDE 4.12.2. Another utility, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/kcm_touchpad/">kcm_touchpad</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/kcm_touchpad">aur-mirror</a>]</sup>, does not work at all.</li>
</ul>
<h4><span class="mw-headline" id="Chromium_OS_input_drivers">Chromium OS input drivers</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xf86-input-cmt/">xf86-input-cmt</a></span><sup><small>AUR</small></sup> offers a port of the Chromium OS input driver: <a rel="nofollow" class="external text" href="https://github.com/hugegreenbug/xf86-input-cmt">xf86-input-cmt</a> as an alternative for the <a href="../en/Touchpad_Synaptics.html" title="Synaptics" class="mw-redirect">Synaptics input driver</a>. It provides tweaked configuration files for most devices, and provides functionality that the <a href="../en/Touchpad_Synaptics.html" title="Synaptics" class="mw-redirect">Synaptics input driver</a> does not such as palm rejection. Additionally, it enables functionality not enabled by default in the Chromium OS input driver such as tap-to-drag.
</p>
<p>Please note, the input driver does not work under <a rel="nofollow" class="external text" href="https://github.com/hugegreenbug/xf86-input-cmt/issues/5">some circumstances</a> where you have insufficient permissions to access <code>/dev/input/event</code>
This will affect you if you use <a href="../en/Xinit.html" title="Startx" class="mw-redirect">startx</a> to load a DE/WM session.
If this is the case or if the driver does not load for any other cases, you should run:
</p>
<pre># usermod -a -G input $USER
</pre>
<p>Where $USER is the current user wanting to use the input driver.
</p>
<p>It should also be noted that some users have reported the driver does not work in <a href="../en/GDM.html" title="GDM">GDM</a> but works normally after log in.
If you are affected by this, you should run:
</p>
<pre># usermod -a -G input gdm
</pre>
<p>After reboot, you should be able to use the touchpad normally.
</p>
<h3><span class="mw-headline" id="Fixing_suspend">Fixing suspend</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Lid suspend might not work directly after boot, you might need to wait a little.</div>
<p>The following are instructions to fix the suspend functionality.
Even if you are using a pre-installed SeaBIOS or John Lewis' pre-built SeaBIOS you will still need this fix.
</p>
<p>There have been a few alternatives discussed and those may work better for some. <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1364376#p1364376">[10]</a> <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1364521#p1364521">[11]</a>
</p>
<p>To fix suspend, the general idea is to disable the EHCI_PCI module, which interferes with the suspend cycle. There are multiple ways to achieve this.
</p>
<h4><span class="mw-headline" id="With_kernel_parameters">With kernel parameters</span></h4>
<p>Add the following to your GRUB configuration:-
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/default/grub</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">GRUB_CMDLINE_LINUX_DEFAULT="modprobe.blacklist=ehci_pci"</pre>
<p>Then <a href="../en/GRUB.html#Generate_the_main_configuration_file" title="GRUB">rebuild your grub config</a>. After rebuilding your GRUB config, reboot your computer.
</p>
<h4><span class="mw-headline" id="With_systemd">With systemd</span></h4>
<p>Sometimes the synaptics touchpad, and various other parts of the laptop are used as wakeup devices causing certain movements of the laptop during suspend to end suspend. In order to disable all wakeup devices except for the laptop lid sensor, create the following <code>suspend-device-fix.sh</code> file. 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/sbin/suspend-device-fix.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

awk '{if ($1 != "LID0" &amp;&amp; $3 == "*enabled") print $1}' &lt; /proc/acpi/wakeup | while read NAME
do echo "$NAME" &gt; /proc/acpi/wakeup
done

exit 0
</pre>
<p>Now give the file executable permissions:
</p>
<pre># chmod +x /usr/local/sbin/suspend-device-fix.sh
</pre>
<p>Create a systemd service to execute the script on every boot. 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/suspend-fix.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Suspend Fix

[Service]
Type=simple
ExecStart=/usr/local/sbin/suspend-device-fix.sh

[Install]
WantedBy=multi-user.target</pre>
<p>First <a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">start</a> <code>suspend-fix.service</code>. If it properly starts, then <a href="../en/Systemd.html#Using_units" title="Enable" class="mw-redirect">enable</a> it to be started on bootup.
</p>
<p>Add the following line at the end of <code>/etc/rc.d/rc.local</code> (if it does not exist, just create it) to prevent bad handling of EHCI USB:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/rc.d/rc.local</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
echo 1 &gt; /sys/devices/pci0000\:00/0000\:00\:1d.0/remove
</pre>
<p>Then, create the following <code>cros-sound-suspend.sh</code> file. Only the Ath9k binding/unbinding lines are listed below; see the alternatives linked above for additional sound suspend handling if you experience issues.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/system-sleep/cros-sound-suspend.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

case $1/$2 in
  pre/*)
    # Unbind ath9k for preventing error and full sleep mode (wakeup by LID after hibernating) 
    echo -n "0000:01:00.0" | tee /sys/bus/pci/drivers/ath9k/unbind
    # Unbind snd_hda_intel for sound
    echo -n "0000:00:1b.0" | tee /sys/bus/pci/drivers/snd_hda_intel/unbind
    echo -n "0000:00:03.0" | tee /sys/bus/pci/drivers/snd_hda_intel/unbind
    ;;
  post/*)
    # Bind ath9k for preventing error and and full sleep mode (wakeup by LID after hibernating) 
    echo -n "0000:01:00.0" | tee /sys/bus/pci/drivers/ath9k/bind
    # bind snd_hda_intel for sound
    echo -n "0000:00:1b.0" | tee /sys/bus/pci/drivers/snd_hda_intel/bind
    echo -n "0000:00:03.0" | tee /sys/bus/pci/drivers/snd_hda_intel/bind
    ;;
esac</pre>
<p>Make sure to make the script executable:
</p>
<pre># chmod +x /usr/lib/systemd/system-sleep/cros-sound-suspend.sh
</pre>
<p>Then <a href="../en/GRUB.html#Generate_the_main_configuration_file" title="GRUB">rebuild your grub config</a>.
</p>
<h3><span class="mw-headline" id="Fixing_audio">Fixing audio</span></h3>
<h4><span class="mw-headline" id="Haswell_based_models">Haswell based models</span></h4>
<p>One or more of followings might help solving audio related issues, setting <code>snd_hda_intel</code> module index reported the most useful. It is highly possible that you will not need to make any change.
</p>
<ul><li> Create <code>/etc/modprobe.d/alsa.conf</code>, the option <code>index</code> will make sure the analog output is the default (and not HDMI), the option <code>model</code> will notify the driver our board model which will make the built-in microphone usable (you can try instead <code>model=alc283-sense-combo</code>). </li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/alsa.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd_hda_intel index=1 model=,alc283-chrome</pre>
<ul><li> Use the <code>~/.asoundrc</code> file from <a rel="nofollow" class="external autonumber" href="https://gist.githubusercontent.com/dhead666/52d6d7d97eff76935713/raw/5b32ee11a2ebbe7a3ee0f928e49b980361a57548/.asoundrc">[12]</a>.</li></ul>
<ul><li> If having problems with headphones (perhaps no audio playing), try <code>alsactl restore</code> in terminal. Now, ALSA should automatically switch between channels when using headphones/speakers. </li></ul>
<ul><li> To fix <a href="../en/Browser_plugins.html#Flash_Player" title="Flash" class="mw-redirect">Flash</a> audio with PulseAudio, use the <code>~/.asoundrc</code> file from <a rel="nofollow" class="external autonumber" href="https://gist.githubusercontent.com/dhead666/0eebff16cd9578c5e035/raw/d4c974fcd50565bf116c57b1884170ecb47f8bf6/.asoundrc">[13]</a>.</li></ul>
<h4><span class="mw-headline" id="Chromebook_Pixel_2015">Chromebook Pixel 2015</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-samus4/">linux-samus4</a></span><sup><small>AUR</small></sup> includes a patch for Broadwell SoC sound devices.  <a rel="nofollow" class="external text" href="https://github.com/raphael/linux-samus">Its GitHub page</a> includes additional instructions for initializing the sound device.
</p>
<h3><span class="mw-headline" id="Hotkeys">Hotkeys</span></h3>
<p><a rel="nofollow" class="external text" href="https://support.google.com/chromebook/answer/1047364?hl=en">The Chromebook function keys</a> recognized as standard F1-F10 by the kernel, it is preferable to map them accordingly to their appearance. It would also be nice to get the keys <code>Delete, Home, End, PgUp, PgDown</code> which in Chrome OS mapped to <code>Alt + : BackSpace, Right, Left, Up, Down</code>.
</p>
<h4><span class="mw-headline" id="xkeyboard_configuration">xkeyboard configuration</span></h4>
<p><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/extra/any/xkeyboard-config/">xkeyboard-config 2.16-1</a> added a <code>chromebook</code> model that enables the Chrome OS style functions for the function keys.  You can, for example, set this using <code>localectl set-x11-keymap us chromebook</code>.  See the <code>chromebook</code> definition in <code>/usr/share/X11/xkb/symbols/inet</code> for the full mappings.
</p>
<h4><span class="mw-headline" id="Sxhkd_configuration">Sxhkd configuration</span></h4>
<p>One way to set the hotkeys would be by using the <a href="../en/Sxhkd.html" title="Sxhkd">Sxhkd</a> daemon. Besides <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=sxhkd">sxhkd</a></span>, this also requires <a href="../en/Advanced_Linux_Sound_Architecture.html" title="Advanced Linux Sound Architecture">amixer</a>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xorg-xbacklight">xorg-xbacklight</a></span>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xautomation">xautomation</a></span>.
</p>
<ul><li> See <a rel="nofollow" class="external autonumber" href="https://gist.github.com/dhead666/191722ec04842d8d330b">[14]</a> for an example configuration in <code>~/.config/sxhkd/sxhkdrc</code>.</li></ul>
<h4><span class="mw-headline" id="Xbindkeys_configuration">Xbindkeys configuration</span></h4>
<p>Another way to configure hotkeys would be by using <a href="../en/Xbindkeys.html" title="Xbindkeys">Xbindkeys</a>. Besides <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xbindkeys">xbindkeys</a></span> this requires <a href="../en/Advanced_Linux_Sound_Architecture.html" title="Advanced Linux Sound Architecture">amixer</a> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xorg-xbacklight">xorg-xbacklight</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xvkbd">xvkbd</a></span>.
</p>
<ul>
<li> See <a rel="nofollow" class="external autonumber" href="https://gist.github.com/dhead666/08562a9a760b18b6e758">[15]</a> for an example configuration in <code>~/.xbindkeysrc</code>.</li>
<li> See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=173418&amp;p=3">vilefridge's xbindkeys configuration</a> for another example.</li>
</ul>
<h5><span class="mw-headline" id="Alternate_xbindkeys_configuration">Alternate xbindkeys configuration</span></h5>
<p><a rel="nofollow" class="external text" href="http://pastie.org/9550960">Volchange</a> (originated in the <a rel="nofollow" class="external text" href="http://www.debianuserforums.org/viewtopic.php?f=55&amp;t=1453#p14351">Debian User Forums</a>)) can manipulate the volume with PulseAudio instead of using <a href="../en/Advanced_Linux_Sound_Architecture.html" title="Advanced Linux Sound Architecture">amixer</a>. Besides <a rel="nofollow" class="external text" href="http://pastie.org/9550960">Volchange</a> this requires <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xorg-xbacklight">xorg-xbacklight</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xvkbd">xvkbd</a></span>.
</p>
<ul>
<li> Download the script from <a rel="nofollow" class="external autonumber" href="http://pastie.org/9550960">[16]</a>.</li>
<li> Make it executable </li>
</ul>
<pre>$ chmod u+x ~/.local/bin/volchange
</pre>
<p>See <a rel="nofollow" class="external autonumber" href="https://gist.github.com/dhead666/4e23b506441ad424e26e">[17]</a> for a matching <code>~/.xbindkeysrc</code>.
</p>
<h4><span class="mw-headline" id="Patch_xkeyboard-config">Patch xkeyboard-config</span></h4>
<p>Another option is to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xkeyboard-config-chromebook/">xkeyboard-config-chromebook</a></span><sup><small>AUR</small></sup>, for more details visit <a rel="nofollow" class="external autonumber" href="https://github.com/dhead666/archlinux-pkgbuilds/tree/master/xkeyboard-config-chromebook">[18]</a>.
</p>
<h4><span class="mw-headline" id="Mapping_in_Gnome_with_gsettings_set">Mapping in Gnome with gsettings set</span></h4>
<p>Some of the function keys can be mapped in Gnome with the advantage of HUD notifications on changes (like volume and brightness changes) which can supplement one of the mapping methods mentioned above. This <a rel="nofollow" class="external text" href="https://gist.github.com/dhead666/0b9c1cc9def939705594">linked example</a> maps the brightness and volume actions. Notice that <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xdotool">xdotool</a></span> is required.
</p>
<h3><span class="mw-headline" id="Power_key_and_lid_switch_handling">Power key and lid switch handling</span></h3>
<h4><span class="mw-headline" id="Ignore_using_logind">Ignore using logind</span></h4>
<p>Out of the box, <code>systemd-logind</code> will catch power key and lid switch events and handle them: it will shut down the Chromebook on a power key press, and a suspend on a lid close. However, this policy might be a bit harsh given that the power key is an ordinary key at the top right of the keyboard that might be pressed accidentally.
</p>
<p>To configure logind to ignore power key presses and lid switches, add the lines to <code>logind.conf</code> below.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/logind.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HandlePowerKey=ignore
HandleLidSwitch=ignore</pre>
<p>Then <a href="../en/Systemd.html#Using_units" title="Restart" class="mw-redirect">restart</a> logind for the changes to take effect.
</p>
<p>Power key and lid switch events will still be logged to journald by logind. See <a href="../en/Power_management.html#ACPI_events" title="Power management">Power management#ACPI events</a>.
</p>
<h4><span class="mw-headline" id="Ignore_by_Gnome">Ignore by Gnome</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> This setting seems to be gone in tweak tool. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Chrome_OS_devices">Talk:Chrome OS devices#</a>)</div>
</div>
<a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-tweak-tool">gnome-tweak-tool</a></span>, open the Tweak Tool and under Power change the Power Button Action.
<h2><span class="mw-headline" id="Known_issues">Known issues</span></h2>
<h3><span class="mw-headline" id="Syslinux">Syslinux</span></h3>
<p>Follow Syslinux installation instructions carefully. Try manual installation to see where the problem comes from. If you see <a href="../en/Syslinux.html#Missing_operating_system" title="Syslinux">Missing Operation System</a> then it may be because you need to use correct bootloader binary. If syslinux does not work try another <a href="../en/Bootloader.html" title="Bootloader" class="mw-redirect">bootloader</a> such as <a href="../en/GRUB.html" title="GRUB">GRUB</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external text" href="http://www.chromium.org/chromium-os/developer-information-for-chrome-os-devices">Developer Information for Chrome OS Devices at the Chromium Projects site</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=173418">BBS topic about the Acer C720</a> which include generic information on Haswell Based Chromebooks.</li>
<li> Re-partitioning in Chrome OS <a rel="nofollow" class="external autonumber" href="http://chromeos-cr48.blogspot.co.uk/2012/04/chrubuntu-1204-now-with-double-bits.html">[19]</a>, <a rel="nofollow" class="external autonumber" href="http://goo.gl/i817v">[20]</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://bit.ly/NewChromebooks">Brent Sullivan's the always updated list of Chrome OS devices</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://prodct.info/chromebooks/">Google Chromebook Comparison Chart</a>
</li>
</ul>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Laptops.html" title="Category:Laptops">Laptops</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
