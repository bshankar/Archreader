<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>ATI - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-ATI skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">ATI</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/AMD_Catalyst.html" title="AMD Catalyst">AMD Catalyst</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/AMDGPU.html" title="AMDGPU">AMDGPU</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Xorg.html" title="Xorg">Xorg</a></li>
</ul>
</div>
<p>Owners of <b>AMD</b> (previously <b>ATI</b>) video cards have a choice between <a href="../en/AMD_Catalyst.html" title="AMD Catalyst">proprietary driver</a> (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst/">catalyst</a></span><sup><small>AUR</small></sup>) and the open source drivers (<strong class="selflink">ATI</strong> for older or <a href="../en/AMDGPU.html" title="AMDGPU">AMDGPU</a> for newer cards). This article covers the <b>ATI</b>/<a rel="nofollow" class="external text" href="https://wiki.freedesktop.org/xorg/radeon/">Radeon</a> open source driver for older cards.
</p>
<p>The open source driver is <i>on par</i> performance-wise with the proprietary driver for many cards. (See this <a rel="nofollow" class="external text" href="http://www.phoronix.com/scan.php?page=article&amp;item=radeonsi-cat-wow&amp;num=1">benchmark</a>.) It also has good dual-head support but worse TV-out support. Newer cards support might be lagging behind Catalyst.
</p>
<p>If unsure, try the open source driver first, it will suit most needs and is generally less problematic. See the <a rel="nofollow" class="external text" href="http://www.x.org/wiki/RadeonFeature">feature matrix</a> to know what is supported for the GPU.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Selecting_the_right_driver"><span class="tocnumber">1</span> <span class="toctext">Selecting the right driver</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Naming_conventions"><span class="tocnumber">2</span> <span class="toctext">Naming conventions</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Installation"><span class="tocnumber">3</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Configuration"><span class="tocnumber">4</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-1 tocsection-5">
<a href="#Loading"><span class="tocnumber">5</span> <span class="toctext">Loading</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Enable_early_KMS"><span class="tocnumber">5.1</span> <span class="toctext">Enable early KMS</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Performance_tuning"><span class="tocnumber">6</span> <span class="toctext">Performance tuning</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Enabling_video_acceleration"><span class="tocnumber">6.1</span> <span class="toctext">Enabling video acceleration</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Driver_options"><span class="tocnumber">6.2</span> <span class="toctext">Driver options</span></a></li>
<li class="toclevel-2 tocsection-10">
<a href="#Kernel_parameters"><span class="tocnumber">6.3</span> <span class="toctext">Kernel parameters</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Deactivating_PCI-E_2.0"><span class="tocnumber">6.3.1</span> <span class="toctext">Deactivating PCI-E 2.0</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#Gallium_Heads-Up_Display"><span class="tocnumber">6.4</span> <span class="toctext">Gallium Heads-Up Display</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#Hybrid_graphics.2FAMD_Dynamic_Switchable_Graphics"><span class="tocnumber">7</span> <span class="toctext">Hybrid graphics/AMD Dynamic Switchable Graphics</span></a></li>
<li class="toclevel-1 tocsection-14">
<a href="#Powersaving"><span class="tocnumber">8</span> <span class="toctext">Powersaving</span></a>
<ul>
<li class="toclevel-2 tocsection-15">
<a href="#Dynamic_power_management"><span class="tocnumber">8.1</span> <span class="toctext">Dynamic power management</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#Commandline_Tools"><span class="tocnumber">8.1.1</span> <span class="toctext">Commandline Tools</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17">
<a href="#Old_methods"><span class="tocnumber">8.2</span> <span class="toctext">Old methods</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#Dynamic_frequency_switching"><span class="tocnumber">8.2.1</span> <span class="toctext">Dynamic frequency switching</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Profile-based_frequency_switching"><span class="tocnumber">8.2.2</span> <span class="toctext">Profile-based frequency switching</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Persistent_configuration"><span class="tocnumber">8.2.3</span> <span class="toctext">Persistent configuration</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Graphical_tools"><span class="tocnumber">8.2.4</span> <span class="toctext">Graphical tools</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-22"><a href="#Other_notes"><span class="tocnumber">8.3</span> <span class="toctext">Other notes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="#Fan_Speed"><span class="tocnumber">9</span> <span class="toctext">Fan Speed</span></a></li>
<li class="toclevel-1 tocsection-24">
<a href="#TV_out"><span class="tocnumber">10</span> <span class="toctext">TV out</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Force_TV-out_in_KMS"><span class="tocnumber">10.1</span> <span class="toctext">Force TV-out in KMS</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#HDMI_audio"><span class="tocnumber">11</span> <span class="toctext">HDMI audio</span></a></li>
<li class="toclevel-1 tocsection-27">
<a href="#Multihead_setup"><span class="tocnumber">12</span> <span class="toctext">Multihead setup</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="#Using_the_RandR_extension"><span class="tocnumber">12.1</span> <span class="toctext">Using the RandR extension</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Independent_X_screens"><span class="tocnumber">12.2</span> <span class="toctext">Independent X screens</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-30"><a href="#Turn_vsync_off"><span class="tocnumber">13</span> <span class="toctext">Turn vsync off</span></a></li>
<li class="toclevel-1 tocsection-31">
<a href="#Troubleshooting"><span class="tocnumber">14</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-32"><a href="#Artifacts_upon_logging_in"><span class="tocnumber">14.1</span> <span class="toctext">Artifacts upon logging in</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Adding_undetected_resolutions"><span class="tocnumber">14.2</span> <span class="toctext">Adding undetected resolutions</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#AGP_is_disabled_.28with_KMS.29"><span class="tocnumber">14.3</span> <span class="toctext">AGP is disabled (with KMS)</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#TV_showing_a_black_border_around_the_screen"><span class="tocnumber">14.4</span> <span class="toctext">TV showing a black border around the screen</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Black_screen_with_mouse_cursor_on_resume_from_suspend_in_X"><span class="tocnumber">14.5</span> <span class="toctext">Black screen with mouse cursor on resume from suspend in X</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#No_desktop_effects_in_KDE4_with_X1300_and_Radeon_driver"><span class="tocnumber">14.6</span> <span class="toctext">No desktop effects in KDE4 with X1300 and Radeon driver</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Black_screen_and_no_console.2C_but_X_works_in_KMS"><span class="tocnumber">14.7</span> <span class="toctext">Black screen and no console, but X works in KMS</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#2D_performance_.28e.g._scrolling.29_is_slow"><span class="tocnumber">14.8</span> <span class="toctext">2D performance (e.g. scrolling) is slow</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#Monitor_rotation_works_for_cursor_but_not_windows.2Fcontent"><span class="tocnumber">14.9</span> <span class="toctext">Monitor rotation works for cursor but not windows/content</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#ATI_X1600_.28RV530_series.29_3D_application_show_black_windows"><span class="tocnumber">14.10</span> <span class="toctext">ATI X1600 (RV530 series) 3D application show black windows</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#Cursor_corruption_after_coming_out_of_sleep"><span class="tocnumber">14.11</span> <span class="toctext">Cursor corruption after coming out of sleep</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#DisplayPort_stays_black_on_multimonitor_mode"><span class="tocnumber">14.12</span> <span class="toctext">DisplayPort stays black on multimonitor mode</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="#Low_2D_performance_in_console_and_X"><span class="tocnumber">14.13</span> <span class="toctext">Low 2D performance in console and X</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="#R9-390_Poor_Performance_and.2For_Instability"><span class="tocnumber">14.14</span> <span class="toctext">R9-390 Poor Performance and/or Instability</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Selecting_the_right_driver">Selecting the right driver</span></h2>
<p>Depending on the card you have, find the right driver in <a href="../en/Xorg.html#ATI" title="Xorg">Xorg#ATI</a>. This page has instructions for <b>ATI</b>.
</p>
<h2><span class="mw-headline" id="Naming_conventions">Naming conventions</span></h2>
<p>The <a href="https://en.wikipedia.org/wiki/Radeon" class="extiw" title="wikipedia:Radeon">Radeon</a> brand follows a naming scheme that relates each product to a market segment. Within this article, readers will see both <i>product</i> names (e.g. HD 4850, X1900) and <i>code</i> or <i>core</i> names (e.g. RV770, R580). Traditionally, a <i>product series</i> will correspond to a <i>core series</i> (e.g. the "X1000" product series includes the X1300, X1600, X1800, and X1900 products which utilize the "R500" core series – including the RV515, RV530, R520, and R580 cores).
</p>
<p>For a table of core and product series, see <a href="https://en.wikipedia.org/wiki/Radeon" class="extiw" title="wikipedia:Radeon">Wikipedia:Radeon</a> and <a href="https://en.wikipedia.org/wiki/List_of_AMD_graphics_processing_units" class="extiw" title="wikipedia:List of AMD graphics processing units">Wikipedia:List of AMD graphics processing units</a>.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If coming from the proprietary Catalyst driver, see <a href="../en/AMD_Catalyst.html#Uninstallation" title="AMD Catalyst">AMD Catalyst#Uninstallation</a> first.</div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-ati">xf86-video-ati</a></span> package. It provides the DDX driver for 2D acceleration and it pulls in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mesa">mesa</a></span> as a dependency, providing the DRI driver for 3D acceleration.
</p>
<p>To enable OpenGL support, also install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mesa-libgl">mesa-libgl</a></span>. If you are on x86_64 and need 32-bit support, also install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=lib32-mesa-libgl">lib32-mesa-libgl</a></span> from the <a href="../en/Multilib.html" title="Multilib">multilib</a> repository.
</p>
<p>Support for <a href="#Enabling_video_acceleration">accelerated video decoding</a> is provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mesa-vdpau">mesa-vdpau</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=lib32-mesa-vdpau">lib32-mesa-vdpau</a></span> packages.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Xorg will automatically load the driver and it will use your monitor's EDID to set the native resolution. Configuration is only required for tuning the driver.
</p>
<p>If you want manual configuration, create <code>/etc/X11/xorg.conf.d/20-radeon.conf</code>, and add the following:
</p>
<pre>Section "Device"
    Identifier "Radeon"
    Driver "radeon"
EndSection
</pre>
<p>Using this section, you can enable features and tweak the driver settings.
</p>
<h2><span class="mw-headline" id="Loading">Loading</span></h2>
<p>The radeon kernel module should load fine automatically on system boot.
</p>
<p>If it does not happen, then:
</p>
<ul>
<li> Make sure you do <b>not</b> have <code>nomodeset</code> or <code>vga=</code> as a <a href="../en/Kernel_parameters.html" title="Kernel parameter" class="mw-redirect">kernel parameter</a>, since radeon requires <a href="../en/Kernel_mode_setting.html" title="KMS" class="mw-redirect">KMS</a>.</li>
<li> Also, check that you have not disabled radeon by using any <a href="../en/Kernel_modules.html#Blacklisting" title="Kernel modules">kernel module blacklisting</a>.</li>
</ul>
<h3><span class="mw-headline" id="Enable_early_KMS">Enable early KMS</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>If you have problems with the resolution, <a href="../en/Kernel_mode_setting.html#Forcing_modes_and_EDID" title="Kernel mode setting">Kernel mode setting#Forcing modes and EDID</a> may help.</div>
<p><a href="../en/Kernel_mode_setting.html" title="Kernel mode setting">Kernel mode setting</a> (KMS) is supported by the radeon driver and is mandatory and enabled by default. 
</p>
<p>KMS is typically initialized after the <a href="../en/Arch_boot_process.html#initramfs" title="Arch boot process">initramfs stage</a>. It is possible, however, to enable KMS during the initramfs stage. To do this, add the <code>radeon</code> module to the <code>MODULES</code> line in <code>/etc/mkinitcpio.conf</code>:
</p>
<pre>MODULES="... radeon ..."
</pre>
<p>Now, regenerate the initramfs:
</p>
<pre># mkinitcpio -p linux
</pre>
<p>The change takes effect at the next reboot.
</p>
<h2><span class="mw-headline" id="Performance_tuning">Performance tuning</span></h2>
<h3><span class="mw-headline" id="Enabling_video_acceleration">Enabling video acceleration</span></h3>
<p>See <a href="../en/Hardware_video_acceleration.html" title="Hardware video acceleration">Hardware video acceleration</a>.
</p>
<h3><span class="mw-headline" id="Driver_options">Driver options</span></h3>
<p>The following options apply to <code>/etc/X11/xorg.conf.d/<b>20-radeon.conf</b></code>.
</p>
<p>Please read <code>man radeon</code> and <a rel="nofollow" class="external text" href="http://www.x.org/wiki/RadeonFeature/#index4h2">RadeonFeature</a> first before applying driver options.
</p>
<p><b>ColorTiling</b> and <b>ColorTiling2D</b> is completely safe to enable and supposedly is enabled by default. Most users will notice increased performance but it is not yet supported on R200 and earlier cards. Can be enabled on earlier cards, but the workload is transferred to the CPU:
</p>
<pre>Option "ColorTiling" "on"
Option "ColorTiling2D" "on"
</pre>
<p><b>DRI3</b> support can be enabled, instead of using the default <b>DRI2</b>. You may want to read the following benchmark by <a rel="nofollow" class="external text" href="http://www.phoronix.com/scan.php?page=article&amp;item=radeon-dri3-perf&amp;num=1">Phoronix</a> to give you an idea of the performance of DRI2 vs DRI3:
</p>
<pre>Option "DRI" "3"
</pre>
<p><b>TearFree</b> is a tearing prevention using the hardware page flipping mechanism. Enabling  this
option currently disables Option "EnablePageFlip":
</p>
<pre>Option "TearFree" "on"
</pre>
<p><b>Acceleration architecture</b>; Glamor is available as 2D acceleration method implement through OpenGL, and it should work with graphic cards whose drivers are newer or equal to R300.
Since xf86-video-ati driver-1:7.2.0-1, it is automatically enabled with radeonsi drivers (Southern Islands and superior GFX cards); on other graphic cards the method can be forced by adding AccelMethod <b>glamor</b> to the configuration file:
</p>
<pre>Option "AccelMethod" "glamor"
</pre>
<p>When using Glamor as acceleration architecture it is possible to enable the option <b>ShadowPrimary</b>, enables a so-called "shadow primary" buffer for fast CPU access to pixel data, and separate scanout  buf‐fers  for  each  display  controller  (CRTC).  This may improve performance for some 2D workloads, potentially at the expense of other (e.g. 3D, video) workloads. Note that enabling this option currently disables Option "EnablePageFlip":
</p>
<pre>Option "ShadowPrimary" "on"
</pre>
<p><b>EXAVSync </b> is only available when using EXA and can be enabled to avoid tearing by stalling the engine until the display controller has passed the destination region. It reduces tearing at the cost of  performance and has been know to cause instability on some chips:
</p>
<pre>Option "EXAVSync" "yes"
</pre>
<p>Below is a sample configuration file of <code>/etc/X11/xorg.conf.d/<b>20-radeon.conf</b></code>:
</p>
<pre>
Section "Device"
	Identifier  "Radeon"
	Driver "radeon"
	Option "AccelMethod" "glamor"
        Option "DRI" "3"
        Option "TearFree" "on"
EndSection
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=driconf">driconf</a></span> is a tool that allows to modify several settings: vsync, anisotropic filtering, texture compression, etc. Using this tool it is also possible to "disable Low Impact fallback" needed by some programs (e.g. Google Earth).</div>
<h3><span class="mw-headline" id="Kernel_parameters">Kernel parameters</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>You may want to debug the newly parameters with <code>systool</code> as stated in <a href="../en/Kernel_modules.html#Obtaining_information" title="Kernel modules">Kernel modules#Obtaining information</a>.</div>
<p>Defining the <b>gartsize</b>, if not autodetected, can be done by adding <code>radeon.gartsize=32</code> into <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Setting this parameter should not be needed anymore with modern AMD videocards:
<pre>
[drm] Detected VRAM RAM=2048M, BAR=256M
[drm] radeon: 2048M of VRAM memory ready
[drm] radeon: 2048M of GTT memory ready.
</pre>
</div>
<p>The changes take effect at the next reboot.
</p>
<h4><span class="mw-headline" id="Deactivating_PCI-E_2.0">Deactivating PCI-E 2.0</span></h4>
<p>Since kernel 3.6, PCI-E v2.0 in <b>radeon</b> is turned on by default.
</p>
<p>It may be unstable with some motherboards, deactivation can be done by adding <code>radeon.pcie_gen2=0</code> as a <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<p>See <a rel="nofollow" class="external text" href="http://www.phoronix.com/scan.php?page=article&amp;item=amd_pcie_gen2&amp;num=1">Phoronix article</a> for more information.
</p>
<h3><span class="mw-headline" id="Gallium_Heads-Up_Display">Gallium Heads-Up Display</span></h3>
<p>The radeonsi driver supports activating a heads up display which can draw transparent graphs and text on top of applications that are rendering such as games. These can show such values as the current frame rate or the CPU load for each CPU core or an average of all of them. The HUD is controlled by the GALLIUM_HUD environment variable, and can be passed the following list of parameters among others:
</p>
<ul>
<li>"fps" - displays current frames per second</li>
<li>"cpu" - displays the average CPU load</li>
<li>"cpu0" - displays the CPU load for the first CPU core</li>
<li>"cpu0+cpu1" - displays the CPU load for the first two CPU cores</li>
<li>"draw-calls" - displays how many times each material in an object is drawn to the screen</li>
<li>"requested-VRAM" - displayed how much VRAM is being used on the GPU</li>
<li>"pixels-rendered" - displays how many pixels are being displayed</li>
</ul>
<p>To see a full list of parameters as well as some notes on operating GALLIUM_HUD you can also pass the "help" parameter to a simple application such as glxgears and see the corresponding terminal output:
</p>
<pre># GALLIUM_HUD="help" glxgears</pre>
<p>More information can be found from this <a rel="nofollow" class="external text" href="http://lists.freedesktop.org/archives/mesa-dev/2013-March/036586.html">mailing list post</a> or <a rel="nofollow" class="external text" href="https://kparal.wordpress.com/2014/03/03/fraps-like-fps-overlay-for-linux/">this blog post</a>.
</p>
<h2><span class="mw-headline" id="Hybrid_graphics.2FAMD_Dynamic_Switchable_Graphics">Hybrid graphics/AMD Dynamic Switchable Graphics</span></h2>
<p>It is the technology used on recent laptops equiped with two GPUs, one power-efficent (generally Intel integrated card) and one more powerful and more power-hungry (generally Radeon or Nvidia). There are two ways to get it work:
</p>
<ul>
<li> If it is not required to run 'GPU-hungry' applications, it is possible to disable the discrete card (see <a rel="nofollow" class="external text" href="https://help.ubuntu.com/community/HybridGraphics#Using_vga_switcheroo">Ubuntu wiki</a>): <code>echo OFF &gt; /sys/kernel/debug/vgaswitcheroo/switch</code>.</li>
<li> <a href="../en/PRIME.html" title="PRIME">PRIME</a>: Is a proper way to use hybrid graphics on Linux, but still requires a bit of manual intervention from the user.</li>
</ul>
<h2><span class="mw-headline" id="Powersaving">Powersaving</span></h2>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Power management is supported on all chips that include the appropriate power state tables in the vbios (R1xx and newer). "dpm" is only supported on R6xx and newer chips.</div>
<p>With the radeon driver, power saving is disabled by default and has to be enabled manually if desired.
</p>
<p>You can choose between three different methods:
</p>
<ol>
<li> <a href="#Dynamic_power_management">dpm</a> (enabled by default since kernel 3.13)</li>
<li> <a href="#Dynamic_frequency_switching">dynpm</a>
</li>
<li> <a href="#Profile-based_frequency_switching">profile</a>
</li>
</ol>
<p>See <a rel="nofollow" class="external free" href="http://www.x.org/wiki/RadeonFeature/#index3h2">http://www.x.org/wiki/RadeonFeature/#index3h2</a> for more details.
</p>
<h3><span class="mw-headline" id="Dynamic_power_management">Dynamic power management</span></h3>
<p>Since kernel 3.13, DPM is enabled by default for <a rel="nofollow" class="external text" href="http://kernelnewbies.org/Linux_3.13#head-f95c198f6fdc7defe36f470dc8369cf0e16898df">lots of AMD Radeon hardware</a>. If you want to disable it, add the parameter <code>radeon.dpm=0</code> to the <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<p>Unlike <a href="#Dynamic_frequency_switching">dynpm</a>, the "dpm" method uses hardware on the GPU to dynamically change the clocks and voltage based on GPU load. It also enables clock and power gating.
</p>
<p>There are 3 operation modes to choose from:
</p>
<ul>
<li> <code>battery</code> lowest power consumption</li>
<li> <code>balanced</code> sane default</li>
<li> <code>performance</code> highest performance</li>
</ul>
<p>They can be changed via sysfs
</p>
<pre># echo battery &gt; /sys/class/drm/card0/device/power_dpm_state
</pre>
<p>For testing or debugging purposes, you can force the card to run in a set performance mode:
</p>
<ul>
<li> <code>auto</code> default; uses all levels in the power state</li>
<li> <code>low</code> enforces the lowest performance level</li>
<li> <code>high</code> enforces the highest performance level</li>
</ul>
<pre># echo low &gt; /sys/class/drm/card0/device/power_dpm_force_performance_level
</pre>
<h4><span class="mw-headline" id="Commandline_Tools">Commandline Tools</span></h4>
<ul><li> <a rel="nofollow" class="external text" href="https://github.com/superjamie/snippets/blob/master/radcard">radcard</a> - A script to get and set DPM power states and levels</li></ul>
<h3><span class="mw-headline" id="Old_methods">Old methods</span></h3>
<h4><span class="mw-headline" id="Dynamic_frequency_switching">Dynamic frequency switching</span></h4>
<p>This method dynamically changes the frequency depending on GPU load, so performance is ramped up when running GPU intensive apps, and ramped down when the GPU is idle. The re-clocking is attempted during vertical blanking periods, but due to the timing of the re-clocking functions, does not always complete in the blanking period, which can lead to flicker in the display. Due to this, dynpm only works when a single head is active.
</p>
<p>It can be activated by simply running the following command:
</p>
<pre># echo dynpm &gt; /sys/class/drm/card0/device/power_method
</pre>
<h4><span class="mw-headline" id="Profile-based_frequency_switching">Profile-based frequency switching</span></h4>
<p>This method will allow you to select one of the five profiles (described below). Different profiles, for the most part, end up changing the frequency/voltage of the GPU. This method is not as aggressive, but is more stable and flicker free and works with multiple heads active.
</p>
<p>To activate the method, run the following command:
</p>
<pre># echo profile &gt; /sys/class/drm/card0/device/power_method
</pre>
<p>Select one of the available profiles:
</p>
<ul>
<li> <code>default</code> uses the default clocks and does not change the power state. This is the default behaviour.</li>
<li> <code>auto</code> selects between <code>mid</code> and <code>high</code> power states based on the whether the system is on battery power or not.</li>
<li> <code>low</code> forces the gpu to be in the <code>low</code> power state all the time. Note that <code>low</code> can cause display problems on some laptops, which is why <code>auto</code> only uses <code>low</code> when monitors are off. Selected on other profiles when the monitors are in the <a href="../en/Display_Power_Management_Signaling.html" title="DPMS" class="mw-redirect">DPMS</a>-off state.</li>
<li> <code>mid</code> forces the gpu to be in the <code>mid</code> power state all the time.</li>
<li> <code>high</code> forces the gpu to be in the <code>high</code> power state all the time.</li>
</ul>
<p>As an example, we will activate the <code>low</code> profile (replace <code>low</code> with any of the aforementioned profiles as necessary):
</p>
<pre># echo low &gt; /sys/class/drm/card0/device/power_profile
</pre>
<h4><span class="mw-headline" id="Persistent_configuration">Persistent configuration</span></h4>
<p>The activation described above is not persistent, it will not last when the computer is rebooted. To make it persistent, you can use <a href="../en/Systemd.html#Temporary_files" title="Systemd">systemd-tmpfiles</a> (example for <a href="#Dynamic_frequency_switching">#Dynamic frequency switching</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tmpfiles.d/radeon-pm.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
w /sys/class/drm/card0/device/power_method - - - - dynpm
</pre>
<p>Alternatively, you may use this <a href="../en/Udev.html" title="Udev">udev</a> rule instead (example for <a href="#Profile-based_frequency_switching">#Profile-based frequency switching</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/30-radeon-pm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
KERNEL=="dri/card0", SUBSYSTEM=="drm", DRIVERS=="radeon", ATTR{device/power_method}="profile", ATTR{device/power_profile}="low"
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If the above rule is failing, try removing the <code>dri/</code> prefix.</div>
<h4><span class="mw-headline" id="Graphical_tools">Graphical tools</span></h4>
<ul><li> <b>Radeon-tray</b> — A small program to control the power profiles of your Radeon card via systray icon. It is written in PyQt4 and is suitable for non-Gnome users.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/StuntsPT/Radeon-tray">https://github.com/StuntsPT/Radeon-tray</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/radeon-tray/">radeon-tray</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h3><span class="mw-headline" id="Other_notes">Other notes</span></h3>
<p>To view the speed that the GPU is running at, perform the following command and you will get something like this output:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># cat /sys/kernel/debug/dri/0/radeon_pm_info</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
  state: PM_STATE_ENABLED
  default engine clock: 300000 kHz
  current engine clock: 300720 kHz
  default memory clock: 200000 kHz
</pre>
<p>It depends on which GPU line yours is, however. Along with the radeon driver versions, kernel versions, etc. So it may not have much/any voltage regulation at all.
</p>
<p>Thermal sensors are implemented via external i2c chips or via the internal thermal sensor (rv6xx-evergreen only). To get the temperature on asics that use i2c chips, you need to load the appropriate hwmon driver for the sensor used on your board (lm63, lm64, etc.). The drm will attempt to load the appropriate hwmon driver. On boards that use the internal thermal sensor, the drm will set up the hwmon interface automatically. When the appropriate driver is loaded, the temperatures can be accessed via <a href="../en/Lm_sensors.html" title="Lm sensors">lm_sensors</a> tools or via sysfs in <code>/sys/class/hwmon</code>.
</p>
<h2><span class="mw-headline" id="Fan_Speed">Fan Speed</span></h2>
<p>While the power saving features above should handle fan speeds quite well, some cards may still be too noisy in their idle state. In this case, and when your card supports it, you can change the fan speed manually.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>
<ul>
<li> Keep in mind that the following method sets the fan speed to a fixed value, hence it will not adjust with the stress of your gpu, which can lead to overheating under heavy load.</li>
<li> Better check your gpu temperature when applying lower than standard values.  </li>
</ul>
</div>
<p>First, issue the following command to enable the manual adjustment of the fan speed of your graphics card (or your first gpu in case of a multi gpu setup). 
</p>
<pre># echo 1 &gt; /sys/class/drm/card0/device/hwmon/hwmon2/pwm1_enable
</pre>
<p>Then set your desired fan speed from 0 to 255, which corresponds to 0-100% fan speed (The following command sets it to roughly 20%).  
</p>
<pre># echo 55 &gt; /sys/class/drm/card0/device/hwmon/hwmon2/pwm1
</pre>
<p>For persistence, use <a href="../en/Systemd.html#Temporary_files" title="Systemd">systemd-tmpfiles</a> as shown above by the example with power profiles.
</p>
<p>If a fixed value isn't desired, there are possibilities to define a custom fan curve manually by, for example, writing a script in which fan speeds are set depending on the current temperature (current value in /sys/class/drm/card0/device/hwmon/hwmon2/temp1_input), preferably with hystereses. There is also a gui solution: <a rel="nofollow" class="external free" href="http://github.com/marazmista/radeon-profile">http://github.com/marazmista/radeon-profile</a><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/radeon-profile-git/">radeon-profile-git</a></span><sup><small>AUR</small></sup>.
</p>
<h2><span class="mw-headline" id="TV_out">TV out</span></h2>
<p>First, check that you have an S-video output: <code>xrandr</code> should give you something like
</p>
<pre>Screen 0: minimum 320x200, current 1024x768, maximum 1280x1200
...
S-video disconnected (normal left inverted right x axis y axis)
</pre>
<p>Now we should tell Xorg that it is actually connected (it <i>is</i>, right?)
</p>
<pre>xrandr --output S-video --set "load detection" 1
</pre>
<p>Setting TV standard to use:
</p>
<pre>xrandr --output S-video --set "tv standard" ntsc
</pre>
<p>Adding a mode for it (currently supports only 800x600):
</p>
<pre>xrandr --addmode S-video 800x600
</pre>
<p>Clone mode:
</p>
<pre>xrandr --output S-video --same-as VGA-0
</pre>
<p>Now let us try to see what we have:
</p>
<pre>xrandr --output S-video --mode 800x600
</pre>
<p>At this point you should see a 800x600 version of your desktop on your TV.
</p>
<p>To disable the output, do
</p>
<pre>xrandr --output S-video --off
</pre>
<h3><span class="mw-headline" id="Force_TV-out_in_KMS">Force TV-out in KMS</span></h3>
<p>The kernel can recognize <code>video=</code> parameter in following form (see <a href="../en/Kernel_mode_setting.html" title="KMS" class="mw-redirect">KMS</a> for more details):
</p>
<pre>video=&lt;conn&gt;:&lt;xres&gt;x&lt;yres&gt;[M][R][-&lt;bpp&gt;][@&lt;refresh&gt;][i][m][eDd]
</pre>
<p>For example:
</p>
<pre>video=DVI-I-1:1280x1024-24@60e
</pre>
<p>Parameters with whitespaces must be quoted:
</p>
<pre>"video=9-pin DIN-1:1024x768-24@60e"
</pre>
<p>Current mkinitcpio implementation also requires <code>#</code> in front. For example:
</p>
<pre>root=/dev/disk/by-uuid/d950a14f-fc0c-451d-b0d4-f95c2adefee3 ro quiet radeon.modeset=1 security=none # video=DVI-I-1:1280x1024-24@60e "video=9-pin DIN-1:1024x768-24@60e"
</pre>
<ul>
<li> Grub can pass such command line as is.</li>
<li> Lilo needs backslashes for doublequotes (append <code># \"video=9-pin DIN-1:1024x768-24@60e\"</code>)</li>
<li> Grub2: TODO</li>
</ul>
<p>You can get list of your video outputs with following command:
</p>
<pre>$ ls -1 /sys/class/drm/ | grep -E '^card[[:digit:]]+-' | cut -d- -f2-</pre>
<h2><span class="mw-headline" id="HDMI_audio">HDMI audio</span></h2>
<p>HDMI audio is supported in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-ati">xf86-video-ati</a></span> video driver. If you are using a kernel 3.x older than 3.13, HDMI audio is disabled by default because it can be problematic. To enable HDMI audio add <code>radeon.audio=1</code> to your <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<p>If there is no video after boot up, the driver option has to be disabled.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>
<ul>
<li> If HDMI audio does not work after installing the driver, test your setup with the procedure at <a href="../en/Advanced_Linux_Sound_Architecture/Troubleshooting.html#HDMI_Output_does_not_work" title="Advanced Linux Sound Architecture/Troubleshooting">Advanced Linux Sound Architecture/Troubleshooting#HDMI Output does not work</a>.</li>
<li> If the sound is distorted in PulseAudio try setting <code>tsched=0</code> as described in <a href="../en/PulseAudio/Troubleshooting.html#Glitches.2C_skips_or_crackling" title="PulseAudio/Troubleshooting">PulseAudio/Troubleshooting#Glitches, skips or crackling</a> and make sure <code>rtkit</code> daemon is running.</li>
<li> Your sound card might use the same module, since HDA compliant hardware is pretty common. <a href="../en/Advanced_Linux_Sound_Architecture.html#Set_the_default_sound_card" title="Advanced Linux Sound Architecture">Change the default sound card</a> using one of the suggested methods, which include using the <code>defaults</code> node in alsa configuration.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Multihead_setup">Multihead setup</span></h2>
<h3><span class="mw-headline" id="Using_the_RandR_extension">Using the RandR extension</span></h3>
<p>See <a href="../en/Multihead.html#RandR" title="Multihead">Multihead#RandR</a> how to setup multiple monitors by using <a href="https://en.wikipedia.org/wiki/RandR" class="extiw" title="wikipedia:RandR">RandR</a>.
</p>
<h3><span class="mw-headline" id="Independent_X_screens">Independent X screens</span></h3>
<p>Independent dual-headed setups can be configured the usual way. However you might want to know that the radeon driver has a <code>"ZaphodHeads"</code> option which allows you to bind a specific device section to an output of your choice:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-radeon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
Section "Device"
  Identifier "Device0"
  Driver "radeon"
  Option "ZaphodHeads" "VGA-0"
  VendorName "ATI"
  BusID "PCI:1:0:0"
  Screen 0
EndSection
</pre>
<p>This can be a life-saver, when using videocards that have more than two outputs. For instance one HDMI out, one DVI, one VGA, will only select and use HDMI+DVI outputs for the dual-head setup, unless you explicitly specify <code>"ZaphodHeads" "VGA-0"</code>.
</p>
<h2><span class="mw-headline" id="Turn_vsync_off">Turn vsync off</span></h2>
<p>The radeon driver will enable vsync by default, which is perfectly fine except for benchmarking. To turn it off, create <code>~/.drirc</code> (or edit it if it already exists) and add the following section:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.drirc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
&lt;driconf&gt;
    &lt;device screen="0" driver="dri2"&gt;
        &lt;application name="Default"&gt;
            &lt;option name="vblank_mode" value="0" /&gt;
        &lt;/application&gt;
    &lt;/device&gt;
    &lt;!-- Other devices ... --&gt;
&lt;/driconf&gt;
</pre>
<p>Make sure the driver is <b>dri2</b>, not your video card code (like r600).
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> If the above does not work, please file a bug report. Also, why is the <code>SwapbuffersWait</code> option relevant here? (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:ATI">Talk:ATI#</a>)</div>
</div>
<p>If vsync is still enabled, you can try to disable it by editing the xf86-video-ati configuration :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-radeon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
Section "Device"
	Identifier  "My Graphics Card"
	Driver	"radeon"
	Option	"EXAVSync" "off"
	Option "SwapbuffersWait" "false" 
EndSection
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Artifacts_upon_logging_in">Artifacts upon logging in</span></h3>
<p>If encountering artifacts, first try starting X without <code>/etc/X11/xorg.conf</code>. Recent versions of Xorg are capable of reliable auto-detection and auto-configuration for most use cases. Outdated or improperly configured <code>xorg.conf</code> files are known to cause trouble.
</p>
<p>In order to run without a configuration tile, it is recommended that the <code>xorg-input-drivers</code> package group be installed.
</p>
<p>You may as well try disabling <code>EXAPixmaps</code> in <code>/etc/X11/xorg.conf.d/20-radeon.conf</code>:
</p>
<pre>Section "Device"
    Identifier "Radeon"
    Driver "radeon"
    Option "EXAPixmaps" "off"
EndSection
</pre>
<h3><span class="mw-headline" id="Adding_undetected_resolutions">Adding undetected resolutions</span></h3>
<p>Please see the <a href="../en/Xrandr.html#Adding_undetected_resolutions" title="Xrandr">Xrandr page</a>.
</p>
<h3><span class="mw-headline" id="AGP_is_disabled_.28with_KMS.29">AGP is disabled (with KMS)</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> There is no explanation of AGP drivers anywhere in this article. Is this needed? (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:ATI">Talk:ATI#</a>)</div>
</div>
<p>If you experience poor performance and dmesg shows something like this
</p>
<pre>[drm:radeon_agp_init] *ERROR* Unable to acquire AGP: -19
</pre>
<p>then check if the agp driver for your motherboard (e.g., <code>via_agp</code>, <code>intel_agp</code> etc.) is loaded before the <code>radeon</code> module, see <a href="#Loading">#Loading</a>.
</p>
<h3><span class="mw-headline" id="TV_showing_a_black_border_around_the_screen">TV showing a black border around the screen</span></h3>
<p>When I connected my TV to my Radeon HD 5770 using the HDMI port, the TV showed a blurry picture with a 2-3cm border around it. This is not the case when using the proprietary driver. However, this protection against overscanning (see <a href="https://en.wikipedia.org/wiki/Overscan" class="extiw" title="wikipedia:Overscan">Wikipedia:Overscan</a>) can be turned off using xrandr:
</p>
<pre>xrandr --output HDMI-0 --set underscan off
</pre>
<h3><span class="mw-headline" id="Black_screen_with_mouse_cursor_on_resume_from_suspend_in_X">Black screen with mouse cursor on resume from suspend in X</span></h3>
<p>Waking from suspend on cards with 32MB or less can result in a black screen with a mouse pointer in X.  Some parts of the screen may be redrawn when under the mouse cursor.  Forcing <code>EXAPixmaps</code> to <code>"enabled"</code> in <code>/etc/X11/xorg.conf.d/20-radeon.conf</code> may fix the problem.  See <a href="#Performance_tuning">performance tuning</a> for more information.
</p>
<h3><span class="mw-headline" id="No_desktop_effects_in_KDE4_with_X1300_and_Radeon_driver">No desktop effects in KDE4 with X1300 and Radeon driver</span></h3>
<p>A bug in KDE4 may prevent an accurate video hardware check, thereby deactivating desktop effects despite the X1300 having more than sufficient GPU power. A workaround may be to manually override such checks in KDE4 configuration files <code>/usr/share/kde-settings/kde-profile/default/share/config/kwinrc</code> and/or <code>.kde/share/config/kwinrc</code>. 
</p>
<p>Add:
</p>
<pre>DisableChecks=true
</pre>
<p>To the [Compositing] section. Ensure that compositing is enabled with:
</p>
<pre>Enabled=true
</pre>
<h3><span class="mw-headline" id="Black_screen_and_no_console.2C_but_X_works_in_KMS">Black screen and no console, but X works in KMS</span></h3>
<p>This is a solution to the no-console problem that might come up, when using two or more ATI cards on the same PC. Fujitsu Siemens Amilo PA 3553 laptop for example has this problem. This is due to fbcon console driver mapping itself to the wrong framebuffer device that exists on the wrong card. This can be fixed by adding this to the kernel boot line:
</p>
<pre>fbcon=map:1
</pre>
<p>This will tell the fbcon to map itself to the <code>/dev/fb1</code> framebuffer dev and not the <code>/dev/fb0</code>, that in our case exists on the wrong graphics card. If that does not fix your problem, try booting with
</p>
<pre>fbcon=map:0
</pre>
<p>instead.
</p>
<h3><span class="mw-headline" id="2D_performance_.28e.g._scrolling.29_is_slow">2D performance (e.g. scrolling) is slow</span></h3>
<p>If you're having problems with 2D performance, like scrolling in terminal or browser, you might need to add <code>Option  "MigrationHeuristic"  "greedy"</code> into the <code>"Device"</code> section of your <code>xorg.conf</code> file.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>This only applies to EXA.</div>
<p>Below is a sample configuration file <code>/etc/X11/xorg.conf.d/<b>20-radeon.conf</b></code>:
</p>
<pre>
Section "Device"
        Identifier  "My Graphics Card"
        Driver  "radeon"
        Option  "MigrationHeuristic"  "greedy"
EndSection
</pre>
<h3><span class="mw-headline" id="Monitor_rotation_works_for_cursor_but_not_windows.2Fcontent">Monitor rotation works for cursor but not windows/content</span></h3>
<p>Users with newer graphics boards who have enabled EXA instead of glamor may find that rotating their monitor with xrandr causes the cursor and monitor dimensions to rotate, but windows and other content stay in their normal orientation. Additionally, the cursor moves according to normal rotation when the user moves the mouse. Look for the following line in your <code>/var/log/Xorg.0.log</code> when you issue the xrandr rotate command:
</p>
<pre>
(EE) RADEON(0): Rotation requires acceleration!
</pre>
<p>Acceleration is disabled when using EXA on newer graphics cards (source: <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=73420#c17">comment 17</a>). You must choose between enabling EXA (<a href="#Glamor">detailed above in the glamor section</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" title="ArchWiki:Requests">broken link</a>: invalid section]</sup>) and the ability to rotate.
</p>
<h3><span class="mw-headline" id="ATI_X1600_.28RV530_series.29_3D_application_show_black_windows">ATI X1600 (RV530 series) 3D application show black windows</span></h3>
<p>There are three possible solutions:
</p>
<ul>
<li> Try adding <code>pci=nomsi</code> to your boot loader <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a>.</li>
<li> If this does not work, you can try adding <code>noapic</code> instead of <code>pci=nomsi</code>.</li>
<li> If none of the above work, then you can try running <code>vblank_mode=0 glxgears</code> or <code>vblank_mode=1 glxgears</code> to see which one works for you, then install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=driconf">driconf</a></span> and set that option in <code>~/.drirc</code>.</li>
</ul>
<h3><span class="mw-headline" id="Cursor_corruption_after_coming_out_of_sleep">Cursor corruption after coming out of sleep</span></h3>
<p>If the cursor becomes corrupted like it's repeating itself vertically after the monitor(s) comes out of sleep, set <code>"SWCursor" "True"</code> in the <code>"Device"</code> section of the <code>20-radeon.conf</code> configuration file.
</p>
<h3><span class="mw-headline" id="DisplayPort_stays_black_on_multimonitor_mode">DisplayPort stays black on multimonitor mode</span></h3>
<p>Try booting with the <a href="../en/Kernel_parameters.html" title="Kernel parameter" class="mw-redirect">kernel parameter</a> <code>radeon.audio=0</code>.
</p>
<h3><span class="mw-headline" id="Low_2D_performance_in_console_and_X">Low 2D performance in console and X</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> This disables Power Management that may result in overheating and/or damaging the GPU. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:ATI">Talk:ATI#</a>)</div>
</div>
<p>Since kernel 4.1.4, <a href="#Dynamic_power_management">dpm</a> is broken on certain R9 270X cards (chip device number 6810, subsystem 174b:e271, shown as Curacao XT, PC Partner Limited / Sapphire Technology Device e271 in lspci). The regression is caused by a <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/commit/?id=ea039f927524e36c15b5905b4c9469d788591932">fix</a> for cards with the same PCI ids. Disabling dpm (add <code>radeon.dpm=0</code> to the <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>) solves the problem.
</p>
<h3><span class="mw-headline" id="R9-390_Poor_Performance_and.2For_Instability">R9-390 Poor Performance and/or Instability</span></h3>
<p>Firmware issues with R9-390 series cards include poor performance and crashes (frequently caused by gaming or using Google Maps) possibly related DPM. Comment 115 of this bug <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=91880">report</a> includes instructions for a fix.
</p>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../en/Category:X_server.html" title="Category:X server">X server</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
