<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Git - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Git skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Git</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Gitweb.html" title="Gitweb">Gitweb</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Cgit.html" title="Cgit">Cgit</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/HTTP_tunneling.html#Tunneling_Git" title="HTTP tunneling">HTTP tunneling#Tunneling Git</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Subversion.html" title="Subversion">Subversion</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Concurrent_Versions_System.html" title="Concurrent Versions System">Concurrent Versions System</a></li>
</ul>
</div>
<p><br>
</p>
<blockquote>
<font color="grey"><i>I've met people who thought that git is a front-end to GitHub. They were wrong, git is a front-end to the AUR.</i></font>
<div align="right">â€” Linus Torvalds</div>
</blockquote>
<p><br>
<a href="https://en.wikipedia.org/wiki/Git_(software)" class="extiw" title="wikipedia:Git (software)">Git</a> is the version control system (VCS) designed and developed by Linus Torvalds, the creator of the Linux kernel. Git is now used to maintain <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> packages, as well as many other projects, including sources for the Linux kernel. 
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Usage"><span class="tocnumber">3</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-4">
<a href="#Local_repository"><span class="tocnumber">3.1</span> <span class="toctext">Local repository</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Staging_operations"><span class="tocnumber">3.1.1</span> <span class="toctext">Staging operations</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Commit_changes"><span class="tocnumber">3.1.2</span> <span class="toctext">Commit changes</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#View_changes"><span class="tocnumber">3.1.3</span> <span class="toctext">View changes</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Branch_a_repository"><span class="tocnumber">3.1.4</span> <span class="toctext">Branch a repository</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9">
<a href="#Collaboration"><span class="tocnumber">3.2</span> <span class="toctext">Collaboration</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Adopting_a_good_etiquette"><span class="tocnumber">3.2.1</span> <span class="toctext">Adopting a good etiquette</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Clone_a_repository"><span class="tocnumber">3.2.2</span> <span class="toctext">Clone a repository</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Pull_requests"><span class="tocnumber">3.2.3</span> <span class="toctext">Pull requests</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Using_remotes"><span class="tocnumber">3.2.4</span> <span class="toctext">Using remotes</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Push_to_a_repository"><span class="tocnumber">3.2.5</span> <span class="toctext">Push to a repository</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Dealing_with_merges"><span class="tocnumber">3.2.6</span> <span class="toctext">Dealing with merges</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Send_patch_to_mailing_list"><span class="tocnumber">3.2.7</span> <span class="toctext">Send patch to mailing list</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17">
<a href="#History_and_versioning"><span class="tocnumber">3.3</span> <span class="toctext">History and versioning</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#Searching_the_history"><span class="tocnumber">3.3.1</span> <span class="toctext">Searching the history</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Versioning_for_release"><span class="tocnumber">3.3.2</span> <span class="toctext">Versioning for release</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Organizing_commits"><span class="tocnumber">3.3.3</span> <span class="toctext">Organizing commits</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-21">
<a href="#Tips_and_tricks"><span class="tocnumber">4</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#Using_git-config"><span class="tocnumber">4.1</span> <span class="toctext">Using git-config</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Speeding_up_authentication"><span class="tocnumber">4.2</span> <span class="toctext">Speeding up authentication</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Protocol_Defaults"><span class="tocnumber">4.3</span> <span class="toctext">Protocol Defaults</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Bash_completion"><span class="tocnumber">4.4</span> <span class="toctext">Bash completion</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Git_prompt"><span class="tocnumber">4.5</span> <span class="toctext">Git prompt</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Visual_representation"><span class="tocnumber">4.6</span> <span class="toctext">Visual representation</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Commit_tips"><span class="tocnumber">4.7</span> <span class="toctext">Commit tips</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Working_with_a_non-master_branch"><span class="tocnumber">4.8</span> <span class="toctext">Working with a non-master branch</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-30">
<a href="#Git_server"><span class="tocnumber">5</span> <span class="toctext">Git server</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#SSH"><span class="tocnumber">5.1</span> <span class="toctext">SSH</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Smart_HTTP"><span class="tocnumber">5.2</span> <span class="toctext">Smart HTTP</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Git"><span class="tocnumber">5.3</span> <span class="toctext">Git</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Setting_access_rights"><span class="tocnumber">5.4</span> <span class="toctext">Setting access rights</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-35"><a href="#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=git">git</a></span> package. For the development version, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/git-git/">git-git</a></span><sup><small>AUR</small></sup> package. Check the optional dependencies when using tools such as <i>git svn</i>, <i>git gui</i> and <i>gitk</i>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>To enable spell checking in <i>git-gui</i>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=aspell">aspell</a></span> is required, along with the dictionary corresponding to the <code>LC_MESSAGES</code> <a href="../en/Environment_variables.html" title="Environment variable" class="mw-redirect">environment variable</a>. See <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/28181">FS#28181</a> and the <a href="../en/Aspell.html" title="Aspell">aspell</a> article.</div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>In order to use Git you need to set at least a name and email:
</p>
<pre>$ git config --global user.name  "<i>John Doe</i>"
$ git config --global user.email "<i>johndoe@foobar.com</i>"
</pre>
<p>See <a href="#Tips_and_tricks">#Tips and tricks</a> for more settings.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>This tutorial teaches how to use Git for basic distributed revision control of a project.
</p>
<p>Git is a distributed version control system, which means that the entire history of changes to a repository is stored locally, in a directory called <code>./.git</code> in the project directory. The project files which are visible to the user constitute the <i>working tree</i>. These files can be updated to match revisions stored in <code>./.git</code> using <code>git</code> commands (e.g. <code>git checkout</code>), and new revisions can be created in turn by editing these files and running the appropriate <code>git</code> commands (e.g. <code>git commit</code>).
</p>
<p>See <code>man gitglossary</code> for more complete definitions of the terms used in this tutorial.
</p>
<p>A typical Git work-flow is:
</p>
<ol>
<li> Create a new project or clone a remote one.</li>
<li> Create a branch to make changes; then commit those changes.</li>
<li> Consolidate commits for better organization/understanding.</li>
<li> Merge commits back into the main branch.</li>
<li> (Optional) Push changes to a remote server.</li>
</ol>
<h3><span class="mw-headline" id="Local_repository">Local repository</span></h3>
<h4><span class="mw-headline" id="Staging_operations">Staging operations</span></h4>
<p><b>Initialize</b> a new repository. This creates and initializes <code>./.git</code>:
</p>
<pre>$ cd (your project)/
$ git init
</pre>
<p>To record the changes to the repository, they must first be added to the <i>index</i>, or <i>staging area</i>, with an operation often also referred to as <i>staging</i>. When you commit changes using <code>git commit</code>, it is the contents of the index which are committed to the current branch, not the contents of the working tree.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The index is actually a binary file <code>.git/index</code>, which can be queried with <code>git ls-files --stage</code>.</div>
<p>To <b>add files</b> to the index from the working tree:
</p>
<pre>$ git add <i>file1</i> <i>file2</i>
</pre>
<p>This records the current state of the files. If the files are subsequently modified, you can run <code>git add</code> again to "add" the new versions to the index.
</p>
<p><b>Add all</b> files:
</p>
<pre>$ git add .
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>To <b>ignore</b> some files from, e.g. <code>git add .</code>, create a <code>.gitignore</code> file (or files):
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.gitignore</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
# File I'll likely delete
test-script

# Ignore all .html files, except 'important.html'
*.html
!important.html

# Ignore all files recursively in 'DoNotInclude'
DoNotInclude/**
</pre>
<p>See <a rel="nofollow" class="external text" href="http://git-scm.com/docs/gitignore">gitignore(5)</a> for details.
</p>
</div>
<p><b>Remove</b> a file from staging (<code>--cached</code> preserves the actual file(s)):
</p>
<pre>$ git rm <i>(--cached)</i> <i>file</i>
</pre>
<p><b>Remove all</b> files:
</p>
<pre>$ git rm --cached -r .
</pre>
<p>Or:
</p>
<pre>$ git reset HEAD -- .
</pre>
<p>Here, <code>HEAD</code> is a "symbolic reference" to the current revision.
</p>
<p><b>Rename</b> a file:
</p>
<pre>$ git mv <i>file1</i> <i>file2</i>
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong><code>git mv</code> is a convenience command, roughly equivalent to <code>mv file1 file2</code> followed by <code>git rm file1</code> and <code>git add file2</code>. Rename detection during merges is based only on content similarity, and ignores the actual commands used to rename files. The broader rationale for this approach, which distinguishes Git from patch-based systems like <a href="../en/Synchronization_and_backup_programs.html#Version_control_systems" title="Darcs" class="mw-redirect">Darcs</a>, can be found <a rel="nofollow" class="external text" href="http://permalink.gmane.org/gmane.comp.version-control.git/217">here</a>.</div>
<p><b>List</b> files:
</p>
<pre>$ git ls-files
</pre>
<p>By default this shows files in the staging area (<code>--cached</code> files).
</p>
<h4><span class="mw-headline" id="Commit_changes">Commit changes</span></h4>
<p>Once the content to be recorded is <i>staged</i>, <b>commit</b> them with:
</p>
<pre>$ git commit -m "<i>First commit.</i>"
</pre>
<p>The <code>-m (<i>--message)</i></code> option is for a short message: if omitted, the preset editor will be spawned to allow entering a longer message.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>
<ul>
<li> Always commit small changes frequently and with meaningful messages.</li>
<li> To <b>add</b> all the modified files to the index, <b>and commit</b> them in a single command (<code>-a</code> stands for <code>--all</code>):</li>
</ul>
<pre>$ git commit -am "<i>First commit.</i>"
</pre>
</div>
<p><b>Edit</b> the commit message for the last commit. This also amends the commit with any files which have been newly staged:
</p>
<pre>$ git commit --amend -m "<i>Message.</i>"
</pre>
<p>Many of the commands in this article take commits as arguments. A commit can be identified by any of the following:
</p>
<ul>
<li> Its 40-digit SHA-1 hash (the first 7 digits are usually sufficient to identify it uniquely)</li>
<li> Any commit label such as a branch or tag name</li>
<li> The label <code>HEAD</code> always refers to the currently checked-out commit (usually the head of the branch, unless you used <i>git checkout</i> to jump back in history to an old commit)</li>
<li> Any of the above plus <code>~</code> to refer to previous commits. For example, <code>HEAD~</code> refers to one commit before <code>HEAD</code> and <code>HEAD~5</code> refers to five commits before <code>HEAD</code>.</li>
</ul>
<h4><span class="mw-headline" id="View_changes">View changes</span></h4>
<p><b>Show differences</b> between commits:
</p>
<pre>$ git diff HEAD HEAD~3
</pre>
<p>or between staging area and working tree:
</p>
<pre>$ git diff
</pre>
<p><b>Get</b> a general <b>overview</b> of the changes:
</p>
<pre>$ git status
</pre>
<p><b>View history</b> of changes (where "<i>-N</i>" is the number of latest commits):
</p>
<pre>$ git log -p <i>(-N)</i>
</pre>
<h4><span class="mw-headline" id="Branch_a_repository">Branch a repository</span></h4>
<p>Fixes and new features are usually tested in branches. When changes are satisfactory they can merged back into the default (master) branch.
</p>
<p><b>Create</b> a branch, whose name accurately reflects its purpose:
</p>
<pre>$ git branch <i>help-section-addition</i>
</pre>
<p><b>List</b> branches:
</p>
<pre>$ git branch
</pre>
<p><b>Switch</b> branches:
</p>
<pre>$ git checkout <i>branch</i>
</pre>
<p><b>Create and switch</b>:
</p>
<pre>$ git checkout -b <i>branch</i>
</pre>
<p><b>Merge</b> a branch back to the master branch:
</p>
<pre>$ git checkout master
$ git merge <i>branch</i>
</pre>
<p>The changes will be merged if they do not conflict. Otherwise, Git will print an error message, and annotate files in the working tree to record the conflicts. The annotations can be displayed with <code>git diff</code>. Conflicts are resolved by editing the files to remove the annotations, and committing the final version. See <a href="#Dealing_with_merges">#Dealing with merges</a> below.
</p>
<p>When done with a branch, <b>delete</b> it with:
</p>
<pre>$ git branch -d <i>branch</i>
</pre>
<h3><span class="mw-headline" id="Collaboration">Collaboration</span></h3>
<h4><span class="mw-headline" id="Adopting_a_good_etiquette">Adopting a good etiquette</span></h4>
<ul>
<li> When considering contributing to an existing project, read and understand its license, as it may excessively limit your ability to change the code. Some licenses can generate disputes over the ownership of the code.</li>
<li> Think about the project's community and how well you can fit into it. To get a feeling of the direction of the project, read any documentation and even the <a href="#History_and_versioning">log</a> of the repository.</li>
<li> When requesting to pull a commit, or submit a patch, keep it small and well documented; this will help the maintainers understand your changes and decide whether to merge them or ask you to make some amendments.</li>
<li> If a contribution is rejected, do not get discouraged, it is their project after all. If it is important, discuss the reasoning for the contribution as clearly and as patiently as possible: with such an approach a resolution may eventually be possible.</li>
</ul>
<h4><span class="mw-headline" id="Clone_a_repository">Clone a repository</span></h4>
<p>To begin contributing to a project, <b>clone</b> its repository:
</p>
<pre>$ git clone <i>location</i> <i>folder</i>
</pre>
<p><code><i>location</i></code> can be either a path or network address. Also, when cloning is done, the location is recorded so just a <code>git pull</code> will be needed later.
</p>
<h4><span class="mw-headline" id="Pull_requests">Pull requests</span></h4>
<p>After making and committing some changes, the contributor can ask the original author to merge them. This is called a <i>pull request</i>.
</p>
<p>To <b>pull</b>:
</p>
<pre>$ git pull <i>location</i> master
</pre>
<p>The <i>pull</i> command combines both <i>fetching</i> and <i>merging</i>. If there are conflicts (e.g. the original author made changes in the same time span), then it will be necessary to manually fix them.
</p>
<p>Alternatively, the original author can <b>pick</b> the <b>changes</b> wanting to be incorporated. Using the <i>fetch</i> option (and <i>log</i> option with a special <code>FETCH_HEAD</code> symbol), the contents of the pull request can be viewed before deciding what to do:
</p>
<pre>$ git fetch <i>location</i> master
$ git log -p HEAD..FETCH_HEAD
$ git merge <i>location</i> master
</pre>
<h4><span class="mw-headline" id="Using_remotes">Using remotes</span></h4>
<p>Remotes are aliases for tracked remote repositories. A <i>label</i> is created defining a location. These labels are used to identify frequently accessed repositories.
</p>
<p><b>Create</b> a remote:
</p>
<pre>$ git remote add <i>label</i> <i>location</i>
</pre>
<p><b>Fetch</b> a remote:
</p>
<pre>$ git fetch <i>label</i>
</pre>
<p><b>Show differences</b> between master and a remote master:
</p>
<pre>$ git log -p master..<i>label</i>/master
</pre>
<p><b>View</b> remotes for the current repository:
</p>
<pre>$ git remote -v
</pre>
<p>When defining a remote that is a parent of the fork (the project lead), it is defined as <i>upstream</i>.
</p>
<h4><span class="mw-headline" id="Push_to_a_repository">Push to a repository</span></h4>
<p>After being given rights from the original authors, <b>push</b> changes with:
</p>
<pre>$ git push <i>location</i> <i>branch</i>
</pre>
<p>When <i>git clone</i> is performed, it records the original location and gives it a remote name of <code>origin</code>.
</p>
<p>So what <b>typically</b> is done is this:
</p>
<pre>$ git push origin master
</pre>
<p>If the <code>-u</code> (<code>--set-upstream-to</code>) option is used, the location is recorded so the next time just a <code>git push</code> is necessary.
</p>
<h4><span class="mw-headline" id="Dealing_with_merges">Dealing with merges</span></h4>
<p>See <a rel="nofollow" class="external text" href="http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging#Basic-Merge-Conflicts">Basic Merge Conflicts</a> in the Git Book for a detailed explanation on how to resolve merge conflicts. Merges are generally reversible. If wanting to back out of a merge one can usually use the <code>--abort</code> command (e.g. <code>git merge --abort</code> or <code>git pull --abort</code>).
</p>
<h4><span class="mw-headline" id="Send_patch_to_mailing_list">Send patch to mailing list</span></h4>
<p>If you want to send patches directly to a mailing list, you have to install the following packages: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=perl-authen-sasl">perl-authen-sasl</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=perl-net-smtp-ssl">perl-net-smtp-ssl</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=perl-mime-tools">perl-mime-tools</a></span>.
</p>
<p>Make sure you have configured you username and e-mail address, see <a href="#Configuration">#Configuration</a>.
</p>
<p><b>Configure</b> your <b>e-mail</b> settings:
</p>
<pre>$ git config --global sendemail.smtpserver <i>smtp.gmail.com</i>
$ git config --global sendemail.smtpserverport <i>587</i>
$ git config --global sendemail.smtpencryption <i>tls</i>
$ git config --global sendemail.smtpuser <i>foobar@gmail.com</i>
</pre>
<p>Now you should be able to <b>send</b> the <b>patch</b> to the mailing list (see also <a rel="nofollow" class="external text" href="http://www.openembedded.org/wiki/How_to_submit_a_patch_to_OpenEmbedded#Sending_patches">OpenEmbedded:How to submit a patch to OpenEmbedded#Sending patches</a>):
</p>
<pre>$ git add <i>filename</i>
$ git commit -s
$ git send-email --to=<i>openembedded-core@lists.openembedded.org</i> --confirm=always -M -1
</pre>
<h3><span class="mw-headline" id="History_and_versioning">History and versioning</span></h3>
<h4><span class="mw-headline" id="Searching_the_history">Searching the history</span></h4>
<p><code>git log</code> will give the history with a commit checksum, author, date, and the short message. The <i>checksum</i> is the "object name" of a commit object, typically a 40-character SHA-1 hash.
</p>
<p>For <b>history</b> with a <b>long message</b> (where the "<i>checksum</i>" can be truncated, as long as it is unique):
</p>
<pre>$ git show (<i>checksum</i>)
</pre>
<p><b>Search</b> for <i>pattern</i> in tracked files:
</p>
<pre>$ git grep <i>pattern</i>
</pre>
<p><b>Search</b> in <b><code>.c</code></b> and <b><code>.h</code></b> files:
</p>
<pre>$ git grep <i>pattern</i> -- '*.[ch]'
</pre>
<h4><span class="mw-headline" id="Versioning_for_release">Versioning for release</span></h4>
<p><b>Tag</b> commits for versioning:
</p>
<pre>$ git tag 2.14 <i>checksum</i>
</pre>
<p><i>Tagging</i> is generally done for <a rel="nofollow" class="external text" href="https://www.drupal.org/node/1066342">releasing/versioning</a> but it can be any string. Generally annotated tags are used, because they get added to the Git database.
</p>
<p><b>Tag</b> the <b>current</b> commit with:
</p>
<pre>$ git tag -a 2.14 -m "Version 2.14"
</pre>
<p><b>List</b> tags:
</p>
<pre>$ git tag -l
</pre>
<p><b>Delete</b> a tag:
</p>
<pre>$ git tag -d 2.08
</pre>
<p><b>Update remote</b> tags:
</p>
<pre>$ git push --tags
</pre>
<h4><span class="mw-headline" id="Organizing_commits">Organizing commits</span></h4>
<p>Before submitting a pull request it may be desirable to <b>consolidate/organize</b> the commits. This is done with the <i>git rebase</i> <code>--interactive</code> option:
</p>
<pre>$ git rebase -i <i>checksum</i>
</pre>
<p>This will open the editor with a summary of all the commits in the range specified; in this case including the newest (<code>HEAD</code>) back to, but excluding, commit <code><i>checksum</i></code>. Or to use a number notation, use for example <code>HEAD~3</code>, which will rebase the last three commits:
</p>
<pre>pick d146cc7 Mountpoint test.
pick 4f47712 Explain -o option in readme.
pick 8a4d479 Rename documentation.
</pre>
<p>Editing the action in the first column will dictate how the rebase will be done. The options are:
</p>
<ul>
<li> <code>pick</code> â€” Apply this commit as is (the default).</li>
<li> <code>edit</code> â€” Edit files and/or commit message.</li>
<li> <code>reword</code> â€” Edit commit message.</li>
<li> <code>squash</code> â€” Merge/fold into previous commit.</li>
<li> <code>fixup</code> â€” Merge/fold into previous commit discarding its message.</li>
</ul>
<p>The commits can be re-ordered or erased from the history (but be very careful with these). After editing the file, Git will perform the specified actions; if prompted to resolve merge problems, fix them and continue with <code>git rebase --continue</code> or back out with the <code>git rebase --abort</code> command.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Squashing commits is only used for local commits, it will cause troubles on a repository that is shared by other people.</div>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Using_git-config">Using git-config</span></h3>
<p>Git reads its configuration from a few INI-type configuration files:
</p>
<ul>
<li> Each repository contains a <code>.git/config</code> file for specific configuration.</li>
<li> Each user has a <code>$HOME/.gitconfig</code> file for fallback values.</li>
<li> <code>/etc/gitconfig</code> is used for system-wide defaults.</li>
</ul>
<p>These files can be edited directly, but the usual method is to use <i>git config</i>, as shown in the examples below.
</p>
<p>List the currently set variables:
</p>
<pre>$ git config {--local,--global,--system} --list
</pre>
<p>Set the default editor from <a href="../en/Vim.html" title="Vim">vim</a> to <a href="../en/Nano.html" title="Nano">nano</a>:
</p>
<pre>$ git config --global core.editor "nano -w"
</pre>
<p>Set the default push action:
</p>
<pre>$ git config --global push.default simple
</pre>
<p>Set a different tool for <i>git difftool</i> (<i>meld</i> by default):
</p>
<pre>$ git config --global diff.tool vimdiff
</pre>
<p>See <a rel="nofollow" class="external text" href="https://www.kernel.org/pub/software/scm/git/docs/git-config.html">git-config(1)</a> and <a rel="nofollow" class="external text" href="http://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration">Git Configuration</a> for more information.
</p>
<h3><span class="mw-headline" id="Speeding_up_authentication">Speeding up authentication</span></h3>
<p>You may wish to avoid the hassle of authenticating interactively at every push to the Git server.
</p>
<ul>
<li> If you are authenticating with SSH keys, use an <a href="../en/SSH_keys.html#SSH_agents" title="SSH agent" class="mw-redirect">SSH agent</a>. See also <a href="../en/Secure_Shell.html#Speeding_up_SSH" title="SSH" class="mw-redirect">SSH#Speeding up SSH</a> and <a href="../en/Secure_Shell.html#Keep_alive" title="SSH" class="mw-redirect">SSH#Keep alive</a>.</li>
<li> If you are authenticating with username and password, switch to <a href="../en/SSH_keys.html" title="SSH keys">SSH keys</a> if the server supports SSH, otherwise try <a rel="nofollow" class="external text" href="https://git-scm.com/docs/git-credential-cache">git-credential-cache</a> or <a rel="nofollow" class="external text" href="https://git-scm.com/docs/git-credential-store">git-credential-store</a>.</li>
</ul>
<h3><span class="mw-headline" id="Protocol_Defaults">Protocol Defaults</span></h3>
<p>If you are running a multiplexed SSH connection as shown above, Git over SSH might be faster than HTTPS. Also, some servers (like the AUR) only allow pushing via SSH. For example, the following config will set Git over SSH for any repository hosted on the AUR.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gitconfig</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[url "ssh://aur@aur.archlinux.org/"]
	insteadOf = https://aur.archlinux.org/
	insteadOf = http://aur.archlinux.org/
	insteadOf = git://aur.archlinux.org/
</pre>
<h3><span class="mw-headline" id="Bash_completion">Bash completion</span></h3>
<p>In order to enable Bash completion, source <code>/usr/share/git/completion/git-completion.bash</code> in a <a href="../en/Bash.html#Configuration_files" title="Bash">Bash startup file</a>. Alternatively, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bash-completion">bash-completion</a></span>.
</p>
<h3><span class="mw-headline" id="Git_prompt">Git prompt</span></h3>
<p>The Git package comes with a prompt script. To enable it, source the <code>/usr/share/git/completion/git-prompt.sh</code> script in a <a href="../en/Autostarting.html#Shells" title="Autostarting">shell startup file</a>, then set a custom prompt with the <code>%s</code> parameter:
</p>
<ul>
<li> For <a href="../en/Bash.html" title="Bash">Bash</a>: <code>PS1='[\u@\h \W$(__git_ps1 " (%s)")]\$ '</code>
</li>
<li> For <a href="../en/Zsh.html" title="Zsh">zsh</a>: <code>PS1='[%n@%mÂ %c$(__git_ps1 " (%s)")]\$ '</code>
</li>
</ul>
<p>When changing to a directory of a Git repository, the prompt will change to show the branch name. Extra details can be set to be shown by the prompt:
</p>
<table class="wikitable">
<caption>
</caption>
<tr>
<th> Shell variable </th>
<th> Information
</th>
</tr>
<tr>
<td> GIT_PS1_SHOWDIRTYSTATE     </td>
<td> <b>+</b> for staged, <b>*</b> if unstaged.
</td>
</tr>
<tr>
<td> GIT_PS1_SHOWSTASHSTATE     </td>
<td> <b>$</b> if something is stashed.
</td>
</tr>
<tr>
<td> GIT_PS1_SHOWUNTRACKEDFILES </td>
<td> <b>%</b> if there are untracked files.
</td>
</tr>
<tr>
<td> GIT_PS1_SHOWUPSTREAM       </td>
<td> <b>&lt;,&gt;,&lt;&gt;</b> behind, ahead, or diverged from upstream.
</td>
</tr>
</table>
<p><code>GIT_PS1_SHOWUPSTREAM</code> will need to be set to <code>auto</code> for changes to take effect.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If you experience that <code>$(__git_ps1)</code> returns <code>((unknown))</code>, then there is a <code>.git</code> folder in your current directory which does not contain any repository, and therefore Git does not recognize it. This can, for example, happen if you mistake Git's configuration file to be <code>~/.git/config</code> instead of <code>~/.gitconfig</code>.</div>
<p>Alternatively, you can use one of git shell prompt customization packages from <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> such as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bash-git-prompt/">bash-git-prompt</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gittify/">gittify</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Visual_representation">Visual representation</span></h3>
<p>To get an idea of the amount of work done:
</p>
<pre>$ git diff --stat
</pre>
<p><i>git log</i> with forking representation:
</p>
<pre>$ git log --graph --oneline --decorate
</pre>
<p><i>git log</i> graph alias (i.e. <i>git graph</i> will show a decorated version):
</p>
<pre>$ git config --global alias.graph 'log --graph --oneline --decorate'
</pre>
<h3><span class="mw-headline" id="Commit_tips">Commit tips</span></h3>
<p>Reset to previous commit (very dangerous, erases everything to specified commit):
</p>
<pre>$ git reset --hard HEAD^
</pre>
<p>If a repository address gets changed, its remote location will need to be updated:
</p>
<pre>$ git remote set-url origin git@<i>address</i>:<i>user</i>/<i>repo</i>.git
</pre>
<p>Signed-off-by line append (a name-email signature is added to the commit which is required by some projects):
</p>
<pre> $ git commit -s
</pre>
<p>Signed-off-by automatically append to patches (when using <code>git format-patch <i>commit</i></code>):
</p>
<pre>$ git config --local format.signoff true
</pre>
<p>Commit specific parts of files that have changed. This is useful if there are a large number of changes made that would be best split into several commits:
</p>
<pre>$ git add -p
</pre>
<h3><span class="mw-headline" id="Working_with_a_non-master_branch">Working with a non-master branch</span></h3>
<p>Occasionally a maintainer will ask that work be done on a branch. These branches are often called <code>devel</code> or <code>testing</code>. Begin by cloning the repository.
</p>
<p>To enter another branch beside master (<i>git clone</i> only shows master branch but others still exist, <code>git branch -a</code> to show):
</p>
<pre>$ git checkout -b <i>branch</i> origin/<i>branch</i>
</pre>
<p>Now edit normally; however to keep the repository tree in sync be sure to use both:
</p>
<pre>$ git pull --all
$ git push --all
</pre>
<h2><span class="mw-headline" id="Git_server">Git server</span></h2>
<p>How to set up connecting to repositories using varying protocols.
</p>
<h3><span class="mw-headline" id="SSH">SSH</span></h3>
<p>To use the SSH protocol, first set up a public SSH key; for that follow the guide at <a href="../en/SSH_keys.html" title="SSH keys">SSH keys</a>. To set up a SSH server, follow the <a href="../en/Secure_Shell.html" title="SSH" class="mw-redirect">SSH</a> guide.
</p>
<p>With SSH working and a key generated, paste the contents of <code>~/.ssh/id_rsa.pub</code> to <code>~/.ssh/authorized_keys</code> (be sure it is all on one line). Now the Git repository can be accessed with SSH by doing:
</p>
<pre>$ git clone <i>user</i>@<i>foobar.com</i>:<i>my_repository</i>.git
</pre>
<p>You should now get an SSH yes/no question, if you have the SSH client setting <code>StrictHostKeyChecking</code> set to <code>ask</code> (the default). Type <code>yes</code> followed by <code>Enter</code>. Then you should have your repository checked out. Because this is with SSH, you also have commit rights now.
</p>
<p>To modify an existing repository to use SSH, the remote location will need to be redefined:
</p>
<pre>$ git remote set-url origin git@localhost:<i>my_repository</i>.git
</pre>
<p>Connecting on a port other than 22 can be configured on a per-host basis in <code>/etc/ssh/ssh_config</code> or <code>~/.ssh/config</code>. To set up ports for a repository (here 443 as example):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.git/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[remote "origin"]
    url = ssh://<i>user</i>@<i>foobar</i>.com:443/~<i>my_repository</i>/repo.git</pre>
<h3><span class="mw-headline" id="Smart_HTTP">Smart HTTP</span></h3>
<p>Git is able to use the HTTP(S) protocol as efficiently as the SSH or Git protocols, by utilizing the git-http-backend. Furthermore it is not only possible to clone or pull from repositories, but also to push into repositories over HTTP(S).
</p>
<p>The setup for this is rather simple as all you need to have installed is the Apache web server (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=apache">apache</a></span>, with <code>mod_cgi</code>, <code>mod_alias</code>, and <code>mod_env</code> enabled) and of course, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=git">git</a></span>.
</p>
<p>Once you have your basic setup running, add the following to your Apache configuration file, which is usually located at:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/httpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
&lt;Directory "/usr/lib/git-core*"&gt;
    Require all granted
&lt;/Directory&gt;
 
SetEnv GIT_PROJECT_ROOT /srv/git
SetEnv GIT_HTTP_EXPORT_ALL
ScriptAlias /git/ /usr/lib/git-core/git-http-backend/
</pre>
<p>This assumes your Git repositories are located at <code>/srv/git</code> and that you want to access them via something like: <code>http(s)://your_address.tld/git/your_repo.git</code>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Make sure that Apache can read and write to your repositories.</div>
<p>For more detailed documentation, visit the following links:
</p>
<ul>
<li> <a rel="nofollow" class="external free" href="http://progit.org/2010/03/04/smart-http.html">http://progit.org/2010/03/04/smart-http.html</a>
</li>
<li> <a rel="nofollow" class="external free" href="https://www.kernel.org/pub/software/scm/git/docs/v1.7.10.1/git-http-backend.html">https://www.kernel.org/pub/software/scm/git/docs/v1.7.10.1/git-http-backend.html</a>
</li>
</ul>
<h3><span class="mw-headline" id="Git">Git</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The Git protocol is not encrypted or authenticated, and only allows read access.</div>
<p><a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">Start and enable</a> <code>git-daemon.socket</code>.
</p>
<p>The daemon is started with the following options:
</p>
<pre>ExecStart=-/usr/lib/git-core/git-daemon --inetd --export-all --base-path=/srv/git
</pre>
<p>Repositories placed in <code>/srv/git/</code> will be recognized by the daemon.  Clients can connect with something similar to:
</p>
<pre>$ git clone git://<i>location</i>/<i>repository</i>.git
</pre>
<h3><span class="mw-headline" id="Setting_access_rights">Setting access rights</span></h3>
<p>To restrict read and/or write access, use standard Unix permissions. Refer to <a rel="nofollow" class="external free" href="http://sitaramc.github.com/gitolite/doc/overkill.html">http://sitaramc.github.com/gitolite/doc/overkill.html</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2013-11-06]</sup> (<a rel="nofollow" class="external text" href="https://web.archive.org/web/20111004134500/http://sitaramc.github.com/gitolite/doc/overkill.html">archive.org mirror</a>) for more information.
</p>
<p>For fine-grained access management, refer to <a href="../en/Gitolite.html" title="Gitolite">gitolite</a> and <a href="../en/Gitosis.html" title="Gitosis">gitosis</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> Miscallaneous man pages available in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=git">git</a></span> package: <code>gittutorial(7)</code>, <code>giteveryday(7)</code>, <code>gitworkflows(7)</code>
</li>
<li> <a rel="nofollow" class="external text" href="http://git-scm.com/book">Pro Git book</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://gitref.org/">Git Reference</a>
</li>
<li> <a rel="nofollow" class="external free" href="https://www.kernel.org/pub/software/scm/git/docs/">https://www.kernel.org/pub/software/scm/git/docs/</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://gun.io/blog/how-to-github-fork-branch-and-pull-request">Git overall</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://nathanhoad.net/git-workflow-forks-remotes-and-pull-requests">Git overall2</a>
</li>
<li> <a rel="nofollow" class="external free" href="https://wiki.videolan.org/Git">https://wiki.videolan.org/Git</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://gist.github.com/grawity/4392747">A comparison of protocols offered by GitHub</a>
</li>
</ul>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Version_Control_System.html" title="Category:Version Control System">Version Control System</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
