<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>fish - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Fish skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">fish</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p><span></span>
</p>
<p><b>fish</b> (the <b>friendly interactive shell</b>) is a user friendly <a href="../en/Command-line_shell.html" title="Command-line shell">command-line shell</a> intended mostly for interactive use.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Web_interface"><span class="tocnumber">2.1</span> <span class="toctext">Web interface</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Command_completion"><span class="tocnumber">2.2</span> <span class="toctext">Command completion</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Troubleshooting"><span class="tocnumber">3</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#History_substitution"><span class="tocnumber">3.1</span> <span class="toctext">History substitution</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Tips_and_tricks"><span class="tocnumber">4</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-8">
<a href="#Not_setting_fish_as_default_shell"><span class="tocnumber">4.1</span> <span class="toctext">Not setting fish as default shell</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Modify_.bashrc_to_drop_into_fish"><span class="tocnumber">4.1.1</span> <span class="toctext">Modify .bashrc to drop into fish</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Use_terminal_emulator_options"><span class="tocnumber">4.1.2</span> <span class="toctext">Use terminal emulator options</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Use_terminal_multiplexer_options"><span class="tocnumber">4.1.3</span> <span class="toctext">Use terminal multiplexer options</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#Setting_fish_as_default_shell"><span class="tocnumber">4.2</span> <span class="toctext">Setting fish as default shell</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Disable_greeting"><span class="tocnumber">4.3</span> <span class="toctext">Disable greeting</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Make_su_launch_fish"><span class="tocnumber">4.4</span> <span class="toctext">Make su launch fish</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Start_X_at_login"><span class="tocnumber">4.5</span> <span class="toctext">Start X at login</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Use_liquidprompt"><span class="tocnumber">4.6</span> <span class="toctext">Use liquidprompt</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Put_git_status_in_prompt"><span class="tocnumber">4.7</span> <span class="toctext">Put git status in prompt</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Evaluate_ssh-agent"><span class="tocnumber">4.8</span> <span class="toctext">Evaluate ssh-agent</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=fish">fish</a></span> package. Alternatively install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fish-git/">fish-git</a></span><sup><small>AUR</small></sup> package for the development version.
</p>
<p>To make fish the default shell, see <a href="../en/Command-line_shell.html#Changing_your_default_shell" title="Shell" class="mw-redirect">Shell#Changing your default shell</a>; however, you should consider <a href="#Not_setting_fish_as_default_shell">#Not setting fish as default shell</a>.
</p>
<p>Once installed simply type <code>fish</code> to drop into the fish shell.
</p>
<p>Documentation can be found by typing <code>help</code> from fish; it will be opened in a web browser. It is recommended to read at least the "Syntax overview" section, since fish's syntax is different from many other shells.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>User configurations for fish are located at <code>~/.config/fish/config.fish</code>. Adding commands or functions to the file will execute/define them when opening a terminal, similar to <code>.bashrc</code>.
</p>
<h3><span class="mw-headline" id="Web_interface">Web interface</span></h3>
<p>The fish prompt and terminal colors can be set with the interactive web interface:
</p>
<pre>fish_config
</pre>
<p>Selected settings are written to your personal configuration file. You can also view defined functions and your history.
</p>
<h3><span class="mw-headline" id="Command_completion">Command completion</span></h3>
<p>fish can generate autocompletions from man pages. Completions are written to <code>~/.config/fish/generated_completions/</code> and can be generated by calling:
</p>
<pre>fish_update_completions
</pre>
<p>You can also define your own completions in <code>~/.config/fish/completions/</code>. See <code>/usr/share/fish/completions/</code> for a few examples.
</p>
<p>Context-aware completions for Arch Linux-specific commands like <i>pacman</i>, <i>pacman-key</i>, <i>makepkg</i>, <i>cower</i>, <i>pbget</i>, <i>pacmatic</i> are built into fish, since the policy of the fish development is to include all the existent completions in the upstream tarball. The memory management is clever enough to avoid any negative impact on resources.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="History_substitution">History substitution</span></h3>
<p>Fish does not implement history substitution (e.g. <code>sudo !!</code>), and the fish developers have said that they <a rel="nofollow" class="external text" href="http://fishshell.com/docs/current/faq.html#faq-history">do not plan to</a>. Still, this is an essential piece of many users' workflow. Reddit user, <a rel="nofollow" class="external text" href="http://www.reddit.com/u/crossroads1112">crossroads1112</a>, created a function that regains some of the functionality of history substitution and with another syntax. The function is on <a rel="nofollow" class="external text" href="https://gist.github.com/crossroads1112/77badb2c3455e23b873b">github</a> and instructions are included as comments in it. There is a <a rel="nofollow" class="external text" href="https://gist.github.com/b-/981892a65837ab0a387e">forked version</a> that is closer to the original syntax and allows for <code>command !!</code> if you specify the command in the helper function.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Not_setting_fish_as_default_shell">Not setting fish as default shell</span></h3>
<p>In Arch, some shell scripts are written for <a href="../en/Bash.html" title="Bash">Bash</a> and are not fully compatible with fish. Not setting fish as system wide or user default allows the Bash scripts to run on startup, ensures the environment variables are set correctly, and generally reduces the issues associated with using a non-Bash compatible terminal like fish. You may see some script errors if your default shell is set as fish. Below are several options for using fish without setting it as your default shell.
</p>
<h4><span class="mw-headline" id="Modify_.bashrc_to_drop_into_fish">Modify .bashrc to drop into fish</span></h4>
<p>Keep your default shell as Bash and simply add the line <code>exec fish</code> to the appropriate <a href="../en/Bash.html#Configuration_files" title="Bash">Bash#Configuration files</a>, such as <code>.bashrc</code>. This will allow Bash to properly source <code>/etc/profile</code> and all files in <code>/etc/profile.d</code>. Because <i>fish</i> replaces the bash process, exiting <i>fish</i> will also exit the terminal. Compared to the following options, this is the most universal solution, since it works both on a local machine and on an SSH server.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>Use <code>bash</code> to enter bash manually without dropping to fish after setting up as above.</div>
<h4><span class="mw-headline" id="Use_terminal_emulator_options">Use terminal emulator options</span></h4>
<p>Another option is to open your terminal emulator with a command line option that executes fish. For most terminals this is the <code>-e</code> switch, so for example, to open gnome-terminal using fish, change your shortcut to use:
</p>
<pre>gnome-terminal -e fish
</pre>
<p>With LilyTerm and other light terminal emulators that do not support setting the shell it would look like this:
</p>
<pre>SHELL=/usr/bin/fish lilyterm
</pre>
<p>You can also set fish as the default shell for the terminal in the terminal's configuration or for a terminal profile if your terminal emulator has a profiles feature.
</p>
<p>Whenever you open your terminal emulator, you will be dropped into fish.
</p>
<h4><span class="mw-headline" id="Use_terminal_multiplexer_options">Use terminal multiplexer options</span></h4>
<p>To set fish as the shell started in tmux, put this into your <code>~/.tmux.conf</code>:
</p>
<pre>set-option -g default-shell "/usr/bin/fish"
</pre>
<p>Whenever you run <i>tmux</i>, you will be dropped into fish.
</p>
<h3><span class="mw-headline" id="Setting_fish_as_default_shell">Setting fish as default shell</span></h3>
<p>If you decide to set fish as your default shell, you may find that you no longer have very much in your path.
You can add a section to your <code>~/.config/fish/config.fish</code> file that will set your path correctly on login. This is much like <code>.profile</code> or <code>.bash_profile</code> as it is only executed for login shells.
</p>
<pre>
if status --is-login
        set PATH $PATH /usr/bin /sbin
end
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>This route requires you to manually add various other environment variables, such as <code>$MOZ_PLUGIN_PATH</code>. It is a huge amount of work to get a seamless experience with fish as your default shell using this method. A better idea would be <a href="#Not_setting_fish_as_default_shell">#Not setting fish as default shell</a>.</div>
<h3><span class="mw-headline" id="Disable_greeting">Disable greeting</span></h3>
<p>By default, fish prints a greeting message at startup. To disable it, add <code>set fish_greeting</code> to your fish configuration file.
</p>
<h3><span class="mw-headline" id="Make_su_launch_fish">Make su launch fish</span></h3>
<p>If <i>su</i> starts with Bash (because Bash is the default shell), define a function in your fish configuration file:
</p>
<pre>function su
    /bin/su --shell=/usr/bin/fish $argv
end
</pre>
<h3><span class="mw-headline" id="Start_X_at_login">Start X at login</span></h3>
<p>Add the following to the bottom of your <code>~/.config/fish/config.fish</code>.
</p>
<pre>
# start X at login
if status --is-login
    if test -z "$DISPLAY" -a "$XDG_VTNR" -eq "1"
        exec startx
    end
end
</pre>
<h3><span class="mw-headline" id="Use_liquidprompt">Use liquidprompt</span></h3>
<p><a rel="nofollow" class="external text" href="https://github.com/nojhan/liquidprompt">Liquidprompt</a> is a popular "full-featured &amp; carefully designed adaptive prompt for Bash &amp; Zsh" and has no plans to make it compatible with fish <a rel="nofollow" class="external autonumber" href="https://github.com/nojhan/liquidprompt/pull/230">[1]</a>. <a rel="nofollow" class="external text" href="https://github.com/wesbarnett/fish-lp">This project</a> implements it for fish.
</p>
<h3><span class="mw-headline" id="Put_git_status_in_prompt">Put git status in prompt</span></h3>
<p>If you would like fish to display the branch and dirty status when you are in a git directory, you can add the following to your <code>~/.config/fish/config.fish</code>:
</p>
<pre>
# fish git prompt
set __fish_git_prompt_showdirtystate 'yes'
set __fish_git_prompt_showstashstate 'yes'
set __fish_git_prompt_showupstream 'yes'
set __fish_git_prompt_color_branch yellow

# Status Chars
set __fish_git_prompt_char_dirtystate '⚡'
set __fish_git_prompt_char_stagedstate '→'
set __fish_git_prompt_char_stashstate '↩'
set __fish_git_prompt_char_upstream_ahead '↑'
set __fish_git_prompt_char_upstream_behind '↓'
 
function fish_prompt
        set last_status $status
        set_color $fish_color_cwd
        printf '%s' (prompt_pwd)
        set_color normal
        printf '%s ' (__fish_git_prompt)
       set_color normal
end
</pre>
<h3><span class="mw-headline" id="Evaluate_ssh-agent">Evaluate ssh-agent</span></h3>
<p>In fish, <code>eval (ssh-agent)</code> generate errors due to how variables are set. To work around this, use the csh-style option <code>-c</code>:
</p>
<pre> $ eval (ssh-agent -c)
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external free" href="http://fishshell.com/">http://fishshell.com/</a> - Home page</li>
<li> <a rel="nofollow" class="external free" href="http://fishshell.com/docs/current/index.html">http://fishshell.com/docs/current/index.html</a> - Documentation</li>
</ul>

</div>
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Command_shells.html" title="Category:Command shells">Command shells</a></li></ul>
</div></div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
