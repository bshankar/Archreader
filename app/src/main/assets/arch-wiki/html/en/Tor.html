<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Tor - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Tor skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Tor</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/GNUnet.html" title="GNUnet">GNUnet</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/I2P.html" title="I2P">I2P</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Freenet.html" title="Freenet">Freenet</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.torproject.org">Tor</a> is an open source implementation of 2nd generation <a href="https://en.wikipedia.org/wiki/Onion_routing" class="extiw" title="wikipedia:Onion routing">onion routing</a> that provides free access to an anonymous proxy network. Its primary goal is to enable <a href="https://en.wikipedia.org/wiki/Internet_anonymity" class="extiw" title="wikipedia:Internet anonymity">online anonymity</a> by protecting against <a href="https://en.wikipedia.org/wiki/Traffic_analysis" class="extiw" title="wikipedia:Traffic analysis">traffic analysis</a> attacks.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Configuration"><span class="tocnumber">3</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Relay_Configuration"><span class="tocnumber">3.1</span> <span class="toctext">Relay Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Running_Tor_in_a_Chroot"><span class="tocnumber">4</span> <span class="toctext">Running Tor in a Chroot</span></a></li>
<li class="toclevel-1 tocsection-6">
<a href="#Running_Tor_in_a_systemd-nspawn_container_with_a_virtual_network_interface"><span class="tocnumber">5</span> <span class="toctext">Running Tor in a systemd-nspawn container with a virtual network interface</span></a>
<ul>
<li class="toclevel-2 tocsection-7">
<a href="#Host_installation_and_configuration"><span class="tocnumber">5.1</span> <span class="toctext">Host installation and configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Virtual_network_interface"><span class="tocnumber">5.1.1</span> <span class="toctext">Virtual network interface</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Start_and_enable_systemd-nspawn"><span class="tocnumber">5.1.2</span> <span class="toctext">Start and enable systemd-nspawn</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10">
<a href="#Container_configuration"><span class="tocnumber">5.2</span> <span class="toctext">Container configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Start_and_enable_systemd-networkd"><span class="tocnumber">5.2.1</span> <span class="toctext">Start and enable systemd-networkd</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#Configure_Tor"><span class="tocnumber">5.3</span> <span class="toctext">Configure Tor</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#Usage"><span class="tocnumber">6</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-14">
<a href="#Web_browsing"><span class="tocnumber">7</span> <span class="toctext">Web browsing</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Firefox"><span class="tocnumber">7.1</span> <span class="toctext">Firefox</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Chromium"><span class="tocnumber">7.2</span> <span class="toctext">Chromium</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Luakit"><span class="tocnumber">7.3</span> <span class="toctext">Luakit</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#HTTP_proxy"><span class="tocnumber">8</span> <span class="toctext">HTTP proxy</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Firefox_2"><span class="tocnumber">8.1</span> <span class="toctext">Firefox</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Polipo"><span class="tocnumber">8.2</span> <span class="toctext">Polipo</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Privoxy"><span class="tocnumber">8.3</span> <span class="toctext">Privoxy</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22">
<a href="#Instant_messaging"><span class="tocnumber">9</span> <span class="toctext">Instant messaging</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Pidgin"><span class="tocnumber">9.1</span> <span class="toctext">Pidgin</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Irssi"><span class="tocnumber">10</span> <span class="toctext">Irssi</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#Pacman"><span class="tocnumber">11</span> <span class="toctext">Pacman</span></a></li>
<li class="toclevel-1 tocsection-26">
<a href="#Running_a_Tor_server"><span class="tocnumber">12</span> <span class="toctext">Running a Tor server</span></a>
<ul>
<li class="toclevel-2 tocsection-27">
<a href="#Running_a_Tor_bridge"><span class="tocnumber">12.1</span> <span class="toctext">Running a Tor bridge</span></a>
<ul>
<li class="toclevel-3 tocsection-28"><a href="#Configuration_2"><span class="tocnumber">12.1.1</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Troubleshooting"><span class="tocnumber">12.1.2</span> <span class="toctext">Troubleshooting</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-30">
<a href="#Running_a_Tor_relay"><span class="tocnumber">12.2</span> <span class="toctext">Running a Tor relay</span></a>
<ul>
<li class="toclevel-3 tocsection-31"><a href="#Configuration_3"><span class="tocnumber">12.2.1</span> <span class="toctext">Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-32">
<a href="#Running_a_Tor_exit_node"><span class="tocnumber">12.3</span> <span class="toctext">Running a Tor exit node</span></a>
<ul>
<li class="toclevel-3 tocsection-33"><a href="#Configuration_4"><span class="tocnumber">12.3.1</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-3 tocsection-34">
<a href="#.2B100Mbps_Exit_Relay_configuration_example"><span class="tocnumber">12.3.2</span> <span class="toctext">+100Mbps Exit Relay configuration example</span></a>
<ul>
<li class="toclevel-4 tocsection-35">
<a href="#Tor"><span class="tocnumber">12.3.2.1</span> <span class="toctext">Tor</span></a>
<ul>
<li class="toclevel-5 tocsection-36"><a href="#Raise_maximum_number_of_open_file_descriptors"><span class="tocnumber">12.3.2.1.1</span> <span class="toctext">Raise maximum number of open file descriptors</span></a></li>
<li class="toclevel-5 tocsection-37"><a href="#Start_tor.service_as_root_to_bind_Tor_to_privileged_ports"><span class="tocnumber">12.3.2.1.2</span> <span class="toctext">Start tor.service as root to bind Tor to privileged ports</span></a></li>
<li class="toclevel-5 tocsection-38"><a href="#Tor_configuration"><span class="tocnumber">12.3.2.1.3</span> <span class="toctext">Tor configuration</span></a></li>
</ul>
</li>
<li class="toclevel-4 tocsection-39"><a href="#arm"><span class="tocnumber">12.3.2.2</span> <span class="toctext">arm</span></a></li>
<li class="toclevel-4 tocsection-40"><a href="#iptables"><span class="tocnumber">12.3.2.3</span> <span class="toctext">iptables</span></a></li>
<li class="toclevel-4 tocsection-41"><a href="#Haveged"><span class="tocnumber">12.3.2.4</span> <span class="toctext">Haveged</span></a></li>
<li class="toclevel-4 tocsection-42">
<a href="#pdnsd"><span class="tocnumber">12.3.2.5</span> <span class="toctext">pdnsd</span></a>
<ul>
<li class="toclevel-5 tocsection-43"><a href="#Uncensored_DNS"><span class="tocnumber">12.3.2.5.1</span> <span class="toctext">Uncensored DNS</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-44">
<a href="#TorDNS"><span class="tocnumber">13</span> <span class="toctext">TorDNS</span></a>
<ul>
<li class="toclevel-2 tocsection-45"><a href="#Using_TorDNS_for_all_DNS_queries"><span class="tocnumber">13.1</span> <span class="toctext">Using TorDNS for all DNS queries</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-46"><a href="#Torify"><span class="tocnumber">14</span> <span class="toctext">Torify</span></a></li>
<li class="toclevel-1 tocsection-47"><a href="#Transparent_Torification"><span class="tocnumber">15</span> <span class="toctext">Transparent Torification</span></a></li>
<li class="toclevel-1 tocsection-48">
<a href="#Troubleshooting_2"><span class="tocnumber">16</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-49"><a href="#Problem_with_user_value"><span class="tocnumber">16.1</span> <span class="toctext">Problem with user value</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-50"><a href="#See_also"><span class="tocnumber">17</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>Users of the Tor network run an onion proxy on their machine. This software connects out to Tor, periodically negotiating a virtual circuit through the Tor network. Tor employs cryptography in a layered manner (hence the 'onion' analogy), ensuring perfect forward secrecy between routers. At the same time, the onion proxy software presents a SOCKS interface to its clients. SOCKS-aware applications may be pointed at Tor, which then multiplexes the traffic through a Tor virtual circuit.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Tor by itself is <i>not</i> all you need to maintain your anonymity. There are several major pitfalls to watch out for (see: <a rel="nofollow" class="external text" href="https://www.torproject.org/download/download.html#warning">Want Tor to really work?</a>).</div>
<p>Through this process the onion proxy manages networking traffic for end-user anonymity. It keeps a user anonymous by encrypting traffic, sending it through other nodes of the Tor network, and decrypting it at the last node to receive your traffic before forwarding it to the server you specified. One trade off that has to be made for the anonymity Tor provides is that it can be considerably slower than a regular direct connection, due to the large amount of traffic re-routing. Additionally, although Tor provides protection against traffic analysis it cannot prevent traffic confirmation at the boundaries of the Tor network (i.e. the traffic entering and exiting the network).
</p>
<p>See <a href="https://en.wikipedia.org/wiki/Tor_(anonymity_network)" class="extiw" title="wikipedia:Tor (anonymity network)">Wikipedia:Tor (anonymity network)</a> for more information.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=tor">tor</a></span> package.
</p>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=arm">arm</a></span> (Anonymizing Relay Monitor) package provides a terminal status monitor for bandwidth usage, connection details and more.
</p>
<p>For a GUI, you can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/vidalia/">vidalia</a></span><sup><small>AUR</small></sup>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Vidalia is discontinued and no longer supported by the Tor Project. Please see <a rel="nofollow" class="external free" href="https://blog.torproject.org/blog/plain-vidalia-bundles-be-discontinued-dont-panic">https://blog.torproject.org/blog/plain-vidalia-bundles-be-discontinued-dont-panic</a>
</div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>By default Tor reads configurations from the file <code>/etc/tor/torrc</code>. The configuration options are explained in <code>man tor</code> and the <a rel="nofollow" class="external text" href="https://torproject.org/docs/tor-manual.html.en">Tor website</a>. The default configuration should work fine for most Tor users.
</p>
<p>There are potential conflicts between configurations in <code>torrc</code> and those in <code>tor.service</code>.
</p>
<ul>
<li> In <code>torrc</code>, <code>RunAsDaemon</code> should, as by default, be set to <code>0</code>, since <code>Type=simple</code> is set in the <code>[Service]</code> section in <code>tor.service</code>.</li>
<li> In <code>torrc</code>, <code>User</code> should not be set unless <code>User=</code> is set to <code>root</code> in the <code>[Service]</code> section in <code>tor.service</code>.</li>
</ul>
<h3><span class="mw-headline" id="Relay_Configuration">Relay Configuration</span></h3>
<p>The maximum file descriptor number that can be opened by Tor can be set with <code>LimitNOFILE</code> in <code>tor.service</code>. Fast relays may want to increase this value.
</p>
<p>If your computer is not running a webserver, and you have not set <code>AccountingMax</code>, consider changing your <code>ORPort</code> to <code>443</code> and/or your <code>DirPort</code> to <code>80</code>. Many Tor users are stuck behind firewalls that only let them browse the web, and this change will let them reach your Tor relay. If you are already using ports 80 and 443, other useful ports are 22, 110, and 143.<a rel="nofollow" class="external autonumber" href="https://www.torproject.org/docs/tor-relay-debian">[1]</a>
But since these are privileged ports, to do so Tor must be run as root, by setting <code>User=root</code> in <code>tor.service</code> and <code>User tor</code> in <code>torrc</code>.
</p>
<p>You may wish to review <a rel="nofollow" class="external text" href="https://blog.torproject.org/blog/lifecycle-of-a-new-relay">Lifecycle of a New Relay</a> Tor documentation.
</p>
<h2><span class="mw-headline" id="Running_Tor_in_a_Chroot">Running Tor in a Chroot</span></h2>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong> Connecting with telnet to the local ControlPort seems to be broken while running Tor in a chroot</div>
<p>For security purposes, it may be desirable to run Tor in a <a href="../en/Change_root.html" title="Chroot" class="mw-redirect">chroot</a>. The following script will create an appropriate chroot in /opt/torchroot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/torchroot-setup.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
#!/bin/bash
export TORCHROOT=/opt/torchroot

mkdir -p $TORCHROOT
mkdir -p $TORCHROOT/etc/tor
mkdir -p $TORCHROOT/dev
mkdir -p $TORCHROOT/usr/bin
mkdir -p $TORCHROOT/usr/lib
mkdir -p $TORCHROOT/usr/share/tor
mkdir -p $TORCHROOT/var/lib

ln -s /usr/lib  $TORCHROOT/lib
cp /etc/hosts           $TORCHROOT/etc/
cp /etc/host.conf       $TORCHROOT/etc/
cp /etc/localtime       $TORCHROOT/etc/
cp /etc/nsswitch.conf   $TORCHROOT/etc/
cp /etc/resolv.conf     $TORCHROOT/etc/
cp /etc/tor/torrc       $TORCHROOT/etc/tor/

cp /usr/bin/tor         $TORCHROOT/usr/bin/
cp /usr/share/tor/geoip* $TORCHROOT/usr/share/tor/
cp /lib/libnss* /lib/libnsl* /lib/ld-linux-*.so* /lib/libresolv* /lib/libgcc_s.so* $TORCHROOT/usr/lib/
cp $(ldd /usr/bin/tor | awk '{print $3}'|grep --color=never "^/") $TORCHROOT/usr/lib/
cp -r /var/lib/tor      $TORCHROOT/var/lib/
chown -R tor:tor $TORCHROOT/var/lib/tor

sh -c "grep --color=never ^tor /etc/passwd &gt; $TORCHROOT/etc/passwd"
sh -c "grep --color=never ^tor /etc/group &gt; $TORCHROOT/etc/group"

mknod -m 644 $TORCHROOT/dev/random c 1 8
mknod -m 644 $TORCHROOT/dev/urandom c 1 9
mknod -m 666 $TORCHROOT/dev/null c 1 3

if [[ "$(uname -m)" == "x86_64" ]]; then
  cp /usr/lib/ld-linux-x86-64.so* $TORCHROOT/usr/lib/.
  ln -sr /usr/lib64 $TORCHROOT/lib64
  ln -s $TORCHROOT/usr/lib ${TORCHROOT}/usr/lib64
fi

</pre>
<p>After running the script as root, Tor can be launched in the <a href="../en/Change_root.html" title="Chroot" class="mw-redirect">chroot</a> with the command:
</p>
<pre># chroot --userspec=tor:tor /opt/torchroot /usr/bin/tor
</pre>
<p>or if you use systemd overload the service:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/tor.service.d/chroot.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[Service]
User=root
ExecStart=
ExecStart=/usr/bin/sh -c "chroot --userspec=tor:tor /opt/torchroot /usr/bin/tor -f /etc/tor/torrc"
KillSignal=SIGINT
</pre>
<h2><span class="mw-headline" id="Running_Tor_in_a_systemd-nspawn_container_with_a_virtual_network_interface">Running Tor in a systemd-nspawn container with a virtual network interface</span></h2>
<p>In this example we will create a <a href="../en/Systemd-nspawn.html" title="Systemd-nspawn">systemd-nspawn</a> container named <code>tor-exit</code> with a virtual macvlan network interface.
</p>
<p>See <a href="../en/Systemd-nspawn.html" title="Systemd-nspawn">Systemd-nspawn</a> and <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a> for full documentation.
</p>
<h3><span class="mw-headline" id="Host_installation_and_configuration">Host installation and configuration</span></h3>
<p>In this example the container will reside in <code>/srv/container</code>:
</p>
<pre># mkdir /srv/container/tor-exit
</pre>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span>.
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/groups/x86_64/base/">base</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=tor">tor</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=arm">arm</a></span> and deselect <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=linux">linux</a></span> as per <a href="../en/Systemd-nspawn.html#Installation_with_pacstrap" title="Systemd-nspawn">Systemd-nspawn#Installation with pacstrap</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" title="ArchWiki:Requests">broken link</a>: invalid section]</sup>:
</p>
<pre># pacstrap -i -c -d /srv/container/tor-exit base tor arm
</pre>
<p>Create directory if it does not exist:
</p>
<pre># mkdir /var/lib/container
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Symlinks for <code>nspawn</code> are currently broken(2/4/2016) <a rel="nofollow" class="external free" href="https://github.com/systemd/systemd/issues/2001">https://github.com/systemd/systemd/issues/2001</a>, and will give you a "too many levels of symlinks" error. As a (possibly insecure) workaround, simply pacstrap your install to the container directory instead.</div>
<p>Symlink to register the container on the host, as per <a href="../en/Systemd-nspawn.html#Boot_your_container_at_your_machine_startup" title="Systemd-nspawn">Systemd-nspawn#Boot your container at your machine startup</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" title="ArchWiki:Requests">broken link</a>: invalid section]</sup>:
</p>
<pre># ln -s /srv/container/tor-exit /var/lib/container/tor-exit
</pre>
<h4><span class="mw-headline" id="Virtual_network_interface">Virtual network interface</span></h4>
<p>Create a Dropin directory for the container service:
</p>
<pre># mkdir /etc/systemd/system/systemd-nspawn@tor-exit.service.d
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/systemd-nspawn@tor-exit.service.d/tor-exit.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[Service]
ExecStart=
ExecStart=/usr/bin/systemd-nspawn --quiet --keep-unit --boot --link-journal=guest --network-macvlan=$INTERFACE --private-network --directory=/var/lib/container/%i
LimitNOFILE=32768
</pre>
<p><code>--network-macvlan=$INTERFACE --private-network</code> automagically creates a macvlan named <code>mv-$INTERFACE</code> inside the container, which is not visible from the host. <code>--private-network</code> is implied by <code>--network-macvlan=</code> according to <code>man systemd-nspawn</code>.
This is advisable for security as it will allow you to give a private IP to the container, and it won't know what your machine's IP is. This can help obscure DNS requests.
</p>
<p><code>LimitNOFILE=32768</code> per <a href="#Raise_maximum_number_of_open_file_descriptors">#Raise maximum number of open file descriptors</a>.
</p>
<p>Setup <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a> according to your network in <code>/srv/container/tor-exit/etc/systemd/network/mv-$INTERFACE.network</code>.
</p>
<h4><span class="mw-headline" id="Start_and_enable_systemd-nspawn">Start and enable systemd-nspawn</span></h4>
<p><a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">Start</a> and enable <code>systemd-nspawn@tor-exit.service</code>.
</p>
<h3><span class="mw-headline" id="Container_configuration">Container configuration</span></h3>
<p><code># machinectl login tor-exit</code> login to the container, see <a href="../en/Systemd-nspawn.html#machinectl_command" title="Systemd-nspawn">Systemd-nspawn#machinectl command</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" title="ArchWiki:Requests">broken link</a>: invalid section]</sup>.
</p>
<p><code># mv /srv/container/tor-exit/etc/securetty /srv/container/tor-exit/etc/securetty.bak</code> if you get the error described in <a href="../en/Systemd-nspawn.html#Troubleshooting" title="Systemd-nspawn">Systemd-nspawn#Troubleshooting</a>.
</p>
<h4><span class="mw-headline" id="Start_and_enable_systemd-networkd">Start and enable systemd-networkd</span></h4>
<p><a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">Start</a> and enable <code>systemd-networkd.service</code>. <code>networkctl</code> displays if <code>systemd-networkd</code> is correctly configured.
</p>
<h3><span class="mw-headline" id="Configure_Tor">Configure Tor</span></h3>
<p>See <a href="#Running_a_Tor_server">#Running a Tor server</a>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>It is easier to edit files in the container from the host with your normal editor.</div>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>Start/enable <code>tor.service</code> <a href="../en/Systemd.html#Using_units" title="Systemd">using systemd</a>. Alternatively, launch it with <code>sudo -u tor /usr/bin/tor</code>.
</p>
<p>To use a program over tor, configure it to use 127.0.0.1 or localhost as a SOCKS5 proxy, with port 9050 (plain tor with standard settings).
To check if Tor is functioning properly visit the <a rel="nofollow" class="external text" href="https://check.torproject.org/">Tor</a>,  <a rel="nofollow" class="external text" href="http://serifos.eecs.harvard.edu/cgi-bin/ipaddr.pl?tor=1">Harvard</a> or <a rel="nofollow" class="external text" href="https://torcheck.xenobite.eu/">Xenobite.eu</a> websites.
</p>
<h2><span class="mw-headline" id="Web_browsing">Web browsing</span></h2>
<p>The Tor Project currently only supports web browsing with tor through the <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/?K=tor-browser-">Tor Browser Bundle</a>, which can be downloaded from the AUR. It is built with a patched version of the Firefox extended support releases. Tor can also be used with regular <a href="../en/Firefox.html" title="Firefox">Firefox</a>, <a href="../en/Chromium.html" title="Chromium">Chromium</a> and other browsers, but this is <a rel="nofollow" class="external text" href="https://www.torproject.org/docs/faq.html.en#TBBOtherBrowser">not recommended</a> by the Tor Project.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>For makepkg to verify the signature on the AUR source tarball download for TBB, import the <a rel="nofollow" class="external text" href="https://www.torproject.org/docs/signing-keys.html.en">signing keys from the Tor Project</a> (currently 2E1AC68ED40814E0) as explained in <a href="../en/GnuPG.html#Import_a_key" title="GnuPG">GnuPG#Import a key</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" title="ArchWiki:Requests">broken link</a>: invalid section]</sup>.</div>
<h3><span class="mw-headline" id="Firefox">Firefox</span></h3>
<p>In <i>Preferences &gt; Advanced &gt; Network tab &gt; Settings</i> manually set Firefox to use the SOCKS proxy <code>localhost</code> with port <code>9050</code>. Then you must type <code>about:config</code> into the address bar and <i>void your warranty</i>. Change <code>network.proxy.socks_remote_dns</code> to <code>true</code> and restart the browser. This channels all DNS requests through TOR's socks proxy.
</p>
<h3><span class="mw-headline" id="Chromium">Chromium</span></h3>
<p>You can simply run:
</p>
<pre>$ chromium --proxy-server="socks5://myproxy:8080" --host-resolver-rules="MAP * 0.0.0.0 , EXCLUDE myproxy"
</pre>
<p>The --proxy-server="socks5://myproxy:8080" flag tells Chrome to send all http:// and https:// URL requests through the SOCKS proxy server "myproxy:8080", using version 5 of the SOCKS protocol. The hostname for these URLs will be resolved by the proxy server, and not locally by Chrome.
</p>
<p>NOTE: proxying of ftp:// URLs through a SOCKS proxy is not yet implemented.
</p>
<p>The --proxy-server flag applies to URL loads only. There are other components of Chrome which may issue DNS resolves directly and hence bypass this proxy server. The most notable such component is the "DNS prefetcher".Hence if DNS prefetching is not disabled in Chrome then you will still see local DNS requests being issued by Chrome despite having specified a SOCKS v5 proxy server. Disabling DNS prefetching would solve this problem, however it is a fragile solution since once needs to be aware of all the areas in Chrome which issue raw DNS requests. To address this, the next flag, --host-resolver-rules="MAP * 0.0.0.0 , EXCLUDE myproxy", is a catch-all to prevent Chrome from sending any DNS requests over the network. It says that all DNS resolves are to be simply mapped to the (invalid) address 0.0.0.0. The "EXCLUDE" clause make an exception for "myproxy", because otherwise Chrome would be unable to resolve the address of the SOCKS proxy server itself, and all requests would necessarily fail with PROXY_CONNECTION_FAILED.
</p>
<p>Debug:
</p>
<p>The first thing to check when debugging is look at the Proxy tab on about:net-internals, and verify what the effective proxy settings are:
chrome://net-internals/#proxy
</p>
<p>Next, take a look at the DNS tab of about:net-internals to make sure Chrome isn't issuing local DNS resolves:
chrome://net-internals/#dns
</p>
<p>Note that in versions of Chrome after r186548, you can do this more concisely by mapping to ~NOTFOUND rather than 0.0.0.0.
Just as with Firefox, you can setup a fast switch for example through <a rel="nofollow" class="external text" href="https://chrome.google.com/webstore/detail/dpplabbmogkhghncfbfdeeokoefdjegm">Proxy SwitchySharp</a>.
</p>
<p>Once installed enter in its configuration page. Under the tab <i>Proxy Profiles</i> add a new profile <i>Tor</i>, if ticked untick the option <i>Use the same proxy server for all protocols</i>, then add <i>localhost</i> as SOCKS Host, <i>9050</i> to the respective port and select <i>SOCKS v5</i>.
</p>
<p>Optionally you can enable the quick switch under the <i>General</i> tab to be able to switch beetween normal navigation and Tor network just by left-clicking on the Proxy SwitchySharp's icon.
</p>
<h3><span class="mw-headline" id="Luakit">Luakit</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>It will not be hard for an observer to identify you by the rare user-agent string, and there may be further issues with Flash, JavaScript or similar.</div>
<p>You can simply run:
</p>
<pre>$ torify luakit
</pre>
<h2><span class="mw-headline" id="HTTP_proxy">HTTP proxy</span></h2>
<p>Tor can be used with an HTTP proxy like <a href="../en/Polipo.html" title="Polipo">Polipo</a> or <a href="../en/Privoxy.html" title="Privoxy">Privoxy</a>, however the Tor dev team recommends using the SOCKS5 library since browsers directly support it.
</p>
<h3><span class="mw-headline" id="Firefox_2">Firefox</span></h3>
<p>The <a rel="nofollow" class="external text" href="https://addons.mozilla.org/en-us/firefox/addon/foxyproxy-standard/">FoxyProxy</a> add-on  allows you to specify multiple proxies for different URLs or for all your browsing. After restarting Firefox manually set Firefox to port <code>8118</code> on <code>localhost</code>, which is where <a href="../en/Polipo.html" title="Polipo">Polipo</a> or <a href="../en/Privoxy.html" title="Privoxy">Privoxy</a> are running. These settings can be access under <i>Add &gt; Standard proxy type</i>. Select a proxy label (e.g Tor) and enter the port and host into the <i>HTTP Proxy</i> and <i>SSL Proxy</i> fields. To check if Tor is functioning properly visit the <a rel="nofollow" class="external text" href="https://check.torproject.org/">Tor Check</a> website and toggle Tor.
</p>
<h3><span class="mw-headline" id="Polipo">Polipo</span></h3>
<p>The Tor Project has created a custom <a rel="nofollow" class="external text" href="https://gitweb.torproject.org/torbrowser.git/plain/build-scripts/config/polipo.conf?id=1ffcd9dafb9dd76c3a29dd686e05a71a95599fb5">Polipo configuration file</a> to prevent potential problems with Polipo as well to provide better anonymity.
</p>
<p>Keep in mind that Polipo is not required if you can use a SOCKS 5 proxy, which Tor starts automatically on port 9050. If you want to use <a href="../en/Chromium.html" title="Chromium">Chromium</a> with Tor, you do not need the Polipo package (see: <a href="#Chromium">#Chromium</a>).
</p>
<h3><span class="mw-headline" id="Privoxy">Privoxy</span></h3>
<p>You can also use this setup in other applications like messaging (e.g. Jabber, IRC). Applications that support HTTP proxies you can connect to Privoxy (i.e. <code>127.0.0.1:8118</code>). To use SOCKS proxy directly, you can point your application at Tor (i.e. <code>127.0.0.1:9050</code>). A problem with this method though is that applications doing DNS resolves by themselves may leak information. Consider using Socks4A (e.g. with Privoxy) instead.
</p>
<h2><span class="mw-headline" id="Instant_messaging">Instant messaging</span></h2>
<p>In order to use an IM client with tor, we do not need an http proxy like <a href="../en/Polipo.html" title="Polipo">polipo</a>/<a href="../en/Privoxy.html" title="Privoxy">privoxy</a>. We will be using tor's daemon directly which listens to port 9050 by default.
</p>
<h3><span class="mw-headline" id="Pidgin">Pidgin</span></h3>
<p>You can set up Pidgin to use Tor globally, or per account. To use Tor globally, go to Tools -&gt; Preferences -&gt; Proxy. To use Tor for specific accounts, go to <i>Accounts &gt; Manage Accounts</i>, select the desired account, click Modify, then go to the Proxy tab. The proxy settings are as follows:
</p>
<pre>Proxy type SOCKS5
Host 127.0.0.1
Port 9150
</pre>
<p>Note that <a rel="nofollow" class="external text" href="https://trac.torproject.org/projects/tor/ticket/8135">some time in 2013</a> the Port has changed from 9050 to 9150 if you use the Tor Browser Bundle. Try the other value if you receive a "Connection refused" message.
</p>
<h2><span class="mw-headline" id="Irssi">Irssi</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <code>cap_sasl.pl</code> is broken with <i>perl</i> 5.20; SSL does also not work with <code>torsocks</code> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Tor">Talk:Tor#</a>)</div>
</div>
<p>Freenode recommends connecting to <code>.onion</code> directly. It also requires charybdis and ircd-seven's SASL mechanism for identifying to nickserv during connection; see <a href="../en/Irssi.html#Authenticating_with_SASL" title="Irssi">Irssi#Authenticating with SASL</a>. Start irssi:
</p>
<pre>$ torsocks irssi
</pre>
<p>Set your identification to nickserv, which will be read when connecting. Supported mechanisms are ECDSA-NIST256P-CHALLENGE (see <a rel="nofollow" class="external text" href="https://github.com/atheme/ecdsatool/blob/master/cap_sasl.pl">ecdsatool</a>)  and PLAIN. DH-BLOWFISH is <a rel="nofollow" class="external text" href="https://freenode.net/sasl/sasl-irssi.shtml">no longer supported</a>.
</p>
<pre>/sasl set <i>network</i> <i>username</i> <i>password</i> <i>mechanism</i>
</pre>
<p>Disable CTCP and DCC and set a different hostname to prevent information disclosure: <a rel="nofollow" class="external autonumber" href="https://encrypteverything.ca/IRC_Anonymity_Guide">[2]</a>
</p>
<pre>/ignore * CTCPS
/ignore * DCC
/set hostname <i>fake_host</i>
</pre>
<p>Connect to Freenode:
</p>
<pre>/connect -network <i>network</i> frxleqtzgvwkv7oz.onion
</pre>
<p>For more information check <a rel="nofollow" class="external text" href="http://freenode.net/irc_servers.shtml#tor">Accessing freenode Via Tor</a>, <a rel="nofollow" class="external text" href="http://freenode.net/sasl/README.txt">SASL README</a> or <a rel="nofollow" class="external text" href="https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO/IrcSilc">IRC/SILC Wiki article</a>.
</p>
<h2><span class="mw-headline" id="Pacman">Pacman</span></h2>
<p>Pacman download operations (repository DBs, packages, and public keys) can be done using the Tor network. Though relatively extreme, this measure is useful to prevent an adversary (most likely at one's LAN or the mirror) from knowing a subset of the packages you have installed, at the cost of longer latency, lower throughput, possible suspicion, and possible failure (if Tor is being filtered via the current connection).
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>It would be arguably simpler for an adversary, specifically one who desires to indiscriminately disseminate malware, to perform his/her activity by deploying malicious Tor exit node(s). Always use signed packages and verify new public keys by out-of-band means.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
...
XferCommand = /usr/bin/curl --socks5-hostname localhost:9050 -C - -f %u &gt; %o
...</pre>
<h2><span class="mw-headline" id="Running_a_Tor_server">Running a Tor server</span></h2>
<p>The Tor network is reliant on people contributing bandwidth and setting up services. There are several ways to contribute to the network.
</p>
<h3><span class="mw-headline" id="Running_a_Tor_bridge">Running a Tor bridge</span></h3>
<p>A Tor bridge is a Tor relay that is not listed in the public Tor directory, thus making it possible for people to connect to the Tor network when governments or ISPs block all public Tor relays.
</p>
<h4><span class="mw-headline" id="Configuration_2">Configuration</span></h4>
<p>According to <a rel="nofollow" class="external free" href="https://www.torproject.org/docs/bridges">https://www.torproject.org/docs/bridges</a> , make your torrc be just these four lines (Default: /etc/tor/torrc, or $HOME/.torrc if that file is not found)
</p>
<dl><dd></dd></dl>
<pre>   SocksPort 0
   ORPort 443
   BridgeRelay 1
   Exitpolicy reject *:*
</pre>
<h4><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h4>
<p>If you get "Could not bind to 0.0.0.0:443: Permission denied" errors on startup, you will need to pick a higher ORPort (e.g. 8080), or perhaps <a rel="nofollow" class="external text" href="http://www.portforward.com/">forward the port</a> in your router.
</p>
<h3><span class="mw-headline" id="Running_a_Tor_relay">Running a Tor relay</span></h3>
<p>This means that your machine will act as an entry node or forwarding relay and, unlike a bridge, it will be listed in the public Tor directory. Your IP address will be publicly visible in the Tor directory but the relay will only forward to other relays or Tor exit nodes, not directly to the internet.
</p>
<h4><span class="mw-headline" id="Configuration_3">Configuration</span></h4>
<p>You should at least share 20KiB/s:
</p>
<pre>Nickname <i>tornickname</i>
ORPort 9001                    # This TCP-Port has to be opened/forwarded in your Firewall
BandwidthRate 20 KB            # Throttle traffic to 20KB/s
BandwidthBurst 50 KB           # But allow bursts up to 50KB/s
</pre>
<p>Disallow exits from your relay:
</p>
<pre>ExitPolicy reject *:*
</pre>
<h3><span class="mw-headline" id="Running_a_Tor_exit_node">Running a Tor exit node</span></h3>
<p>Any requests from a Tor user to the regular internet obviously need to exit the network somewhere, and exit nodes provide this vital service. To the accessed host, the request will appear as having originated from your machine. This means that running an exit node is generally considered more legally onerous than running other forms of Tor relays. Before becoming an exit relay, you may want to read <a rel="nofollow" class="external text" href="https://blog.torproject.org/running-exit-node">Tips for Running an Exit Node With Minimal Harrasment</a>.
</p>
<h4><span class="mw-headline" id="Configuration_4">Configuration</span></h4>
<p>Using the torrc, you can configure which services you wish to allow through your exit node.
Allow all traffic:
</p>
<pre>ExitPolicy accept *:*
</pre>
<p>Allow only irc ports 6660-6667 to exit from node:
</p>
<pre>ExitPolicy accept *:6660-6667,reject *:* # Allow irc ports but no more
</pre>
<p>By default, Tor will block certain ports. You can use the torrc to overide this.
</p>
<pre>ExitPolicy accept *:119        # Accept nntp as well as default exit policy
</pre>
<h4><span class="mw-headline" id=".2B100Mbps_Exit_Relay_configuration_example">+100Mbps Exit Relay configuration example</span></h4>
<p>If you run a fast exit relay (+100Mbps) with <code>ORPort 443</code> and <code>DirPort 80</code> (as recommended in <a rel="nofollow" class="external text" href="http://www.torproject.org/docs/tor-relay-debian.html.en#after">Configuring a Tor relay on Debian/Ubuntu</a>) the following configuration changes might serve as inspiration to setup Tor alongside <a href="../en/Iptables.html" title="Iptables">iptables</a> firewall, <a href="../en/Haveged.html" title="Haveged">Haveged</a> to increase system entropy and <a href="../en/Pdnsd.html" title="Pdnsd">pdnsd</a> as DNS cache. It is important to <i>first</i> read <a rel="nofollow" class="external text" href="http://www.torproject.org/docs/tor-relay-debian.html.en#after">Configuring a Tor relay on Debian/Ubuntu</a>. 
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>See <a href="#Running_Tor_in_a_systemd-nspawn_container_with_a_virtual_network_interface">#Running Tor in a systemd-nspawn container with a virtual network interface</a> for instructions to install Tor in a <code>systemd-nspawn</code> container. <a href="../en/Haveged.html" title="Haveged">Haveged</a> should be installed on the container host.</div>
<h5><span class="mw-headline" id="Tor">Tor</span></h5>
<h6><span class="mw-headline" id="Raise_maximum_number_of_open_file_descriptors">Raise maximum number of open file descriptors</span></h6>
<p>To handle more than 8192 connections <code>LimitNOFILE</code> can be raised to 32768 as per <a rel="nofollow" class="external text" href="https://www.torproject.org/docs/faq.html.en#PackagedTor">Tor FAQ</a>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/tor.service.d/increase-file-limits.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[Service]
LimitNOFILE=32768
</pre>
<p>To succesfully raise <code>nofile</code> limit, you may also have to append the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/security/limits.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
...
tor     soft    nofile    32768
tor     hard    nofile    32768
@tor    soft    nofile    32768
@tor    hard    nofile    32768
</pre>
<p>Check if the <code>nofile</code> (filedescriptor) limit is succesfully raised with <code># sudo -u tor 'ulimit -Hn'</code> or <code># sudo -u tor bash</code> and <code># ulimit -Hn</code>.
</p>
<h6><span class="mw-headline" id="Start_tor.service_as_root_to_bind_Tor_to_privileged_ports">Start tor.service as root to bind Tor to privileged ports</span></h6>
<p>To bind Tor to privileged ports the service must be started as root. Please specify <code>User tor</code> option in <code>/etc/tor/torrc</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/tor.service.d/start-as-root.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[Service]
User=root
</pre>
<h6><span class="mw-headline" id="Tor_configuration">Tor configuration</span></h6>
<p>To listen on Port 80 and 443 the service need to be started as <code>root</code> as described in <a href="#Start_tor.service_as_root_to_bind_Tor_to_privileged_ports">#Start tor.service as root to bind Tor to privileged ports</a>.
Use the <code>User tor</code> option in <code>/etc/tor/torrc</code> to properly reduce Tor’s privileges.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tor/torrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
SocksPort 0                                       ## Pure relay configuration without local socks proxy

Log notice stdout                                 ## Default Tor behavior

ControlPort 9051                                  ## For arm connection
CookieAuthentication 1                            ## For arm connection

ORPort 443                                        ## Service must be started as root

Address $IP                                       ## IP or FQDN
Nickname $NICKNAME                                ## Nickname displayed in <a rel="nofollow" class="external text" href="https://onionoo.torproject.org/">Onionoo</a>

RelayBandwidthRate 500 Mbits                      ## bytes|KBytes|MBytes|GBytes|KBits|MBits|GBits
RelayBandwidthBurst 1000 MBits                    ## bytes|KBytes|MBytes|GBytes|KBits|MBits|GBits

ContactInfo $E-MAIL - $BTC-ADDRESS                ## See <a rel="nofollow" class="external text" href="https://oniontip.com/">OnionTip</a>

DirPort 80                                        ## Service must be started as root
DirPortFrontPage /etc/tor/tor-exit-notice.html    ## Original: <a rel="nofollow" class="external free" href="https://gitweb.torproject.org/tor.git/plain/contrib/operator-tools/tor-exit-notice.html">https://gitweb.torproject.org/tor.git/plain/contrib/operator-tools/tor-exit-notice.html</a>

MyFamily $($KEYID),$($KEYID)...                   ## Remember $ in front of keyid(s) ;)

ExitPolicy reject XXX.XXX.XXX.XXX/XX:*            ## Block domain of public IP in addition to std. exit policy

User tor                                          ## Return to tor user after service started as root to listen on privileged ports

DisableDebuggerAttachment 0                       ## For arm connection

### Performance related options ###
AvoidDiskWrites 1                                 ## Reduce wear on SSD
DisableAllSwap 1                                  ## Service must be started as root
HardwareAccel 1                                   ## Look for OpenSSL hardware cryptographic support
NumCPUs 2                                         ## Only start two threads
</pre>
<p>This configuration is based on the <a rel="nofollow" class="external text" href="https://www.torproject.org/docs/tor-manual.html.en">Tor Manual</a>. 
</p>
<p>Tor opens a socks proxy on port 9050 by default -- even if you do not configure one. Set <code>SocksPort 0</code> if you plan to run Tor only as a relay, and not make any local application connections yourself.
</p>
<p><code>Log notice stdout</code> changes logging to stdout, which is also the Tor default.
<code>ControlPort 9051</code>, <code>CookieAuthentication 1</code> and <code>DisableDebuggerAttachment 0</code> enables <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=arm">arm</a></span> to connect to Tor and display connections.
</p>
<p><code>ORPort 443</code> and <code>DirPort 80</code> lets Tor listen on port 443 and 80 and <code>DirPortFrontPage</code> displays the <a rel="nofollow" class="external text" href="https://gitweb.torproject.org/tor.git/plain/contrib/operator-tools/tor-exit-notice.html">tor-exit-notice.html</a> on port 80.
</p>
<p><code>ExitPolicy reject XXX.XXX.XXX.XXX/XX:*</code> should reflect your public IP and netmask, which can be obtained with the command <code># ip addr</code>, so exit connections cannot connect to the host or neighboring machines public IP and circumvent firewalls.
</p>
<p><code>AvoidDiskWrites 1</code> reduces disk writes and wear on SSD.
<code>DisableAllSwap 1</code> "will attempt to lock all current and future memory pages, so that memory cannot be paged out". 
</p>
<p>If <code># cat /proc/cpuinfo | grep aes</code> returns that your CPU supports AES instructions and <code># lsmod | grep aes</code> returns that the module is loaded, you can specify <code>HardwareAccel 1</code> which tries "to use built-in (static) crypto hardware acceleration when available", see <a rel="nofollow" class="external free" href="http://www.torservers.net/wiki/setup/server#aes-ni_crypto_acceleration">http://www.torservers.net/wiki/setup/server#aes-ni_crypto_acceleration</a>.
</p>
<p><code>ORPort 443</code>, <code>DirPort 80</code> and <code>DisableAllSwap 1</code> require that you start the Tor service as <code>root</code> as described in <a href="#Start_tor.service_as_root_to_bind_Tor_to_privileged_ports">#Start tor.service as root to bind Tor to privileged ports</a>.
Use the <code>User tor</code> option to properly reduce Tor’s privileges.
</p>
<h5><span class="mw-headline" id="arm">arm</span></h5>
<p>If <code>ControlPort 9051</code> and <code>CookieAuthentication 1</code> is specified in <code>/etc/tor/torrc</code>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=arm">arm</a></span> can be started with <code>sudo -u tor arm</code>.
If you want to watch Tor connections in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=arm">arm</a></span> <code>DisableDebuggerAttachment 0</code> must also be specified.
</p>
<h5><span class="mw-headline" id="iptables">iptables</span></h5>
<p>Setup and learn to use <a href="../en/Iptables.html" title="Iptables">iptables</a>. Instead of being a <a href="../en/Simple_stateful_firewall.html" title="Simple stateful firewall">Simple stateful firewall</a> where connection tracking would have to track thousands of connections on a tor exit relay this firewall configuration is stateless.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/iptables/iptables.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
*raw
-A PREROUTING -j NOTRACK
-A OUTPUT -j NOTRACK
COMMIT

*filter
:INPUT DROP [0:0]
:FORWARD DROP [0:0]
:OUTPUT ACCEPT [0:0]
-A INPUT -p tcp ! --syn -j ACCEPT
-A INPUT -p udp -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -p tcp --dport 443 -j ACCEPT
-A INPUT -p tcp --dport 80 -j ACCEPT
-A INPUT -i lo -j ACCEPT
COMMIT
</pre>
<p><code>-A PREROUTING -j NOTRACK</code> and <code>-A OUTPUT -j NOTRACK</code> disables connection tracking in the <code>raw</code> table.
</p>
<p><code>:INPUT DROP [0:0]</code> is the default <code>INPUT</code> target and drops input traffic we do not specifically <code>ACCEPT</code>.
</p>
<p><code>:FORWARD DROP [0:0]</code> is the default <code>FORWARD</code> target and only relevant if the host is a normal router, not  when the host is an onion router.
</p>
<p><code>:OUTPUT ACCEPT [0:0]</code> is the default <code>OUTPUT</code> target and allows all outgoing connections.
</p>
<p><code>-A INPUT -p tcp ! --syn -j ACCEPT</code> allow already established incoming TCP connections per the rules below and TCP connections established from the exit node.
</p>
<p><code>-A INPUT -p udp -j ACCEPT</code> allow all incoming UDP connections because we do not use connection tracking.
</p>
<p><code>-A INPUT -p icmp -j ACCEPT</code> allow <a href="https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol" class="extiw" title="wikipedia:Internet Control Message Protocol">ICMP</a>.
</p>
<p><code>-A INPUT -p tcp --dport 443 -j ACCEPT</code> allow incoming connections to the <code>ORPort</code>.
</p>
<p><code>-A INPUT -p tcp --dport 80 -j ACCEPT</code> allow incoming connections to the <code>DirPort</code>.
</p>
<p><code>-A INPUT -i lo -j ACCEPT</code> allows all connections on the loopback interface.
</p>
<h5><span class="mw-headline" id="Haveged">Haveged</span></h5>
<p>See <a href="../en/Haveged.html" title="Haveged">Haveged</a> to decide if your system generates enough entropy to handle a lot of OpenSSL connections, see <a rel="nofollow" class="external text" href="http://www.issihosts.com/haveged/">haveged - A simple entropy daemon</a> and <a rel="nofollow" class="external text" href="http://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged">how-to-setup-additional-entropy-for-cloud-servers-using-haveged</a> for documentation.
</p>
<h5><span class="mw-headline" id="pdnsd">pdnsd</span></h5>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>This configuration assumes your network DNS resolver is trusted (uncensored).</div>
<p>You can use <a href="../en/Pdnsd.html" title="Pdnsd">pdnsd</a> to cache DNS queries locally, so the exit relay can resolve DNS faster and the exit relay does not forward all DNS queries to an external DNS recursor.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pdnsd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
...
perm_cache=102400                       ## (Default value)*100 = 1MB * 100 = 100MB
...
server {
    label= "resolvconf";
    file = "/etc/pdnsd-resolv.conf";    ## Preferably do not use /etc/resolv.conf
    timeout=4;                          ## Server timeout, this may be much shorter than the global timeout option.
    uptest=query;                       ## Test availability using empty DNS queries. 
    query_test_name=".";                ## To be used if remote servers ignore empty queries.
    interval=10m;                       ## Test every 10 minutes.
    purge_cache=off;                    ## Ignore TTL.
    edns_query=yes;                     ## Use EDNS for outgoing queries to allow UDP messages larger than 512 bytes. May cause trouble with some legacy systems.
    preset=off;                         ## Assume server is down before uptest.
 }
...
</pre>
<p>This configuration stub shows how to cache queries to your normal DNS recursor locally and increase pdnsd cache size to 100MB.
</p>
<h6><span class="mw-headline" id="Uncensored_DNS">Uncensored DNS</span></h6>
<p>If your local DNS recursor is in some way censored or interferes with DNS queries, see <a href="../en/Resolv.conf.html#Alternative_DNS_servers" title="Resolv.conf">Resolv.conf#Alternative DNS servers</a> for alternatives and add them in a seperate server-section in <code>/etc/pdnsd.conf</code> as per <a href="../en/Pdnsd.html#DNS_servers" title="Pdnsd">Pdnsd#DNS servers</a>.
</p>
<h2><span class="mw-headline" id="TorDNS">TorDNS</span></h2>
<p>The Tor 0.2.x series provides a built-in DNS forwarder. To enable it add the following lines to the Tor configuration file and restart the daemon:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tor/torrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
DNSPort 9053
AutomapHostsOnResolve 1
AutomapHostsSuffixes .exit,.onion
</pre>
<p>This will allow Tor to accept DNS requests (listening on port 9053 in this example) like a regular DNS server, and resolve the domain via the Tor network. A downside is that it is only able to resolve DNS queries for A-records; MX and NS queries are never answered. For more information see this <a rel="nofollow" class="external text" href="https://techstdout.boum.org/TorDns/">Debian-based introduction</a>.
</p>
<p>DNS queries can also be performed through a command line interface by using <code>tor-resolve</code>. For example:
</p>
<pre>
$ tor-resolve archlinux.org
66.211.214.131
</pre>
<h3><span class="mw-headline" id="Using_TorDNS_for_all_DNS_queries">Using TorDNS for all DNS queries</span></h3>
<p>It is possible to configure your system, if so desired, to use TorDNS for <i>all</i> queries your system makes, regardless of whether or not you eventually use Tor to connect to your final destination. To do this, configure your system to use 127.0.0.1 as its DNS server and edit the 'DNSPort' line in <code>/etc/tor/torrc</code> to show:
</p>
<pre>DNSPort 53
</pre>
<p>Alternatively, you can use a local caching DNS server, such as <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a> or <a href="../en/Pdnsd.html" title="Pdnsd">pdnsd</a>, which will also compensate for TorDNS being a little slower than traditional DNS servers. The following instructions will show how to set up <i>dnsmasq</i> for this purpose.
</p>
<p>Change the tor setting to listen for the DNS request in port 9053 and install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span>.
</p>
<p>Modify its configuration file so that it contains:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dnsmasq.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
no-resolv
server=127.0.0.1#9053
listen-address=127.0.0.1
</pre>
<p>These configurations set dnsmasq to listen only for requests from the local computer, and to use TorDNS at its sole upstream provider. It is now neccessary to edit <code>/etc/resolv.conf</code> so that your system will query only the dnsmasq server.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/resolv.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
nameserver 127.0.0.1
</pre>
<p>Start the <b>dnsmasq</b> daemon.
</p>
<p>Finally if you use <i>dhcpd</i> you would need to change its settings to that it does not alter the resolv configuration file. Just add this line in the configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpcd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
nohook resolv.conf
</pre>
<p>If you already have an <i>nohook</i> line, just add <b>resolv.conf</b> separated with a comma.
</p>
<h2><span class="mw-headline" id="Torify">Torify</span></h2>
<p><b>torify</b> will allow you use an application via the Tor network without the need to make configuration changes to the application involved. From the man page:
</p>
<p><i>torify is a simple wrapper that attempts to find the best underlying Tor wrapper available on a system. It calls torsocks with a tor specific configuration file.</i>
</p>
<p>Usage example:
</p>
<pre>$ torify elinks checkip.dyndns.org
$ torify wget -qO- https://check.torproject.org/ | grep -i congratulations
</pre>
<p>Torify <i>will not</i>, however, perform DNS lookups through the Tor network. A workaround is to use it in conjunction with <code>tor-resolve</code> (described above). In this case, the procedure for the first of the above examples would look like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ tor-resolve checkip.dyndns.org</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
208.78.69.70
</pre>
<pre>$ torify elinks 208.78.69.70
</pre>
<h2><span class="mw-headline" id="Transparent_Torification">Transparent Torification</span></h2>
<p>In some cases it is more secure and often easier to transparently torify an entire system instead of configuring individual applications to use Tor's socks port, not to mention preventing DNS leaks. Transparent torification can be done with <a href="../en/Iptables.html" title="Iptables">iptables</a> in such a way that all outbound packets are redirected through Tor's <i>TransPort</i>, except the Tor traffic itself. Once in place, applications do not need to be configured to use Tor, though Tor's <i>SocksPort</i> will still work. This also works for DNS via Tor's <i>DNSPort</i>, but realize that Tor only supports TCP, thus UDP packets other than DNS cannot be sent through Tor and therefore must be blocked entirely to prevent leaks. Using iptables to transparently torify a system affords comparatively strong leak protection, but it is not a substitute for virtualized torification applications such as Whonix, or TorVM <a rel="nofollow" class="external autonumber" href="https://www.whonix.org/wiki/Comparison_with_Others">[3]</a>. Transparent torification also will not protect against fingerprinting attacks on its own, so it is recommended to use it in conjunction with the Tor Browser (search the AUR for the version you want: <a rel="nofollow" class="external free" href="https://aur.archlinux.org/packages/?K=tor-browser">https://aur.archlinux.org/packages/?K=tor-browser</a>) or to use an amnesic solution like <a rel="nofollow" class="external text" href="http://tails.boum.org/">Tails</a> instead. Applications can still learn your computer's hostname, MAC address, serial number, timezone, etc. and those with root privileges can disable the firewall entirely. In other words, transparent torification with iptables protects against accidental connections and DNS leaks by misconfigured software, it is not sufficient to protect against malware or software with serious security vulnerabilities.
</p>
<p>To enable transparent torification, use the following file for <code>iptables-restore</code> and <code>ip6tables-restore</code> (internally used by <a href="../en/Systemd.html" title="Systemd">systemd</a>'s <code>iptables.service</code> and <code>ip6tables.service</code>).
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>
<p>This file uses the nat table to force outgoing connections through the TransPort or DNSPort, and blocks anything it cannot torrify.
</p>
<ul>
<li> Now using <code>--ipv6</code> and <code>--ipv4</code> for protocol specific changes. <code>iptables-restore</code> and <code>ip6tables-restore</code> can now use the same file.</li>
<li> Where --ipv6 or --ipv4 is explicitly defined, <code>ip*tables-restore</code> will ignore the rule if it is not for the correct protocol.</li>
<li> <code>ip6tables</code> does not support <code>--reject-with</code>. Make sure your torrc contains the following lines:</li>
</ul>
<pre>SocksPort 9050
DNSPort 5353
TransPort 9040
</pre>
<p>See <code>man iptables</code>.
</p>
</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>
<p>iptables-restore: unable to initialize table 'nat'
</p>
<p>Requires:
</p>
<pre>modprobe ip_tables
modprobe iptable_nat
modprobe ip_conntrack
modprobe iptable-filter
modprobe ipt_state
</pre>
</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/iptables/iptables.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

*nat
:PREROUTING ACCEPT [6:2126]
:INPUT ACCEPT [0:0]
:OUTPUT ACCEPT [17:6239]
:POSTROUTING ACCEPT [6:408]

-A PREROUTING ! -i lo -p udp -m udp --dport 53 -j REDIRECT --to-ports 5353
-A PREROUTING ! -i lo -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -j REDIRECT --to-ports 9040
-A OUTPUT -o lo -j RETURN
--ipv4 -A OUTPUT -d 192.168.0.0/16 -j RETURN
-A OUTPUT -m owner --uid-owner "tor" -j RETURN
-A OUTPUT -p udp -m udp --dport 53 -j REDIRECT --to-ports 5353
-A OUTPUT -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -j REDIRECT --to-ports 9040
COMMIT

*filter
:INPUT DROP [0:0]
:FORWARD DROP [0:0]
:OUTPUT DROP [0:0]

-A INPUT -i lo -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
--ipv4 -A INPUT -p tcp -j REJECT --reject-with tcp-reset
--ipv4 -A INPUT -p udp -j REJECT --reject-with icmp-port-unreachable
--ipv4 -A INPUT -j REJECT --reject-with icmp-proto-unreachable
--ipv6 -A INPUT -j REJECT
--ipv4 -A OUTPUT -d 127.0.0.0/8 -j ACCEPT
--ipv4 -A OUTPUT -d 192.168.0.0/16 -j ACCEPT
--ipv6 -A OUTPUT -d ::1/8 -j ACCEPT
-A OUTPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A OUTPUT -m owner --uid-owner "tor" -j ACCEPT
--ipv4 -A OUTPUT -j REJECT --reject-with icmp-port-unreachable
--ipv6 -A OUTPUT -j REJECT
COMMIT
</pre>
<p>This file also works for ip6tables-restore, so you may symlink it:
</p>
<pre>ln -s /etc/iptables/iptables.rules /etc/iptables/ip6tables.rules
</pre>
<p>Then make sure Tor is running, and <a href="../en/Systemd.html#Using_units" title="Start/enable" class="mw-redirect">start/enable</a> the <code>iptables</code> and <code>ip6tables</code> systemd units.
</p>
<p>You may want to add <code>Requires=iptables.service</code> and <code>Requires=ip6tables.service</code> to whatever systemd unit logs your user in (most likely a <a href="../en/Display_manager.html" title="Display manager">display manager</a>), to prevent any user processes from being started before the firewall up. See <a href="../en/Systemd.html" title="Systemd">systemd</a>.
</p>
<h2><span class="mw-headline" id="Troubleshooting_2">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Problem_with_user_value">Problem with user value</span></h3>
<p>If the <b>tor</b> daemon failed to start, then run the following command as root (or use sudo)
</p>
<pre># tor
</pre>
<p>If you get the following error
</p>
<pre>May 23 00:27:24.624 [warn] Error setting groups to gid 43: "Operation not permitted".
May 23 00:27:24.624 [warn] If you set the "User" option, you must start Tor as root.
May 23 00:27:24.624 [warn] Failed to parse/validate config: Problem with User value. See logs for details.
May 23 00:27:24.624 [err] Reading config failed--see warnings above.
</pre>
<p>Then it means that the problem is with the User value, which likely means that one or more files or directories in your <code>/var/lib/tor</code> directory is not owned by tor. This can be determined by using the following find command:
</p>
<pre>find /var/lib/tor/ ! -user tor
</pre>
<p>Any files or directories listed in the output from this command needs to have its ownership changed. This can be done individually for each file like so:
</p>
<pre>chown tor:tor /var/lib/tor/filename
</pre>
<p>Or to change everything listed by the above find example, modify the command to this:
</p>
<pre>find /var/lib/tor/ ! -user tor -exec chown tor:tor {} \;
</pre>
<p>Tor should now start up correctly.
</p>
<p>Still if you cannot start the tor service, run the service using root (this will switch back to the tor user). To do this, change the user name in the <code>/etc/tor/torrc</code> file:
</p>
<pre>User tor
</pre>
<p>Now modify the systemd's tor service file <code>/usr/lib/systemd/system/tor.service</code> as follows
</p>
<pre>[Service]
User=root
Group=root
Type=simple
</pre>
<p>The process will be run as tor user. For this purpose change user and group ID to tor and also make it writable:
</p>
<pre># chown -R tor:tor /var/lib/tor/
# chmod -R 755 /var/lib/tor
</pre>
<p>Now save changes:
</p>
<pre># systemctl --system daemon-reload
</pre>
<p>Then <a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">start</a> <code>tor.service</code>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external text" href="https://www.torproject.org/docs/tor-doc-unix.html.en">Running the Tor client on Linux/BSD/Unix</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://trac.torproject.org/projects/tor/wiki#Unixish">Unix-based Tor Articles</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://trac.torproject.org/projects/tor/wiki/doc/SupportPrograms">Software commonly integrated with Tor</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://www.torproject.org/docs/tor-hidden-service.html.en">How to set up a Tor <i>Hidden Service</i></a>
</li>
<li> <a rel="nofollow" class="external text" href="https://trac.torproject.org/projects/tor/wiki/doc/PluggableTransports">List of tor pluggable transports for obfuscating tor's traffic</a>
</li>
</ul>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Internet_applications.html" title="Category:Internet applications">Internet applications</a></li>
<li><a href="../en/Category:Proxy_servers.html" title="Category:Proxy servers">Proxy servers</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
