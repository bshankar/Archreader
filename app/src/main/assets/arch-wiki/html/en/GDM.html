<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>GDM - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-GDM skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">GDM</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/GNOME.html" title="GNOME">GNOME</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/GNOME/Flashback.html" title="GNOME Flashback" class="mw-redirect">GNOME Flashback</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Display_manager.html" title="Display manager">Display manager</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/LightDM.html" title="LightDM">LightDM</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/LXDM.html" title="LXDM">LXDM</a></li>
</ul>
</div>
<p>From <a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/GDM">GDM - GNOME Display Manager</a>: "The GNOME Display Manager (GDM) is a program that manages graphical display servers and handles graphical user logins."
</p>
<p><a href="../en/Display_manager.html" title="Display manager">Display managers</a> provide <a href="../en/Xorg.html" title="X Window System" class="mw-redirect">X Window System</a> and <a href="../en/Wayland.html" title="Wayland">Wayland</a> users with a graphical login prompt.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Autostarting_applications_with_GDM"><span class="tocnumber">2.1</span> <span class="toctext">Autostarting applications with GDM</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Log-in_screen_background_image"><span class="tocnumber">2.2</span> <span class="toctext">Log-in screen background image</span></a></li>
<li class="toclevel-2 tocsection-5">
<a href="#DConf_configuration"><span class="tocnumber">2.3</span> <span class="toctext">DConf configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Log-in_screen_logo"><span class="tocnumber">2.3.1</span> <span class="toctext">Log-in screen logo</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Changing_the_cursor_theme"><span class="tocnumber">2.3.2</span> <span class="toctext">Changing the cursor theme</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Larger_font_for_log-in_screen"><span class="tocnumber">2.3.3</span> <span class="toctext">Larger font for log-in screen</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Turning_off_the_sound"><span class="tocnumber">2.3.4</span> <span class="toctext">Turning off the sound</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Make_the_power_button_interactive"><span class="tocnumber">2.3.5</span> <span class="toctext">Make the power button interactive</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Enabling_tap-to-click"><span class="tocnumber">2.3.6</span> <span class="toctext">Enabling tap-to-click</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12">
<a href="#GDM_keyboard_layout"><span class="tocnumber">2.4</span> <span class="toctext">GDM keyboard layout</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#GNOME_Control_Center"><span class="tocnumber">2.4.1</span> <span class="toctext">GNOME Control Center</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#GDM_2.x_layout"><span class="tocnumber">2.4.2</span> <span class="toctext">GDM 2.x layout</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#Change_the_language"><span class="tocnumber">2.5</span> <span class="toctext">Change the language</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Automatic_login"><span class="tocnumber">2.6</span> <span class="toctext">Automatic login</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Passwordless_login"><span class="tocnumber">2.7</span> <span class="toctext">Passwordless login</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Passwordless_shutdown_for_multiple_sessions"><span class="tocnumber">2.8</span> <span class="toctext">Passwordless shutdown for multiple sessions</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Add_or_edit_GDM_sessions"><span class="tocnumber">2.9</span> <span class="toctext">Add or edit GDM sessions</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Enable_root_login_in_GDM"><span class="tocnumber">2.10</span> <span class="toctext">Enable root login in GDM</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Hide_user_from_login_list"><span class="tocnumber">2.11</span> <span class="toctext">Hide user from login list</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Rotate_login_screen"><span class="tocnumber">2.12</span> <span class="toctext">Rotate login screen</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#xrandr_at_login"><span class="tocnumber">2.13</span> <span class="toctext">xrandr at login</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Configure_X_server_access_permission"><span class="tocnumber">2.14</span> <span class="toctext">Configure X server access permission</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25">
<a href="#Troubleshooting"><span class="tocnumber">3</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-26"><a href="#Failure_to_start_with_AMD_Catalyst_driver"><span class="tocnumber">3.1</span> <span class="toctext">Failure to start with AMD Catalyst driver</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Failure_on_logout"><span class="tocnumber">3.2</span> <span class="toctext">Failure on logout</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Xorg_1.16"><span class="tocnumber">3.3</span> <span class="toctext">Xorg 1.16</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Use_Xorg_backend"><span class="tocnumber">3.4</span> <span class="toctext">Use Xorg backend</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Incomplete_removal_of_gdm"><span class="tocnumber">3.5</span> <span class="toctext">Incomplete removal of gdm</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>GDM can be <a href="../en/Help:Reading.html#Installation_of_packages" title="Installed" class="mw-redirect">installed</a> with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gdm">gdm</a></span> package, and it is installed as part of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/groups/x86_64/gnome/">gnome</a></span> group. To start GDM at boot time <a href="../en/Systemd.html#Using_units" title="Enable" class="mw-redirect">enable</a> <code>gdm.service</code>.
</p>
<p>If you would prefer to use legacy GDM which was used in GNOME 2 and has its own configuration utility, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gdm-old/">gdm-old</a></span><sup><small>AUR</small></sup> package. Note that the rest of this article discusses current GDM, not legacy GDM, unless indicated otherwise.
</p>
<p>You might also wish to install the following:
</p>
<ul><li> <b>gdm3setup</b> â€” An interface to configure GDM3, autologin options and change Shell theme</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Nano77/gdm3setup">https://github.com/Nano77/gdm3setup</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gdm3setup/">gdm3setup</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="Autostarting_applications_with_GDM">Autostarting applications with GDM</span></h3>
<p>See <a href="../en/Display_manager.html#Autostarting" title="Display manager">Display manager#Autostarting</a>. Note that adding scripts to <code>/etc/gdm/Init</code> no longer works, see the <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=751602">upstream bug report</a>.
</p>
<h3><span class="mw-headline" id="Log-in_screen_background_image">Log-in screen background image</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Since GNOME 3.16, GNOME Shell themes are now stored binary files (gresource).</div>
<p>Firstly, you need to extract the existing GNOME Shell theme to a folder in your home directory. You can do this using the following script:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">extractgst.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

workdir=${HOME}/shell-theme
if [Â ! -d ${workdir}/theme ]; then
  mkdir -p ${workdir}/theme
fi
gst=/usr/share/gnome-shell/gnome-shell-theme.gresource

for r in `gresource list $gst`; do
        gresource extract $gst $r &gt;$workdir/${r#\/org\/gnome\/shell/}
done</pre>
<p>Navigate to the created directory. You should find that the theme files have been extracted to it. Now copy your preferred background image to this directory.
</p>
<p>Next, you need to create a file in the directory with the following content:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">gnome-shell-theme.gresource.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;gresources&gt;
  &lt;gresource prefix="/org/gnome/shell/theme"&gt;
    &lt;file&gt;calendar-arrow-left.svg&lt;/file&gt;
    &lt;file&gt;calendar-arrow-right.svg&lt;/file&gt;
    &lt;file&gt;calendar-today.svg&lt;/file&gt;
    &lt;file&gt;checkbox-focused.svg&lt;/file&gt;
    &lt;file&gt;checkbox-off-focused.svg&lt;/file&gt;
    &lt;file&gt;checkbox-off.svg&lt;/file&gt;
    &lt;file&gt;checkbox.svg&lt;/file&gt;
    &lt;file&gt;close-window.svg&lt;/file&gt;
    &lt;file&gt;close.svg&lt;/file&gt;
    &lt;file&gt;corner-ripple-ltr.png&lt;/file&gt;
    &lt;file&gt;corner-ripple-rtl.png&lt;/file&gt;
    &lt;file&gt;dash-placeholder.svg&lt;/file&gt;
    &lt;file&gt;filter-selected-ltr.svg&lt;/file&gt;
    &lt;file&gt;filter-selected-rtl.svg&lt;/file&gt;
    &lt;file&gt;gnome-shell.css&lt;/file&gt;
    &lt;file&gt;gnome-shell-high-contrast.css&lt;/file&gt;
    &lt;file&gt;logged-in-indicator.svg&lt;/file&gt;
    &lt;file&gt;<b>filename</b>&lt;/file&gt;
    &lt;file&gt;more-results.svg&lt;/file&gt;
    &lt;file&gt;no-events.svg&lt;/file&gt;
    &lt;file&gt;no-notifications.svg&lt;/file&gt;
    &lt;file&gt;noise-texture.png&lt;/file&gt;
    &lt;file&gt;page-indicator-active.svg&lt;/file&gt;
    &lt;file&gt;page-indicator-inactive.svg&lt;/file&gt;
    &lt;file&gt;page-indicator-checked.svg&lt;/file&gt;
    &lt;file&gt;page-indicator-hover.svg&lt;/file&gt;
    &lt;file&gt;process-working.svg&lt;/file&gt;
    &lt;file&gt;running-indicator.svg&lt;/file&gt;
    &lt;file&gt;source-button-border.svg&lt;/file&gt;
    &lt;file&gt;summary-counter.svg&lt;/file&gt;
    &lt;file&gt;toggle-off-us.svg&lt;/file&gt;
    &lt;file&gt;toggle-off-intl.svg&lt;/file&gt;
    &lt;file&gt;toggle-on-hc.svg&lt;/file&gt;
    &lt;file&gt;toggle-on-us.svg&lt;/file&gt;
    &lt;file&gt;toggle-on-intl.svg&lt;/file&gt;
    &lt;file&gt;ws-switch-arrow-up.png&lt;/file&gt;
    &lt;file&gt;ws-switch-arrow-down.png&lt;/file&gt;
  &lt;/gresource&gt;
&lt;/gresources&gt;</pre>
<p>Replace <b>filename</b> with the filename of your background image.
</p>
<p>Now, open the <code>gnome-shell.css</code> file in the directory and change the <code>#lockDialogGroup</code> definition as follows:
</p>
<pre>#lockDialogGroup {
  background: #2e3436 url(<b>filename</b>);
  background-size: <b>[WIDTH]</b>px <b>[HEIGHT]</b>px;
  background-repeat: no-repeat;
}
</pre>
<p>Set <code>background-size</code> to the resolution that GDM uses, this might not necessarily be the resolution of the image. For a list of display resolutions see <a href="https://en.wikipedia.org/wiki/Display_resolution#Computer_monitors" class="extiw" title="wikipedia:Display resolution">Display resolution</a>. Again, set <b>filename</b> to be the name of the background image.
</p>
<p>Finally, compile the theme using the following command:
</p>
<pre>$ glib-compile-resources gnome-shell-theme.gresource.xml
</pre>
<p>Then copy the resulting <code>gnome-shell-theme.gresource</code> file to the <code>/usr/share/gnome-shell</code> directory.
</p>
<p>Restart GDM - you should find that it is using your preferred background image.
</p>
<p>For more information, please see the following <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=197036">forum thread</a>.
</p>
<h3><span class="mw-headline" id="DConf_configuration">DConf configuration</span></h3>
<p>Some GDM settings are stored in a DConf database. They can be configured either by adding <i>keyfiles</i> to the <code>/etc/dconf/db/gdm.d</code> directory and then recompiling the GDM database by running <code>dconf update</code> as root or by logging into the GDM user on the system and changing the setting directly using the <i>gsettings</i> command line tool. Note that for the former approach, a GDM profile file is required - this must be created manually as it is no longer shipped upstream, see below:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dconf/profile/gdm</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
user-db:user
system-db:gdm
file-db:/usr/share/gdm/greeter-dconf-defaults</pre>
<p>For the latter approach, you can log into the GDM user with the command below:
</p>
<pre># machinectl shell gdm@
</pre>
<h4><span class="mw-headline" id="Log-in_screen_logo">Log-in screen logo</span></h4>
<p>Either create the following keyfile
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dconf/db/gdm.d/02-logo</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[org/gnome/login-screen]
logo='<i>/path/to/logo.png</i>'</pre>
<p>and then recompile the GDM database or alternatively log in to the GDM user and execute the following:
</p>
<pre>$ gsettings set org.gnome.login-screen logo '<i>/path/to/logo.png</i>'
</pre>
<h4><span class="mw-headline" id="Changing_the_cursor_theme">Changing the cursor theme</span></h4>
<p>GDM disregards <a href="../en/GNOME.html" title="GNOME">GNOME</a> cursor theme settings and it also ignores the cursor theme set according to the <a href="../en/Cursor_themes.html#XDG_specification" title="Cursor themes">XDG specification</a>. To change the cursor theme used in GDM, either create the following keyfile
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dconf/db/gdm.d/10-cursor-settings</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[org/gnome/desktop/interface]
cursor-theme='<i>theme-name'</i>
</pre>
<p>and then recompile the GDM database or alternatively log in to the GDM user and execute the following:
</p>
<pre>$ gsettings set org.gnome.desktop.interface cursor-theme '<i>theme-name</i>'
</pre>
<h4><span class="mw-headline" id="Larger_font_for_log-in_screen">Larger font for log-in screen</span></h4>
<p>Click on the accessibility icon at the top right of the screen (a white circle with the silhouette of a person in the centre) and check the <i>Large Text</i> option.
</p>
<p>To set a specific scaling factor, you can create the following keyfile:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dconf/db/gdm.d/03-scaling</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[org/gnome/desktop/interface]
text-scaling-factor='<i>1.25</i>'</pre>
<p>and then recompile the GDM database or alternatively log in to the GDM user and execute the following:
</p>
<pre>$ gsettings set org.gnome.desktop.interface text-scaling-factor '<i>1.25</i>'
</pre>
<h4><span class="mw-headline" id="Turning_off_the_sound">Turning off the sound</span></h4>
<p>This tweak disables the audible feedback heard when the system volume is adjusted (via keyboard) on the login screen.
</p>
<p>Either create the following keyfile:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dconf/db/gdm.d/04-sound</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[org/gnome/desktop/sound]
event-sounds='false'</pre>
<p>and then recompile the GDM database or alternatively log in to the GDM user and execute the following:
</p>
<pre>$ gsettings set org.gnome.desktop.sound event-sounds 'false'
</pre>
<h4><span class="mw-headline" id="Make_the_power_button_interactive">Make the power button interactive</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Some button-* configuration options are no longer available from GDM 3.18. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:GDM#.22Make_the_power_button_interactive.22_no_longer_possible_with_GDM_3.18">Talk:GDM#"Make the power button interactive" no longer possible with GDM 3.18</a>)</div>
</div>
<p>The behaviour of the power buttons can be configured in GDM. The example below will configure the power and hibernate buttons to <i>Show dialog</i>:
</p>
<p>Create the following keyfile:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dconf/db/gdm.d/05-power</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[org/gnome/settings-daemon/plugins/power button]
power='interactive'
hibernate='interactive'</pre>
<p>and then recompile the GDM database.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Please note that the <a href="../en/Acpid.html" title="Acpid">acpid</a> daemon also handles the "power button" and "hibernate button" events. Running both systems at the same time may lead to unexpected behaviour.</div>
<h4><span class="mw-headline" id="Enabling_tap-to-click">Enabling tap-to-click</span></h4>
<p>Tap-to-click is disabled in GDM (and GNOME) by default, but you can easily enable it with a dconf setting.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If you want to do this under X, you have to first set up correct X server access permissions - see <a href="#Configure_X_server_access_permission">#Configure X server access permission</a>.</div>
<p>To directly enable tap-to-click, use:
</p>
<pre># sudo -u gdm gsettings set org.gnome.desktop.peripherals.touchpad tap-to-click true</pre>
<p>If you prefer to do this with a GUI, use:
</p>
<pre># sudo -u gdm dconf-editor</pre>
<p>To check the if it was set correctly, use:
</p>
<pre>$ sudo -u gdm gsettings get org.gnome.desktop.peripherals.touchpad tap-to-click</pre>
<h3><span class="mw-headline" id="GDM_keyboard_layout">GDM keyboard layout</span></h3>
<p>See <a href="../en/Keyboard_configuration_in_Xorg.html#Using_X_configuration_files" title="Keyboard configuration in Xorg">Keyboard configuration in Xorg#Using X configuration files</a>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>See <a href="https://en.wikipedia.org/wiki/ISO_3166-1" class="extiw" title="wikipedia:ISO 3166-1">Wikipedia:ISO 3166-1</a> for a list of keymaps.</div>
<h4><span class="mw-headline" id="GNOME_Control_Center">GNOME Control Center</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> This is no longer applicable at least on Gnome Shell 3.20.2. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:GDM">Talk:GDM#</a>)</div>
</div>
<p>If the package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-control-center">gnome-control-center</a></span> is installed, the keyboard layout(s) can be configured using a graphical frontend. Start <i>gnome-control-center</i> and navigate to <i>Keyboard -&gt; Input Sources</i>. Then, in the header bar, hit the <i>Login Screen</i> toggle button to configure the keyboard layout for GDM specifically.
</p>
<h4><span class="mw-headline" id="GDM_2.x_layout">GDM 2.x layout</span></h4>
<p>Users of legacy GDM may need to follow the instructions below:
</p>
<p>Edit <code>~/.dmrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.dmrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Desktop]
Language=de_DE.UTF-8   # change to your default lang
Layout=de   nodeadkeys # change to your keyboard layout</pre>
<h3><span class="mw-headline" id="Change_the_language">Change the language</span></h3>
<p>To change the GDM language, ensure that <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gnome-control-center">gnome-control-center</a></span> is installed. Then, start <i>gnome-control-center</i> and choose <i>Region &amp; Language</i>. In the header bar, check the <i>Login Screen</i> toggle button. Finally, click on <i>Language</i> and choose your language from the list. You will be prompted for your root password.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> I could not get the method below to work with GDM 3.18.0 - tested on 2015-10-13. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:GDM">Talk:GDM#</a>)</div>
</div>
<p>Alternatively, edit the file <code>/var/lib/AccountsService/users/gdm</code> and change the language line using the correct UTF-8 value for your language. You should see something similar to the text below:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/AccountsService/users/gdm</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[User]
Language=fr_FR.UTF-8
XSession=
SystemAccount=true</pre>
<p>Now just reboot your computer.
</p>
<p>Once you have rebooted, if you look at the <code>/var/lib/AccountsService/users/gdm</code> file again, you will see that the language line is clearedâ€Šâ€”â€Šdo not worry, the language change has been preserved.
</p>
<h3><span class="mw-headline" id="Automatic_login">Automatic login</span></h3>
<p>To enable automatic login with GDM, add the following to <code>/etc/gdm/custom.conf</code> (replace <i>username</i> with your own):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/gdm/custom.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Enable automatic login for user
[daemon]
AutomaticLogin=<i>username</i>
AutomaticLoginEnable=True</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>If GDM fails after adding these lines, comment them out from a TTY.</div>
<p>or for an automatic login with a delay:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/gdm/custom.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[daemon]

TimedLoginEnable=true
TimedLogin=<i>username</i>
TimedLoginDelay=1</pre>
<h3><span class="mw-headline" id="Passwordless_login">Passwordless login</span></h3>
<p>If you want to bypass the password prompt in GDM then simply add the following line on the first line of <code>/etc/pam.d/gdm-password</code>:
</p>
<pre>auth sufficient pam_succeed_if.so user ingroup nopasswdlogin
</pre>
<p>Then, add the group <code>nopasswdlogin</code> to your system. See <a href="../en/Users_and_groups.html#Group_management" title="Groups" class="mw-redirect">Groups</a> for group descriptions and group management commands.
</p>
<p>Now, add your user to the <code>nopasswdlogin</code> group and you will only have to click on your username to login.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>
<ul>
<li> Do <b>not</b> do this for a <b>root</b> account.</li>
<li> You won't be able to change your session type at login with GDM anymore. If you want to change your default session type, you will first need to remove your user from the <code>nopasswdlogin</code> group.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Passwordless_shutdown_for_multiple_sessions">Passwordless shutdown for multiple sessions</span></h3>
<p>GDM uses polkit and logind to gain permissions for shutdown. You can shutdown the system when multiple users are logged in by setting:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/polkit-1/localauthority.conf.d/org.freedesktop.logind.policy</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE policyconfig PUBLIC
 "-//freedesktop//DTD PolicyKit Policy Configuration 1.0//EN"
 "<a rel="nofollow" class="external free" href="http://www.freedesktop.org/standards/PolicyKit/1.0/policyconfig.dtd">http://www.freedesktop.org/standards/PolicyKit/1.0/policyconfig.dtd</a>"&gt;


&lt;policyconfig&gt;

  &lt;action id="org.freedesktop.login1.power-off-multiple-sessions"&gt;
    &lt;description&gt;Shutdown the system when multiple users are logged in&lt;/description&gt;
    &lt;message&gt;System policy prevents shutting down the system when other users are logged in&lt;/message&gt;
    &lt;defaults&gt;
      &lt;allow_inactive&gt;yes&lt;/allow_inactive&gt;
      &lt;allow_active&gt;yes&lt;/allow_active&gt;
    &lt;/defaults&gt;
  &lt;/action&gt;

&lt;/policyconfig&gt;</pre>
<p>You can find all available logind options (e.g. reboot-multiple-sessions) <a rel="nofollow" class="external text" href="http://www.freedesktop.org/wiki/Software/systemd/logind#Security">here</a>.
</p>
<h3><span class="mw-headline" id="Add_or_edit_GDM_sessions">Add or edit GDM sessions</span></h3>
<p>Each session is a <code>.desktop</code> file located at <code>/usr/share/xsessions/</code>.
</p>
<p><b>To add a new session:</b>
</p>
<p>1. Copy an existing <code>.desktop</code> file to use as a template for a new session:
</p>
<pre>$ cd /usr/share/xsessions
# cp gnome.desktop other.desktop
</pre>
<p>2. Modify the template <code>.desktop</code> file to open the required window manager:
</p>
<pre># nano other.desktop
</pre>
<p>If you happen to have KDM installed in parallel, you can alternatively open the new session in KDM which will create the new <code>.desktop</code> file. Then return to using GDM and the new session will be available.
</p>
<p>See also <a href="../en/Display_manager.html#Session_configuration" title="Display manager">Display manager#Session configuration</a>.
</p>
<h3><span class="mw-headline" id="Enable_root_login_in_GDM">Enable root login in GDM</span></h3>
<p>It is not advised to login as root, but if necessary you can edit <code>/etc/pam.d/gdm-password</code> and add the following line before the line <code>auth required pam_deny.so</code>:
</p>
<p><code>/etc/pam.d/gdm-password</code>
</p>
<pre>auth            sufficient      pam_succeed_if.so uid eq 0 quiet
</pre>
<p>The file should look something like this:
</p>
<p><code>/etc/pam.d/gdm-password</code>
</p>
<pre>...
auth            sufficient      pam_succeed_if.so uid eq 0 quiet
auth            sufficient      pam_succeed_if.so uid &gt;= 1000 quiet
auth            required        pam_deny.so
...
</pre>
<p>You should be able to login as root after restarting GDM.
</p>
<h3><span class="mw-headline" id="Hide_user_from_login_list">Hide user from login list</span></h3>
<p>The users for the gdm user list are gathered by <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/AccountsService/">AccountsService</a>. It will automatically hide system users (UID &lt; 1000).
To hide ordinary users from the login list create or edit a file named after the user to hide in <code>/var/lib/AccountsService/users/</code> to contain at least:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/AccountsService/users/&lt;username&gt;</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[User]
SystemAccount=true</pre>
<h3><span class="mw-headline" id="Rotate_login_screen">Rotate login screen</span></h3>
<p>If you have your monitors setup as you like (orientation, primary and so on) in <code>~/.config/monitors.xml</code> and want GDM to honor those settings:
</p>
<pre># cp ~/.config/monitors.xml /var/lib/gdm/.config/monitors.xml
</pre>
<p>Changes will take effect on logout.  This is necessary because GDM does not respect <code>xorg.conf</code>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Wayland backend may be <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=196219">ignoring</a> <code>/var/lib/gdm/.config/monitors.xml</code> file. See <a href="#Use_Xorg_backend">#Use Xorg backend</a> to learn how to disable Wayland backend.</div>
<h3><span class="mw-headline" id="xrandr_at_login">xrandr at login</span></h3>
<p>If you want to run a script using xrandr that affects the login screen you must add a script in <code>/etc/X11/xinit/xinitrc.d</code>.
</p>
<p>For example, to select automatically a external screen connected through HDMI:
</p>
<pre>
#!/bin/sh
EXTERNAL_OUTPUT="HDMI1"
INTERNAL_OUTPUT="eDP1"
if (xrandr | grep $EXTERNAL_OUTPUT | grep " connected "); then
    xrandr --output $INTERNAL_OUTPUT --off --output $EXTERNAL_OUTPUT --auto
else
    xrandr --output $INTERNAL_OUTPUT --auto
fi
</pre>
<h3><span class="mw-headline" id="Configure_X_server_access_permission">Configure X server access permission</span></h3>
<p>You can use the <code>xhost</code> command to configure X server access permissions.
</p>
<p>For instance, to grant GDM the right to access the X server, use the following command:
</p>
<pre># xhost +SI:localuser:gdm</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Failure_to_start_with_AMD_Catalyst_driver">Failure to start with AMD Catalyst driver</span></h3>
<p>Downgrade the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xorg-server">xorg-server</a></span> package or try to use another <a href="../en/Display_manager.html" title="Display manager">display manager</a> like <a href="../en/LightDM.html" title="LightDM">LightDM</a>.
</p>
<h3><span class="mw-headline" id="Failure_on_logout">Failure on logout</span></h3>
<p>If GDM starts up properly on boot, but fails after repeated attempts on logout, try adding this line to the daemon section of <code>/etc/gdm/custom.conf</code>:
</p>
<pre>GdmXserverTimeout=60
</pre>
<h3><span class="mw-headline" id="Xorg_1.16">Xorg 1.16</span></h3>
<p>See <a href="../en/Xorg.html#Rootless_Xorg_.28v1.16.29" title="Xorg">Xorg#Rootless Xorg (v1.16)</a>.
</p>
<h3><span class="mw-headline" id="Use_Xorg_backend">Use Xorg backend</span></h3>
<p>The <a href="../en/Wayland.html" title="Wayland">Wayland</a> backend is used by default and the <a href="../en/Xorg.html" title="Xorg">Xorg</a> backend is used only if the Wayland backend cannot be started. As the Wayland backend has been <a rel="nofollow" class="external text" href="https://bugzilla.redhat.com/show_bug.cgi?id=1199890">reported</a> to cause problems for some users, use of the Xorg backend may be necessary. To use the Xorg backend by default, edit the <code>/etc/gdm/custom.conf</code> file and uncomment the following line:
</p>
<pre>#WaylandEnable=false
</pre>
<h3><span class="mw-headline" id="Incomplete_removal_of_gdm">Incomplete removal of gdm</span></h3>
<p>After removing gdm (say it was a build dependancy), systemd may report the following:
</p>
<pre>user 'gdm': directory '/var/lib/gdm' does not exist
</pre>
<p>To remove this warning, login as root and delete the primary user "gdm" and then delete the group "gdm":
</p>
<pre>#userdel gdm
#groupdel gdm
</pre>
<p>Verify that gdm is successfully removed via <code>pwck</code> and <code>grpck</code>. To round it off, you may want to double-check no <a href="../en/Pacman/Tips_and_tricks.html#Identify_files_not_owned_by_any_package" title="Pacman/Tips and tricks">unowned files</a> for gdm remain.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li> <a rel="nofollow" class="external text" href="https://help.gnome.org/admin/gdm/stable/index.html.en">GDM Reference Manual</a>
</li></ul>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Display_managers.html" title="Category:Display managers">Display managers</a></li>
<li><a href="../en/Category:GNOME.html" title="Category:GNOME">GNOME</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li></ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
