<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Matlab - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Matlab skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Matlab</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Octave.html" title="Octave">Octave</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/SageMath.html" title="Sage-mathematics" class="mw-redirect">Sage-mathematics</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Mathematica.html" title="Mathematica">Mathematica</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> unnecessarily verbose (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Matlab">Talk:Matlab#</a>)</div>
</div>
<p>From the <a rel="nofollow" class="external text" href="http://www.mathworks.com/products/matlab/">official website</a>:
</p>
<dl><dd><i>MATLAB is a high-level language and interactive environment for numerical computation, visualization, and programming. Using MATLAB, you can analyze data, develop algorithms, and create models and applications. The language, tools, and built-in math functions enable you to explore multiple approaches and reach a solution faster than with spreadsheets or traditional programming languages, such as C/C++ or Java.</i></dd></dl>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Installing_from_the_MATLAB_installation_software"><span class="tocnumber">2.1</span> <span class="toctext">Installing from the MATLAB installation software</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Installing_from_the_AUR_package"><span class="tocnumber">2.2</span> <span class="toctext">Installing from the AUR package</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Activation"><span class="tocnumber">3</span> <span class="toctext">Activation</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#R2013b_and_earlier"><span class="tocnumber">3.1</span> <span class="toctext">R2013b and earlier</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Configuration"><span class="tocnumber">4</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Java"><span class="tocnumber">4.1</span> <span class="toctext">Java</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#OpenGL_acceleration"><span class="tocnumber">4.2</span> <span class="toctext">OpenGL acceleration</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Fonts_for_figures"><span class="tocnumber">4.3</span> <span class="toctext">Fonts for figures</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Sound"><span class="tocnumber">4.4</span> <span class="toctext">Sound</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#GPU_computing"><span class="tocnumber">4.5</span> <span class="toctext">GPU computing</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Install_supported_compilers"><span class="tocnumber">4.6</span> <span class="toctext">Install supported compilers</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Help_browser"><span class="tocnumber">4.7</span> <span class="toctext">Help browser</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Garbled_Interface"><span class="tocnumber">4.8</span> <span class="toctext">Garbled Interface</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16">
<a href="#Troubleshooting"><span class="tocnumber">5</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Static_TLS_errors"><span class="tocnumber">5.1</span> <span class="toctext">Static TLS errors</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#MATLAB_crashes_when_displaying_graphics"><span class="tocnumber">5.2</span> <span class="toctext">MATLAB crashes when displaying graphics</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Blank.2Fgrey_UI_when_using_DWM.2FAwesome"><span class="tocnumber">5.3</span> <span class="toctext">Blank/grey UI when using DWM/Awesome</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Garbled_or_invisible_text"><span class="tocnumber">5.4</span> <span class="toctext">Garbled or invisible text</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Corrupted_text_and_fonts_in_menus_and_fields"><span class="tocnumber">5.5</span> <span class="toctext">Corrupted text and fonts in menus and fields</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Installation_2"><span class="tocnumber">5.6</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Install-Time_Library_Errors"><span class="tocnumber">5.7</span> <span class="toctext">Install-Time Library Errors</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Resolving_start_warnings.2Ferrors"><span class="tocnumber">5.8</span> <span class="toctext">Resolving start warnings/errors</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Segmentation_Fault_on_startup"><span class="tocnumber">5.9</span> <span class="toctext">Segmentation Fault on startup</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Hangs_on_rendering_or_exiting_with_Intel_graphics"><span class="tocnumber">5.10</span> <span class="toctext">Hangs on rendering or exiting with Intel graphics</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<p>MATLAB is proprietary software produced by The MathWorks and requires a license to obtain, install, and activate. New versions of MATLAB are released twice a year (generally in March and September) with release names of R20XXa and R20XXb. The MathWorks also provide a discounted <a rel="nofollow" class="external text" href="http://www.mathworks.com/academia/students.html">Student Version</a> which is released once a year. Since R2012b MATLAB has only been available for 64-bit Linux. While MATLAB is officially supported on a number of <a rel="nofollow" class="external text" href="http://www.mathworks.co.uk/support/sysreq/current_release/index.html?sec=linux">Linux distributions</a>, Arch is not officially supported. Despite the lack of official support, installing and using MATLAB on Arch is straight forward.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>A complete copy of the MATLAB software must be obtained before it can in installed. The MATLAB software is available to licenses holders on both a DVD and through the <a rel="nofollow" class="external text" href="http://www.mathworks.com">The MathWorks website</a>. In addition to the software a file installation key is required for installation. It is possible to install MATLAB either with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/matlab/">matlab</a></span><sup><small>AUR</small></sup> package from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> or from the MATLAB installation software directly. The advantage of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/matlab/">matlab</a></span><sup><small>AUR</small></sup> package is that it manages dependencies and some of the nuances of the installation process while installing directly from the MATLAB installation software can be done by regular users to their home directories and works for any release of MATLAB (the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/matlab/">matlab</a></span><sup><small>AUR</small></sup> package only works for releases including and after R2010b).
</p>
<h3><span class="mw-headline" id="Installing_from_the_MATLAB_installation_software">Installing from the MATLAB installation software</span></h3>
<p>The MATLAB installation software is self contained and does not require any additional packages to install in silent mode. To install with the GUI a working <a href="../en/Xorg.html" title="Xorg">Xorg</a> graphical display is necessary. The installation is handled by the <code>install</code> script. You can run the script as root to install MATLAB system-wide or your user to install it only for you.
</p>
<p>MATLAB 2016a and earlier is not compatible with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=ncurses">ncurses</a></span> 6, so you must install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ncurses5-compat-libs/">ncurses5-compat-libs</a></span><sup><small>AUR</small></sup> package. See <a href="#Segmentation_Fault_on_startup">#Segmentation Fault on startup</a> for more info.
</p>
<p>During the installation, you are asked if you want symlinks to be created. If you did not choose to do so, you can now manually create a symlink in <code>/usr/local/bin</code> to make it easier to launch in terminal:
</p>
<pre># ln -s /{MATLAB}/bin/matlab /usr/local/bin
</pre>
<p>To create a menu item, we need to get a icon first:
</p>
<pre># curl <a rel="nofollow" class="external free" href="https://upload.wikimedia.org/wikipedia/commons/2/21/Matlab_Logo.png">https://upload.wikimedia.org/wikipedia/commons/2/21/Matlab_Logo.png</a> -o /usr/share/icons/matlab.png
</pre>
<p>Then create a new <code>.desktop</code> file in <code>/usr/share/applications</code> with following lines:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/applications/matlab.desktop</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
#!/usr/bin/env xdg-open
[Desktop Entry]
Type=Application
Icon=/usr/share/icons/matlab.png
Name=MATLAB
Comment=Start MATLAB - The Language of Technical Computing
Exec=matlab -desktop -nosplash
Categories=Development;
MimeType=text/x-matlab;
</pre>
<p>The <code>Exec</code> command line is composed as follows:
</p>
<ul>
<li> <code>-desktop</code> is a flag needed to run Matlab without a terminal.</li>
<li> <code>-nosplash</code> is a flag preventing the splash screen from showing and taking up a temporary space in your task bar.</li>
</ul>
<p>In order for icons to appear correctly the startup WM class needs to be added to the new <code>.desktop</code> file. While MATLAB is running, open a teminal window and enter:
</p>
<pre># xprop | grep WM_CLASS
</pre>
<p>With xprop running, select the MATLAB window, and add the outputted information to the bottom of the <code>.desktop</code> file, for example: 
</p>
<pre>StartupWMClass=MATLAB R2016a - academic use
</pre>
<p>You can also put this <code>.desktop</code> file in the <code>~/Desktop</code> directory to create a shortcut on your desktop. See also <a rel="nofollow" class="external autonumber" href="https://help.ubuntu.com/community/MATLAB">[1]</a>.
</p>
<h3><span class="mw-headline" id="Installing_from_the_AUR_package">Installing from the AUR package</span></h3>
<p>The EULA for the proprietary MATLAB software is restrictive. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/matlab/">matlab</a></span><sup><small>AUR</small></sup> package from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> is designed to allow MATLAB to be integrated into and managed by Arch. The package should be built on the system on which it is going to be installed and the package should be deleted from the installation location and the <a href="../en/Pacman.html" title="Pacman">Pacman</a> cache following installation. Distributing the package is a clear violation of the EULA.
</p>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/matlab/">matlab</a></span><sup><small>AUR</small></sup> package from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> defaults to building a package for the most recent 64-bit release of MATLAB, although the PKGBUILD supports MATLAB releases from R2010b and even the installation of multiple releases simultaneous. The PKGBUILD defaults to installing all toolboxes that the file identification key allows, however, the PKGBUILD can be edited to include only a subset of the toolboxes. The selection of the toolboxes must be finalized at the time of package creation due to DRM policies put in place by The MathWorks. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/matlab/">matlab</a></span><sup><small>AUR</small></sup> package from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> requires that both the MATLAB installation software and the file installation key are available in the source directory. The file installation key must be in a file called <code>matlab.fik</code> and the installation software must be in an iso file called <code>matlab.iso</code>. Once the iso file and file installation key are created, the MATLAB package can be created and install as usual.
</p>
<p>For MATLAB releases between r2010b and r2011a the contents of the iso file must include: <code>./archives/</code>, <code>./bin/</code>, <code>./etc/</code>, <code>./help/</code>, <code>./java/</code>, <code>./activate.ini</code>, <code>./install</code>, and <code>./installer_input.txt</code>. If the MATLAB download agent is used to download the installation software, then the iso file can be trivially created by simply running <code>mkisofs -r -o</code> on the download directory.
</p>
<p>For MATLAB releases including and after r2011b the contents of the iso file must include: <code>./archives/</code>, <code>./bin/</code>, <code>./etc/</code>, <code>./help/</code>, <code>./java/</code>, <code>./activate.ini</code>, <code>./install</code>, and <code>./installer_input.txt</code>. For version before r2014a, the MATLAB download agent could download all the required files and the iso file could be trivially created by simply running <code>mkisofs -r -o</code> on the download directory. For MATLAB releases including and after r2014a the MATLAB download agent only downloads the MATLAB installer. The MATLAB installer then needs to be run to downloaded the MATLAB software and toolboxes. Therefore, a two step process is required to generate this iso file with the MATLAB download agent. First, you download and run the MATLAB installer to install MATLAB in a temporary directory. This process downloads the MATLAB software and toolboxes by default to <code>~/Downloads/MathWorks</code> (this can be changed by passing the flag <code>-downloadFolder /path/to/directory</code>). It is actually possible quit the MATLAB installer once the software and toolboxes are downloaded. Once the software and toolboxes are downloaded the required iso file can be created by merging the installer directory (containing above mentioned files) and the download directory (containing <code>./archives/</code>), and then running <code>mkisofs -r -o</code> on the resulting directory.
</p>
<h2><span class="mw-headline" id="Activation">Activation</span></h2>
<p>In order to run MATLAB it requires a license file to be installed. The license file can be generated with <code>$MATLABROOT/bin/activate_matlab.sh</code> or downloaded from <a rel="nofollow" class="external text" href="http://www.mathworks.com">MATLAB</a> directly. 
</p>
<h3><span class="mw-headline" id="R2013b_and_earlier">R2013b and earlier</span></h3>
<p>Up to and including R2013b the license file was linked to the MAC address of eth0. This causes problems with the <a href="../en/Network_configuration.html#Device_names" title="Network configuration">Predictable Network Interface Names</a> used by Arch Linux. It is possible to disable predictable network interface names by adding <code>net.ifnames=0</code> in your kernel command line or by creating a udev rule file
</p>
<pre># ln -s /dev/null /etc/udev/rules.d/80-net-setup-link.rules</pre>
<p>It is also possible to <a href="../en/Network_configuration.html#Change_device_name" title="Network configuration">change the name of a device</a>, but changing the name to eth0 can result in race conditions between the kernel and udev during boot. Another solution is to create a dummy network interface named eth0 with the MAC address linked to the license file. First, get that MAC address using <code>ip link</code>. Next, create the following file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/matlab.licensing.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[Unit]
Description=Dummy network interface for MATLAB
Requires=systemd-modules-load.service

[Service]
Type=oneshot
ExecStart=/sbin/ip link set dev dummy0 name eth0
ExecStart=/sbin/ip link set dev eth0 address 00:00:00:00:00:00

[Install]
WantedBy=multi-user.target

</pre>
<p>Replace 00:00:00:00:00:00 with the MAC address linked to the license file.
</p>
<p>Then make the script run on boot:
</p>
<pre># systemctl enable matlab.licensing
</pre>
<p>Finally, set the dummy module to load on boot by creating the following file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/dummy.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">dummy</pre>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="Java">Java</span></h3>
<p>The MATLAB software is bundled with a JVM and therefore it is not necessary to install <a href="../en/Java.html" title="Java">Java</a>. The JVM version bundled with MATLAB typically lags behind <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=jre7-openjdk">jre7-openjdk</a></span> from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a> and it is possible, although not required, to use the <code>MATLAB_JAVA</code> environment variable to specify the path of an alternative JRE. For example, to specify the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=jre7-openjdk">jre7-openjdk</a></span> JRE and check the resulting version of Java, do:
</p>
<pre>$ MATLAB_JAVA=/usr/lib/jvm/java-7-openjdk/jre matlab -nodesktop -nosplash -r "version -java, exit" | grep Java</pre>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> overly specific, yet no references to claimed behaviour (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Matlab">Talk:Matlab#</a>)</div>
</div>
<p>Using alternative JRE would often solve some long-standing problems, such as the extra "<code>MEvent. CASE!</code>" string when doing two-finger scrolling using touchpad. Another problem that can be solved in this way is the ugly, limited fonts provided by default, especially for some Chinese characters.
</p>
<h3><span class="mw-headline" id="OpenGL_acceleration">OpenGL acceleration</span></h3>
<p>MATLAB can take advantage of hardware based 2D and 3D OpenGL acceleration. Support for hardware acceleration needs to be configured outside of MATLAB. Appropriate <a href="../en/Xorg.html#Driver_installation" title="Video drivers" class="mw-redirect">video drivers</a> need to be installed along with the OpenGL utility library <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=glu">glu</a></span> package from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>. If X11 forwarding is being used, the video drivers need to be installed on both the client and server. To check if MATLAB is making use of hardware based OpenGL acceleration run:
</p>
<pre>$ matlab -nodesktop -nosplash -r "opengl info; exit" | grep Software</pre>
<p>If "software rendering" is not "false", then there is a problem with your hardware acceleration. If this is the case make sure OpenGL is configured correctly on the system. This can be done with the <code>glxinfo</code> program from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mesa-demos">mesa-demos</a></span> package from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>:
</p>
<pre>$ glxinfo | grep "direct rendering"</pre>
<p>If "direct rendering" is not "yes", then there is likely a problem with your system configuration.
</p>
<h3><span class="mw-headline" id="Fonts_for_figures">Fonts for figures</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong> This section only applies to R2014a and earlier as starting with R2014b MATLAB uses True Type Fonts.  So as long as:
<pre>$ fc-match Helvetica</pre>
returns a font, figure fonts should work as expected.</div>
<p>While MATLAB can be run in a text only mode, it also provides advanced graphics capabilities. To confirm that MATLAB is making use of the system fonts run:
</p>
<pre>$ matlab -nodesktop -nosplash -r "xlabel('BIG FONT', 'FontSize', 42); ylabel('small font', 'FontSize', 12); pause; exit" &gt; /dev/null</pre>
<p>This should produce a MATLAB figure with "BIG FONT" in a large font on the abscissa and "small font" in a small font on the ordinate. If "BIG FONT" and "small font" are both the same size, refer to <a href="../en/Xorg.html#Program_requests_.22font_.27.28null.29.27.22" title="Xorg">Xorg fonts</a> to confirm that the correct the bitmap font package (either <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xorg-fonts-100dpi">xorg-fonts-100dpi</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xorg-fonts-75dpi">xorg-fonts-75dpi</a></span> from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>) is installed on your system.
</p>
<h3><span class="mw-headline" id="Sound">Sound</span></h3>
<p>To confirm that MATLAB is able to use the default soundcard to present sounds run:
</p>
<pre>$ matlab -nodesktop -nosplash -r "load handel; sound(y, Fs); pause(length(y)/Fs); exit" &gt; /dev/null</pre>
<p>This should play an except from Handel's "Hallelujah Chorus." If this fails make sure <a href="../en/Advanced_Linux_Sound_Architecture.html" title="ALSA" class="mw-redirect">ALSA</a> is properly configured. This can be done with the <code>speaker-test</code> program from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> package from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>:
</p>
<pre>$ speaker-test</pre>
<p>If you do not hear anything, then there is likely a problem with your system configuration.
</p>
<h3><span class="mw-headline" id="GPU_computing">GPU computing</span></h3>
<p>MATLAB can take advantage of <a rel="nofollow" class="external text" href="http://www.mathworks.co.uk/discovery/matlab-gpu.html">CUDA enabled GPUs</a> to speed up applications. In order to take advantage of a supported GPU install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia">nvidia</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia-utils">nvidia-utils</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=ocl-icd">ocl-icd</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=opencl-nvidia">opencl-nvidia</a></span>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=cuda">cuda</a></span> packages from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>. To check if MATLAB is able to utilize the GPU run:
</p>
<pre>$ matlab -nodesktop -nosplash -r "x=rand(10, 'single'); g=gpuArray(x); Success=isequal(gather(g), x), exit"  | sed -ne '/Success =/,$p'</pre>
<h3><span class="mw-headline" id="Install_supported_compilers">Install supported compilers</span></h3>
<p>In order to access the full functionality of MATLAB (e.g., to use Simulink, Builder JA, and MEX-file compilation), supported versions of the <code>gcc</code>, <code>g++</code>, <code>gfortran</code>, and <code>jdk</code> compilers must be installed. Details about the supported compilers for the <a rel="nofollow" class="external text" href="http://www.mathworks.com/support/compilers/current_release/index.html?sec=glnxa64">current release</a> and <a rel="nofollow" class="external text" href="http://www.mathworks.com/support/sysreq/previous_releases.html">previous releases</a> are available online. Many of the supported <code>gcc</code>, <code>g++</code>, <code>jdk</code> compiler versions for past MATLAB releases are available from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> (e.g., <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gcc43/">gcc43</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gcc44/">gcc44</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gcc47/">gcc47</a></span><sup><small>AUR</small></sup>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk6/">jdk6</a></span><sup><small>AUR</small></sup>), while past versions of the <code>gfortran</code> compilers are not packaged.
</p>
<p>To use previous versions of the the <code>gcc</code>, <code>g++</code>, and <code>gfortran</code> compilers with MEX files, edit <code>${MATLAB}/bin/mexopts.sh</code> and replace all occurrences of <code>CC='gcc'</code> with <code>CC='gcc-4.X'</code>, <code>CXX='g++'</code> with <code>CXX='g++-4.X'</code>, and <code>FC='gfortran'</code> with <code>FC='gfortran-4.X'</code>, where <code>X</code> is the compiler version appropriate for the particular MATLAB release.
</p>
<h3><span class="mw-headline" id="Help_browser">Help browser</span></h3>
<p>The help browser uses valuable slots in the dynamic thread vector and causes competition with core functionality provided by libraries like the BLAS that also depend on the dynamic thread vector. The help browser can be configured to use fewer slots in the dynamic thread vector with
</p>
<pre> &gt;&gt; webutils.htmlrenderer('basic');
</pre>
<p>This is a persistent change and to reverse it use
</p>
<pre> &gt;&gt; webutils.htmlrenderer('default');
</pre>
<h3><span class="mw-headline" id="Garbled_Interface">Garbled Interface</span></h3>
<pre>export J2D_D3D=false
export MATLAB_JAVA=/usr/lib/jvm/java-7-openjdk/jre
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Static_TLS_errors">Static TLS errors</span></h3>
<p>MATLAB has a number of libraries that have been compiled with static thread local storage (TLS) including the help broswer <code>doc</code> and the BLAS libraries. For example,
</p>
<pre>&gt;&gt; doc('help');
&gt;&gt; ones(10)*randn(10);
<span style="color:red">
Error using  * 
BLAS loading error:
dlopen: cannot load any more object with static TLS
</span>
</pre>
<p>is related to bugs <a rel="nofollow" class="external text" href="http://www.mathworks.de/support/bugreports/961964">961964</a> and <a rel="nofollow" class="external text" href="http://www.mathworks.com/support/bugreports/1003952">1003952</a>. In some cases (e.g., bug <a rel="nofollow" class="external text" href="http://www.mathworks.de/support/bugreports/961964">961964</a>) patched libraries are available from <a rel="nofollow" class="external text" href="http://www.mathworks.de/support/bugreports/license/accept_license/5730?fname=attachment_961964_12b_13a_13b_14a_glnxa64_2014-01-30.zip&amp;geck_id=961964">The MathWorks</a>, while in others (e.g., bug <a rel="nofollow" class="external text" href="http://www.mathworks.com/support/bugreports/1003952">1003952</a>) work arounds exist. A more general solution of recompiling <code>glibc</code> has also been <a rel="nofollow" class="external text" href="http://stackoverflow.com/a/19468365/2787723">suggested</a>.
</p>
<h3><span class="mw-headline" id="MATLAB_crashes_when_displaying_graphics">MATLAB crashes when displaying graphics</span></h3>
<p>To identify this error, start MATLAB with
</p>
<pre>LIBGL_DEBUG=verbose matlab
</pre>
<p>from the terminal and try to collect OpenGL information with <code>opengl info</code> from the MATLAB command prompt. If it crashes again and there is an output line like 
</p>
<pre>libGL error: dlopen /usr/lib/xorg/modules/dri/swrast_dri.so failed 
(/usr/local/MATLAB/R2011b/bin/glnxa64/../../sys/os/glnxa64/libstdc++.so.6: 
version `GLIBCXX_3.4.15' not found (required by /usr/lib/xorg/modules/dri/swrast_dri.so))
</pre>
<p>then the problem is that MATLAB uses its own GNU C++ library, which is an older version than the up-to-date version on your Archlinux system. Make MATLAB use the current C++ library for your system by
</p>
<pre>cd /usr/local/MATLAB/R(your release)/sys/os/glnxa64
sudo unlink libstdc++.so.6
sudo ln -s /usr/lib/libstdc++.so.6
</pre>
<h3><span class="mw-headline" id="Blank.2Fgrey_UI_when_using_DWM.2FAwesome">Blank/grey UI when using DWM/Awesome</span></h3>
<p><a rel="nofollow" class="external text" href="http://tools.suckless.org/wmname">wmname</a> is a utility to set the window manager name of the root window.
</p>
<pre>wmname LG3D
</pre>
<p>Then start Matlab.
</p>
<h3><span class="mw-headline" id="Garbled_or_invisible_text">Garbled or invisible text</span></h3>
<p>Set the environment variable <code>J2D_D3D</code> to <code>false</code><a rel="nofollow" class="external autonumber" href="https://stackoverflow.com/questions/22737535/swing-rendering-appears-broken-in-jdk-1-8-correct-in-jdk-1-7">[2]</a>.
</p>
<p>In newer versions of MATLAB (R2015b) <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/archlinux/comments/3yaga8/matlab_installer_bonked/">[3]</a> this also requires setting <code>MATLAB_JAVA</code> to something openjdk based. Example:
</p>
<pre>export J2D_D3D=false
./bin/glnxa64/install_unix -javadir /usr/lib/jvm/java-7-openjdk/jre
</pre>
<h3><span class="mw-headline" id="Corrupted_text_and_fonts_in_menus_and_fields">Corrupted text and fonts in menus and fields</span></h3>
<p>If you notice that the menus or the input fields are corrupted or not appearing correctly then you can try to activate the <i>"<b>Use antialiasing to smooth desktop fonts</b>"</i> option in Matlab preferences, it seems to solve the problem. Go to <i><b>Preferences -&gt; Matlab -&gt; Fonts</b></i> and activate it. You will need to restart Matlab in order to take affect.
</p>
<h3><span class="mw-headline" id="Installation_2">Installation</span></h3>
<p>As one installs Matlab, it might complain that it cannot find a package, for the most part just look at the package name and then install it with <a href="../en/Pacman.html" title="Pacman">Pacman</a>, or in the case of x86_64 there are some libraries only in <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>.
</p>
<h3><span class="mw-headline" id="Install-Time_Library_Errors">Install-Time Library Errors</span></h3>
<ul><li> Make sure that the symlink <code>bin/glnx64/libstdc++.so.6</code> is pointing to the correct version of <code>libstdc++.so.xx</code> (which is also in the same directory and has numbers where 'xx' is). By default, it may be pointing to an older (and nonexistent) version (different value for 'xx').</li></ul>
<ul><li> Make sure the device you're installing from is not mounted as <code>noexec</code>
</li></ul>
<ul><li> If you downloaded the files from Mathworks' website, make sure they are not on an NTFS or FAT partition, because that can mess up the symlinks. Ext4 or Ext3 should work.</li></ul>
<h3><span class="mw-headline" id="Resolving_start_warnings.2Ferrors">Resolving start warnings/errors</span></h3>
<ul><li> Even if all needed libraries are installed, Matlab when starting can still report some missing libraries. This is resolved by symbolic linking of needed libraries to directories that Matlab checks at start-up. For example, if Matlab triggers error/warning about missing <code>/lib64/libc.so.6</code> library, this can be resolved by:</li></ul>
<pre># ln -s /lib/libc.so.6 /lib64
</pre>
<ul><li> Matlab R2011b with an up-to-date Arch Linux (as of March 12, 2012) fails on startup with the familiar "Failure loading desktop class." A solution is to point Matlab to the system JVM (confirmed to work with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=jdk7-openjdk">jdk7-openjdk</a></span> package):</li></ul>
<pre>export MATLAB_JAVA=/usr/lib/jvm/java-7-openjdk/jre
</pre>
<h3><span class="mw-headline" id="Segmentation_Fault_on_startup">Segmentation Fault on startup</span></h3>
<p>If Matlab stops working after upgrading <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=ncurses">ncurses</a></span> to v6.x, <a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ncurses5-compat-libs/">ncurses5-compat-libs</a></span><sup><small>AUR</small></sup> package. See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=202575">BBS#202575</a>.
</p>
<h3><span class="mw-headline" id="Hangs_on_rendering_or_exiting_with_Intel_graphics">Hangs on rendering or exiting with Intel graphics</span></h3>
<p>Some users have reported issues with DRI3 enabled on Intel Graphics chips. The issue can be circumvented by selecting software rendering with the MATLAB command:
</p>
<pre>opengl('save','software')
</pre>
<p>See <a rel="nofollow" class="external autonumber" href="https://bugzilla.redhat.com/show_bug.cgi?id=1357571">[4]</a> for more.
</p>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Mathematics_and_science.html" title="Category:Mathematics and science">Mathematics and science</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
