<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Compaq Armada M300 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Compaq_Armada_M300 skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Compaq Armada M300</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p>This article describes the additional configuration needed on a brand new Arch Linux installation to get the most of a Compaq Armada M300 laptop.
</p>
<p>This laptop is very old but with Arch Linux and the following setup it is still useful for browsing, skyping and even "light open officing".
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Hardware_identification"><span class="tocnumber">1</span> <span class="toctext">Hardware identification</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Hardware_setup"><span class="tocnumber">2</span> <span class="toctext">Hardware setup</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Video"><span class="tocnumber">2.1</span> <span class="toctext">Video</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#CPU_scaling"><span class="tocnumber">2.2</span> <span class="toctext">CPU scaling</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Wireless"><span class="tocnumber">2.3</span> <span class="toctext">Wireless</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Additional_configuration"><span class="tocnumber">3</span> <span class="toctext">Additional configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Restore_values_at_boot"><span class="tocnumber">3.1</span> <span class="toctext">Restore values at boot</span></a></li>
<li class="toclevel-2 tocsection-8">
<a href="#Hotkey_configuration"><span class="tocnumber">3.2</span> <span class="toctext">Hotkey configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#LCD_brightness"><span class="tocnumber">3.2.1</span> <span class="toctext">LCD brightness</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#LCD_.2F_VGA_switch"><span class="tocnumber">3.2.2</span> <span class="toctext">LCD / VGA switch</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Volume_up.2C_down_and_mute"><span class="tocnumber">3.2.3</span> <span class="toctext">Volume up, down and mute</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Problems_and_not_tested_issues"><span class="tocnumber">4</span> <span class="toctext">Problems and not tested issues</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Dual_monitor"><span class="tocnumber">4.1</span> <span class="toctext">Dual monitor</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Hardware_identification">Hardware identification</span></h2>
<p>After installing Arch Linux i686, please check that:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lscpu</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
Architecture:          i686
CPU(s):                1
Thread(s) per core:    1
Core(s) per socket:    1
CPU socket(s):         1
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 8
Stepping:              6
CPU MHz:               600.000
</pre>
<p>and
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lspci</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
00:00.0 Host bridge: Intel Corporation 440BX/ZX/DX - 82443BX/ZX/DX Host bridge (AGP disabled) (rev 03)
00:04.0 CardBus bridge: Texas Instruments PCI1211
00:05.0 VGA compatible controller: ATI Technologies Inc 3D Rage LT Pro (rev dc)
00:07.0 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ISA (rev 02)
00:07.1 IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE (rev 01)
00:07.2 USB Controller: Intel Corporation 82371AB/EB/MB PIIX4 USB (rev 01)
00:07.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 03)
00:08.0 Multimedia audio controller: ESS Technology ES1978 Maestro 2E (rev 10)
00:09.0 Ethernet controller: Intel Corporation 82557/8/9/0/1 Ethernet Pro 100 (rev 09)
00:09.1 Serial controller: Agere Systems LT WinModem
</pre>
<p>corresponds to your hardware.
</p>
<h2><span class="mw-headline" id="Hardware_setup">Hardware setup</span></h2>
<p>Lets get the features of the laptop correctly working in order to get the most of it.
</p>
<h3><span class="mw-headline" id="Video">Video</span></h3>
<p>Necessary driver packages:
</p>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-mach64">xf86-video-mach64</a></span>
</li>
</ul>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>
<ul>
<li> For additional information, see the <a href="../en/Xorg.html" title="Xorg">Xorg</a> page.</li>
<li> Update: Oct, 24, 2010: The AUR package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mach64drm/">mach64drm</a></span><sup><small>AUR</small></sup> should bring back 3D rendering for current kernel versions.</li>
</ul>
</div>
<h3><span class="mw-headline" id="CPU_scaling">CPU scaling</span></h3>
<p>See <a href="../en/CPU_frequency_scaling.html" title="CPU frequency scaling">CPU frequency scaling</a>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If you are unable to switch frequencies, please check the BIOS settings for SpeedStep support</div>
<h3><span class="mw-headline" id="Wireless">Wireless</span></h3>
<p>Even though the M300 has no default wireless support, you might have a PCMCIA card.
For it to work, you must first install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=iproute2">iproute2</a></span>, then bring it up:
</p>
<pre># ip link set wlp2s0 up
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Your card may be given a name other than <code>wlp2s0</code>. Check by issueing the command <i>iwconfig</i>
</div>
<p>and watch the neighborhood:
</p>
<pre># iwlist scan
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If you run into troubles with your wireless card, check the <a href="../en/Wireless_network_configuration.html" title="Wireless network configuration">Wireless network configuration</a> article</div>
<h2><span class="mw-headline" id="Additional_configuration">Additional configuration</span></h2>
<h3><span class="mw-headline" id="Restore_values_at_boot">Restore values at boot</span></h3>
<p>In order to have the mixer to always get back to the presetted values, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> and add the following to a script
</p>
<pre># mixer settings
amixer set Master on 31
amixer set PCM on 25
amixer set Mic cap
amixer set Capture on 8
</pre>
<p>Then call it from a systemd unit. Enable that unit.
</p>
<p>For you to get your clock always updated, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=ntp">ntp</a></span>, add to the previous script:
</p>
<pre># set the time
sleep 20        # give sometime for the network to connect
if (($(ip route| wc -l) &gt; 3)); then
        ntpdate pool.ntp.org
fi
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>You might need this if your CMOS battery is gone</div>
<h3><span class="mw-headline" id="Hotkey_configuration">Hotkey configuration</span></h3>
<h4><span class="mw-headline" id="LCD_brightness">LCD brightness</span></h4>
<p>Add the following to <code>/usr/local/bin/backlight_control</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/backlight_control</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">dec}"
esac
</pre>
<h4><span class="mw-headline" id="LCD_.2F_VGA_switch">LCD / VGA switch</span></h4>
<p>Create <code>/usr/local/bin/switch_display</code> and add the following:
</p>
<pre>/usr/local/bin/switch_display</pre>
<h4><span class="mw-headline" id="Volume_up.2C_down_and_mute">Volume up, down and mute</span></h4>
<p>Create a script called <code>/usr/local/bin/volume_control</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/volume_control</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> tail -n 1 </pre>
<h2><span class="mw-headline" id="Problems_and_not_tested_issues">Problems and not tested issues</span></h2>
<h3><span class="mw-headline" id="Dual_monitor">Dual monitor</span></h3>
<p>You'd probably have to do it by hand. Add this to the beginning of your <code>~/.xinitrc</code>:
</p>
<pre>
# set multiple monitors
xrandr --verbose --output LVDS1 --mode 1024x768 --primary
xrandr --verbose --output VGA1 --mode 1024x768 -r 75.1 --right-of LVDS1
</pre>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:HP.html" title="Category:HP">HP</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_using_duplicate_arguments_in_template_calls.html" title="Category:Pages using duplicate arguments in template calls">Pages using duplicate arguments in template calls</a></li></ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
