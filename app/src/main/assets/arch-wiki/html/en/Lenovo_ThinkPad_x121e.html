<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Lenovo ThinkPad x121e - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Lenovo_ThinkPad_x121e skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Lenovo ThinkPad x121e</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Lenovo_ThinkPad_x121e">Talk:Lenovo ThinkPad x121e#</a>)</div>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Lenovo_ThinkPad_x121e">Talk:Lenovo ThinkPad x121e#</a>)</div>
</div>
<p><a rel="nofollow" class="external text" href="http://www.thinkwiki.org/wiki/Category:X121e">ThinkWiki x121e reference</a>
</p>
<p>Note that there are several models of this laptop. The notes below refer to the model with the following specification and options:
</p>
<ul>
<li> Intel(R) Core(TM) i3-2367M CPU @ 1.40GHz GenuineIntel</li>
<li> Board 3045CTO</li>
<li> Intel Centrino Wireless-N 1000 (Note: this is not the default option)</li>
<li> US keyboard with Euro</li>
<li> 320G HDD</li>
</ul>
<p>Working out of the box:
</p>
<ul>
<li> graphics (intel_agp,i915 are loaded automatically; add i915 to the modules in mkinitcpio.conf for support during early boot)</li>
<li> wifi (with Intel Centrino Wireless-N 1000 option)</li>
<li> sound (with ALSA)</li>
<li> touchpad (with synaptics)</li>
<li> trackpoint</li>
<li> most function keys</li>
<li> suspend to RAM </li>
<li> suspend to disk</li>
<li> boot from MBR partitioned disk in BIOS mode (note: there must be at least one primary partition flagged as bootable)</li>
<li> webcam</li>
<li> microphone (barely - it does capture sound but it is unusably noisy on my setup)</li>
<li> headphones (tested with Gnome 3.4)</li>
<li> 2 "Think" LEDs</li>
<li> HDD in AHCI mode</li>
<li> boot from USB key, USB HDD, internal HDD</li>
</ul>
<p><br>
Working but not out of the box:
</p>
<ul>
<li> boot from GPT partitioned disk in UEFI mode (with hack to work around buggy firmware - see <a href="../en/Unified_Extensible_Firmware_Interface/Hardware.html#Lenovo_ThinkPad_x121e" title="Unified Extensible Firmware Interface/Hardware">here</a> and forum links <a href="#Arch_Forums_x121e_related_threads">below</a>)</li>
<li> bluetooth (with BIOS upgrade - see below)</li>
</ul>
<p>Partly working:
</p>
<ul>
<li> VGA out to external monitor (connection generally goes OK but disconnect frequently freezes X and sometimes causes hard lock up forcing cold reboot; could be configuration or DE related - see below)</li>
<li> SD card reader : In order to read SDHC cards, you need to install and run as daemon the <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages.php?ID=52437">Ricoh e823 fix</a>
</li>
</ul>
<p>Not working:
</p>
<ul><li> boot from GPT partitioned disk in BIOS mode</li></ul>
<p>Untested:
</p>
<ul>
<li> HDMI out</li>
<li> security chip thing</li>
<li> boot from USB FDD, network boot</li>
</ul>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Arch_user_blogs_about_the_x121e"><span class="tocnumber">1</span> <span class="toctext">Arch user blogs about the x121e</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Power_saving_options_for_the_x121e"><span class="tocnumber">2</span> <span class="toctext">Power saving options for the x121e</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Bluetooth"><span class="tocnumber">3</span> <span class="toctext">Bluetooth</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Broadcom_BCM43224_a.2Fb.2Fg.2Fn_wifi"><span class="tocnumber">4</span> <span class="toctext">Broadcom BCM43224 a/b/g/n wifi</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Arch_Forums_x121e_related_threads"><span class="tocnumber">5</span> <span class="toctext">Arch Forums x121e related threads</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Arch_user_blogs_about_the_x121e">Arch user blogs about the x121e</span></h2>
<h2><span class="mw-headline" id="Power_saving_options_for_the_x121e">Power saving options for the x121e</span></h2>
<p>In /etc/rc.conf, add acpi-cpufreq to the MODULES array to enable CPU frequency scaling. If you use laptop-mode-tools, that's enough. Otherwise, add the governor you want to use, too e.g. cpufreq_ondemand.
</p>
<p>Then add the following to the DAEMONS array:
</p>
<ul>
<li> either laptop-mode or cpufreq</li>
<li> acpid</li>
<li> sensors (if you want to monitor fan speed, temperature etc.)</li>
</ul>
<p>thinkpad_acpi should be loaded automatically. Check this with lsmod | grep think. 
</p>
<p>Add to the kernel command line:
</p>
<pre>pcie_aspm=force i915.i915_enable_rc6=1 i915.i915_enable_fbc=1 i915.lvds_downclock=1 i915.semaphores=1
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Do not add these options without checking them out first as they may cause problems depending on your setup. Be prepared to disable them as necessary.</div>
<p>If using laptop-mode-tools stops your machine from shutting down while on battery power, try the solution described in <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=133108">this thread</a>.
</p>
<p>tp_smapi does not currently support the x121e and is apparently not likely to do so in the foreseeable future. Apparently the x121e is not quite a "real" ThinkPad.
</p>
<h2><span class="mw-headline" id="Bluetooth">Bluetooth</span></h2>
<p>Getting bluetooth enabled can be a bit tricky. If bluetooth doesn't work or stops working and cannot be unblocked by rfkill, check first that it is enabled in the BIOS. If that isn't the problem, you may need a BIOS upgrade (see below).
</p>
<p>Even after a BIOS upgrade, it seems that bluetooth may stop working in some cases. For example, changing the RAM in my machine seems to result in a hard block which rfkill can't touch even though bluetooth is enabled in BIOS. Repeating the post-bios-upgrade procedure of loading the default BIOS settings, booting and then redoing your custom settings seems to help. (I don't know if the reboot with the default settings is actually needed or if loading the defaults, saving them and then re-customising would be enough.) If you do this, remember that you may need to re-add grub to your boot menu to get everything working normally again. (This applies to GRUB2, at least.)
</p>
<h2><span class="mw-headline" id="Broadcom_BCM43224_a.2Fb.2Fg.2Fn_wifi">Broadcom BCM43224 a/b/g/n wifi</span></h2>
<pre>$ lspci -vnn | grep 14e4:
02:00.0 Network controller [0280]: Broadcom Corporation BCM43224 802.11a/b/g/n [14e4:0576] (rev 01)
</pre>
<p>Wifi can be enabled using the <a href="../en/Broadcom_wireless.html" title="Broadcom" class="mw-redirect">broadcom</a>  <code>brcmsmac</code> module. Be sure to rfkill-enable it and disable power saving : 
</p>
<pre>$ ip link set eth1 down
$ iwconfig eth1 channel auto
$ iwconfig eth1 power off
$ rfkill unblock wifi
$ ip link set eth1 up
</pre>
<h2><span class="mw-headline" id="Arch_Forums_x121e_related_threads">Arch Forums x121e related threads</span></h2>
<p>Some people experience difficulties booting if their disk is partitioned using a GPT partition map. The correct way to avoid this problem is to ensure that the EFI partition is at least 512M. The UEFI wiki page now includes this instruction. If for some bizarre reason you do not wish to do this, it may work to use a GPT partition map, UEFI boot and a fat 16 formatted EFI partition (this violates UEFI spec but may have the advantage of actually working). See <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=131149">https://bbs.archlinux.org/viewtopic.php?id=131149</a> and <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=133074">https://bbs.archlinux.org/viewtopic.php?id=133074</a>.
</p>
<p>If bluetooth doesn't work or stops working and cannot be unblocked by rfkill, check that it is enabled in the BIOS. If that's not the problem, a BIOS upgrade may help. See <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=137346">https://bbs.archlinux.org/viewtopic.php?id=137346</a>. If that doesn't help either, boot to BIOS, reload the defaults, reconfigure BIOS and reboot. <b>Note that this will wipe any entries in the EFI boot menu.</b> (If anybody knows a less annoying way, please comment!)
</p>
<p>Speed up trackpoint: <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=130130">https://bbs.archlinux.org/viewtopic.php?id=130130</a>.
</p>
<p>Solution for difficulties suspending or hibernating: <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=125011">https://bbs.archlinux.org/viewtopic.php?id=125011</a>.
</p>
<p>VGA disconnect problems: <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=134886">https://bbs.archlinux.org/viewtopic.php?id=134886</a>. The best "solution" appears to be to make the VGA output inactive <i>before</i> pulling the plug. This seems to prevent the confusion which otherwise ensues.
</p>
<p>If you cannot power off when running on battery, see this thread for a possible solution: <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=133108">https://bbs.archlinux.org/viewtopic.php?id=133108</a>. This seems to be unnecessary with systemd which is now default.
</p>
<p>If you get errors on boot or resume complaining about the TPM, try changing the settings for the security chip in the BIOS as described in <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=139415">this thread</a>.
</p>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Lenovo.html" title="Category:Lenovo">Lenovo</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
