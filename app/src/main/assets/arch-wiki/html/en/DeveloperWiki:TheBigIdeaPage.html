<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>DeveloperWiki:TheBigIdeaPage - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-DeveloperWiki_TheBigIdeaPage skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">DeveloperWiki:TheBigIdeaPage</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#The_Big_Idea_Page"><span class="tocnumber">1</span> <span class="toctext">The Big Idea Page</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Move_to_better_Bug_Tracker"><span class="tocnumber">1.1</span> <span class="toctext">Move to better Bug Tracker</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Moving_repository_management_to_git"><span class="tocnumber">1.2</span> <span class="toctext">Moving repository management to git</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Signing_database_files"><span class="tocnumber">1.3</span> <span class="toctext">Signing database files</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Auto_rebuild_script"><span class="tocnumber">1.4</span> <span class="toctext">Auto rebuild script</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#More_packaging_automation"><span class="tocnumber">1.5</span> <span class="toctext">More packaging automation</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Orphan_packages"><span class="tocnumber">1.6</span> <span class="toctext">Orphan packages</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Datacenter_software"><span class="tocnumber">1.7</span> <span class="toctext">Datacenter software</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Delta_packages_in_repos"><span class="tocnumber">1.8</span> <span class="toctext">Delta packages in repos</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Encourage_people_to_contribute_to_Arch_projects"><span class="tocnumber">1.9</span> <span class="toctext">Encourage people to contribute to Arch projects</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Better_namcap_errors_for_version_bumps"><span class="tocnumber">1.10</span> <span class="toctext">Better namcap errors for version bumps</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Listing_all_direct_dependencies"><span class="tocnumber">1.11</span> <span class="toctext">Listing all direct dependencies</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Multiple_kernel_support"><span class="tocnumber">1.12</span> <span class="toctext">Multiple kernel support</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Out-of-tree_kernel_modules_management"><span class="tocnumber">1.13</span> <span class="toctext">Out-of-tree kernel modules management</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="The_Big_Idea_Page">The Big Idea Page</span></h2>
<p>This page is for generating a collection of ideas that would improve Arch Linux.  It will allow us to assess areas in which we can improve and whether we need more "staff" to move forward.
</p>
<h4><span class="mw-headline" id="Move_to_better_Bug_Tracker">Move to better Bug Tracker</span></h4>
<p>Moving the bug tracker to Bugzilla or Roundup would have many advantages (see also <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/24999">FS#24999</a>):
</p>
<ul>
<li> It is more well maintained upstream than Flyspray</li>
<li> Bugs could be handled via email</li>
<li> ...</li>
</ul>
<p>Florian has a script that will convert our bug database into Bugzilla format. Currently no-one is interested in maintaining the install.
</p>
<h4><span class="mw-headline" id="Moving_repository_management_to_git">Moving repository management to git</span></h4>
<p>Using git instead of SVN is not really the primary goal, although it is a nice bonus.  We also gain other stuff (split packages with different architectures, debug package repos, ...)
Florian has made great advances in this realm. <a href="../User:Bluewind/dbscripts-rewrite.html" title="User:Bluewind/dbscripts-rewrite">User:Bluewind/dbscripts-rewrite</a>
</p>
<h4><span class="mw-headline" id="Signing_database_files">Signing database files</span></h4>
<p>Our package security would be improved by signing repository databases. This requires working with upstream GPG developers to allow signing of files over ssh.
</p>
<h4><span class="mw-headline" id="Auto_rebuild_script">Auto rebuild script</span></h4>
<p>Simplfing package rebuilds.   
</p>
<pre>rebuildpkg pkg1 pkg2 pkg3
</pre>
<h4><span class="mw-headline" id="More_packaging_automation">More packaging automation</span></h4>
<p>Not a very big idea but very much related to "auto rebuild script". Yet another wrapper or a full-blown "packaging shell", this time abstracting away the underlying independent build tools (svn, devtools, etc.), providing auto-completion of package names, committing to the correct repo, building on remote build server if wanted, rebuilding single packages or a package dependency list (with bumps and auto push to a staging or testing repo; there is no need to test successful rebuilds locally; also send e-mails to maintainers of failed builds), getting packages and signing them if built remotely, starting up a container or a VM with the newly built package and all dependencies to allow real, live testing (especially for graphical stuff). Will allow anyone to build, release and push depending on permissions to a repo (all users by default have permission to custom repos); this is defined in a file. Does packaging and does it well. Very distro-specific, will have zero compatibility with other pacman distros. Will look stupid at first. Will be useful in the long-run. Will become obsolete if systemd solves the whole Linux packaging problem.
</p>
<h4><span class="mw-headline" id="Orphan_packages">Orphan packages</span></h4>
<p>There are LOTS of these.  Any common themes that would be worth recruiting a new packager for?
</p>
<h4><span class="mw-headline" id="Datacenter_software">Datacenter software</span></h4>
<p>Maintain software used in datacenters in the repo for easier installation? (ceph, puppet, nagios, ...)
</p>
<h4><span class="mw-headline" id="Delta_packages_in_repos">Delta packages in repos</span></h4>
<p>pacman already supports delta packages, but repo scripts don't generate the necessary delta files. See: <a href="../en/Deltup.html" title="Deltup">Deltup</a>, <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/18590">FS#18590</a>.
</p>
<h4><span class="mw-headline" id="Encourage_people_to_contribute_to_Arch_projects">Encourage people to contribute to Arch projects</span></h4>
<p>Github and the like encourage contributions by making the source obvious and easy to navigate. We currently lack this with Arch projects (and possibly packages). I think slapping our projects onto Github or an in-house Gitlab would increase contributions. The cgit + mailing list thing seems archaic nowadays where developers grow up with pull requests. Perhaps we should adapt where it makes sense? This might in fact alleviate some of our staff trouble as we allow others to more easily help us out.
</p>
<h4><span class="mw-headline" id="Better_namcap_errors_for_version_bumps">Better namcap errors for version bumps</span></h4>
<p>namcap should emit errors for packages when their updated version would break other apps due to soname bumps. Sadly, this can't work just by dependencies alone because our packages don't list all the dependencies directly. This is currently done on pkgbuild.com using sogrep and some manual note keeping which seems backward. sogrep is not readily available in devtools because it requires having a full mirror on the local drive. Since a full mirror is still less than 20 GiB, I don't believe this is a big problem and sogrep should be packaged in devtools to allow namcap to have some new features. Failing that, either a generated database for sonames should be generated by our tools (basically ldd over all dynamically linked objects) or an API for sogrep-like operations should be provided.
</p>
<p>When such a tool is available, namcap could be improved to have this feature and henceforth version bumping would require less manual effort upfront and would be less error prone.
</p>
<h4><span class="mw-headline" id="Listing_all_direct_dependencies">Listing all direct dependencies</span></h4>
<p>As a follow up to this, the fact that Arch packages only list "first level" dependencies has long been a source of maintenance burden. I can see two reasons for why people (Judd?) decided this:
</p>
<ol>
<li> It makes it easier for new packagers to contribute.</li>
<li> It prevents overly verbose output of "pacman -Qi".</li>
</ol>
<p>The newbie friendliness can be kept if we continue to allow "first level only" packages in the AUR. However, I think official repositories should list every library dependency in the depends array. This will require a pkgrel bump of every package, but we only need to do it once. For those who still want short "pacman -Qi" output, we can introduce a new switch to pacman which will automatically trim second level deps. This is much faster than doing the opposite and trying to run namcap each time.
</p>
<p>One should not have to use separate tools to generate a rebuild list. The "Required by" field of a pacman query should be enough. As it stands, this field is useless because rebuilds don't care about "Required at the first level by". A short-lived alternative proposal was to achieve this with <a href="../User:Allan/Pacman_Hooks.html" title="User:Allan/Pacman Hooks">hooks</a>. However, <a rel="nofollow" class="external text" href="https://lists.archlinux.org/pipermail/pacman-dev/2014-April/018994.html">as discussed</a>, it is very ugly to expose the .PKGINFO file and let scripts alter dependencies as packages are installed.
</p>
<h4><span class="mw-headline" id="Multiple_kernel_support">Multiple kernel support</span></h4>
<p>Our current way of managing kernel should be improved:
</p>
<ol>
<li> Updating a kernel need an immediate reboot<br> Kernel modules of the current running kennel is removed and replaced by another kernel module. So you cannot load modules anymore. In servers environment, it's difficult to restart your server everytime a stable release is out.</li>
<li> We cannot have more than one version of the kernel (see <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/16702">FS#16702</a>).<br>If the last update cause an issue, you cannot select an older one in your favoring boot loader. You need an USB rescue key, if the server is not close to you, Houston, we've had a problem.</li>
</ol>
<p><u>Possible solution:</u>
A simple solution would be to put the kernel name inside the package name and use a meta package to pull the last version.
Letting for example 3 kernels generations (3.17.x, 3.16.x, 3.15.x) before removing them (by conflicts).
</p>
<h4><span class="mw-headline" id="Out-of-tree_kernel_modules_management">Out-of-tree kernel modules management</span></h4>
<p>Currently, we have 3 kernels (-arch, -lts, -grsec) and updating out-of-tree kernel modules is something time consuming. The frequency and the testing phase make things even more error prone.
</p>
<p>To simplify the situation, I'm suggesting to let DKMS manage them. This is particularly useful if we implement previous idea of multiple kernel support and make the number of kernel modules scalable.
</p>
<p>Of course, that make compilation of modules being done by every users, but, it mays be a fair trade as these modules don't make enough effort to be mainlined.
</p>
</div>
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:DeveloperWiki.html" title="Category:DeveloperWiki">DeveloperWiki</a></li></ul>
</div></div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
