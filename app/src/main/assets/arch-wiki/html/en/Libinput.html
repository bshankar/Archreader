<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>libinput - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Libinput skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">libinput</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p><span></span>
</p>
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Xorg.html" title="Xorg">Xorg</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Touchpad_Synaptics.html" title="Touchpad Synaptics">Touchpad Synaptics</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Wayland.html" title="Wayland">Wayland</a></li>
</ul>
</div>
<p>From the <a rel="nofollow" class="external text" href="https://freedesktop.org/wiki/Software/libinput/">libinput</a> wiki page: 
</p>
<dl><dd>libinput is a library to handle input devices in Wayland compositors and to provide a generic X.Org input driver. It provides device detection, device handling, input device event processing and abstraction so minimize the amount of custom input code compositors need to provide the common set of functionality that users expect.</dd></dl>
<p>The X.Org input driver supports most regular <a href="../en/Xorg.html#Input_devices" title="Xorg">Xorg#Input devices</a>. Particularly notable is the project's goal to provide advanced support for touch (multitouch and gesture) features of touchpads and touchscreens. See the <a rel="nofollow" class="external text" href="http://wayland.freedesktop.org/libinput/doc/latest/pages.html">project documentation</a> for more information.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Common_options"><span class="tocnumber">2.1</span> <span class="toctext">Common options</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Graphical_tools"><span class="tocnumber">2.2</span> <span class="toctext">Graphical tools</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Tips_and_tricks"><span class="tocnumber">3</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Button_re-mapping"><span class="tocnumber">3.1</span> <span class="toctext">Button re-mapping</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Manual_button_re-mapping"><span class="tocnumber">3.2</span> <span class="toctext">Manual button re-mapping</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Gestures"><span class="tocnumber">3.3</span> <span class="toctext">Gestures</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#Debugging"><span class="tocnumber">4</span> <span class="toctext">Debugging</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Touchpad_not_working_in_GNOME"><span class="tocnumber">4.1</span> <span class="toctext">Touchpad not working in GNOME</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>If you wish to use libinput under <a href="../en/Wayland.html" title="Wayland">Wayland</a>, there is nothing to do for installation. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=libinput">libinput</a></span> package should already be installed as a dependency of any graphical environment you use that has Wayland, and no additional driver is needed.
</p>
<p>If you wish to use libinput with <a href="../en/Xorg.html" title="Xorg">Xorg</a>, <a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-input-libinput">xf86-input-libinput</a></span> package, which is "a thin wrapper around libinput and allows for libinput to be used for input devices in X. This driver can be used as as drop-in replacement for evdev and synaptics." <a rel="nofollow" class="external autonumber" href="https://freedesktop.org/wiki/Software/libinput/">[1]</a> In other words, other packages used for input with X (i.e., those prefixed with <code>xf86-input-</code>) can be replaced with this driver.
</p>
<p>You may also want to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xorg-xinput">xorg-xinput</a></span> to be able to change settings at runtime. 
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>For <a href="../en/Xorg.html" title="Xorg">Xorg</a>, a default configuration file is installed in <code>/usr/share/X11/xorg.conf.d/60-libinput.conf</code>. No extra configuration is necessary for it to autodetect keyboards, touchpads, trackpointers and supported touchscreens. 
</p>
<p>First, execute:
</p>
<pre># libinput-list-devices 
</pre>
<p>It will output the devices on the system and their respective features supported by libinput. 
</p>
<p>After a <a href="../en/Systemd.html#Using_units" title="Restart" class="mw-redirect">restart</a> of the graphical environment, the devices should be managed by libinput with default configuration, if no other drivers are configured to take precedence. 
</p>
<p>See the libinput(4) manual page for general options to set. The <i>xinput</i> tool is used to view or change options available for a particular device at runtime. For example: 
</p>
<pre>$ xinput list
</pre>
<p>to view all devices and determine their numbers
</p>
<pre>$ xinput list-props <i>device-number</i> 
</pre>
<p>to view and 
</p>
<pre>$ xinput set-prop <i>device-number</i> <i>option-number</i> <i>setting</i> 
</pre>
<p>to change a setting. 
</p>
<p>See <a href="../en/Xorg.html#Using_.conf_files" title="Xorg">Xorg#Using .conf files</a> for permanent option settings. <a href="../en/Logitech_Marble_Mouse.html#Using_libinput" title="Logitech Marble Mouse">Logitech Marble Mouse#Using libinput</a> and <a href="#Button_re-mapping">#Button re-mapping</a> illustrate examples. 
</p>
<p>Alternative drivers for <a href="../en/Xorg.html#Input_devices" title="Xorg">Xorg#Input devices</a> can generally be installed in parallel. If you intend to switch driver for a device to use libinput, ensure no legacy configuration files <code>/etc/X11/xorg.conf.d/</code> for other drivers take precedence. 
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>If you have libinput and synaptics installed in parallel with default configuration (i.e. no files in <code>/etc/X11/xorg.conf.d</code> for both), synaptics will take precedence due to its <code>70-synaptics.conf</code> file name. To avoid this, you can symlink the default libinput configuration: 
<pre># ln -s /usr/share/X11/xorg.conf.d/60-libinput.conf /etc/X11/xorg.conf.d/60-libinput.conf
</pre>
If you <i>do</i> have <code>/etc/X11/xorg.conf.d/</code> configuration files for both, the libinput file must be ordered second; see <a href="../en/Xorg.html#Using_.conf_files" title="Xorg">Xorg#Using .conf files</a>.</div>
<p>One way to check which devices are managed by libinput is the <a href="../en/Xorg.html#General" title="Xorg">xorg logfile</a>. For example, the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ grep -e "Using input driver 'libinput'" <i>/path/to/Xorg.0.log</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[    28.799] (II) Using input driver 'libinput' for 'Power Button'
[    28.847] (II) Using input driver 'libinput' for 'Video Bus'
[    28.853] (II) Using input driver 'libinput' for 'Power Button'
[    28.860] (II) Using input driver 'libinput' for 'Sleep Button'
[    28.872] (II) Using input driver 'libinput' for 'AT Translated Set 2 keyboard'
[    28.878] (II) Using input driver 'libinput' for 'SynPS/2 Synaptics TouchPad'
[    28.886] (II) Using input driver 'libinput' for 'TPPS/2 IBM TrackPoint'
[    28.895] (II) Using input driver 'libinput' for 'ThinkPad Extra Buttons'</pre>
<p>is a notebok without any configuration files in <code>/etc/X11/xorg.conf.d/</code>, i.e. devices are autodetected. 
</p>
<p>Of course you can elect to use an alternative driver for one device and libinput for others. A number of factors may influence which driver to use. For example, in comparison to <a href="../en/Touchpad_Synaptics.html" title="Touchpad Synaptics">Touchpad Synaptics</a> the libinput driver has fewer options to customize touchpad behaviour to one's own taste, but far more programmatic logic to process multitouch events (e.g. palm detection as well). Hence, it makes sense to try the alternative, if you are experiencing problems on your hardware with one driver or the other.
</p>
<h3><span class="mw-headline" id="Common_options">Common options</span></h3>
<p>Custom configuration files should be placed in <code>/etc/X11/xorg.conf.d/</code> and following a widely used naming schema <code>30-touchpad.conf</code> is often chosen as filename.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>Have a look at <code>/usr/share/X11/xorg.conf.d/60-libinput.conf</code> for guidance and refer to the <span class="plainlinks archwiki-template-man" title="$ man 4 libinput"><a rel="nofollow" class="external text" href="https://www.mankier.com/4/libinput">libinput(4)</a></span> manual page for a detailed description of available configuration options.</div>
<p>A basic configuration should have the following structure:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/30-touchpad.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
Section "InputClass"
    Identifier "devname"
    Driver "libinput"
    Option "Device"   "devpath"
    ...
EndSection
</pre>
<p>You may define as many sections as you like in a single configuration file.
To configure the device of your choice specify a filter by using <code>MatchIsPointer "on"</code>, <code>MatchIsKeyboard "on"</code>, <code>MatchIsTouchpad "on"</code> or <code>MatchIsTouchscreen "on"</code> and add your desired option. Common options include:
</p>
<ul>
<li> <code>"Tapping" "on"</code>: tapping a.k.a. tap-to-click</li>
<li> <code>"NaturalScrolling" "true"</code>: natural (reverse) scrolling</li>
<li> <code>"ScrollMethod" "edge"</code>: edge (vertical) scrolling</li>
</ul>
<p>Bear in mind that some of them may only apply to certain devices.
</p>
<h3><span class="mw-headline" id="Graphical_tools">Graphical tools</span></h3>
<p>There are different GUI tools:
</p>
<ul>
<li> <a href="../en/GNOME.html" title="GNOME">GNOME</a>: 
<ul><li> Control center has a basic UI under 'Mouse &amp; Touchpad'.</li></ul>
</li>
<li> <a href="../en/Cinnamon.html" title="Cinnamon">Cinnamon</a>: 
<ul><li> Similar to the GNOME UI, with more options.</li></ul>
</li>
<li> <a href="../en/KDE.html" title="KDE Plasma" class="mw-redirect">KDE Plasma</a> 5: 
<ul>
<li> Basic options within Touchpad section (kcm_touchpad) in System Settings.</li>
<li> <a rel="nofollow" class="external text" href="https://github.com/amezin/pointing-devices-kcm">pointing-devices-kcm</a> (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/kcm-pointing-devices-git/">kcm-pointing-devices-git</a></span><sup><small>AUR</small></sup>) is a new and rewritten KCM for all input devices supported by libinput.</li>
</ul>
</li>
</ul>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Button_re-mapping">Button re-mapping</span></h3>
<p>Swapping two- and three-finger tap for a touchpad is a straight forward example. Instead of the default three-finger tap for pasting you can configure two-finger tap pasting by setting the <code>TappingButtonMap</code> option in your <a href="../en/Xorg.html" title="Xorg">Xorg</a> configuration file. To set 1/2/3-finger taps to left/right/middle set <code>TappingButtonMap</code> to <code>lrm</code>, for left/middle/right set it to <code>lmr</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/30-touchpad.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
Section "InputClass"
    Identifier "touchpad"
    Driver "libinput"
    MatchIsTouchpad "on"
    Option "Tapping" "on"
    Option "TappingButtonMap" "lmr"
EndSection</pre>
<p>Remember to remove <code>MatchIsTouchpad "on"</code> if your device is not a touchpad and adjust the <code>Identifier</code> accordingly.
</p>
<h3><span class="mw-headline" id="Manual_button_re-mapping">Manual button re-mapping</span></h3>
<p>For some devices it is desirable to change the button mapping. A common example is the use of a thumb button instead of the middle button (used in X11 for pasting) on mice where the middle button is part of the mouse wheel. You can query the current button mapping via:
</p>
<pre>$ xinput get-button-map <i>device</i>
</pre>
<p>You can freely permutate the button numbers and write them back. Example:
</p>
<pre>$ xinput set-button-map <i>device</i> 1 6 3 4 5 0 7
</pre>
<p>In this example, we mapped button 6 to be the middle button and disabled the original middle button by assigning it to button 0. 
This may also be used for <a href="../en/Wayland.html" title="Wayland">Wayland</a>, but be aware both the <i>device</i> number and its button-map will be different. Hence, settings are not directly interchangeable. 
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>You can use <i>xev</i> (from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xorg-xev">xorg-xev</a></span> package) to find out which physical button is currently mapped to which ID.</div>
<p>Some devices occur several times under the same device name, with a different amount of buttons exposed. The following is an example for reliably changing the button mapping for a Logitech Revolution MX mouse via <a href="../en/Xinit.html" title="Xinitrc" class="mw-redirect">xinitrc</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xinitrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
...
for i in $(xinput list | grep "Logitech USB Receiver" | perl -n -e'/id=(\d+)/ &amp;&amp; print "$1\n"')
	do if xinput get-button-map "$i" 2&gt;/dev/null| grep -q 20; then
		xinput set-button-map "$i" 1 17 3 4 5 8 7 6 9 10 11 12 13 14 15 16 2 18 19 20
	fi
done
...</pre>
<h3><span class="mw-headline" id="Gestures">Gestures</span></h3>
<p>While the libinput driver already contains logic to process advanced multitouch events like swipe and pinch <a rel="nofollow" class="external text" href="https://wayland.freedesktop.org/libinput/doc/latest/gestures.html">gestures</a>, the <a href="../en/Desktop_environment.html" title="Desktop environment">Desktop environment</a> or <a href="../en/Window_manager.html" title="Window manager">Window manager</a> might not have implemented actions for all of them yet. 
</p>
<p>For <a href="https://en.wikipedia.org/wiki/Extended_Window_Manager_Hints" class="extiw" title="w:Extended Window Manager Hints">EWMH</a> (see also <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Specifications/wm-spec/">wm-spec</a>) compliant window managers, the <a rel="nofollow" class="external text" href="https://github.com/bulletmark/libinput-gestures">libinput-gestures</a> utility can be used meanwhile. The program reads libinput gestures (through <code>libinput-debug-events</code>) from the touchpad and maps them to gestures according to a configuration file. Hence, it offers some flexibility within the boundaries of libinput's built-in recognition.
</p>
<p>To use <a rel="nofollow" class="external text" href="https://github.com/bulletmark/libinput-gestures">libinput-gestures</a>, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libinput-gestures/">libinput-gestures</a></span><sup><small>AUR</small></sup> package. You can use the default system-wide configured swipe and pinch gestures or define your own in a personal configuration file, see the <a rel="nofollow" class="external text" href="https://github.com/bulletmark/libinput-gestures/blob/master/README.md">README</a> for details.
</p>
<h2><span class="mw-headline" id="Debugging">Debugging</span></h2>
<p>First, see whether the packaged <i>libinput-debug-events</i> tool can support you in debugging the problem. Executing <code>libinput-debug-events --help</code> shows options it covers.
</p>
<p>Some inputs require kernel support. The tool <i>evemu-describe</i> from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=evemu">evemu</a></span> package can be used to check: 
</p>
<p>Compare the output of <a rel="nofollow" class="external text" href="http://ix.io/m6b">software supported input trackpad driver</a> with <a rel="nofollow" class="external text" href="https://github.com/whot/evemu-devices/blob/master/touchpads/SynPS2%20Synaptics%20TouchPad-with-scrollbuttons.events">a supported trackpad</a>. i.e. a couple of ABS_ axes, a couple of ABS_MT axes and no REL_X/Y axis. For a clickpad the <code>INPUT_PROP_BUTTONPAD</code> property should also be set, if it is supported.
</p>
<h3><span class="mw-headline" id="Touchpad_not_working_in_GNOME">Touchpad not working in GNOME</span></h3>
<p>Ensure the touchpad events are being sent to the GNOME desktop by running the following command:
</p>
<pre>$ gsettings set org.gnome.desktop.peripherals.touchpad send-events enabled
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external text" href="https://wayland.freedesktop.org/libinput/doc/latest/index.html">libinput Wayland documentation</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://archive.fosdem.org/2015/schedule/event/libinput/attachments/slides/591/export/events/attachments/libinput/slides/591/libinput_xorg.pdf">FOSDEM 2015 - libinput</a> - Hans de Goede on goals and plans of the project</li>
<li>
<a rel="nofollow" class="external text" href="http://who-t.blogspot.com.au/">Peter Hutterer's Blog</a> - numerous posts on libinput from one of the project's hackers</li>
</ul>

</div>
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Input_devices.html" title="Category:Input devices">Input devices</a></li></ul>
</div></div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
