<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Redshift - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Redshift skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Redshift</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p>From the <a rel="nofollow" class="external text" href="http://jonls.dk/redshift/">redshift project web page</a>:
</p>
<dl><dd>Redshift adjusts the color temperature of your screen according to your surroundings. This may help your eyes hurt less if you are working in front of the screen at night. This program is inspired by <a rel="nofollow" class="external text" href="http://justgetflux.com">f.lux</a>....</dd></dl>
<p>The project is developed on <a rel="nofollow" class="external text" href="https://github.com/jonls/redshift">GitHub</a>. At the moment, Redshift <a rel="nofollow" class="external text" href="https://github.com/jonls/redshift/issues/55">only works</a> on <a href="../en/Xorg.html" title="Xorg">Xorg</a>.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Desktop_environments"><span class="tocnumber">1.1</span> <span class="toctext">Desktop environments</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Autostart"><span class="tocnumber">1.2</span> <span class="toctext">Autostart</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Quick_start"><span class="tocnumber">2.1</span> <span class="toctext">Quick start</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Automatic_location_based_on_GPS"><span class="tocnumber">2.2</span> <span class="toctext">Automatic location based on GPS</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Manual_setup"><span class="tocnumber">2.3</span> <span class="toctext">Manual setup</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Use_real_screen_brightness"><span class="tocnumber">2.4</span> <span class="toctext">Use real screen brightness</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#Troubleshooting"><span class="tocnumber">3</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Screen_1_could_not_be_found"><span class="tocnumber">3.1</span> <span class="toctext">Screen 1 could not be found</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#redshift-gtk_will_not_start"><span class="tocnumber">3.2</span> <span class="toctext">redshift-gtk will not start</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Failed_to_run_Redshift_due_to_geoclue2"><span class="tocnumber">3.3</span> <span class="toctext">Failed to run Redshift due to geoclue2</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#If_you_can.27t_get_redshift_to_autostart_in_i3"><span class="tocnumber">3.4</span> <span class="toctext">If you can't get redshift to autostart in i3</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=redshift">redshift</a></span> package. Alternatively, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/redshift-minimal/">redshift-minimal</a></span><sup><small>AUR</small></sup> package, for a version with minimal dependencies.
</p>
<h3><span class="mw-headline" id="Desktop_environments">Desktop environments</span></h3>
<p>For desktop environments, the <code>redshift-gtk</code> command is installed with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=redshift">redshift</a></span> package. <code>redshift-gtk</code> provides a system tray icon for controlling redshift and requires these three packages to work: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=python-gobject">python-gobject</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=python-xdg">python-xdg</a></span>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=librsvg">librsvg</a></span>; all of them are listed as optional dependencies of the main <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=redshift">redshift</a></span> package. <a href="../en/KDE.html" title="KDE">KDE</a> users can use the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/plasma5-applets-redshift-control-git/">plasma5-applets-redshift-control-git</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Autostart">Autostart</span></h3>
<p>There are several options to have redshift automatically started:
</p>
<ul>
<li> By launching redshift with a script under <code>/etc/X11/xinit/xinitrc.d/</code>.</li>
<li> By using the provided <a href="../en/Systemd.html#Using_units" title="Systemd">systemd service unit files</a>. Be careful: the service can only be started in user mode, see <a href="../en/Systemd/User.html#Basic_setup" title="Systemd/User">systemd/User#Basic setup</a>. Two service files are provided: <code>/usr/lib/systemd/user/redshift.service</code> and <code>/usr/lib/systemd/user/redshift-gtk.service</code>. Activate only one of them depending on whether or not you want the system tray icon. The <code>DISPLAY</code> environment variable needs to be configured. See <a href="../en/Systemd/User.html#DISPLAY_and_XAUTHORITY" title="Systemd/User">systemd/User#DISPLAY and XAUTHORITY</a>.</li>
<li> By right-clicking the system tray icon when redshift-gtk or plasma5-applets-redshift-control is already launched and selecting 'Autostart'.</li>
</ul>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The redshift services files contains <code>Restart=always</code> so the service will restart infinitely (see <code>man systemd.service</code>) </div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Redshift will at least need your location to start, meaning the latitude and longitude of your location. Redshift employs several routines for obtaining your location. If none of them works (e.g. none of the used helper programs is installed), you need to enter your location manually: For most places/cities an easy way is to look up the wikipedia page of that place and get the location from there (search the page for "coordinates").
</p>
<h3><span class="mw-headline" id="Quick_start">Quick start</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong><a rel="nofollow" class="external text" href="http://www.latlong.net/">Latlong.net</a> provides a service getting the Latitude and Longitude coordinates.</div>
<p>To just get it up and running with a basic setup, issue:
</p>
<pre> $ redshift -l LAT:LON
</pre>
<p>where LAT is the latitude and LON is the longitude of your location.
</p>
<h3><span class="mw-headline" id="Automatic_location_based_on_GPS">Automatic location based on GPS</span></h3>
<p>You can also use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gpsd">gpsd</a></span> to automatically determine your GPS location and use it as an input for Redshift. Create the following script and pass <code>$lat</code> and <code>$lon</code> to <code>redshift -l $lat;$lon</code>:
</p>
<pre>#!/bin/bash
date
#gpsdata=$( gpspipe -w -n 10 |   grep -m 1 lon )
gpsdata=$( gpspipe -w | grep -m 1 TPV )
lat=$( echo "$gpsdata"  | jsawk 'return this.lat' )
lon=$( echo "$gpsdata"  | jsawk 'return this.lon' )
alt=$( echo "$gpsdata"  | jsawk 'return this.alt' )
dt=$( echo "$gpsdata" | jsawk 'return this.time' )
echo "$dt"
echo "You are here: $lat, $lon at $alt"
</pre>
<p>For more information, see <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1389735#p1389735">this</a> forums thread.
</p>
<h3><span class="mw-headline" id="Manual_setup">Manual setup</span></h3>
<p>Redshift reads the configuration file <code>~/.config/redshift.conf</code>, if it exists. However, Redshift does not create that configuration file, so you have to create it manually.
Below is an example (copied from the <a rel="nofollow" class="external text" href="http://jonls.dk/redshift/">Redshift website</a>).
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>There seems to be a bug in Redshift that causes the transition option in the configuration file to not work as described: Instead of handling the transition between day and night it <b>only</b> changes the transition between application start-up and shutdown (and delay the latter as a consequence). See the <a href="../en/Talk:Redshift.html#Day_and_night_transition" title="Talk:Redshift">talk page</a> and the <a rel="nofollow" class="external text" href="https://github.com/jonls/redshift/issues/270">issue on the Redshift project page</a> for more information.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/redshift.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">; Global settings for redshift
[redshift]
; Set the day and night screen temperatures
temp-day=5700
temp-night=3500

; Enable/Disable a smooth transition between day and night
; 0 will cause a direct change from day to night screen temperature.
; 1 will gradually increase or decrease the screen temperature.
transition=1

; Set the screen brightness. Default is 1.0.
;brightness=0.9
; It is also possible to use different settings for day and night
; since version 1.8.
;brightness-day=0.7
;brightness-night=0.4
; Set the screen gamma (for all colors, or each color channel
; individually)
gamma=0.8
;gamma=0.8:0.7:0.8
; This can also be set individually for day and night since
; version 1.10.
;gamma-day=0.8:0.7:0.8
;gamma-night=0.6

; Set the location-provider: 'geoclue2' or 'manual'
; type 'redshift -l list' to see possible values.
; The location provider settings are in a different section.
location-provider=manual

; Set the adjustment-method: 'randr', 'vidmode'
; type 'redshift -m list' to see all possible values.
; 'randr' is the preferred method, 'vidmode' is an older API.
; but works in some cases when 'randr' does not.
; The adjustment method settings are in a different section.
adjustment-method=randr

; Configuration of the location-provider:
; type 'redshift -l PROVIDER:help' to see the settings.
; ex: 'redshift -l manual:help'
; Keep in mind that longitudes west of Greenwich (e.g. the Americas)
; are negative numbers.
[manual]
lat=48.1
lon=11.6

; Configuration of the adjustment-method
; type 'redshift -m METHOD:help' to see the settings.
; ex: 'redshift -m randr:help'
; In this example, randr is configured to adjust screen 1.
; Note that the numbering starts from 0, so this is actually the
; second screen. If this option is not specified, Redshift will try
; to adjust _all_ screens.
[randr]
screen=1</pre>
<h3><span class="mw-headline" id="Use_real_screen_brightness">Use real screen brightness</span></h3>
<p>Redshift has a brightness adjustment setting, but it does not work the way most people might expect. In fact it is a fake brightness adjustment obtained by manipulating the gamma ramps, which means that it does not reduce the backlight of the screen. <a rel="nofollow" class="external autonumber" href="http://jonls.dk/redshift/#known-bugs-and-limitations">[1]</a>
</p>
<p>Changing screen backlight is possible with redshift hooks and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xorg-xrandr">xorg-xrandr</a></span>.
You need to create a file in <code>~/.config/redshift/hooks</code> and make it executable. You can use and edit this example. 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">
~/.config/redshift/hooks/brightness.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

# Set brightness via xbrightness when redshift status changes

# Set brightness values for each status.
# Range from 1 to 100 is valid
brightness_day="100"
brightness_transition="50"
brightness_night="10"
# Set fade time for changes to one minute
fade_time=60000

case $1 in
	period-changed)
		case $3 in
			night)
				xbacklight -set $brightness_night -time $fade_time
				;;
			transition)
				xbacklight -set $brightness_transition -time $fade_time
				;;
			daytime)
				xbacklight -set $brightness_day -time $fade_time
				;;
		esac
		;;
esac</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Screen_1_could_not_be_found">Screen 1 could not be found</span></h3>
<p>Locate configuration-file "redshift.conf" in your distribution and change "screen 1" to "screen 0"
</p>
<h3><span class="mw-headline" id="redshift-gtk_will_not_start">redshift-gtk will not start</span></h3>
<p>redshift-gtk requires optional dependencies to work correctly. To verify any missing dependencies, run <code>redshift-gtk</code> in the command line. Similar output to the following would be produced:
</p>
<pre> Traceback (most recent call last):
   File "/usr/bin/redshift-gtk", line 26, in &lt;module&gt;
     from redshift_gtk.statusicon import run
   File "/usr/lib/python3.4/site-packages/redshift_gtk/statusicon.py", line 31, in &lt;module&gt;
     from gi.repository import Gtk, GLib
 ImportError: No module named 'gi.repository'
</pre>
<p>If this is the case, installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=python-gobject">python-gobject</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=python-xdg">python-xdg</a></span>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=librsvg">librsvg</a></span> packages solves this issue.
</p>
<h3><span class="mw-headline" id="Failed_to_run_Redshift_due_to_geoclue2">Failed to run Redshift due to geoclue2</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Prior to apply the method below, close redshift-gtk and restart the geoclue service. Sometimes the location service fails due to e.g. connection established after the location service.</div>
<p>If using Gnome, you can also toggle Location Services to "On" in "Settings -&gt; Privacy"
</p>
<p>By default, the geoclue2 configuration files does not allow Redshift access.
In order to allow access, add the following lines to <code>/etc/geoclue/geoclue.conf</code>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/geoclue/geoclue.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[redshift]
allowed=true
system=false
users=</pre>
<h3><span class="mw-headline" id="If_you_can.27t_get_redshift_to_autostart_in_i3">If you can't get redshift to autostart in i3</span></h3>
<p>You can add this to your i3 config file.
</p>
<pre>   exec --no-startup-id redshift-gtk
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external text" href="http://jonls.dk/redshift">Redshift website</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://github.com/jonls/redshift">Redshift on github</a>
</li>
<li> <b>sct</b> — set color temperature</li>
</ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://aur.archlinux.org/packages/sct/">https://aur.archlinux.org/packages/sct/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/sct/">sct</a></span><sup><small>AUR</small></sup>
</dd></dl>

</div>
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:X_server.html" title="Category:X server">X server</a></li>
<li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../en/Category:Eye_candy.html" title="Category:Eye candy">Eye candy</a></li>
</ul>
</div></div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
