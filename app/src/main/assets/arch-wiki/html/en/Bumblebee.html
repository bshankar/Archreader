<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Bumblebee - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Bumblebee skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Bumblebee</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/NVIDIA_Optimus.html" title="NVIDIA Optimus">NVIDIA Optimus</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Nouveau.html" title="Nouveau">Nouveau</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Intel_graphics.html" title="Intel graphics">Intel graphics</a></li>
</ul>
</div>
<p>From Bumblebee's <a rel="nofollow" class="external text" href="https://github.com/Bumblebee-Project/Bumblebee/wiki/FAQ">FAQ</a>:
</p>
<p>"<i>Bumblebee is an effort to make NVIDIA Optimus enabled laptops work in GNU/Linux systems. Such feature involves two graphics cards with two different power consumption profiles plugged in a layered way sharing a single framebuffer.</i>"
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Bumblebee:_Optimus_for_Linux"><span class="tocnumber">1</span> <span class="toctext">Bumblebee: Optimus for Linux</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Installing_Bumblebee_with_Intel.2FNVIDIA"><span class="tocnumber">2.1</span> <span class="toctext">Installing Bumblebee with Intel/NVIDIA</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Installing_Bumblebee_with_Intel.2FNouveau"><span class="tocnumber">2.2</span> <span class="toctext">Installing Bumblebee with Intel/Nouveau</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Usage"><span class="tocnumber">3</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Test"><span class="tocnumber">3.1</span> <span class="toctext">Test</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#General_usage"><span class="tocnumber">3.2</span> <span class="toctext">General usage</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Configuration"><span class="tocnumber">4</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-9">
<a href="#Optimizing_speed"><span class="tocnumber">4.1</span> <span class="toctext">Optimizing speed</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Using_VirtualGL_as_bridge"><span class="tocnumber">4.1.1</span> <span class="toctext">Using VirtualGL as bridge</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Primusrun"><span class="tocnumber">4.1.2</span> <span class="toctext">Primusrun</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12">
<a href="#Power_management"><span class="tocnumber">4.2</span> <span class="toctext">Power management</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Default_power_state_of_NVIDIA_card_using_bbswitch"><span class="tocnumber">4.2.1</span> <span class="toctext">Default power state of NVIDIA card using bbswitch</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Enable_NVIDIA_card_during_shutdown"><span class="tocnumber">4.2.2</span> <span class="toctext">Enable NVIDIA card during shutdown</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Enable_NVIDIA_card_after_waking_from_suspend"><span class="tocnumber">4.2.3</span> <span class="toctext">Enable NVIDIA card after waking from suspend</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16">
<a href="#Multiple_monitors"><span class="tocnumber">4.3</span> <span class="toctext">Multiple monitors</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#Outputs_wired_to_the_Intel_chip"><span class="tocnumber">4.3.1</span> <span class="toctext">Outputs wired to the Intel chip</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Output_wired_to_the_NVIDIA_chip"><span class="tocnumber">4.3.2</span> <span class="toctext">Output wired to the NVIDIA chip</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Switch_between_discrete_and_integrated_like_Windows"><span class="tocnumber">5</span> <span class="toctext">Switch between discrete and integrated like Windows</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#CUDA_without_Bumblebee"><span class="tocnumber">6</span> <span class="toctext">CUDA without Bumblebee</span></a></li>
<li class="toclevel-1 tocsection-21">
<a href="#Troubleshooting"><span class="tocnumber">7</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#.5BVGL.5D_ERROR:_Could_not_open_display_:8"><span class="tocnumber">7.1</span> <span class="toctext">[VGL] ERROR: Could not open display :8</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Xlib:_extension_.22GLX.22_missing_on_display_.22:0.0.22"><span class="tocnumber">7.2</span> <span class="toctext">Xlib: extension "GLX" missing on display ":0.0"</span></a></li>
<li class="toclevel-2 tocsection-24">
<a href="#.5BERROR.5DCannot_access_secondary_GPU:_No_devices_detected"><span class="tocnumber">7.3</span> <span class="toctext">[ERROR]Cannot access secondary GPU: No devices detected</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#NVIDIA.280.29:_Failed_to_assign_any_connected_display_devices_to_X_screen_0"><span class="tocnumber">7.3.1</span> <span class="toctext">NVIDIA(0): Failed to assign any connected display devices to X screen 0</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#Failed_to_initialize_the_NVIDIA_GPU_at_PCI:1:0:0_.28GPU_fallen_off_the_bus_.2F_RmInitAdapter_failed.21.29"><span class="tocnumber">7.3.2</span> <span class="toctext">Failed to initialize the NVIDIA GPU at PCI:1:0:0 (GPU fallen off the bus / RmInitAdapter failed!)</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#Could_not_load_GPU_driver"><span class="tocnumber">7.3.3</span> <span class="toctext">Could not load GPU driver</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#NOUVEAU.280.29:_.5Bdrm.5D_failed_to_set_drm_interface_version"><span class="tocnumber">7.3.4</span> <span class="toctext">NOUVEAU(0): [drm] failed to set drm interface version</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-29"><a href="#.2Fdev.2Fdri.2Fcard0:_failed_to_set_DRM_interface_version_1.4:_Permission_denied"><span class="tocnumber">7.4</span> <span class="toctext">/dev/dri/card0: failed to set DRM interface version 1.4: Permission denied</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#ERROR:_ld.so:_object_.27libdlfaker.so.27_from_LD_PRELOAD_cannot_be_preloaded:_ignored"><span class="tocnumber">7.5</span> <span class="toctext">ERROR: ld.so: object 'libdlfaker.so' from LD_PRELOAD cannot be preloaded: ignored</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Fatal_IO_error_11_.28Resource_temporarily_unavailable.29_on_X_server"><span class="tocnumber">7.6</span> <span class="toctext">Fatal IO error 11 (Resource temporarily unavailable) on X server</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Video_tearing"><span class="tocnumber">7.7</span> <span class="toctext">Video tearing</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Bumblebee_cannot_connect_to_socket"><span class="tocnumber">7.8</span> <span class="toctext">Bumblebee cannot connect to socket</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Running_X.org_from_console_after_login_.28rootless_X.org.29"><span class="tocnumber">7.9</span> <span class="toctext">Running X.org from console after login (rootless X.org)</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#Primusrun_mouse_delay.2Fdisable_VSYNC"><span class="tocnumber">7.10</span> <span class="toctext">Primusrun mouse delay/disable VSYNC</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Primus_issues_under_compositing_window_managers"><span class="tocnumber">7.11</span> <span class="toctext">Primus issues under compositing window managers</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#Problems_with_bumblebee_after_resuming_from_standby"><span class="tocnumber">7.12</span> <span class="toctext">Problems with bumblebee after resuming from standby</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Optirun_doesn.27t_work.2C_no_debug_output"><span class="tocnumber">7.13</span> <span class="toctext">Optirun doesn't work, no debug output</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-39"><a href="#See_also"><span class="tocnumber">8</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Bumblebee:_Optimus_for_Linux">Bumblebee: Optimus for Linux</span></h2>
<p><a rel="nofollow" class="external text" href="http://www.nvidia.com/object/optimus_technology.html">Optimus Technology</a> is a <i><a rel="nofollow" class="external text" href="http://hybrid-graphics-linux.tuxfamily.org/index.php?title=Hybrid_graphics">hybrid graphics</a></i> implementation without a hardware multiplexer. The integrated GPU manages the display while the dedicated GPU manages the most demanding rendering and ships the work to the integrated GPU to be displayed. When the laptop is running on battery supply, the dedicated GPU is turned off to save power and prolong the battery life. It has also been tested successfully with desktop machines with Intel integrated graphics and an nVidia dedicated graphics card. 
</p>
<p>Bumblebee is a software implementation comprising of two parts:
</p>
<ul>
<li> Render programs off-screen on the dedicated video card and display it on the screen using the integrated video card. This bridge is provided by VirtualGL or primus (read further) and connects to a X server started for the discrete video card.</li>
<li> Disable the dedicated video card when it is not in use (see the <a href="#Power_management">#Power management</a> section)</li>
</ul>
<p>It tries to mimic the Optimus technology behavior; using the dedicated GPU for rendering when needed and power it down when not in use. The present releases only support rendering on-demand, automatically starting a program with the discrete video card based on workload is not implemented.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Before installing Bumblebee, check your BIOS and activate Optimus (older laptops call it "switchable graphics") if possible (BIOS doesn't have to provide this option). If neither "Optimus" or "switchable" is in the bios, still make sure both gpu's will be enabled and that the integrated graphics (igfx) is initial display (primary display). The display should be connected to the onboard integrated graphics, not the discrete graphics card. If integrated graphics had previously been disabled and discrete graphics drivers installed, be sure to remove <code>/etc/X11/xorg.conf</code> or the conf file in <code>/etc/X11/xorg.conf.d</code> related to the discrete graphics card.
</p>
<h3><span class="mw-headline" id="Installing_Bumblebee_with_Intel.2FNVIDIA">Installing Bumblebee with Intel/NVIDIA</span></h3>
<p>Install:
</p>
<ul><li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bumblebee">bumblebee</a></span> - The main package providing the daemon and client programs.</li></ul>
<dl><dd> <div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bumblebee">bumblebee</a></span> depends on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mesa-libgl">mesa-libgl</a></span> and provides all <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia-libgl">nvidia-libgl</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia-340xx-libgl">nvidia-340xx-libgl</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia-304xx-libgl">nvidia-304xx-libgl</a></span> to avoid dependency conflict between the respective libgl versions.</div>
</dd></dl>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mesa">mesa</a></span> - An open-source implementation of the <b>OpenGL</b> specification.</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> - Intel driver.</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia">nvidia</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia-340xx">nvidia-340xx</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia-304xx">nvidia-304xx</a></span> - Install appropriate NVIDIA driver. For more information read <a href="../en/NVIDIA.html#Installation" title="NVIDIA">NVIDIA#Installation</a>.</li>
</ul>
<p>For 32-bit (<a href="../en/Multilib.html" title="Multilib">Multilib</a> must be enabled) applications support on 64-bit machines, install:
</p>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=lib32-virtualgl">lib32-virtualgl</a></span> - A render/display bridge for 32 bit applications.</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=lib32-nvidia-utils">lib32-nvidia-utils</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=lib32-nvidia-340xx-utils">lib32-nvidia-340xx-utils</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=lib32-nvidia-304xx-utils">lib32-nvidia-304xx-utils</a></span> - match the version of the 64 bit package.</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=lib32-mesa-libgl">lib32-mesa-libgl</a></span> and make sure that <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=lib32-nvidia-libgl">lib32-nvidia-libgl</a></span> is <b>not</b> installed</li>
</ul>
<p>In order to use Bumblebee, it is necessary to add your regular <i>user</i> to the <code>bumblebee</code> group:
</p>
<pre># gpasswd -a <i>user</i> bumblebee
</pre>
<p>Also <a href="../en/Systemd.html#Using_units" title="Enable" class="mw-redirect">enable</a> <code>bumblebeed.service</code>. Reboot your system and follow <a href="#Usage">#Usage</a>.
</p>
<h3><span class="mw-headline" id="Installing_Bumblebee_with_Intel.2FNouveau">Installing Bumblebee with Intel/Nouveau</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Bumblebee">Talk:Bumblebee#</a>)</div>
</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>This method is deprecated and will most likely not work anymore. Use the nvidia module instead. If you want nouveau, use <a href="../en/PRIME.html" title="PRIME">PRIME</a>.</div>
<p>Install:
</p>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-nouveau">xf86-video-nouveau</a></span> - experimental 3D acceleration driver.</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mesa">mesa</a></span> - Mesa classic DRI with Gallium3D drivers and 3D graphics libraries.</li>
</ul>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If, when using <code>primusrun</code> on a system with the nouveau driver, you are getting:
<pre>primus: fatal: failed to load any of the libraries: /usr/$LIB/nvidia/libGL.so.1 
/usr/$LIB/nvidia/libGL.so.1: Cannot open shared object file: No such file or directory
</pre>
<p>You should add the following in <code>/usr/bin/primus</code> after <code>PRIMUS_libGL</code>:
</p>
<pre>export PRIMUS_libGLa='/usr/$LIB/libGL.so.1'
</pre>
If you want, create a new script (for example <i>primusnouveau</i>).</div>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<h3><span class="mw-headline" id="Test">Test</span></h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mesa-demos">mesa-demos</a></span> and use <code>glxgears</code> to test if if Bumblebee works with your Optimus system:
</p>
<pre>$ optirun glxgears -info
</pre>
<p>If it fails, try the following commands:
</p>
<ul><li>64 bit system:</li></ul>
<pre>$ optirun glxspheres64
</pre>
<ul><li>32 bit system:</li></ul>
<pre>$ optirun glxspheres32
</pre>
<p>If the window with animation shows up, Optimus with Bumblebee is working.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If <code>glxgears</code> failed, but <code>glxspheres<i>XX</i></code> worked, always replace "<code>glxgears</code>" with "<code>glxspheres<i>XX</i></code>" in all cases.</div>
<h3><span class="mw-headline" id="General_usage">General usage</span></h3>
<pre>$ optirun [options] <i>application</i> [application-parameters]
</pre>
<p>For example, start Windows applications with Optimus:
</p>
<pre>$ optirun wine application.exe
</pre>
<p>For another example, open NVIDIA Settings panel with Optimus:
</p>
<pre>$ optirun -b none nvidia-settings -c :8
</pre>
<dl><dd> <div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>A patched version of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvdock">nvdock</a></span> is available in the package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nvdock-bumblebee/">nvdock-bumblebee</a></span><sup><small>AUR</small></sup>
</div>
</dd></dl>
<p>For a list of the options for <code>optirun</code>, view its manual page:
</p>
<pre>$ man optirun
</pre>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>You can configure the behaviour of Bumblebee to fit your needs. Fine tuning like speed optimization, power management and other stuff can be configured in <code>/etc/bumblebee/bumblebee.conf</code>
</p>
<h3><span class="mw-headline" id="Optimizing_speed">Optimizing speed</span></h3>
<h4><span class="mw-headline" id="Using_VirtualGL_as_bridge">Using VirtualGL as bridge</span></h4>
<p>Bumblebee renders frames for your Optimus NVIDIA card in an invisible X Server with VirtualGL and transports them back to your visible X Server. Frames will be compressed before they are transported - this saves bandwidth and can be used for speed-up optimization of bumblebee:
</p>
<p>To use another compression method for a single application:
</p>
<pre>$ optirun -c <i>compress-method</i> application
</pre>
<p>The method of compress will affect performance in the GPU/CPU usage. Compressed methods will mostly load the CPU. However, uncompressed methods will mostly load the GPU.
</p>
<p>Compressed methods
</p>
<dl><dd><ul>
<li><code>jpeg</code></li>
<li><code>rgb</code></li>
<li><code>yuv</code></li>
</ul></dd></dl>
<p>Uncompressed methods
</p>
<dl><dd><ul>
<li><code>proxy</code></li>
<li><code>xv</code></li>
</ul></dd></dl>
<p>Here is a performance table tested with <a href="../en/ASUS_N550JV.html" title="ASUS N550JV">ASUS N550JV</a> laptop and benchmark app <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/unigine-heaven/">unigine-heaven</a></span><sup><small>AUR</small></sup>:
</p>
<table class="wikitable">
<tr>
<th> Command </th>
<th> FPS </th>
<th> Score </th>
<th> Min FPS </th>
<th> Max FPS
</th>
</tr>
<tr>
<td> optirun unigine-heaven </td>
<td> 25.0 </td>
<td> 630 </td>
<td> 16.4 </td>
<td> 36.1
</td>
</tr>
<tr>
<td> optirun -c jpeg unigine-heaven </td>
<td> 24.2 </td>
<td> 610 </td>
<td> 9.5 </td>
<td> 36.8
</td>
</tr>
<tr>
<td> optirun -c rgb unigine-heaven </td>
<td> 25.1 </td>
<td> 632 </td>
<td> 16.6 </td>
<td> 35.5
</td>
</tr>
<tr>
<td> optirun -c yuv unigine-heaven </td>
<td> 24.9 </td>
<td> 626 </td>
<td> 16.5 </td>
<td> 35.8
</td>
</tr>
<tr>
<td> optirun -c proxy unigine-heaven </td>
<td> 25.0 </td>
<td> 629 </td>
<td> 16.0 </td>
<td> 36.1
</td>
</tr>
<tr>
<td> optirun -c xv unigine-heaven </td>
<td> 22.9 </td>
<td> 577 </td>
<td> 15.4 </td>
<td> 32.2
</td>
</tr>
</table>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Lag spikes occurred when <code>jpeg</code> compression method was used.</div>
<p>To use a standard compression for all applications, set the <code>VGLTransport</code> to <code><i>compress-method</i></code> in <code>/etc/bumblebee/bumblebee.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bumblebee/bumblebee.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[...]
[optirun]
VGLTransport=proxy
[...]</pre>
<p>You can also play with the way VirtualGL reads back the pixels from your graphic card. Setting <code>VGL_READBACK</code> environment variable to <code>pbo</code> should increase the performance. Compare these two:
</p>
<pre># PBO should be faster.
VGL_READBACK=pbo optirun glxgears
# The default value is sync.
VGL_READBACK=sync optirun glxgears
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>CPU frequency scaling will affect directly on render performance</div>
<h4><span class="mw-headline" id="Primusrun">Primusrun</span></h4>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Since compositing hurts performance, invoking primus when a compositing WM is active is not recommended. See <a href="#Primus_issues_under_compositing_window_managers">#Primus issues under compositing window managers</a>.</div>
<p><code>primusrun</code> (from package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=primus">primus</a></span>) is becoming the default choice, because it consumes less power and sometimes provides better performance than <code>optirun</code>/<code>virtualgl</code>. It may be run separately, but it does not accept options as <code>optirun</code> does. Setting <code>primus</code> as the bridge for <code>optirun</code> provides more flexibility.
</p>
<p>For 32-bit applications support on 64-bit machines, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=lib32-primus">lib32-primus</a></span> (<a href="../en/Multilib.html" title="Multilib">multilib</a> must be enabled).
</p>
<p>Usage (run separately):
</p>
<pre>$ primusrun glxgears
</pre>
<p>Usage (as a bridge for <code>optirun</code>):
</p>
<p>The default configuration sets <code>virtualgl</code> as the bridge. Override that on the command line:
</p>
<pre>$ optirun -b primus glxgears
</pre>
<p>Or, set <code>Bridge=primus</code> in <code>/etc/bumblebee/bumblebee.conf</code> and you won't have to specify it on the command line.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>Refer to <a href="#Primusrun_mouse_delay.2Fdisable_VSYNC">#Primusrun mouse delay/disable VSYNC</a> if you want to disable <code>VSYNC</code>. It can also remove mouse input delay lag and slightly increase the performance.</div>
<h3><span class="mw-headline" id="Power_management">Power management</span></h3>
<p>The goal of the power management feature is to turn off the NVIDIA card when it is not used by Bumblebee any more. If <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bbswitch">bbswitch</a></span> (or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bbswitch-dkms">bbswitch-dkms</a></span>) is installed, it will be detected automatically when the Bumblebee daemon starts. No additional configuration is necessary. However, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bbswitch">bbswitch</a></span> is for <a rel="nofollow" class="external text" href="https://bugs.launchpad.net/ubuntu/+source/bbswitch/+bug/1338404/comments/6">Optimus laptops only and will not work on desktop computers</a>. So, Bumblebee power management is not available for desktop computers, and there is no reason to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bbswitch">bbswitch</a></span> on a desktop. (Nevertheless, the other features of Bumblebee do work on some desktop computers.)
</p>
<h4><span class="mw-headline" id="Default_power_state_of_NVIDIA_card_using_bbswitch">Default power state of NVIDIA card using bbswitch</span></h4>
<p>The default behavior of bbswitch is to leave the card power state unchanged. <code>bumblebeed</code> does disable the card when started, so the following is only necessary if you use bbswitch without bumblebeed.
</p>
<p>Set <code>load_state</code> and <code>unload_state</code> module options according to your needs (see <a rel="nofollow" class="external text" href="https://github.com/Bumblebee-Project/bbswitch">bbswitch documentation</a>).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/bbswitch.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options bbswitch load_state=0 unload_state=1</pre>
<h4><span class="mw-headline" id="Enable_NVIDIA_card_during_shutdown">Enable NVIDIA card during shutdown</span></h4>
<p>The NVIDIA card may not correctly initialize during boot if the card was powered off when the system was last shutdown.  One option is to set <code>TurnCardOffAtExit=false</code> in <code>/etc/bumblebee/bumblebee.conf</code>, however this will enable the card everytime you stop the Bumblebee daemon, even if done manually.  To ensure that the NVIDIA card is always powered on during shutdown, add the following <a href="../en/Systemd.html" title="Systemd">systemd</a> service (if using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bbswitch">bbswitch</a></span>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/nvidia-enable.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Enable NVIDIA card
DefaultDependencies=no

[Service]
Type=oneshot
ExecStart=/bin/sh -c 'echo ON &gt; /proc/acpi/bbswitch'

[Install]
WantedBy=shutdown.target</pre>
<p>Then enable the service by running <code>systemctl enable nvidia-enable.service</code> at the root prompt.
</p>
<h4><span class="mw-headline" id="Enable_NVIDIA_card_after_waking_from_suspend">Enable NVIDIA card after waking from suspend</span></h4>
<p>The bumblebee daemon may fail to activate the graphics card after suspending. A possible fix involves setting <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=bbswitch">bbswitch</a></span> as the default method for power management in <code>/etc/bumblebee/bumblebee.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bumblebee/bumblebee.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[driver-nvidia]
PMmethod=bbswitch

# ...

[driver-nouveau]
PMmethod=bbswitch</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>This fix seems to work only after rebooting the system. Restarting the bumblebee service is not enough.</div>
<h3><span class="mw-headline" id="Multiple_monitors">Multiple monitors</span></h3>
<h4><span class="mw-headline" id="Outputs_wired_to_the_Intel_chip">Outputs wired to the Intel chip</span></h4>
<p>If the port (DisplayPort/HDMI/VGA) is wired to the Intel chip, you can set up multiple monitors with xorg.conf. Set them to use the Intel card, but Bumblebee can still use the NVIDIA card. One example configuration is below for two identical screens with 1080p resolution and using the HDMI out.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Screen"
    Identifier     "Screen0"
    Device         "intelgpu0"
    Monitor        "Monitor0"
    DefaultDepth    24
    Option         "TwinView" "0"
    SubSection "Display"
        Depth          24
        Modes          "1980x1080_60.00"
    EndSubSection
EndSection

Section "Screen"
    Identifier     "Screen1"
    Device         "intelgpu1"
    Monitor        "Monitor1"
    DefaultDepth   24
    Option         "TwinView" "0"
    SubSection "Display"
        Depth          24
        Modes          "1980x1080_60.00"
    EndSubSection
EndSection

Section "Monitor"
    Identifier     "Monitor0"
    Option         "Enable" "true"
EndSection

Section "Monitor"
    Identifier     "Monitor1"
    Option         "Enable" "true"
EndSection

Section "Device"
    Identifier     "intelgpu0"
    Driver         "intel"
    Option         "XvMC" "true"
    Option         "UseEvents" "true"
    Option         "AccelMethod" "UXA"
    BusID          "PCI:0:2:0"
EndSection

Section "Device"
    Identifier     "intelgpu1"
    Driver         "intel"
    Option         "XvMC" "true"
    Option         "UseEvents" "true"
    Option         "AccelMethod" "UXA"
    BusID          "PCI:0:2:0"
EndSection

Section "Device"
    Identifier "nvidiagpu1"
    Driver "nvidia"
    BusID "PCI:0:1:0"
EndSection</pre>
<p>You need to probably change the BusID for both the Intel and the NVIDIA card.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci | grep VGA</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09)
</pre>
<p>The BusID is 0:2:0
</p>
<h4><span class="mw-headline" id="Output_wired_to_the_NVIDIA_chip">Output wired to the NVIDIA chip</span></h4>
<p>On some notebooks, the digital Video Output (HDMI or DisplayPort) is hardwired to the NVIDIA chip. If you want to use all the displays on such a system simultaneously, you have to run 2 X Servers. The first will be using the Intel driver for the notebooks panel and a display connected on VGA. The second will be started through optirun on the NVIDIA card, and drives the digital display.
</p>
<p><i>intel-virtual-output</i> is a tool provided in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> driver set, as of v2.99. When run in a terminal, it will daemonize itself unless the <code>-f</code> switch is used. Once the tool is running, it activates Bumblebee (Bumblebee can be left as default install), and any displays attached will be automatically detected, and manageable via any desktop display manager such as xrandr or KDE Display. See the <a rel="nofollow" class="external text" href="https://github.com/Bumblebee-Project/Bumblebee/wiki/Multi-monitor-setup">Bumblebee wiki page</a> for more information.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>In <code>/etc/bumblebee/xorg.conf.nvidia</code> change the lines <code>UseEDID</code> and <code>Option "AutoAddDevices" "false"</code> to <code>"true"</code>, if you are having trouble with device resolution detection. You will also need to comment out the line <code>Option "UseDisplayDevices" "none"</code> in order to use the display connected to the NVIDIA GPU.</div>
<p>Commandline usage is as follows:
</p>
<pre>intel-virtual-output [OPTION]... [TARGET_DISPLAY]...
 -d &lt;source display&gt;  source display
 -f                   keep in foreground (do not detach from console and daemonize)
 -b                   start bumblebee
 -a                   connect to all local displays (e.g. :1, :2, etc)
 -S                   disable use of a singleton and launch a fresh intel-virtual-output process
 -v                   all verbose output, implies -f
 -V &lt;category&gt;        specific verbose output, implies -f
 -h                   this help
</pre>
<p>If no target displays are parsed on the commandline, <i>intel-virtual-output</i> will attempt to connect to any local display and then start bumblebee.<a rel="nofollow" class="external autonumber" href="http://cgit.freedesktop.org/xorg/driver/xf86-video-intel/tree/tools/">[1]</a>
</p>
<p>The advantage of using <i>intel-virtual-output</i> in foreground mode is that once the external display is disconnected, <i>intel-virtual-output</i> can then be killed and bumblebee will disable the nvidia chip. Games can be run on the external screen by first exporting the display <code>export DISPLAY=:8</code>, and then running the game with <code>optirun <i>game_bin</i></code>, however, cursor and keyboard are not fully captured. Use <code>export DISPLAY=:0</code> to revert back to standard operation.
</p>
<h2><span class="mw-headline" id="Switch_between_discrete_and_integrated_like_Windows">Switch between discrete and integrated like Windows</span></h2>
<p>In Windows, the way that Optimus works is NVIDIA has a whitelist of applications that require Optimus for, and you can add applications to this whitelist as needed. When you launch the application, it automatically decides which card to use.
</p>
<p>To mimic this behavior in Linux, you can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libgl-switcheroo-git/">libgl-switcheroo-git</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/libgl-switcheroo-git">aur-mirror</a>]</sup>. After installing, you can add the below in your .xprofile.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xprofile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">mkdir -p /tmp/libgl-switcheroo-$USER/fs
gtkglswitch &amp;
libgl-switcheroo /tmp/libgl-switcheroo-$USER/fs &amp;</pre>
<p>To enable this, you must add the below to the shell that you intend to launch applications from (I simply added it to the .xprofile file)
</p>
<pre>export LD_LIBRARY_PATH=/tmp/libgl-switcheroo-$USER/fs/\$LIB${LD_LIBRARY_PATH+:}$LD_LIBRARY_PATH
</pre>
<p>Once this has all been done, every application you launch from this shell will pop up a GTK+ window asking which card you want to run it with (you can also add an application to the whitelist in the configuration). The configuration is located in <code>$XDG_CONFIG_HOME/libgl-switcheroo.conf</code>, usually <code>~/.config/libgl-switcheroo.conf</code>
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>This tool acts by making a FUSE file system and then adding it into the dynamic library searching path, which may lead to slow speed or even segmentation faults when launching a software.</div>
<h2><span class="mw-headline" id="CUDA_without_Bumblebee">CUDA without Bumblebee</span></h2>
<p>You can use CUDA without bumblebee. All you need to do is ensure that the nvidia card is on:
</p>
<pre> # tee /proc/acpi/bbswitch &lt;&lt;&lt; ON
</pre>
<p>Now when you start a CUDA application it is going to automatically load all the necessary modules.
</p>
<p>To turn off the nvidia card after using CUDA do:
</p>
<pre> # rmmod nvidia_uvm
 # rmmod nvidia
 # tee /proc/acpi/bbswitch &lt;&lt;&lt; OFF
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Please report bugs at <a rel="nofollow" class="external text" href="https://github.com/Bumblebee-Project/Bumblebee">Bumblebee-Project</a>'s GitHub tracker as described in its <a rel="nofollow" class="external text" href="https://github.com/Bumblebee-Project/Bumblebee/wiki/Reporting-Issues">wiki</a>.</div>
<h3><span class="mw-headline" id=".5BVGL.5D_ERROR:_Could_not_open_display_:8">[VGL] ERROR: Could not open display :8</span></h3>
<p>There is a known problem with some wine applications that fork and kill the parent process without keeping track of it (for example the free to play online game "Runes of Magic")
</p>
<p>This is a known problem with VirtualGL. As of bumblebee 3.1, so long as you have it installed, you can use Primus as your render bridge:
</p>
<pre>$ optirun -b primus wine <i>windows program</i>.exe
</pre>
<p>If this does not work, an alternative walkaround for this problem is:
</p>
<pre>$ optirun bash
$ optirun wine <i>windows program</i>.exe
</pre>
<p>If using NVIDIA drivers a fix for this problem is to edit <code>/etc/bumblebee/xorg.conf.nvidia</code> and change Option <code>ConnectedMonitor</code> to <code>CRT-0</code>.
</p>
<h3><span class="mw-headline" id="Xlib:_extension_.22GLX.22_missing_on_display_.22:0.0.22">Xlib: extension "GLX" missing on display ":0.0"</span></h3>
<p>If you tried to install the NVIDIA driver from NVIDIA website, this is not going to work.
</p>
<p>1. Uninstall that driver in the similar way:
</p>
<pre># ./NVIDIA-Linux-*.run --uninstall
</pre>
<p>2. Remove generated by NVIDIA Xorg configuration file:
</p>
<pre># rm /etc/X11/xorg.conf
</pre>
<p>3. (Re)install the correct NVIDIA driver: <a href="#Installing_Bumblebee_with_Intel.2FNVIDIA">#Installing Bumblebee with Intel/NVIDIA</a>
</p>
<h3><span class="mw-headline" id=".5BERROR.5DCannot_access_secondary_GPU:_No_devices_detected">[ERROR]Cannot access secondary GPU: No devices detected</span></h3>
<p>In some instances, running <code>optirun</code> will return:
</p>
<pre>[ERROR]Cannot access secondary GPU - error: [XORG] (EE) No devices detected.
[ERROR]Aborting because fallback start is disabled.
</pre>
<p>In this case, you will need to move the file <code>/etc/X11/xorg.conf.d/20-intel.conf</code> to somewhere else, <a href="../en/Systemd.html#Using_units" title="Restart" class="mw-redirect">restart</a> the bumblebeed daemon and it should work. If you do need to change some features for the Intel module, a workaround is to merge <code>/etc/X11/xorg.conf.d/20-intel.conf</code> to <code>/etc/X11/xorg.conf</code>.
</p>
<p>It could be also necessary to comment the driver line in <code>/etc/X11/xorg.conf.d/10-monitor.conf</code>.
</p>
<p>If you're using the <code>nouveau</code> driver you could try switching to the <code>nvidia</code> driver.
</p>
<p>You might need to define the NVIDIA card somewhere (e.g. file <code>/etc/X11/xorg.conf.d</code>), using the correct <code>BusID</code> according to <code>lspci</code> output:
</p>
<pre>
Section "Device"
    Identifier "nvidiagpu1"
    Driver "nvidia"
    BusID "PCI:0:1:0"
EndSection
</pre>
<p>Observe that the format of <code>lspci</code> output is in HEX, while in xorg it is in decimals. So if the output of <code>lspci</code> is, for example, <code>0a:00.0</code> the <code>BusID</code> should be <code>PCI:10:0:0</code>.
</p>
<p><br>
</p>
<h4><span class="mw-headline" id="NVIDIA.280.29:_Failed_to_assign_any_connected_display_devices_to_X_screen_0">NVIDIA(0): Failed to assign any connected display devices to X screen 0</span></h4>
<p>If the console output is:
</p>
<pre>[ERROR]Cannot access secondary GPU - error: [XORG] (EE) NVIDIA(0): Failed to assign any connected display devices to X screen 0
[ERROR]Aborting because fallback start is disabled.
</pre>
<p>You can change this line in <code>/etc/bumblebee/xorg.conf.nvidia</code>:
</p>
<pre>Option "ConnectedMonitor" "DFP"
</pre>
<p>to:
</p>
<pre>Option "ConnectedMonitor" "CRT"
</pre>
<h4><span class="mw-headline" id="Failed_to_initialize_the_NVIDIA_GPU_at_PCI:1:0:0_.28GPU_fallen_off_the_bus_.2F_RmInitAdapter_failed.21.29">Failed to initialize the NVIDIA GPU at PCI:1:0:0 (GPU fallen off the bus / RmInitAdapter failed!)</span></h4>
<p>Add <code>rcutree.rcu_idle_gp_delay=1</code> to the <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> of the <a href="../en/Bootloader.html" title="Bootloader" class="mw-redirect">bootloader</a> configuration (see also the original <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=169742">BBS post</a> for a configuration example).
</p>
<h4><span class="mw-headline" id="Could_not_load_GPU_driver">Could not load GPU driver</span></h4>
<p>If the console output is:
</p>
<pre>[ERROR]Cannot access secondary GPU - error: Could not load GPU driver
</pre>
<p>and if you try to load the nvidia module you get:
</p>
<pre>modprobe nvidia
modprobe: ERROR: could not insert 'nvidia': Exec format error
</pre>
<p>This could be because the nvidia driver is out of sync with the Linux kernel, for example if you installed the latest nvidia driver and haven't updated the kernel in a while. A full system update might resolve the issue. If the problem persists you should try manually compiling the nvidia packages against your current kernel, for example with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia-dkms">nvidia-dkms</a></span> or by compiling <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia">nvidia</a></span> from the <a href="../en/Arch_Build_System.html" title="ABS" class="mw-redirect">ABS</a>.
</p>
<h4><span class="mw-headline" id="NOUVEAU.280.29:_.5Bdrm.5D_failed_to_set_drm_interface_version">NOUVEAU(0): [drm] failed to set drm interface version</span></h4>
<p>Consider switching to the official nvidia driver. As commented <a rel="nofollow" class="external text" href="https://github.com/Bumblebee-Project/Bumblebee/issues/438#issuecomment-22005923">here</a>, nouveau driver has some issues with some cards and bumblebee.
</p>
<h3><span class="mw-headline" id=".2Fdev.2Fdri.2Fcard0:_failed_to_set_DRM_interface_version_1.4:_Permission_denied">/dev/dri/card0: failed to set DRM interface version 1.4: Permission denied</span></h3>
<p>This could be worked around by appending following lines in <code>/etc/bumblebee/xorg.conf.nvidia</code> (see <a rel="nofollow" class="external text" href="https://github.com/Bumblebee-Project/Bumblebee/issues/580">here</a>):
</p>
<pre>
Section "Screen"
    Identifier "Default Screen"
    Device "DiscreteNvidia"
EndSection
</pre>
<h3><span class="mw-headline" id="ERROR:_ld.so:_object_.27libdlfaker.so.27_from_LD_PRELOAD_cannot_be_preloaded:_ignored">ERROR: ld.so: object 'libdlfaker.so' from LD_PRELOAD cannot be preloaded: ignored</span></h3>
<p>You probably want to start a 32-bit application with bumblebee on a 64-bit system. See the "For 32-bit..." section in <a href="#Installation">#Installation</a>. If the problem persists or if it is a 64-bit application, try using the <a href="#Primusrun">primus bridge</a>.
</p>
<h3><span class="mw-headline" id="Fatal_IO_error_11_.28Resource_temporarily_unavailable.29_on_X_server">Fatal IO error 11 (Resource temporarily unavailable) on X server</span></h3>
<p>Change <code>KeepUnusedXServer</code> in <code>/etc/bumblebee/bumblebee.conf</code> from <code>false</code> to <code>true</code>. Your program forks into background and bumblebee don't know anything about it.
</p>
<h3><span class="mw-headline" id="Video_tearing">Video tearing</span></h3>
<p>Video tearing is a somewhat common problem on Bumblebee. To fix it, you need to enable vsync. It should be enabled by default on the Intel card, but verify that from Xorg logs. To check whether or not it is enabled for NVIDIA, run: 
</p>
<pre>$ optirun nvidia-settings -c :8
</pre>
<p><code>X Server XVideo Settings -&gt; Sync to VBlank</code> and <code>OpenGL Settings -&gt; Sync to VBlank</code> should both be enabled. The Intel card has in general less tearing, so use it for video playback. Especially use VA-API for video decoding (e.g. <code>mplayer-vaapi</code> and with <code>-vsync</code> parameter).
</p>
<p>Refer to the <a href="../en/Intel_graphics.html#Video_tearing" title="Intel" class="mw-redirect">Intel</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" title="ArchWiki:Requests">broken link</a>: invalid section]</sup> article on how to fix tearing on the Intel card.
</p>
<p>If it is still not fixed, try to disable compositing from your desktop environment. Try also disabling triple buffering.
</p>
<h3><span class="mw-headline" id="Bumblebee_cannot_connect_to_socket">Bumblebee cannot connect to socket</span></h3>
<p>You might get something like:
</p>
<pre>$ optirun glxspheres64
</pre>
<p>or (for 32 bit):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ optirun glxspheres32</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
[ 1648.179533] [ERROR]You've no permission to communicate with the Bumblebee daemon. Try adding yourself to the 'bumblebee' group
[ 1648.179628] [ERROR]Could not connect to bumblebee daemon - is it running?
</pre>
<p>If you are already in the <code>bumblebee</code> group (<code>$ groups | grep bumblebee</code>), you may try <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1178729#p1178729">removing the socket</a> <code>/var/run/bumblebeed.socket</code>.
</p>
<p>Another reason for this error could be that you haven't actually turned on both gpu's in your bios, and as a result, the Bumblebee daemon is in fact not running. Check the bios settings carefully and be sure intel graphics (integrated graphics - may be abbreviated in bios as something like igfx) has been enabled or set to auto, and that it's the primary gpu. Your display should be connected to the onboard integrated graphics, not the discrete graphics card.
</p>
<p>If you mistakenly had the display connected to the discrete graphics card and intel graphics was disabled, you probably installed Bumblebee after first trying to run Nvidia alone. In this case, be sure to remove the /etc/X11/xorg.conf or .../20-nvidia... configuration files. If Xorg is instructed to use Nvidia in a conf file, X will fail.
</p>
<h3><span class="mw-headline" id="Running_X.org_from_console_after_login_.28rootless_X.org.29">Running X.org from console after login (rootless X.org)</span></h3>
<p>See <a href="../en/Xorg.html#Rootless_Xorg_.28v1.16.29" title="Xorg">Xorg#Rootless Xorg (v1.16)</a>.
</p>
<h3><span class="mw-headline" id="Primusrun_mouse_delay.2Fdisable_VSYNC">Primusrun mouse delay/disable VSYNC</span></h3>
<p>For <code>primusrun</code>, <code>VSYNC</code> is enabled by default and as a result, it could make mouse input delay lag or even slightly decrease performance. Test <code>primusrun</code> with <code>VSYNC</code> disabled:
</p>
<pre>$ vblank_mode=0 primusrun glxgears
</pre>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Useless package, equivalent to <code>alias optiprime="vblank_mode=0 primusrun"</code>. You can even use <code>alias primusrun="vblank_mode=0 primusrun"</code>. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Bumblebee">Talk:Bumblebee#</a>)</div>
</div>
<p>If you want to keep using it, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/optiprime/">optiprime</a></span><sup><small>AUR</small></sup> package, which provides a script for above command. Usage:
</p>
<pre>$ optiprime glxgears
</pre>
<p>Comparison:
</p>
<table class="wikitable">
<tr>
<th> Command </th>
<th> FPS </th>
<th> Score </th>
<th> Min FPS </th>
<th> Max FPS
</th>
</tr>
<tr>
<td> optiprime unigine-heaven </td>
<td> 31.5 </td>
<td> 793 </td>
<td> 22.3 </td>
<td> 54.8
</td>
</tr>
<tr>
<td> primusrun unigine-heaven </td>
<td> 31.4 </td>
<td> 792 </td>
<td> 18.7 </td>
<td> 54.2
</td>
</tr>
</table>
<p><i>Tested with <a href="../en/ASUS_N550JV.html" title="ASUS N550JV">ASUS N550JV</a> laptop and benchmark app <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/unigine-heaven/">unigine-heaven</a></span><sup><small>AUR</small></sup>.</i>
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>To disable vertical synchronization system-wide, see <a href="../en/Intel_graphics.html#Disable_Vertical_Synchronization_.28VSYNC.29" title="Intel graphics">Intel graphics#Disable Vertical Synchronization (VSYNC)</a>.</div>
<h3><span class="mw-headline" id="Primus_issues_under_compositing_window_managers">Primus issues under compositing window managers</span></h3>
<p>Since compositing hurts performance, invoking primus when a compositing WM is active is not recommended.<a rel="nofollow" class="external autonumber" href="https://github.com/amonakov/primus#issues-under-compositing-wms">[2]</a>
If you need to use primus with compositing and see flickering or bad performance, synchronizing primus' display thread with the application's rendering thread may help:
</p>
<pre>$ PRIMUS_SYNC=1 primusrun ...
</pre>
<p>This makes primus display the previously rendered frame.
</p>
<h3><span class="mw-headline" id="Problems_with_bumblebee_after_resuming_from_standby">Problems with bumblebee after resuming from standby</span></h3>
<p>In some systems, it can happens that the nvidia module is loaded after resuming from standby.
The solution for this, is to install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=acpi_call">acpi_call</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=acpi">acpi</a></span> package.
</p>
<h3><span class="mw-headline" id="Optirun_doesn.27t_work.2C_no_debug_output">Optirun doesn't work, no debug output</span></h3>
<p>Users are reporting that in some cases, even though Bumblebee was installed correctly, running 
</p>
<pre>$ optirun glxgears -info
</pre>
<p>gives no output at all, and the glxgears window does not appear. Any programs that need 3d acceleration crashes:
</p>
<pre>$ optirun bash
$ glxgears
Segmentation fault (core dumped)
</pre>
<p>Apparently it is a bug of some versions of virtualgl. So a workaround is to <a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=primus">primus</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=lib32-primus">lib32-primus</a></span> and use it instead:
</p>
<pre>$ primusrun glxspheres64
$ optirun -b primus glxspheres64
</pre>
<p>By default primus locks the framerate to the vrate of your monitor (usually 60 fps), if needed it can be unlocked by passing the <code>vblank_mode=0</code> environment variable.
</p>
<pre>$ vblank_mode=0 primusrun glxspheres64
</pre>
<p>Usually there is no need to display more frames han your monitor can handle, but you might want to for benchmarking or to have faster reactions in games (e.g., if a game need 3 frames to react to a mouse movement with <code>vblank_mode=0</code> the reaction will be as quick as your system can handle, without it will always need 1/20 of second).
</p>
<p>You might want to edit <code>/etc/bumblebee/bumblebee.conf</code> to use the primus render as default. If after an update you want to check if the bug has been fixed just use <code>optirun -b virtualgl</code>.
</p>
<p>See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1643609">this forum post</a> for more information.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external text" href="http://www.bumblebee-project.org">Bumblebee project repository</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://wiki.bumblebee-project.org/">Bumblebee project wiki</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://github.com/Bumblebee-Project/bbswitch">Bumblebee project bbswitch repository</a>
</li>
</ul>
<p>Join us at #bumblebee at freenode.net.
</p>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../en/Category:X_server.html" title="Category:X server">X server</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
