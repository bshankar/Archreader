<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Sun Cobalt RAQ 550 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Sun_Cobalt_RAQ_550 skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Sun Cobalt RAQ 550</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Sun_Cobalt_RAQ_550">Talk:Sun Cobalt RAQ 550#</a>)</div>
</div>
<p>This document explains how you can install Arch Linux on a Sun Cobalt RAQ 550 machine.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#About_the_RAQ_550"><span class="tocnumber">1</span> <span class="toctext">About the RAQ 550</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#About_the_processor"><span class="tocnumber">1.1</span> <span class="toctext">About the processor</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Jumpers_on_the_RaQ_550"><span class="tocnumber">1.2</span> <span class="toctext">Jumpers on the RaQ 550</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Terminology"><span class="tocnumber">2</span> <span class="toctext">Terminology</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Requirements"><span class="tocnumber">3</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Setting_up_your_serial_port"><span class="tocnumber">4</span> <span class="toctext">Setting up your serial port</span></a></li>
<li class="toclevel-1 tocsection-7">
<a href="#How_the_RAQ_550_boots"><span class="tocnumber">5</span> <span class="toctext">How the RAQ 550 boots</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Booting_from_hard_disk"><span class="tocnumber">5.1</span> <span class="toctext">Booting from hard disk</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Booting_from_network"><span class="tocnumber">5.2</span> <span class="toctext">Booting from network</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Important_note_about_drive_assignements"><span class="tocnumber">6</span> <span class="toctext">Important note about drive assignements</span></a></li>
<li class="toclevel-1 tocsection-11">
<a href="#Installing_without_RAID"><span class="tocnumber">7</span> <span class="toctext">Installing without RAID</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Moving_the_RAQ_550_hard_drive"><span class="tocnumber">7.1</span> <span class="toctext">Moving the RAQ 550 hard drive</span></a></li>
<li class="toclevel-2 tocsection-13">
<a href="#Installing_the_base_system"><span class="tocnumber">7.2</span> <span class="toctext">Installing the base system</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Partitioning"><span class="tocnumber">7.2.1</span> <span class="toctext">Partitioning</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Installation.2C_continued"><span class="tocnumber">7.2.2</span> <span class="toctext">Installation, continued</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#System_configuration"><span class="tocnumber">7.2.3</span> <span class="toctext">System configuration</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#Install_the_linux-raq550_kernel"><span class="tocnumber">7.3</span> <span class="toctext">Install the linux-raq550 kernel</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Configure_the_serial_port_for_terminal_access"><span class="tocnumber">7.4</span> <span class="toctext">Configure the serial port for terminal access</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Put_the_RAQ_550_harddrive_back"><span class="tocnumber">7.5</span> <span class="toctext">Put the RAQ 550 harddrive back</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Configuring_the_firmware"><span class="tocnumber">7.6</span> <span class="toctext">Configuring the firmware</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21">
<a href="#Notes"><span class="tocnumber">8</span> <span class="toctext">Notes</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#What_about_the_LCD.2FFront_panel.3F"><span class="tocnumber">8.1</span> <span class="toctext">What about the LCD/Front panel?</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#What_about_earlier_RAQ_servers.2C_like_the_RAQ_4.3F"><span class="tocnumber">8.2</span> <span class="toctext">What about earlier RAQ servers, like the RAQ 4?</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Post-install_cleanup"><span class="tocnumber">8.3</span> <span class="toctext">Post-install cleanup</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Using_your_own_kernel"><span class="tocnumber">8.4</span> <span class="toctext">Using your own kernel</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#Resources"><span class="tocnumber">9</span> <span class="toctext">Resources</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="About_the_RAQ_550">About the RAQ 550</span></h2>
<p>The Sun Cobalt RAQ 550 is actually just standard PC hardware with customized firmware and board layout. It contains a ServerWorks CSB5 dual channel IDE controller. It has no VGA adaptor, although there is a PCI slot where you could install one (and you would be able to use it). A RAQ 550 comes with the following specifications:
</p>
<ul>
<li> Processor: Intel Pentium 3 1 Ghz (256 kB Cache) or 1,26 Ghz (512 kB Cache). (That last one is pretty rare because of Intel's limited production of Tuatulatin cores)</li>
<li> Memory: Supports up to 2 GB of registered ECC PC133 SDRAM. It will not take non-ECC modules, I've tried.</li>
<li> Disks: Supports 2 LBA24 IDE disks (LBA24 means it only uses 24 bits for addressing, thus it only supports a maximum of ~137 GB. This is a hardware limitation)</li>
<li> Expansion: 1 x PCI 33 Mhz, 64 Bit (266 mB/s)</li>
<li> Network: 2 x National Semiconductor DP83815 Fast Ethernet (linux module natsemi)</li>
</ul>
<p>You can get them second hand for a good price these days.
</p>
<h3><span class="mw-headline" id="About_the_processor">About the processor</span></h3>
<p>The original RAQ 550 came shipped with a Pentium 3 1 Ghz (Coppermine) or a Pentium 3 1,26 Ghz (Tuatulatin). However, there's no reason why you can't replace the processor with something else. I tested a celeron 1,2 Ghz (Tuatulatin) and it works. The celeron only has 100 Mhz FSB, and I haven't found a way yet to force the FSB to be 133 Mhz. I believe anything that's Coppermine or Tuatulatin should work.
</p>
<h3><span class="mw-headline" id="Jumpers_on_the_RaQ_550">Jumpers on the RaQ 550</span></h3>
<p>The RaQ 550 has two jumpers that are soldered, JP1 and JP8.
</p>
<ul>
<li> JP1: On: Sets the FSB to 100 Mhz, Off: Sets the FSB to AUTO</li>
<li> JP8: Doesn't seem to do anything on and off</li>
</ul>
<h2><span class="mw-headline" id="Terminology">Terminology</span></h2>
<p>Keep these things in mind, they can be confusing:
</p>
<ul>
<li> boot kernel/firmware: This is the software loaded on the system's EEPROM. This is basically a modified linux kernel.</li>
<li> load kernel: This is the kernel that the firmware will try to load. You can use your own kernel here.</li>
</ul>
<h2><span class="mw-headline" id="Requirements">Requirements</span></h2>
<ul>
<li> One Sun Cobalt RAQ 550</li>
<li> One hard drive</li>
<li> One Arch Linux installer CD</li>
<li> Another computer</li>
<li> One crazy admin</li>
</ul>
<p>Firmware requirements: I haven't tested this with the original firmware that normally ships with the RAQ 550, because mine already came with updated (unofficial) firmware. Updating the firmware is beyond the scope of this document. <b>BIG FAT WARNING:</b> <i>If the firmware update process goes wrong and you reboot your system, you just have turned your RAQ 550 into a <b>piece of junk</b></i>. The only way to fix it would be to desolder the flash chip and have it flashed again with correct firmware. <b>If your firmware works for you, I recommend not touching it</b>.
</p>
<h2><span class="mw-headline" id="Setting_up_your_serial_port">Setting up your serial port</span></h2>
<p>The RAQ 550 has two serial ports, which the first one (marked with a single dot) serves as console access. Configure your terminal application to use 115200 baudrate, 8 bits, no parity and 1 stop bit (115200 8N1). Use screen: screen /dev/ttyS0 115200. This serial port setting is hardcoded and cannot be changed.
</p>
<h2><span class="mw-headline" id="How_the_RAQ_550_boots">How the RAQ 550 boots</span></h2>
<h4><span class="mw-headline" id="Booting_from_hard_disk">Booting from hard disk</span></h4>
<p>The firmware is actually a modified linux kernel, serving as a bootloader. It will search for
</p>
<ul>
<li> vmlinux.gz</li>
<li> vmlinux.bz2</li>
<li> /boot/vmlinux.gz</li>
<li> /boot/vmlinux.bz2</li>
</ul>
<p>on the first partition of the first disk, so this means <b>the boot kernel needs to be able to read the filesystem where your load kernel resides</b>. This limits the filesystems you can use where the load kernel resides to the filesystems that the firmware supports. Customized firmware may support other filesystems, cobalt's official software only supports ext2. Use ext2. If you have a seperate /boot, you can use whatever filesystem for / that the load kernel supports.
</p>
<h4><span class="mw-headline" id="Booting_from_network">Booting from network</span></h4>
<p>As you might have noticed, the RAQ 550 supports "netbooting". But it's not the netbooting you would expect, it doesn't use PXE. It uses its firmware kernel and tries to set it up with an NFS (Network File System) root.
</p>
<h2><span class="mw-headline" id="Important_note_about_drive_assignements">Important note about drive assignements</span></h2>
<p>The firmware's kernel uses the "old" style harddisk notation, for example hda2. The linux-raq550 kernel uses the newer libata drivers, causing the harddrive assignements to become for example sda2. Keep this in mind when you're configuring the firmware and fstab.
</p>
<h2><span class="mw-headline" id="Installing_without_RAID">Installing without RAID</span></h2>
<h3><span class="mw-headline" id="Moving_the_RAQ_550_hard_drive">Moving the RAQ 550 hard drive</span></h3>
<p>The easiest way for installing Arch Linux is to take out the hard drive, put it in another computer and install Arch Linux from there. If you know what you're doing you can install it any way you want, this article only covers installation via the Arch Linux installer CD. Put the hard drive in the other computer and start the install CD.
</p>
<h3><span class="mw-headline" id="Installing_the_base_system">Installing the base system</span></h3>
<p>Select your method of installation (I always use FTP installs) and proceed with the installation as usual.
</p>
<h4><span class="mw-headline" id="Partitioning">Partitioning</span></h4>
<p>When it's time to partition your harddrive, the partition where the kernel resides <i>must be supported by the firmware</i> (see <a href="#How_the_RAQ_550_boots">#How the RAQ 550 boots</a>). Unless you're running modified firmware, the built in firmware only supports ext2 (ext3 is backwards compatible). The kernel must also be located on the first partition.
</p>
<ul>
<li> Load kernel must be located on the first partition</li>
<li> Filesystem of the first partition must be supported by the firmware</li>
<li> Kernel must have a specific name (see "How the RAQ 550 boots")</li>
</ul>
<h4><span class="mw-headline" id="Installation.2C_continued">Installation, continued</span></h4>
<p>Skip the install kernel and install bootloader step. You do not need a bootloader (the firmware is the bootloader) and the stock arch kernel doesn't work because the firmware doesn't support initial ramdisks.
</p>
<h4><span class="mw-headline" id="System_configuration">System configuration</span></h4>
<p><b>Important:</b> Check your fstab file to have the correct harddrive notation. See <a href="#Important_note_about_drive_assignements">#Important note about drive assignements</a>!
</p>
<h3><span class="mw-headline" id="Install_the_linux-raq550_kernel">Install the linux-raq550 kernel</span></h3>
<p>Exit the installation and chroot to your new system. Configure pacman's mirrorlist and run
</p>
<pre>
# chroot /mnt /bin/bash
# nano -w /etc/pacman.d/mirrorlist
# pacman -Sy
</pre>
<p>After that, add the redshift repository to your pacman.conf file:
</p>
<pre>
[redshift]
Server = http://archserver.be/packages/redshift/i686
</pre>
<p>Then install the linux-raq550 package:
</p>
<pre>
# pacman -S linux-raq550
</pre>
<h3><span class="mw-headline" id="Configure_the_serial_port_for_terminal_access">Configure the serial port for terminal access</span></h3>
<p>We're not done yet. We need to configure init to spawn a terminal on the serial port. Add this to your /etc/inittab:
</p>
<pre>
s0:0123456:respawn:/sbin/agetty -8 -L 115200 ttyS0 vt100
</pre>
<p>That will spawn agetty vt100 on the first serial port with a linespeed of 115200 bits/s and assume the line is 8 bit clean. You can comment out the virtual consoles (the vc/n) ones if you do not intend on using them.
</p>
<p><i>Notice that you won't be able to log in as root on the serial</i>. In order to allow root to login from the serial add that serial port to /etc/securetty
</p>
<p>It's useful to already setup sshd. Don't forget to set a password for root (sshd denies passwordless logins by default), and do not forget about hosts.deny.
</p>
<h3><span class="mw-headline" id="Put_the_RAQ_550_harddrive_back">Put the RAQ 550 harddrive back</span></h3>
<p>Put the RAQ 550 harddrive back in its place, connect the serial cable and power up the system.
</p>
<h3><span class="mw-headline" id="Configuring_the_firmware">Configuring the firmware</span></h3>
<p>Now you'll need to configure the firmware and set your root device. Pay close attention to the startup messages and press the space bar to enter the system rom menu mode. Type boot and then set_root_dev to set the root device. For example:
</p>
<pre>
Press spacebar to enter ROM mode

Cobalt:Main Menu&gt; boot
Cobalt:Boot Menu&gt; set_boot_dev sda3
Cobalt:Boot Menu&gt; reboot
</pre>
<p>After this your system should boot up, ready for use.
</p>
<h2><span class="mw-headline" id="Notes">Notes</span></h2>
<h4><span class="mw-headline" id="What_about_the_LCD.2FFront_panel.3F">What about the LCD/Front panel?</span></h4>
<p>Yes, you can make use of the front panel! The kernel is patched to make the Sun Cobalt specific hardware work. Install the cobalt-panel-utils to control the front panel. You can find the cobalt-panels-utils in the redshift repository. The binaries start with lcd-. See their respective manpages
</p>
<h4><span class="mw-headline" id="What_about_earlier_RAQ_servers.2C_like_the_RAQ_4.3F">What about earlier RAQ servers, like the RAQ 4?</span></h4>
<p>The RAQ 4 and 3 have an AMD K6-2 processor, which do not support the full i686 instruction set. RAQ 2 and 1 use MIPS processors. Therefore you cannot use Arch Linux on these RAQ servers.
</p>
<h4><span class="mw-headline" id="Post-install_cleanup">Post-install cleanup</span></h4>
<p>Because of the customized kernel without an initial ramdisk, you can get rid of the following packages:
</p>
<ul>
<li> linux</li>
<li> mkinitcpio</li>
<li> klibc-udev</li>
<li> klibc-module-init-tools</li>
<li> klibc-extras</li>
<li> klibc</li>
<li> gen-init-cpio</li>
<li> grub</li>
<li> cpio</li>
<li> lilo</li>
</ul>
<p>And obviously packages like pcmcia-utils.
</p>
<h4><span class="mw-headline" id="Using_your_own_kernel">Using your own kernel</span></h4>
<p>You can use your own compiled kernel, but the compressed size of the vmlinux file may not be larger than ~1,8 megabytes. Using bzip2 results in a slightly better compression than gzip. The configuration of the linux-raq550 kernel is a good starting point, you can find it in /proc/config.gz
</p>
<h2><span class="mw-headline" id="Resources">Resources</span></h2>
<p>Unfortunatly, information about the Cobalt RAQ servers is sparse and scattered. Most documentation insists on using CentOS. Here are some interesting links:
</p>
<ul>
<li> Sun's Cobalt site <a rel="nofollow" class="external autonumber" href="http://www.sun.com/hardware/serverappliances/discontinued.html#550">[1]</a>: Contains the original documentation for the raq 550 server.</li>
<li> CobaltFAQs <a rel="nofollow" class="external autonumber" href="http://www.cobaltfaqs.com/">[2]</a>
</li>
<li> Sourceforge Cobalt ROM <a rel="nofollow" class="external autonumber" href="http://sourceforge.net/projects/cobalt-rom/">[3]</a>: New ROM images for your RAQ and flash utilities</li>
<li> Depopo.net <a rel="nofollow" class="external autonumber" href="http://www.depopo.net">[4]</a>: FAQ site for Cobalt RAQ servers</li>
<li> My homepage <a rel="nofollow" class="external autonumber" href="http://users.opengate.be/~glenn/cobaltraq/">[5]</a>: Some usefull stuff</li>
</ul>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Other_hardware.html" title="Category:Other hardware">Other hardware</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li></ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
