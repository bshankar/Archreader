<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>MacBookPro9,2 (Mid-2012) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-MacBookPro9_2_Mid-2012 skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">MacBookPro9,2 (Mid-2012)</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/MacBook.html" title="MacBook">MacBook</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/MacBookPro7,1.html" title="MacBookPro7,1">MacBookPro7,1</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/MacBookPro8,1/8,2/8,3_(2011).html" title="MacBookPro8,1/8,2/8,3 (2011)">MacBookPro8,1/8,2/8,3 (2011)</a></li>
<li style="padding:0.4em 0; line-height:1;"><strong class="selflink">MacBookPro9,2 (Mid-2012)</strong></li>
</ul>
</div>
<p>This guide outlines special information on installing and configuring Arch on the more recent Macbook 9,x (Mid-2012) hardware alongside a pre-existing OSX operating system.  This requires adequate free disk space, install media (such as a USB or CD), and a wired connection for the initial steps of the install procedure.  
</p>
<p>This article is written with a dual-boot setup in mind, and does <i>not</i> cover how to replace OSX with Arch.
</p>
<p>For general help on the install preocedure see the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a>
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Remember to back up your pre-existing OSX installation before proceeding!</div>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Preparation"><span class="tocnumber">1</span> <span class="toctext">Preparation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Recording_UIDs"><span class="tocnumber">1.1</span> <span class="toctext">Recording UIDs</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Install_Boot_Manager"><span class="tocnumber">1.2</span> <span class="toctext">Install Boot Manager</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Shrinking_Macintosh_HD"><span class="tocnumber">1.3</span> <span class="toctext">Shrinking Macintosh HD</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Preparing_Installation_Media"><span class="tocnumber">2.1</span> <span class="toctext">Preparing Installation Media</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#Running_the_Arch_Installation"><span class="tocnumber">2.2</span> <span class="toctext">Running the Arch Installation</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Sample_partition_layout"><span class="tocnumber">2.2.1</span> <span class="toctext">Sample partition layout</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Install_Bootloader"><span class="tocnumber">2.2.2</span> <span class="toctext">Install Bootloader</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Note_about_Macbook_Pro_9.2C1_and_9.2C2"><span class="tocnumber">2.2.3</span> <span class="toctext">Note about Macbook Pro 9,1 and 9,2</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-11">
<a href="#Post_Installation"><span class="tocnumber">3</span> <span class="toctext">Post Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Users"><span class="tocnumber">3.1</span> <span class="toctext">Users</span></a></li>
<li class="toclevel-2 tocsection-13">
<a href="#Wireless"><span class="tocnumber">3.2</span> <span class="toctext">Wireless</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#b43"><span class="tocnumber">3.2.1</span> <span class="toctext">b43</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#wl"><span class="tocnumber">3.2.2</span> <span class="toctext">wl</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#Xorg"><span class="tocnumber">3.3</span> <span class="toctext">Xorg</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#Bells_.26_Whistles"><span class="tocnumber">4</span> <span class="toctext">Bells &amp; Whistles</span></a>
<ul>
<li class="toclevel-2 tocsection-18">
<a href="#Emulating_OSX_Touchpad_Gestures"><span class="tocnumber">4.1</span> <span class="toctext">Emulating OSX Touchpad Gestures</span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Using_synclient"><span class="tocnumber">4.1.1</span> <span class="toctext">Using synclient</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Using_Touchegg"><span class="tocnumber">4.1.2</span> <span class="toctext">Using Touchegg</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Preparation">Preparation</span></h2>
<h3><span class="mw-headline" id="Recording_UIDs">Recording UIDs</span></h3>
<p>If you want to access your OSX user directories from Linux, write down the UID and GID for the users.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>OSX begins with the first user's UID at 501 while Arch defaults to 1000.</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong> Never, <i>ever</i> change any file permissions in your OSX partition from Linux. Doing so can and will lead to serious repercussions.</div>
<h3><span class="mw-headline" id="Install_Boot_Manager">Install Boot Manager</span></h3>
<p><b>Optional.</b> The easiest way to begin is by <a rel="nofollow" class="external text" href="http://www.rodsbooks.com/refind/">installing rEFInd</a> on Mac OSX before moving on to Arch.  This will place a boot menu on startup.  The config will be in your OSX partition - if this is not desirable it is possible to install it later in Arch.  For more information consult <a href="../en/Unified_Extensible_Firmware_Interface.html" title="UEFI" class="mw-redirect">UEFI</a>.
</p>
<h3><span class="mw-headline" id="Shrinking_Macintosh_HD">Shrinking Macintosh HD</span></h3>
<p>Although nowadays Boot Camp requires a Windows installation disc before altering partitions, it is possible to do this using Mac OSX's disk utility.  Create a new partition, calculate the amount of free space required for all new partitions and shrink Macintosh HD to accommodate for this amount.  Leave the new partition as free space for now.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<h3><span class="mw-headline" id="Preparing_Installation_Media">Preparing Installation Media</span></h3>
<p><a rel="nofollow" class="external text" href="https://archlinux.org/download/">Download Arch</a> and burn it to a USB, CD or DVD, and boot into the Arch install.
</p>
<h3><span class="mw-headline" id="Running_the_Arch_Installation">Running the Arch Installation</span></h3>
<p>Proceed from the Installation section in <a href="../en/Installation_guide.html#Installation" title="Installation guide">Installation guide#Installation</a>. Note that you'll need a wired connection to continue for now.
</p>
<p>The following differences will apply to MacBooks:
</p>
<h4><span class="mw-headline" id="Sample_partition_layout">Sample partition layout</span></h4>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Apple prefers having 128MB of unallocated space between partitions.  Whether or not this is completely necessary is uncertain, but if it seems like there is more than enough space available, then creating this buffer of free space may be a good idea.</div>
<pre>partition  mountpoint  size       type  label
/dev/sda1  /boot/efi   200MiB     vfat  EFI
/dev/sda2  -           ?          hfs+  Mac OS X
/dev/sda3  -           ?          hfs+  Recovery
/dev/sda4  /boot       100MiB     boot  boot
/dev/sda5  /           10GiB      ext4  root
/dev/sda6  /home       remaining  ext4  home (optional)
/dev/sda7  ?           ?          ?     shared (optional)
</pre>
<p>For sharing files between OSX and Linux, a number of filesystem options exist.  FAT32 is natively supported on all systems - however, it lacks support for filesystems larger than 2TB or files larger than 4GB.  Journaled HFS+ partitions, such as the Macintosh HD partition, will only mount read-only in Linux.  Full read-write support is available for unjournaled HFS+ filesystems.  ExFAT support can be made available by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=exfat-utils">exfat-utils</a></span>.
</p>
<h4><span class="mw-headline" id="Install_Bootloader">Install Bootloader</span></h4>
<p>Use <a href="../en/GRUB.html#UEFI_systems" title="GRUB2" class="mw-redirect">GRUB2#UEFI systems</a> for more information.
</p>
<p>After setting up the base system, do the following in your chrooted environment:
</p>
<pre># pacman -S grub-efi-x86_64
# pacman -S efibootmgr

# mkdir -p /boot/efi
# mount -t vfat /dev/sda1 /boot/efi

# modprobe dm-mod
# grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=arch_grub --recheck --debug
# mkdir -p /boot/grub/locale (this may already exist)
# cp /usr/share/locale/en\@quot/LC_MESSAGES/grub.mo /boot/grub/locale/en.mo
</pre>
<h4><span class="mw-headline" id="Note_about_Macbook_Pro_9.2C1_and_9.2C2">Note about Macbook Pro 9,1 and 9,2</span></h4>
<p>For Macbook Pro 9,1 users, the process is similar.
</p>
<pre># pacman -S grub-efi-x86_64 efibootmgr

# mkdir -p /boot/efi
# mount -t vfat /dev/sda1 /boot/efi

# modprobe dm-mod
# grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=arch_grub --recheck --debug
# grub-mkconfig -o /boot/grub/grub.cfg (may not be necessary for 9,2)
# mkdir -p /boot/grub/locale
# cp /usr/share/locale/en\@quot/LC_MESSAGES/grub.mo /boot/grub/locale/en.mo
</pre>
<p>The only difference is installing efibootmgr (required for 9,2) and running grub-mkconfig (may not be required for 9,2)
</p>
<h2><span class="mw-headline" id="Post_Installation">Post Installation</span></h2>
<p>Continue with <a href="../en/General_recommendations.html" title="General recommendations">General recommendations</a>, noting the following modifications:
</p>
<h3><span class="mw-headline" id="Users">Users</span></h3>
<p>If you wrote down your OSX uid's and gid's eariler, new users can be created by running:
</p>
<pre># useradd -m -u [uid] -g [gid] -G [additional_groups] -s [login_shell] [username]
</pre>
<p>In order to be able to access a OSX user's directory, only the uid and gid need to match. (usernames can differ)
</p>
<h3><span class="mw-headline" id="Wireless">Wireless</span></h3>
<p>Macbooks 8,1 to 9,2 (and possibly newer) use BCM4331 for Wifi.  As of June 2013 two options are available, the open source b43 driver and Broadcom's proprietary wl driver.
</p>
<h4><span class="mw-headline" id="b43">b43</span></h4>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>compat-drivers is outdated and was renamed to <a rel="nofollow" class="external text" href="http://wireless.kernel.org/en/users/Download/stable/">backports</a>.</div>
<pre>$ curl -O <a rel="nofollow" class="external free" href="https://www.kernel.org/pub/linux/kernel/projects/backports/2013/03/28/compat-drivers-2013-03-28-5.tar.bz2">https://www.kernel.org/pub/linux/kernel/projects/backports/2013/03/28/compat-drivers-2013-03-28-5.tar.bz2</a>
$ tar xjf compat-drivers-2013-03-28-5.tar.bz2
$ cd compat-drivers-2013-03-28-5

$ scripts/driver-select b43
$ make
$ sudo make install
</pre>
<p>Create <code>/etc/modules-load.d/b43.conf</code> and write <code>b43</code> to load wireless at startup.
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/b43-firmware/">b43-firmware</a></span><sup><small>AUR</small></sup> from <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> and reboot. From here on in, wifi configuration should proceed normally - once it's working the wired connection may be disconnected.
</p>
<h4><span class="mw-headline" id="wl">wl</span></h4>
<p><i>more to come.</i>
</p>
<p>Download, extract, and install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/broadcom-wl/">broadcom-wl</a></span><sup><small>AUR</small></sup> from <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> and reboot.
</p>
<h3><span class="mw-headline" id="Xorg">Xorg</span></h3>
<p>Main Page: <a href="../en/Xorg.html" title="Xorg">Xorg</a>
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> and setup Xorg as you normally would.
</p>
<p>The built-in keyboard and most usb input devices will work out-of-the-box, but <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span> is needed in order to use the built-in touchpad.
</p>
<h2><span class="mw-headline" id="Bells_.26_Whistles">Bells &amp; Whistles</span></h2>
<h3><span class="mw-headline" id="Emulating_OSX_Touchpad_Gestures">Emulating OSX Touchpad Gestures</span></h3>
<p>With a little bit of work it's possible to tweak the multitouch options on the trackpad.  This can be achieved with a combination of X11 driver settings and open source software.
</p>
<h4><span class="mw-headline" id="Using_synclient">Using synclient</span></h4>
<p><code>synclient</code> is included with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span> driver.  It is useful for experimenting with settings as they take effect immediately and expire at the end of an X session.  Many OSX options can be emulated without any additional software.
</p>
<p>Run <code>synclient -l</code> to have a look at all the available options.  Here are some suggestions which resemble the options found in OSX's System Preferences:
</p>
<ul>
<li> By default synaptics is configured to use a double-tap drag gesture found on older touchpads - one may argue that this is not necessary on a clickpad. <code>synclient TapAndDragGesture=0</code> will turn this off.</li>
<li> TapButtonX and ClickFingerX sets the mouse button triggered by tapping or clicking with X fingers.  set <code>TapButton2=3</code> and <code>ClickFinger2=3</code> to assign two-finger click to the right mouse button.</li>
<li> Setting the bottom-right corner click to right mouse button can be done by subtracting about 500 from <code>RightEdge</code> and <code>BottomEdge</code> and plugging the new values into <code>RightButtonAreaLeft</code> and <code>RightButtonAreaTop</code>.  If the last two options are not visible, set <code>Clickpad=1</code>.</li>
</ul>
<p>To make settings permanent, just modify <code>/etc/X11/xorg.conf.d/10-synaptics.conf</code>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Right/Middle ButtonArea options are only recognized once the X fully loads the driver.  To work around this, create a script file <code>/usr/local/bin/synarea.sh</code> with the required synclient commands, and add the script to the X startup sequence.</div>
<h4><span class="mw-headline" id="Using_Touchegg">Using Touchegg</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/touchegg/">touchegg</a></span><sup><small>AUR</small></sup> from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> is an application which can recognize additional gestures.  To use this you'll need to replace the synaptics driver with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xf86-input-synaptics-mtpatch/">xf86-input-synaptics-mtpatch</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/xf86-input-synaptics-mtpatch">aur-mirror</a>]</sup>. See however <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1502743#p1502743">[1]</a>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$(HOME)/.config/touchegg/touchegg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
&lt;application name="All"&gt;
        ...
        &lt;gesture type="DRAG" fingers="3" direction="ALL"&gt;
                &lt;action type="DRAG_AND_DROP"&gt;&lt;/action&gt;
        &lt;/gesture&gt;
        ...
&lt;/application&gt;
...</pre>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Apple.html" title="Category:Apple">Apple</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
