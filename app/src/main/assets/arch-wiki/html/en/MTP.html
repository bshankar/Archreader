<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>MTP - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-MTP skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">MTP</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/USB_storage_devices.html" title="USB storage devices">USB storage devices</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/Media_Transfer_Protocol" class="extiw" title="wikipedia:Media Transfer Protocol">MTP</a>, or the <i>Media Transfer Protocol</i>, is a USB device class which is used by many mobile phones (all Windows Phone 7/8/10 devices, most newer Android devices) and media players (e.g. Creative Zen).
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Functionality"><span class="tocnumber">1.1</span> <span class="toctext">Functionality</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Integration_with_file_managers"><span class="tocnumber">1.2</span> <span class="toctext">Integration with file managers</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#libmtp"><span class="tocnumber">2.1</span> <span class="toctext">libmtp</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#simple-mtpfs"><span class="tocnumber">2.2</span> <span class="toctext">simple-mtpfs</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#jmtpfs"><span class="tocnumber">2.3</span> <span class="toctext">jmtpfs</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#go-mtpfs"><span class="tocnumber">2.4</span> <span class="toctext">go-mtpfs</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#mtpfs"><span class="tocnumber">2.5</span> <span class="toctext">mtpfs</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Android_File_Transfer"><span class="tocnumber">2.6</span> <span class="toctext">Android File Transfer</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Media_players"><span class="tocnumber">2.7</span> <span class="toctext">Media players</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#gvfs-mtp"><span class="tocnumber">2.8</span> <span class="toctext">gvfs-mtp</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13">
<a href="#Troubleshooting"><span class="tocnumber">3</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-14">
<a href="#libmtp_2"><span class="tocnumber">3.1</span> <span class="toctext">libmtp</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#Unable_to_enumerate_USB_device"><span class="tocnumber">3.1.1</span> <span class="toctext">Unable to enumerate USB device</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16">
<a href="#jmtpfs_2"><span class="tocnumber">3.2</span> <span class="toctext">jmtpfs</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#Input.2Foutput_error_upon_first_access"><span class="tocnumber">3.2.1</span> <span class="toctext">Input/output error upon first access</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-18"><a href="#kio-mtp"><span class="tocnumber">3.3</span> <span class="toctext">kio-mtp</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<h3><span class="mw-headline" id="Functionality">Functionality</span></h3>
<p>Linux MTP support is provided by <a href="../en/Help:Reading.html#Installation_of_packages" title="Installing" class="mw-redirect">installing</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=libmtp">libmtp</a></span> package. It can be installed on its own and used to access devices. However, a number of packages are available that use it as a dependency and add additional convenience (e.g. filemanager) functionalities and compatibility with particular device types - which includes improving transfer access speeds. 
</p>
<p>These packages to choose from all implement a <a href="https://en.wikipedia.org/wiki/Filesystem_in_Userspace" class="extiw" title="wikipedia:Filesystem in Userspace">Wikipedia:Filesystem in Userspace</a>: 
</p>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mtpfs">mtpfs</a></span>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jmtpfs/">jmtpfs</a></span><sup><small>AUR</small></sup> - is reported to work well for newer Android 4+ devices </li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/go-mtpfs-git/">go-mtpfs-git</a></span><sup><small>AUR</small></sup> - is reported to work well for newer Android 3+ devices </li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/simple-mtpfs/">simple-mtpfs</a></span><sup><small>AUR</small></sup>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=android-file-transfer">android-file-transfer</a></span> - MTP client with minimalistic UI</li>
</ul>
<p>All of them aim at better functionality and performance over <code>libmtp</code>. Since there are a lot of different USB devices, you might want to research first which one looks most suitable for yours. 
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong><code>libmtp</code> does not handle newer Android devices well - hanging transfers and problems with remote file system browsing are very common, poor performance is expected with most devices. Furthermore, if you have a damaged USB cable, programs utilizing libmtp may crash or hang indefinitely until you disconnect the device. It is recommended to connect your device with the USB Mass Storage (if available), or using <a href="../en/Android.html#Android_Debug_Bridge_.28ADB.29" title="ADB" class="mw-redirect">ADB</a> (for example <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/adbfs-rootless-git/">adbfs-rootless-git</a></span><sup><small>AUR</small></sup>) to transfer files, which performs better on most devices and supports additional Android-specific features (like installing APKs, managing packages on the device, backing up data or accessing the device's shell).</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>It is recommended to reboot your computer after installing MTP related packages.</div>
<h3><span class="mw-headline" id="Integration_with_file_managers">Integration with file managers</span></h3>
<p>To view the contents of your Android device's storage via MTP in your file manager, install the corresponding plugin:
</p>
<ul>
<li> For file managers that use <a href="../en/File_manager_functionality.html#Mounting" title="GVFS" class="mw-redirect">GVFS</a> (GNOME Files), install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gvfs-mtp">gvfs-mtp</a></span> for MTP or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gvfs-gphoto2">gvfs-gphoto2</a></span> for PTP support.</li>
<li> For file managers that use KIO (KDE's Dolphin), MTP support is included in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=kio-extras">kio-extras</a></span> (dependency of dolphin).</li>
</ul>
<p>After installing the required package, the device should show up in the file manager automatically and be accessible via an URL, for example <code>mtp://[usb:002,013]/</code>.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>It might be required to create a mount-point directory first. The directory <code>~/mnt</code> is used as an example below. Also do not forget to unlock your phone's screen before connecting it to the computer.
</p>
<h3><span class="mw-headline" id="libmtp">libmtp</span></h3>
<p>Detect your device:
</p>
<pre># mtp-detect
</pre>
<p>If an error is returned, see <a href="#libmtp_2">troubleshooting libmtp</a>. 
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Your regular user must be in the <code>uucp</code> <a href="../en/Users_and_groups.html#Example_adding_a_user" title="Users and groups">group</a>.</div>
<p>Connect to your device:
</p>
<pre># mtp-connect
</pre>
<p>If connection is successful, there are several switch options to use in conjunction with <i>mtp-connect</i> to access data on the device. You might want to use some stand alone commands:
</p>
<pre> mtp-albumart        mtp-emptyfolders    mtp-getplaylist     mtp-reset           mtp-trexist
 mtp-albums          mtp-files           mtp-hotplug         mtp-sendfile
 mtp-connect         mtp-folders         mtp-newfolder       mtp-sendtr
 mtp-delfile         mtp-format          mtp-newplaylist     mtp-thumb
 mtp-detect          mtp-getfile         mtp-playlists       mtp-tracks
</pre>
<h3><span class="mw-headline" id="simple-mtpfs">simple-mtpfs</span></h3>
<p>List MTP devices:
</p>
<pre>$ simple-mtpfs --list-devices
</pre>
<p>Mount your device on <code>~/mnt</code>:
</p>
<pre>$ simple-mtpfs ~/mnt
</pre>
<p>Unmount device mounted on <code>~/mnt</code>:
</p>
<pre>$ fusermount -u ~/mnt
</pre>
<h3><span class="mw-headline" id="jmtpfs">jmtpfs</span></h3>
<p>Mount device on <code>~/mnt</code>:
</p>
<pre>$ jmtpfs ~/mnt
</pre>
<p>Unmount device mounted on <code>~/mnt</code>:
</p>
<pre>$ fusermount -u ~/mnt
</pre>
<p>Make this cohere to the rest of Linux (use regular mount/umount commands) by doing two steps
</p>
<pre>$# ln -s &lt;actual mount command's path/name&gt;  &lt;a name consistent with Linux's mount convention&gt;
$  ln -s /sbin/jmtpfs                        /sbin/mount.jmtpfs
</pre>
<p>add this line to /etc/fstab; 
</p>
<pre> #jmtpfs &lt;mount path&gt;        fuse nodev,allow_other,&lt;other options&gt;                             0    0
  jmtpfs /home/sam/run/motog fuse nodev,allow_other,rw,user,noauto,noatime,uid=1000,gid=1000    0    0
</pre>
<p>Now mount the device and see if the options "took"
</p>
<pre> $ mount /home/sam/run/motog
 Device 0 (VID=22b8 and PID=2e82) is a Motorola Moto G (ID2).
 Android device detected, assigning default bug flags
 $ mount 
  ...
  jmtpfs on /home/sam/run/motog type fuse.jmtpfs (rw,nosuid,nodev,noexec,noatime,user_id=1000,group_id=1000,allow_other,user=sam)
</pre>
<h3><span class="mw-headline" id="go-mtpfs">go-mtpfs</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Mounting with <code>go-mtpfs</code> might fail if an external SD Card is present. If you try to access your device while having an SD card and go-mtpfs complains, try removing the SD card and mounting again.</div>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=android-udev">android-udev</a></span>, which will allow you to edit <code>/etc/udev/rules.d/51-android.rules</code> and apply to your <code>idVendor</code> and <code>idProduct</code>, which you can see after running <i>mtp-detect</i>. To the end of the line, add your user <code>OWNER="&lt;user&gt;"</code>.
</p>
<p>Mount device on <code>~/mnt</code>:
</p>
<pre>$ go-mtpfs ~/mnt
</pre>
<p>Unmount device mounted on <code>~/mnt</code>:
</p>
<pre>$ fusermount -u ~/mnt
</pre>
<h3><span class="mw-headline" id="mtpfs">mtpfs</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong> The following is likely to not work and you might have to resort to <a href="../en/Digital_Cameras.html#libgphoto2" title="Digital Cameras">gphoto2</a> or a file manager with gvfs support like <a href="../en/PCManFM.html" title="PCManFM">PCManFM</a>. </div>
<p>First edit your <code>/etc/fuse.conf</code> and uncomment the following line:
</p>
<pre>user_allow_other
</pre>
<p>Mount your device on <code>~/mnt</code>:
</p>
<pre>$ mtpfs -o allow_other ~/mnt
</pre>
<p>Unmount device mounted on <code>~/mnt</code>:
</p>
<pre>$ fusermount -u ~/mnt
</pre>
<h3><span class="mw-headline" id="Android_File_Transfer">Android File Transfer</span></h3>
<dl><dt>FUSE interface</dt></dl>
<p>Mount your device on <code>~/my-device</code>:
</p>
<pre>$ mkdir ~/my-device
$ aft-mtp-mount ~/my-device
</pre>
<p>If you want album art to be displayed, it must be named <code>albumart.xxx</code> and placed first in the destination folder. Then copy other files. Also, note that fuse could be 7-8 times slower than ui/cli file transfer.
</p>
<p>Unmount device mounted on <code>~/my-device</code>:
</p>
<pre>$ fusermount -u ~/my-device
</pre>
<dl><dt>Qt user interface</dt></dl>
<p>Start the application, choose a destination folder and click any button on the toolbar. Available options are: <i>Upload Album</i>, <i>Upload Directory</i> and <i>Upload Files</i>. The latter two are self-explanatory. <i>Upload album</i> searches the source directory for album covers, and sets the best available cover.
</p>
<h3><span class="mw-headline" id="Media_players">Media players</span></h3>
<p>You can also use your MTP device in music players such as Amarok. To achieve this, you might have to edit <code>/etc/udev/rules.d/51-android.rules</code> (the MTP device used in the following example is a Galaxy Nexus). 
Run:
</p>
<pre>$ lsusb
</pre>
<p>Search for your device. It should be something like that:
</p>
<pre>Bus 003 Device 011: ID 04e8:6860 Samsung Electronics Co., Ltd GT-I9100 Phone [Galaxy S II], GT-P7500 [Galaxy Tab 10.1]
</pre>
<p>And entry to <code>/etc/udev/rules.d/51-android.rules</code> will be this:
</p>
<pre>SUBSYSTEM=="usb", ATTR{idVendor}=="04e8", ATTR{idProduct}=="6860", MODE="0666", OWNER="[username]"
</pre>
<p>Also reload udev rules:
</p>
<pre># udevadm control --reload
</pre>
<h3><span class="mw-headline" id="gvfs-mtp">gvfs-mtp</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="../en/Udev.html" title="Udev">udev</a>.</b><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" width="48" height="48"></a></p>
<div>
<b>Notes:</b> <span style="color:red;">please use the second argument of the template to provide more detailed indications.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:MTP">Talk:MTP#</a>)</div>
</div>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gvfs-mtp">gvfs-mtp</a></span> is available in the official repositories.
</p>
<p>With <code>lsusb</code> you can get information about your device where Bus and Device numbers can be used with <code>gvfs-mtp</code> and device ID for creating of an <a href="../en/Udev.html" title="Udev">udev</a> rule.
</p>
<pre>Bus <b>002</b> Device <b>018</b>: ID <b>04b7</b>:<b>88a9</b> Compal Electronics, Inc.
(...)
</pre>
<p>To see detected device with enabled MTP
</p>
<p>Use <i>gvfs-mount</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">gvfs-mount -li | grep -e ^Volume -e activation_root</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Volume(0): MT65xx Android Phone
  activation_root=mtp://[usb:<b>002</b>,<b>018</b>]/</pre>
<p>Use <i>lsusb</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">lsusb -v 2&gt; /dev/null | grep -e Bus -e iInterface -e bInterfaceProtocol</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
(......
......)
Bus 002 Device 018: ID 04b7:88a9 Compal Electronics, Inc. 
      bInterfaceProtocol      0 
      iInterface              5 MTP
(......
......)
</pre>
<p>To mount all available connected MTP devices use inline script
</p>
<pre>gvfs-mount -li | awk -F= '{if(index($2,"mtp") == 1)system("gvfs-mount "$2)}'
</pre>
<p>To mount or dismount from a command with gvfs-mtp use Bus and Device numbers, e.g. to mount <code>gvfs-mount mtp://[usb:001,007]/</code> and to unmount <code>gvfs-mount -u mtp://[usb:001,007]/</code>. The mounted device will be available in a directory that begins with <i>mtp:host=</i> and is located under <i>/run/user/$UID/gvfs/</i>.
</p>
<p>Disable automount of MTP devises with gvfs you will need to change value <i>true</i> to <i>false</i> for variable <i>AutoMount</i> that is located in <code>/usr/share/gvfs/mounts/mtp.mount</code>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The file managers can have own options for automount. On start they checking for all available mountable devices.</div>
<p>If your device isn't showing up in the file manager then the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=libmtp">libmtp</a></span> is missing a native support and is not currently available in the list of the <a rel="nofollow" class="external text" href="https://sourceforge.net/p/libmtp/code/ci/HEAD/tree/src/music-players.h">supported devices</a>. If you will try to mount by using command line you may also get an error
</p>
<pre>Device 0 (VID=<i>XXXX</i> and PID=<i>XXXX</i>) is UNKNOWN.
Please report this VID/PID and the device model to the libmtp development team</pre>
<p>The workaround to make it shown in the file manager is to write an <a href="../en/Udev.html" title="Udev">udev</a> rule for the device but it is no guaranty that you will be able to mount it with by using MTP connection.
</p>
<p>Use ID number that represents by pattern <b>vendorId</b>:<b>productID</b>,e.g. <b>04b7</b>:<b>88a9</b>, and make an udev rule by creating a configuration file
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/51-android.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
SUBSYSTEM=="usb", ATTR{idVendor}=="04b7", ATTR{idProduct}=="88a9", MODE="0660", GROUP="uucp", ENV{ID_MTP_DEVICE}="1", SYMLINK+="libmtp"
</pre>
<p>Reload the udev rules.
</p>
<pre># udevadm control --reload
</pre>
<p>The file managers with support for <a href="../en/File_manager_functionality.html" title="Gvfs" class="mw-redirect">gvfs</a> will be able to show MTP devices and mount them if supported by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=libmtp">libmtp</a></span> but if has no support and cannot be opened then change settings in the phone to PTP and install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=gvfs-gphoto2">gvfs-gphoto2</a></span> for having access at least to the photos, command line mounting of PTP is a little similar to mounting of the MTP devices: <code>gvfs-mount gphoto2://[usb:002,019]/</code>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If you getting limited access to the device and cannot use standard commands from command line such as e.g. <code>cp</code>,<code>ls</code> then look for <a href="../en/File_manager_functionality.html" title="Gvfs" class="mw-redirect">gvfs</a> own alternatives, <code>ls -1 /usr/bin/gvfs-*</code>.</div>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="libmtp_2">libmtp</span></h3>
<h4><span class="mw-headline" id="Unable_to_enumerate_USB_device">Unable to enumerate USB device</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" width="48" height="48"></a><b>This section is being considered for removal.</b><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> This should be an old kernel bug, and should have been fixed already. There is no bug report to confirm though. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:MTP">Talk:MTP#</a>)</div>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" width="48" height="48"></a><b>This article or section is a candidate for merging with [[]].</b><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" width="48" height="48"></a></p>
<div>
<b>Notes:</b> Unrelated to MTP, perhaps suited for <a href="../en/USB_storage_devices.html" title="USB storage devices">USB storage devices</a> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:MTP">Talk:MTP#</a>)</div>
</div>
<p>If you see a message like this in system log (<code>journalctl</code>)
</p>
<pre> usb usb4-port2: unable to enumerate USB device
</pre>
<p>You can try following temporary <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1087323#p1087323">workaround</a>
</p>
<pre> # modprobe -vr uhci_hcd
 # modprobe -va ohci_hcd
 # modprobe -va uhci_hcd
</pre>
<p>If it works you should create <code>/etc/modprobe.d/usb_hci_order.conf</code> with following content
</p>
<pre> # create a dependency on ohci for uhci, which fixes problems
 # with external usb devices not showing up
 #
 softdep uhci_hcd pre: ohci_hcd
</pre>
<h3><span class="mw-headline" id="jmtpfs_2">jmtpfs</span></h3>
<h4><span class="mw-headline" id="Input.2Foutput_error_upon_first_access">Input/output error upon first access</span></h4>
<p>Symptoms: jmtpfs successfully mounts, but as soon as one attempts to access files on the device (e.g. via <code>ls</code>), an error is reported:
</p>
<pre> cannot access &lt;mount-point&gt;: Input/output error
</pre>
<p>This appears to be a security feature: MTP does not work when the phone is locked by the lockscreen.  Unlock the phone and it should work again as long as the cord remains connected.
</p>
<h3><span class="mw-headline" id="kio-mtp">kio-mtp</span></h3>
<p>If you are not able to use the action "Open with File Manager", you may work around this problem by editing the file <code>/usr/share/apps/solid/actions/solid_mtp.desktop</code>.
</p>
<p>Change the line
</p>
<pre>Exec=kioclient exec mtp:udi=%i/
</pre>
<p>To
</p>
<pre>Exec=dolphin "mtp:/"
</pre>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Storage.html" title="Category:Storage">Storage</a></li>
<li><a href="../en/Category:Mobile_devices.html" title="Category:Mobile devices">Mobile devices</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Sections_flagged_with_Template:Remove.html" title="Category:Sections flagged with Template:Remove">Sections flagged with Template:Remove</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
