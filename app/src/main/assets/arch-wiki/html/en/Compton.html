<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Compton - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Compton skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Compton</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p>Compton is a standalone composite manager, suitable for use with <a href="../en/Window_manager.html" title="Window managers" class="mw-redirect">window managers</a> that do not natively provide compositing functionality. Compton is a fork of <a rel="nofollow" class="external text" href="http://oliwer.net/xcompmgr-dana/">xcompmgr-dana</a>, which in turn is a fork of <a href="../en/Xcompmgr.html" title="Xcompmgr">xcompmgr</a>. See the <a rel="nofollow" class="external text" href="https://github.com/chjj/compton">compton github page</a> for more information.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Use"><span class="tocnumber">2</span> <span class="toctext">Use</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Autostarting"><span class="tocnumber">2.1</span> <span class="toctext">Autostarting</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Command_only"><span class="tocnumber">2.2</span> <span class="toctext">Command only</span></a></li>
<li class="toclevel-2 tocsection-5">
<a href="#Using_a_configuration_file"><span class="tocnumber">2.3</span> <span class="toctext">Using a configuration file</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Disable_shadowing_of_some_windows"><span class="tocnumber">2.3.1</span> <span class="toctext">Disable shadowing of some windows</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Multihead"><span class="tocnumber">3</span> <span class="toctext">Multihead</span></a></li>
<li class="toclevel-1 tocsection-8">
<a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#slock"><span class="tocnumber">4.1</span> <span class="toctext">slock</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#dwm_.26_dmenu"><span class="tocnumber">4.2</span> <span class="toctext">dwm &amp; dmenu</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Unable_to_change_the_background_color_with_xsetroot"><span class="tocnumber">4.3</span> <span class="toctext">Unable to change the background color with xsetroot</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Screen_artifacts.2Fscreenshot_issues_when_using_AMD.27s_Catalyst_driver"><span class="tocnumber">4.4</span> <span class="toctext">Screen artifacts/screenshot issues when using AMD's Catalyst driver</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#High_CPU_use_with_nvidia_drivers"><span class="tocnumber">4.5</span> <span class="toctext">High CPU use with nvidia drivers</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Errors_while_trying_to_daemonize_with_nvidia_drivers"><span class="tocnumber">4.6</span> <span class="toctext">Errors while trying to daemonize with nvidia drivers</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=compton">compton</a></span> or its <a href="../en/Git.html" title="Git">git</a> version, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/compton-git/">compton-git</a></span><sup><small>AUR</small></sup>.
</p>
<h2><span class="mw-headline" id="Use">Use</span></h2>
<p>Compton may be manually enabled or disabled at any time during a session, or autostarted as a background (<a href="../en/Daemons.html" title="Daemon" class="mw-redirect">Daemon</a>) process for sessions. There are also several optional arguments that may be used to tweak the compositing effects provided. These include:
</p>
<ul>
<li> <code>-b</code>: Run as a background (<a href="../en/Daemons.html" title="Daemon" class="mw-redirect">Daemon</a>) process for a session (e.g. when autostarting for a <a href="../en/Window_manager.html" title="Window manager">window manager</a> such as <a href="../en/Openbox.html" title="Openbox">Openbox</a>)</li>
<li> <code>-c</code>: Enable shadow effects</li>
<li> <code>-C</code>: Disable shadow effects on panels and docks</li>
<li> <code>-G</code>: Disable shadow effects for application windows and drag-and-drop objects</li>
<li> <code>--config</code>: Use a specified configuration file</li>
</ul>
<p>Many more options are available, including to set timing, displays to be managed, and the opacity of menus, window borders, and inactive application menus. See the <a rel="nofollow" class="external text" href="https://github.com/chjj/compton/blob/master/man/compton.1.asciidoc">Compton Man Page</a> for further information.
</p>
<h3><span class="mw-headline" id="Autostarting">Autostarting</span></h3>
<p>How compton would be autostarted as a <a href="../en/Daemons.html" title="Daemon" class="mw-redirect">Daemon</a> process will depend on the <a href="../en/Desktop_environment.html" title="Desktop environment">desktop environment</a> or <a href="../en/Window_manager.html" title="Window manager">window manager</a> used. For example, for <a href="../en/Openbox.html" title="Openbox">Openbox</a> the <code>~/.config/openbox/autostart</code> file must be edited, while for <a href="../en/I3.html" title="I3">i3</a> it would be the <code>~/.i3/config</code> file. Where necessary, compton may also be autostarted from <a href="../en/Xprofile.html" title="Xprofile">xprofile</a> or <a href="../en/Xinit.html" title="Xinitrc" class="mw-redirect">Xinitrc</a>. Read the <a href="../en/Autostarting.html" title="Startup files" class="mw-redirect">startup files</a> article for further information.
</p>
<h3><span class="mw-headline" id="Command_only">Command only</span></h3>
<p>To manually enable default compositing effects during a session, use the following command:
</p>
<pre>$ compton
</pre>
<p>Alternatively, to disable all shadowing effects during a session, the <code>-C</code> and <code>-G</code> arguments must be added:
</p>
<pre>$ compton -CG
</pre>
<p>To autostart compton as a background (<a href="../en/Daemons.html" title="Daemon" class="mw-redirect">Daemon</a>) process for a session, the <code>-b</code> argument must be used:
</p>
<pre>compton -b
</pre>
<p>To disable all shadowing effects from the <a href="../en/Daemons.html" title="Daemon" class="mw-redirect">Daemon</a> process, the <code>-C</code> and <code>-G</code> arguments must again be added:
</p>
<pre>compton -CGb
</pre>
<p>Finally, this is an example where additional arguments that require values to be set have been used:
</p>
<pre>compton -cCGfF -o 0.38 -O 200 -I 200 -t 0 -l 0 -r 3 -D2 -m 0.88
</pre>
<h3><span class="mw-headline" id="Using_a_configuration_file">Using a configuration file</span></h3>
<p>The default configuration is available in <code>/etc/xdg/compton.conf</code>. For modifications, it can be copied to <code>~/.config/compton.conf</code>, or to <code>~/.compton.conf</code>.
</p>
<p>To use a custom configuration file with compton during a session, use the following command:
</p>
<pre>compton --config <i>path/to/compton.conf</i>
</pre>
<p>To auto-start compton as a background (<a href="../en/Daemons.html" title="Daemon" class="mw-redirect">Daemon</a>) process for a session, specify the <code>-b</code> argument:
</p>
<pre>compton --config <i>path/to/compton.conf</i> -b
</pre>
<h4><span class="mw-headline" id="Disable_shadowing_of_some_windows">Disable shadowing of some windows</span></h4>
<p>Due to the way compton draws its shadows, certain applications will have visual glitches when you have shadows enabled. The <code>shadow-exclude</code> options could disable compton shadows. 
</p>
<p>For example, to disable Compton shadows on all GTK +3 windows, add below setting to <code>shadow-exclude</code> in <code>compton.conf</code>:
</p>
<pre>"_GTK_FRAME_EXTENTS@:c"
</pre>
<p>To disable shadows around <a href="../en/Conky.html" title="Conky">conky</a> windows - where used - first amend the conky configuration file <code>~/.conkyrc</code> as follows:
</p>
<pre>own_window_class conky
</pre>
<p>Then amend the compton configuration file as follows:
</p>
<pre>shadow-exclude = "class_g = 'conky'";
</pre>
<p>For currently disabled windows, please see <a rel="nofollow" class="external text" href="https://projects.archlinux.org/svntogit/community.git/tree/trunk/compton.conf?h=packages/compton#n80">here</a>.
</p>
<h2><span class="mw-headline" id="Multihead">Multihead</span></h2>
<p>If a <a href="../en/Multihead.html" title="Multihead">multihead</a> configuration is used without xinerama - meaning that X server is started with more than one screen - then compton will start on only one screen by default. It can be started on all screens by using the <code>-d</code> argument. For example, compton can be executed for 4 monitors with the following command:
</p>
<pre>seq 0 3 | xargs -l1 -I@ compton -b -dÂ :0.@
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>The use of compositing effects may on occasion cause issues such as visual glitches when not configured correctly for use with other applications and programs.
</p>
<h3><span class="mw-headline" id="slock">slock</span></h3>
<p>Where inactive window transparency has been enabled (the <code>-i</code> 
argument when running as a command), this may provide troublesome 
results when also using <a href="../en/List_of_applications.html#Screen_lockers" title="Slock" class="mw-redirect">slock</a>. One solution is to amend the 
transparency to <code>0.2</code>. For example, where running compton arguments
as a command:
</p>
<pre>$ compton &lt;any other arguments&gt; -i 0.2
</pre>
<p>Otherwise, where using a configuration file:
</p>
<pre>inactive-dim = 0.2;
</pre>
<p>Alternatively, you may try to exclude slock by its window id, or by 
excluding all windows with no name.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Some programs change their id for every new instance, but slock's appears to be static. Someone more knowledgeable will have to confirm that slock's id is in fact static- until then, use at your own risk.</div>
<p>Exclude all windows with no name from compton using the following 
options:
</p>
<pre>$ compton &lt;other arguments&gt; --focus-exclude "! name~=<i>"</i>
</pre>
<p>Find your slock's window id by running the command:
</p>
<pre>$ xwininfo &amp; slock
</pre>
<p>Quickly click anywhere on the screen (before slock exits), then type 
your password to unlock. You should see the window id in the output:
</p>
<pre>xwininfo: Window id: 0x1800001 (has no name)
</pre>
<p>Take the window id and exclude it from compton with:
</p>
<pre>$ compton &lt;any other arguments&gt; --focus-exclude 'id = 0x1800001'
</pre>
<p>Otherwise, where using a configuration file:
</p>
<pre>focus-exclude = "id = 0x1800001";
</pre>
<h3><span class="mw-headline" id="dwm_.26_dmenu">dwm &amp; dmenu</span></h3>
<p>dwm's statusbar is not detected by any of compton's functions to automatically exclude window manager elements. Neither dwm statusbar nor dmenu have a static window id. If you want to exclude it from inactive window transparency (or other), you'll have to either patch a window class into the source code of each, or exclude by less precise attributes. I have dmenu and dwm's status on top, which allows me to write a resolution independent location exclusion.
</p>
<pre>$ compton &lt;any other arguments&gt; --focus-exclude "x = 0 &amp;&amp; y = 0 &amp;&amp; override_redirect = true"
</pre>
<p>Otherwise, where using a configuration file:
</p>
<pre>focus-exclude = "x = 0 &amp;&amp; y = 0 &amp;&amp; override_redirect = true";
</pre>
<p>The override redirect property seems to be false for most windows- having this in the exclusion rule prevents other windows drawn in the upper left corner from being excluded (for example, when dwm statusbar is hidden, x0 y0 will match whatever is in dwm's master stack).
</p>
<h3><span class="mw-headline" id="Unable_to_change_the_background_color_with_xsetroot">Unable to change the background color with xsetroot</span></h3>
<p>Currently, compton is incompatible with <code>xsetroot</code>'s <code>-solid</code> option, a workaround is to use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hsetroot/">hsetroot</a></span><sup><small>AUR</small></sup> to set the background color:
</p>
<pre>$ hsetroot -solid '#000000'
</pre>
<p>For a detailed explaination, please see <a rel="nofollow" class="external free" href="https://github.com/chjj/compton/issues/162">https://github.com/chjj/compton/issues/162</a>.
</p>
<h3><span class="mw-headline" id="Screen_artifacts.2Fscreenshot_issues_when_using_AMD.27s_Catalyst_driver">Screen artifacts/screenshot issues when using AMD's Catalyst driver</span></h3>
<p>Try running compton with
</p>
<pre>--backend xrender
</pre>
<p>or adding
</p>
<pre>backend = "xrender";
</pre>
<p>to your compton.conf file.
</p>
<p>For more info, please see <a rel="nofollow" class="external free" href="https://github.com/chjj/compton/issues/208">https://github.com/chjj/compton/issues/208</a>
</p>
<h3><span class="mw-headline" id="High_CPU_use_with_nvidia_drivers">High CPU use with nvidia drivers</span></h3>
<p>When facing high CPU use with <code>--backend glx</code> or tearing with <code>--vsync</code> enabled, <a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=nvidia-libgl">nvidia-libgl</a></span> as described in <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a>.
</p>
<h3><span class="mw-headline" id="Errors_while_trying_to_daemonize_with_nvidia_drivers">Errors while trying to daemonize with nvidia drivers</span></h3>
<p>If you get error <code>main(): Failed to create new session.</code> while trying to start compton in background you should try <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/compton-garnetius-git/">compton-garnetius-git</a></span><sup><small>AUR</small></sup>. It also provides a few pulls from upstream that aren't merged yet.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a rel="nofollow" class="external text" href="http://ubuntuforums.org/showthread.php?t=2144468&amp;p=12644745#post12644745">Howto: Using Compton for tear-free compositing on XFCE or LXDE</a></li></ul>

</div>
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:X_server.html" title="Category:X server">X server</a></li>
<li><a href="../en/Category:Eye_candy.html" title="Category:Eye candy">Eye candy</a></li>
</ul>
</div></div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
