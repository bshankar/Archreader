<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>ArchAudio - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-ArchAudio skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">ArchAudio</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p><i>This page contains information related to a <a href="../en/Getting_involved.html#Community_projects" title="Getting involved">third-party initiative</a>. You may instead want to read about <a href="../en/Professional_audio.html" title="Professional audio">professional audio</a> tips.</i>
</p>
<p>If you have come here from another page, or were referred, you are probably interested in the <a rel="nofollow" class="external text" href="http://archaudio.org/">ArchAudio</a> <a rel="nofollow" class="external text" href="http://archaudio.org/packages/">repositories</a>.
</p>
<p>Read on if you are looking to contribute to the project, or are just plain bored.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Repositories"><span class="tocnumber">1</span> <span class="toctext">Repositories</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Packaging"><span class="tocnumber">2</span> <span class="toctext">Packaging</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#Getting_Started"><span class="tocnumber">2.1</span> <span class="toctext">Getting Started</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Password_Hashing"><span class="tocnumber">2.1.1</span> <span class="toctext">Password Hashing</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Buildscript_Contributor"><span class="tocnumber">2.1.2</span> <span class="toctext">Buildscript Contributor</span></a></li>
<li class="toclevel-3 tocsection-6">
<a href="#Binary_Contributor"><span class="tocnumber">2.1.3</span> <span class="toctext">Binary Contributor</span></a>
<ul>
<li class="toclevel-4 tocsection-7"><a href="#Committing_Packages"><span class="tocnumber">2.1.3.1</span> <span class="toctext">Committing Packages</span></a></li>
<li class="toclevel-4 tocsection-8"><a href="#Building_Packages"><span class="tocnumber">2.1.3.2</span> <span class="toctext">Building Packages</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#Subversion_Maintenance"><span class="tocnumber">2.2</span> <span class="toctext">Subversion Maintenance</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Guidelines"><span class="tocnumber">2.3</span> <span class="toctext">Guidelines</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Repositories">Repositories</span></h2>
<ul><li> <b>production</b> - tried and tested packages promoted from <i>preview</i> by a developer</li></ul>
<ul><li> <b>preview</b> - contributed packages from trusted ArchAudio members; may also house testing updates for packages in <i>production</i>
</li></ul>
<ul><li> <b>nightly</b> - nightly/daily builds of packages not necessarily tested but whose PKGBUILDs have been verified by a developer; promoted from <i>experimental</i>
</li></ul>
<ul><li> <b>experimental</b> - nightly/daily builds of packages whose PKGBUILDs have been contributed by trusted ArchAudio members</li></ul>
<h2><span class="mw-headline" id="Packaging">Packaging</span></h2>
<p>Prerequisite(s):
</p>
<ul>
<li> <a href="../en/Creating_packages.html" title="Creating packages">Creating packages</a>
</li>
<li> <a href="../en/Arch_packaging_standards.html" title="Arch packaging standards">Arch packaging standards</a>
</li>
</ul>
<h3><span class="mw-headline" id="Getting_Started">Getting Started</span></h3>
<p>Take a look <a rel="nofollow" class="external text" href="http://archaudio.org/participate/">here</a>.
</p>
<p>Anyone and everyone keen on contributing to the buildscripts (<a href="../en/PKGBUILD.html" title="PKGBUILD">PKGBUILDs</a> and related files) can start immediately. You only have to take the time to get in touch with either <b>schivmeister</b> or <b>jonkristian</b> with a <i>password hash</i>. The fastest way is to log on to IRC (#archaudio@Freenode) and look for them, but a more straightforward approach is to simply e-mail them directly:
</p>
<pre>printf 'schiv#%s.fun\n' archaudio | sed -e 's/#/@/' -e 's/fun/org/'
printf 'jon$%s.fun\n' archaudio | sed -e 's/\$/@/' -e 's/fun/org/'
</pre>
<h4><span class="mw-headline" id="Password_Hashing">Password Hashing</span></h4>
<p>As we mentioned above, this is needed for anyone wanting to have write access to the Subversion repository:
</p>
<pre><a rel="nofollow" class="external free" href="http://aspirine.org/htpasswd_en.html">http://aspirine.org/htpasswd_en.html</a>
</pre>
<p>Simply enter a username and password, select either SHA-1 or MD5 (up to you), then click on "encrypt password". The output is what we want.
</p>
<p>Or if you prefer an offline method:
</p>
<pre>htpasswd -cs hashForArchAudio.txt $preferred_username # you need to install 'apache' for this tool
</pre>
<p>In this example, the file 'hashForArchAudio.txt' will be created with your new <a rel="nofollow" class="external text" href="http://phpsec.org/articles/2005/password-hashing.html">password hash</a>. Either send the file itself or copy the hash (the whole line). Do not worry, you are only sharing the <i>cryptographic hash</i> of your password - and not the password itself - so that you can be authenticated.
</p>
<h4><span class="mw-headline" id="Buildscript_Contributor">Buildscript Contributor</span></h4>
<p>Simply checkout the repository via HTTPS with your username:
</p>
<pre>svn co <a rel="nofollow" class="external free" href="https://svn.archaudio.org/trunk">https://svn.archaudio.org/trunk</a> archaudio --username $your_username
</pre>
<p>You will only have write-access to the <b>preview</b> and <b>experimental</b> repositories, as far as PKGBUILDs and packages are concerned, as well as <b>devel</b> and <b>projects</b> for other things. If you are only concerned about editing PKGBUILDs and nothing else, then you may want to just checkout those specific directories:
</p>
<pre>svn co <a rel="nofollow" class="external free" href="https://svn.archaudio.org/trunk/buildscripts">https://svn.archaudio.org/trunk/buildscripts</a> archaudio --depth empty --username $your_username
cd archaudio
svn up preview experimental
</pre>
<p>Or if you want to be even more specific and work with one repository only:
</p>
<pre>svn co <a rel="nofollow" class="external free" href="https://svn.archaudio.org/trunk/buildscripts/%24repo_name">https://svn.archaudio.org/trunk/buildscripts/$repo_name</a> archaudio --username $your_username
</pre>
<p>You can also checkout a package directly:
</p>
<pre>svn co <a rel="nofollow" class="external free" href="https://svn.archaudio.org/trunk/buildscripts/%24repo_name/%24pkg_dir">https://svn.archaudio.org/trunk/buildscripts/$repo_name/$pkg_dir</a> --username $your_username
</pre>
<p>We hope to incorporate these (commands) into a helper script soon.
</p>
<h4><span class="mw-headline" id="Binary_Contributor">Binary Contributor</span></h4>
<p><i>It is mandatory that you be well-acquainted with Arch Linux packaging before applying to become a (binary) packager. If you maintain packages in <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a> you are on the right path.</i>
</p>
<p>The only difference here is that you have to do a second, <i>non-recursive</i> checkout for the private <b>packages</b> area, where the binaries are contained and pushed. Although Subversion will not track this directory, we are going to keep it under the main checkout for the sake of consistency. We have already made the necessary amendments so that SVN does not display the '?' symbol as the directory's status.
</p>
<h5><span class="mw-headline" id="Committing_Packages">Committing Packages</span></h5>
<p>If you are a 'developer', you have write access to almost everything:
</p>
<pre>(
echo -n 'Username: '
read your_username
svn co <a rel="nofollow" class="external free" href="https://svn.archaudio.org/trunk">https://svn.archaudio.org/trunk</a> archaudio --username $your_username
cd archaudio
svn co <a rel="nofollow" class="external free" href="https://svn.archaudio.org/trunk/packages">https://svn.archaudio.org/trunk/packages</a> --depth empty --username $your_username
cd packages
svn up production preview --set-depth immediates # nightly/experimental will contain only automated builds
) # if you copy-pasted you have to press ENTER now
</pre>
<p>If you are a 'packager', your binary-write-access is limited to the <b>preview</b> repository. So, for example, if you are only concerned about editing PKGBUILDs and uploading packages for this repository and nothing else, then it may be less clutter to just do two separate checkouts:
</p>
<pre>svn co <a rel="nofollow" class="external free" href="https://svn.archaudio.org/trunk/buildscripts/preview">https://svn.archaudio.org/trunk/buildscripts/preview</a> archaudiosrc --username $your_username
svn co <a rel="nofollow" class="external free" href="https://svn.archaudio.org/trunk/packages/preview">https://svn.archaudio.org/trunk/packages/preview</a> archaudiobin --depth immediates --username $your_username
</pre>
<p>So, after having done all that, you would copy the (binary) package that you built to the proper architecture directory, add it to SVN, and finally commit the addition. Optionally, you may clear out the directory again to maintain the 'sparseness':
</p>
<pre>cp $somewhere/foo-1.1-1-i686.pkg.tar.xz $svn_dir/packages/preview/i686/
svn add $svn_dir/packages/preview/i686/foo-1.1-1-i686.pkg.tar.xz
svn ci $svn_dir/packages/preview/i686 -m "Added binary package $package"
svn up $vcscopy/packages/preview/i686 --set-depth empty
</pre>
<p>Old packages will be automatically deleted on the server, so you need not worry about removing them yourself. Be careful to add real binary packages and not symlinks or any other file that may deceive you.
</p>
<h5><span class="mw-headline" id="Building_Packages">Building Packages</span></h5>
<p>It is recommended to <a href="../en/DeveloperWiki:Building_in_a_Clean_Chroot.html" title="DeveloperWiki:Building in a Clean Chroot">build packages in a chroot environment</a>. To ease up the process you may use the tools like <i>extra-i686-build</i> from the <b>devtools</b> package in Arch Linux's <b>extra</b> repository.
</p>
<p>It is best to edit the chroot's <b>pacman.conf</b> so that any ArchAudio-related dependencies can be pulled in. Just run the following anywhere <i>but</i> within a PKGBUILD directory:
</p>
<pre>extra-i686-build # or x86_64
</pre>
<p>It will go on to create the chroot, which will by default be located at <b>/var/tmp/archbuild</b>, and then fail upon not finding a PKGBUILD. You can now make your changes to the pristine copy of the chroot (the other copy will be named after your username and will be recreated upon every build from this pristine copy):
</p>
<pre>vi /var/tmp/archbuild/extra-i686/root/etc/pacman.conf
</pre>
<p>If you are on 64-bit, you can build for both architectures:
</p>
<pre>extra-x86_64-build &amp;&amp; extra-i686-build
</pre>
<p>If you have a powerful machine (anything more than a dual-core), you may want to run each of those builds in two separate windows.
</p>
<p>If needed, you may build against the <b>multilib</b> repository, i.e <i>multilib-build</i>.
</p>
<p>Unless you know what you are doing, <i>never</i> build against Arch Linux's <b>testing</b> repository, i.e <i>testing-i686-build</i>.
</p>
<p>There is a work-in-progress suite of helper scripts called <b>archaudio-devtools</b>, and it is hoped that it will automate most of the labour involved here in a future release.
</p>
<h3><span class="mw-headline" id="Subversion_Maintenance">Subversion Maintenance</span></h3>
<p>It is always a good idea to make the following sanity checks a routine:
</p>
<pre>svn stat
</pre>
<pre>svn merge --dry-run -r BASE:HEAD . # basically a more intuitive <b>svn stat -u</b>
</pre>
<p>And if you really cannot find out how to use SVN (man, wiki, google):
</p>
<pre>svn add $somedir $somefile # to add (recursive)
</pre>
<pre>svn del $somedir $somefile # to delete
</pre>
<p><i>Warning: If you remove something without the <b>svn</b> command, Subversion will complain that it is missing since it is not aware of the removal.</i>
</p>
<pre>svn mv $oldname $newname # same warning applies; you <b>cannot forget</b> the <b>svn</b> before the <i>mv</i>!
</pre>
<pre>svn revert $somedir $somefile # revert some changes (selective)
</pre>
<pre>svn revert -R . # revert ALL changes (recursive)
</pre>
<pre>svn ci -m "$yourmessage" # to finally commit all changes
</pre>
<h3><span class="mw-headline" id="Guidelines">Guidelines</span></h3>
<ul>
<li> Use tools such as <i>namcap</i> and those from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=pacman">pacman</a></span> to help yourself</li>
<li> Always ensure a package installs and runs as expected before distributing your changes</li>
<li> Try to keep in touch with upstream developers of packages you regularly update</li>
<li> Always check the upstream changelog if an update does not go smoothly</li>
</ul>

</div>
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Sound.html" title="Category:Sound">Sound</a></li></ul>
</div></div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
