<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Festival - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Festival skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Festival</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p><a rel="nofollow" class="external text" href="http://www.cstr.ed.ac.uk/projects/festival/">Festival</a> is a general multi-lingual speech synthesis system developed at CSTR (<a rel="nofollow" class="external text" href="http://www.cstr.ed.ac.uk/">Centre for Speech Technology Research</a>).
</p>
<p>Festival offers a general framework for building speech synthesis systems as well as including examples of various modules. As a whole it offers full text to speech through a number APIs: from shell level, though a Scheme command interpreter, as a C++ library, from Java, and an Emacs interface. Festival is multi-lingual (currently British English, American English, Italian, Czech and Spanish, with other languages available in prototype.) 
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Using_German_IMS_festival_extension_with_mbrola"><span class="tocnumber">1.1</span> <span class="toctext">Using German IMS festival extension with mbrola</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Usage_with_a_Sound_Server"><span class="tocnumber">2.1</span> <span class="toctext">Usage with a Sound Server</span></a></li>
<li class="toclevel-2 tocsection-5">
<a href="#Voices"><span class="tocnumber">2.2</span> <span class="toctext">Voices</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#HTS_compatibility_patches"><span class="tocnumber">2.2.1</span> <span class="toctext">HTS compatibility patches</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Manual_Voice_Installs"><span class="tocnumber">2.2.2</span> <span class="toctext">Manual Voice Installs</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Usage"><span class="tocnumber">3</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Interactive_mode_.28testing_voices_etc..29"><span class="tocnumber">3.1</span> <span class="toctext">Interactive mode (testing voices etc.)</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Example_script"><span class="tocnumber">3.2</span> <span class="toctext">Example script</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11">
<a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Can.27t_open_.2Fdev.2Fdsp"><span class="tocnumber">4.1</span> <span class="toctext">Can't open /dev/dsp</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Alsa_playing_at_wrong_speed"><span class="tocnumber">4.2</span> <span class="toctext">Alsa playing at wrong speed</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#aplay_Command_not_found"><span class="tocnumber">4.3</span> <span class="toctext">aplay Command not found</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=festival">festival</a></span> from <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>. You need a voice package like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=festival-english">festival-english</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=festival-us">festival-us</a></span>. Further languages are available in official repositories and in <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>.
</p>
<p>Test festival:
</p>
<pre>$ echo "This is an example. Arch is the best." | festival --tts
</pre>
<p>If your hear all the example text, you sucessfully installed a TTS system.
</p>
<p>If you do not hear anything, see the <a href="#Troubleshooting">Troubleshooting</a> section. If you have a desktop system you will almost certainly get a message about /dev/dsp and need to follow those instructions.
</p>
<h3><span class="mw-headline" id="Using_German_IMS_festival_extension_with_mbrola">Using German IMS festival extension with mbrola</span></h3>
<p>You can use the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/festival-ims/">festival-ims</a></span><sup><small>AUR</small></sup> package with IMS Stuttgart patches.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Much of the following should be done by the AUR package above, but mbrola and related packages should still need to be installed separately. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Festival">Talk:Festival#</a>)</div>
</div>
<p>The <a rel="nofollow" class="external text" href="http://www.ims.uni-stuttgart.de">IMS of the University Stuttgart</a> developed an extension to festival especially for German language.  It uses German voices with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mbrola/">mbrola</a></span><sup><small>AUR</small></sup>.  To install it, the extension needs to be downloaded from the university's servers (follow the Instructions <a rel="nofollow" class="external text" href="http://www.ims.uni-stuttgart.de/institut/arbeitsgruppen/phonetik/synthesis/festival_opensource.html">here</a>) and the <a href="../en/PKGBUILD.html" title="PKGBUILD">PKGBUILD</a> needs to be modified -- use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=abs">abs</a></span> to get it and the patches necessary to install festival under arch linux.
</p>
<p>Add these two files downloaded from the IMS (do NOT use the third file, <i>ims_german_1.3-os.fix.tgz</i>)
</p>
<pre> ims_german_1.3-os.tgz
 bomp_full.corr.tgz
</pre>
<p>with their md5sums to the <i>source</i> variable and place them in the same folder as the PKGBUILD.  In the <code>prepare()</code> section, include the following lines (at the end of the section):
</p>
<pre>   # add ims config
   sed -i 's/ALSO_INCLUDE +=$/# IMS module for German\nALSO_INCLUDE += ims_german_text/' "$srcdir/festival/config/config.in"
   cat&lt;&lt;EOF &gt;&gt; "$srcdir/festival/lib/sitevars.scm"
 (set! mbrola-path "/usr/share/mbrola/")
 (set! mbrola_progname "/usr/bin/mbrola -e")
 EOF
   echo "(require 'ims_german_opensource)" &gt;&gt; "$srcdir/festival/lib/siteinit.scm"
</pre>
<p>This should install support for the german voices de1 through de4.  Install at least one of these voices, e.g. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mbrola-voices-de2/">mbrola-voices-de2</a></span><sup><small>AUR</small></sup>, and then use it in festival by selecting the voice via
</p>
<pre> (voice_german_de2_os)
 (SayText "Hallo Welt.")
</pre>
<p>from the prompt or use it in <i>text2wave</i> via
</p>
<pre> text2wave -o spoken.wav -eval '(voice_german_de2_os)' inputfile.txt
</pre>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>There is no global /etc configuration file, but you can configure festival with your <code>~/.festivalrc</code> file, or by directly editing <code>/usr/share/festival/festival.scm</code>. Both of these are scheme files, using scheme syntax and rerun everytime festival is run.
</p>
<h3><span class="mw-headline" id="Usage_with_a_Sound_Server">Usage with a Sound Server</span></h3>
<p>For PulseAudio, add these lines to the end of your <code>~/.festivalrc</code> file, or to <code>/usr/share/festival/festival.scm</code>:
</p>
<pre>(Parameter.set 'Audio_Required_Format 'aiff)
(Parameter.set 'Audio_Method 'Audio_Command)
(Parameter.set 'Audio_Command "paplay $FILE --client-name=Festival --stream-name=Speech")
</pre>
<p>For ALSA, use these lines instead (<a rel="nofollow" class="external text" href="http://ubuntuforums.org/showpost.php?p=4058268&amp;postcount=16">source</a>):
</p>
<pre>(Parameter.set 'Audio_Method 'Audio_Command)
(Parameter.set 'Audio_Command "aplay -q -c 1 -t raw -f s16 -r $SR $FILE")
</pre>
<h3><span class="mw-headline" id="Voices">Voices</span></h3>
<p>Arch splits the set of official voices into <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=festival-english">festival-english</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=festival-us">festival-us</a></span>. <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/?K=festival">The AUR</a> has some others, in various states of maintenance which may or may not be currently working.
</p>
<p>To see what voices you currently have installed and what your default is, go into the Festival shell (which is a scheme REPL):
</p>
<pre>   $ festival
   
   Festival Speech Synthesis System 2.1:release November 2010
   Copyright (C) University of Edinburgh, 1996-2010. All rights reserved.
   
   clunits: Copyright (C) University of Edinburgh and CMU 1997-2010
   clustergen_engine: Copyright (C) CMU 2005-2010
   hts_engine: 
   The HMM-based speech synthesis system (HTS)
   hts_engine API version 1.04 (<a rel="nofollow" class="external free" href="http://hts-engine.sourceforge.net/">http://hts-engine.sourceforge.net/</a>)
   Copyright (C) 2001-2010  Nagoya Institute of Technology
                 2001-2008  Tokyo Institute of Technology
   All rights reserved.
   For details type `(festival_warranty)'
   festival&gt; voice_default 
   voice_cmu_us_slt_arctic_hts          ;;&lt;-- THIS IS THE VOICE FESTIVAL SPEAKS WITH
   festival&gt; default-voice-priority-list 
</pre>
<pre>   (kal_diphone                         ;;&lt;-- THIS IS THE HARD-CODED LIST OF VOICES FESTIVAL CAME PRE-AWARE OF
    cmu_us_bdl_arctic_hts
    cmu_us_jmk_arctic_hts
    cmu_us_slt_arctic_hts
    cmu_us_awb_arctic_hts
    ked_diphone
    don_diphone
    rab_diphone
    en1_mbrola
    us1_mbrola
    us2_mbrola
    us3_mbrola
    gsw_diphone
    el_diphone)
   
   festival&gt; (voice_                    ;;&lt;-- PRESS TAB HERE TO SEE WHAT VOICES FESTIVAL HAS AVAILABLE
   voice_cmu_us_slt_arctic_hts     voice_kal_diphone               voice_nitech_us_slt_arctic_hts  voice_reset
   voice_default                   voice_nitech_us_clb_arctic_hts  voice_rab_diphone
   festival&gt; (voice_cmu_us_slt_arctic_hts) 
   cmu_us_slt_arctic_hts
   festival&gt; (SayText "Arch makes me happy")
   #&lt;Utterance 0x7fb5b8c423b0&gt;
   festival&gt; 
</pre>
<p>To permanently change the default voice you can add a line like this to the end of <code>~/.festivalrc</code>:
</p>
<pre>(set! voice_default voice_cmu_us_slt_arctic_hts)
</pre>
<p>You cannot set the voice with festival.scm; to set voices globally, set order of searched voices in <code>/usr/share/festival/voices.scm</code>.
</p>
<h4><span class="mw-headline" id="HTS_compatibility_patches">HTS compatibility patches</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=festival-us">festival-us</a></span> comes with <code>cmu_us_slt_arctic_hts</code> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Festival">Talk:Festival#</a>)</div>
</div>
<p>Some say that HTS voices for Festival are the best ones freely available. Sadly they are not compatible with Festival &gt;2.1 without patching it (and the new voice versions are not made available for downloading).
</p>
<p>You can install the patched version from <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/festival-patched-hts/">festival-patched-hts</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/festival-hts-voices-patched/">festival-hts-voices-patched</a></span><sup><small>AUR</small></sup>
</p>
<h4><span class="mw-headline" id="Manual_Voice_Installs">Manual Voice Installs</span></h4>
<p>You can also get voices straight from <a rel="nofollow" class="external text" href="http://festvox.org/festival/downloads.html">festvox.org</a>. In their downloads, the files named "festvox_*.tgz" each contain a different voice, as built by the festival team. They do work, but you will need to manually unzip and move the folder containing the voice to the appropriate place. On a recent Arch, the appropriate place is
/usr/share/festival/voices/english/
and the way to tell what folder contains the voice is to look for a 'festvox/' subfolder inside of it.
</p>
<p>You can then test that your new voices are found by loading up the festival prompt again.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>Read a text file:
</p>
<pre>$ festival --tts /path/to/letter.txt
</pre>
<p>Be obnoxious while demonstrating piping
</p>
<pre>$ (echo "Get ready for some pain"; sudo cat /var/log/messages.log) | festival --tts
</pre>
<p>Convert a text file to mp3:
</p>
<pre>$ cat letter.txt | text2wave | lame - file.mp3 &amp;&amp; mplayer file.mp3
</pre>
<h3><span class="mw-headline" id="Interactive_mode_.28testing_voices_etc..29">Interactive mode (testing voices etc.)</span></h3>
<p>festival has an interactive prompt you can use for testing. Some examples (with sample output):
</p>
<pre>$ festival 
[...]
festival&gt; 
</pre>
<p>List available voices:
</p>
<pre>festival&gt; (voice.list)
(cstr_us_awb_arctic_multisyn kal_diphone don_diphone)
</pre>
<p>Set voice:
</p>
<pre>festival&gt; (voice_cstr_us_awb_arctic_multisyn)
#&lt;voice 0x1545b90&gt;
</pre>
<p>Speak:
</p>
<pre>festival&gt; (SayText '"test this is a test oh no a test bla test")
inserting pause after: t.
Inserting pause
[...]
id _63 ; name t ; 
id _65 ; name # ; 
#&lt;Utterance 0x7f7c0c144810&gt;
</pre>
<p>More:
</p>
<pre>festival&gt; help 
"The Festival Speech Synthesizer System: Help
</pre>
<p>Quit: ctrl+d or
</p>
<pre>festival&gt; (quit)
</pre>
<h3><span class="mw-headline" id="Example_script">Example script</span></h3>
<p>One classic app that can make use of this is ping. Use this script to constantly ping a host, and return ping if success, fail if not:
</p>
<pre>#!/bin/bash
while :; do
    ping -c 1 $1 &amp;&amp; (echo "Ping" | festival --tts) || (echo "Fail" | festival --tts)
done
</pre>
<p>Note that this does not really work on multisynth voices, as they take a while to prepare before playing.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Can.27t_open_.2Fdev.2Fdsp">Can't open /dev/dsp</span></h3>
<p>If festival returns the following error message:
</p>
<pre>Linux: can't open /dev/dsp
</pre>
<p>See <a href="#Usage_with_a_Sound_Server">#Usage with a Sound Server</a> above.
</p>
<h3><span class="mw-headline" id="Alsa_playing_at_wrong_speed">Alsa playing at wrong speed</span></h3>
<p>If the solution above gives you a squeaky voice, you might want to try changing your aplay options:
</p>
<pre>(Parameter.set 'Audio_Method 'Audio_Command)
(Parameter.set 'Audio_Command "aplay -Dplug:default -f S16_LE -r $SR $FILE")
</pre>
<h3><span class="mw-headline" id="aplay_Command_not_found">aplay Command not found</span></h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li> <a rel="nofollow" class="external text" href="http://www.cstr.ed.ac.uk/projects/festival/manual/">Festival manual</a>
</li></ul>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Accessibility.html" title="Category:Accessibility">Accessibility</a></li>
<li><a href="../en/Category:Multimedia.html" title="Category:Multimedia">Multimedia</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
