<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>KDM - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-KDM skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">KDM</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="../en/Display_manager.html" title="Display manager">Display manager</a>.</b><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" width="48" height="48"></a></p>
<div>
<b>Notes:</b> No longer maintained, users should choose other display manager instread. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:KDM">Talk:KDM#</a>)</div>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Gnome-colors-add-files-to-archive.png" class="image"><img alt="Gnome-colors-add-files-to-archive.png" src="../File:Gnome-colors-add-files-to-archive.png" width="48" height="48"></a><b>This article is being considered for <a href="../en/ArchWiki:Archive.html" title="ArchWiki:Archive">archiving</a>.</b><a href="../File:Gnome-colors-add-files-to-archive.png" class="image"><img alt="Gnome-colors-add-files-to-archive.png" src="../File:Gnome-colors-add-files-to-archive.png" width="48" height="48"></a></p>
<div>
<b>Reason:</b> KDM is no longer available in the official repositories.<a rel="nofollow" class="external autonumber" href="https://www.archlinux.org/news/dropping-plasma-4/">[1]</a> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:KDM">Talk:KDM#</a>)</div>
</div>
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Display_manager.html" title="Display manager">Display manager</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/KDE.html" title="KDE">KDE</a></li>
</ul>
</div>
<p>KDM (KDE Display Manager) is the login manager of <a href="../en/KDE.html" title="KDE">KDE</a>. It supports themes, auto-logging, session type choice, and numerous other features.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong> <strong class="selflink">KDM</strong> is not available anymore in Plasma 5. Using <a href="../en/SDDM.html" title="SDDM">SDDM</a> as DM is recommended, as it provides better integration with the Plasma 5 theme.</div>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Themes"><span class="tocnumber">2.1</span> <span class="toctext">Themes</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#Themes_creation"><span class="tocnumber">2.2</span> <span class="toctext">Themes creation</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#ServerArgsLocal"><span class="tocnumber">2.2.1</span> <span class="toctext">ServerArgsLocal</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Allow_root_login"><span class="tocnumber">2.2.2</span> <span class="toctext">Allow root login</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#SessionsDirs"><span class="tocnumber">2.2.3</span> <span class="toctext">SessionsDirs</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Session"><span class="tocnumber">2.2.4</span> <span class="toctext">Session</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Restart_X_server_menu_option"><span class="tocnumber">2.2.5</span> <span class="toctext">Restart X server menu option</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#Troubleshooting"><span class="tocnumber">3</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Keyboard_maps"><span class="tocnumber">3.1</span> <span class="toctext">Keyboard maps</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Slow_KDM_start"><span class="tocnumber">3.2</span> <span class="toctext">Slow KDM start</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#KDM_and_Gnome-keyring"><span class="tocnumber">3.3</span> <span class="toctext">KDM and Gnome-keyring</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#User_picture_not_displayed"><span class="tocnumber">3.4</span> <span class="toctext">User picture not displayed</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/kdebase-workspace/">kdebase-workspace</a></span><sup><small>AUR</small></sup>.
</p>
<p>Then follow <a href="../en/Display_manager.html#Loading_the_display_manager" title="Display manager">Display manager#Loading the display manager</a> to start KDM at boot.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>The configuration file for KDM can be found at <code>/usr/share/config/kdm/kdmrc</code>. See <code>/usr/share/doc/HTML/en/kdm/kdmrc-ref.docbook</code> for all options.
</p>
<p>You can visit <i>System Settings &gt; Login Screen</i> and make your changes. Whenever you press <i>Apply</i>, a <i>KDE Polkit authorization</i> window appears which will ask you to give your root password in order to finish the changes.
</p>
<p>If you seem not to be able to edit KDM's settings when launching System Settings as user, you can use <i>kdesu</i>: 
</p>
<pre>$ kdesu kcmshell4 kdm
</pre>
<p>In the pop-up <i>kdesu</i> window, enter your root password and wait for System Settings to be launched. Then go to "Login Screen".
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Since you have launched it as root, be careful when changing your settings. All settings configuration in root-launched System Settings are saved under <code>/root/.kde4</code> and not under <code>~/.kde4</code> (your home location).</div>
<h3><span class="mw-headline" id="Themes">Themes</span></h3>
<p>Arch Linux KDM themes can be installed through <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=archlinux-themes-kdm">archlinux-themes-kdm</a></span> package.
</p>
<p>Many other KDM 4 themes are available at <a rel="nofollow" class="external free" href="http://kde-look.org/index.php?xcontentmode=41">http://kde-look.org/index.php?xcontentmode=41</a>.
Choose between the installed themes in System Settings (run as root) as described above.
</p>
<h3><span class="mw-headline" id="Themes_creation">Themes creation</span></h3>
<p>Themes files are in <code>/usr/share/apps/kdm/themes</code>.
</p>
<p>The theme format is the same one as GDM, a documentation can be found here: <a rel="nofollow" class="external text" href="http://projects.gnome.org//gdm/docs/2.18/thememanual.html#descofthemeformat">Detailed Description of Theme XML format</a>.
</p>
<h4><span class="mw-headline" id="ServerArgsLocal">ServerArgsLocal</span></h4>
<p>To force the number of dots per inch of the X server, add a -dpi option to ServerArgsLocal. A commonly used value is 96 dpi.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/config/kdm/kdmrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[...]
ServerArgsLocal=-dpi 96 -nolisten tcp
[...]</pre>
<h4><span class="mw-headline" id="Allow_root_login">Allow root login</span></h4>
<p>To allow root login in KDM do:
</p>
<pre># sed -ie 's/AllowRootLogin=false/AllowRootLogin=true/' /usr/share/config/kdm/kdmrc
</pre>
<h4><span class="mw-headline" id="SessionsDirs">SessionsDirs</span></h4>
<p>This variable stores a list of directories containing session type definitions in <code>.desktop</code> format, ordered by falling priority. In Arch Linux some <a href="../en/Window_manager.html" title="Window managers" class="mw-redirect">window managers</a> install such files in <code>/usr/share/xsessions</code>. Add that to the list in order to be able to select them in KDM:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/config/kdm/kdmrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[...]
SessionsDirs=/usr/share/config/kdm/sessions,/usr/share/apps/kdm/sessions,/usr/share/xsessions
[...]</pre>
<h4><span class="mw-headline" id="Session">Session</span></h4>
<p>The Session variable is the name of a program which is run as the user who logs in.
It is supposed to interpret the session argument (see SessionsDirs) and start the
session as desired for that argument. One may wish to customize this for window manager
sessions, for example to set a wallpaper and start a screensaver. To do this in a way which
will survive pacman updates (which clobber Xsession) do as follows:
</p>
<pre># cp /usr/share/config/kdm/Xsession /usr/share/config/kdm/Xsession.custom
</pre>
<p>In <code>kdmrc</code> set:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/config/kdm/kdmrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[...]
Session=/usr/share/config/kdm/Xsession.custom
[...]</pre>
<p>And then edit <code>Xsession.custom</code> as desired.
</p>
<h4><span class="mw-headline" id="Restart_X_server_menu_option">Restart X server menu option</span></h4>
<p>To allow users to restart the X server from KDM, edit this option in <code>kdmrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/config/kdm/kdmrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[X-:*-Greeter]
[...]
# Show the "Restart X Server"/"Close Connection" action in the greeter.
# Default is true
AllowClose=true
[...]</pre>
<p>This feature will be available in the menu drop-down options. The option also includes a hotkey of <code>Alt+e</code>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Keyboard_maps">Keyboard maps</span></h3>
<p>KDM keyboard keymap can be set through the configuration system (login screen section).
</p>
<p>If setting the language in the configuration system does not affect keyboard map, you can try to edit /usr/share/config/kdm/Xsetup and add command:
</p>
<pre>setxkbmap cz
</pre>
<p>where <code>cz</code> is the Czech keyboard layout. Since the file may get overwritten on the next upgrade, you may want to protect it in /etc/pacman.conf:
</p>
<pre>NoUpgrade = usr/share/config/kdm/Xsetup
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The leading slash (<code>/</code>) must not be there.</div>
<h3><span class="mw-headline" id="Slow_KDM_start">Slow KDM start</span></h3>
<p>If KDM is taking a long time to display the login screen (e.g. 15-30 seconds) you may try rebuilding the X font caches:
</p>
<pre># fc-cache -fv
</pre>
<h3><span class="mw-headline" id="KDM_and_Gnome-keyring">KDM and Gnome-keyring</span></h3>
<p>To automatically unlock the <a href="../en/GNOME/Keyring.html" title="Gnome-keyring" class="mw-redirect">Gnome-keyring</a> upon login in KDM
add the following line to your <code>/etc/pam.d/kde</code> right after the <code>auth            include         system-login</code> line:
</p>
<pre>auth            optional        pam_gnome_keyring.so
</pre>
<p>and add 
</p>
<pre>session         optional        pam_gnome_keyring.so auto_start
</pre>
<p>after <code>session         include         system-login</code>
</p>
<p>To automatically re-unlock the keyring when you unlock your screensaver open <code>/etc/pam.d/kscreensaver</code> and add
</p>
<pre>auth            optional        pam_gnome_keyring.so
</pre>
<p>as the last line.
</p>
<h3><span class="mw-headline" id="User_picture_not_displayed">User picture not displayed</span></h3>
<p>For KDM to able to display user picture set in Account Information, proper source must be set in <code>System Settings &gt; Login Screen &gt; Users &gt; User Image Source</code>, user's home directory must be world executable and <code>~/.face.icon</code> must be world readable <a rel="nofollow" class="external autonumber" href="http://docs.kde.org/stable/en/kde-workspace/kdm/kdm-files.html#option-facesource">[2]</a>:
</p>
<pre>$ chmod o+x ~/
$ chmod o+r ~/.face.icon
</pre>
</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:KDE.html" title="Category:KDE">KDE</a></li>
<li><a href="../en/Category:Display_managers.html" title="Category:Display managers">Display managers</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Pages_flagged_with_Template:Archive.html" title="Category:Pages flagged with Template:Archive">Pages flagged with Template:Archive</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
