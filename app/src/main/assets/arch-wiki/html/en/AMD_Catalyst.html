<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>AMD Catalyst - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-AMD_Catalyst skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">AMD Catalyst</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div style="width:45%; margin: 0 0 0.5em 0.5em;">
<p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p>
<ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="../en/ATI.html" title="ATI">ATI</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="../en/Xorg.html" title="Xorg">Xorg</a></li>
</ul>
</div>
<p>Owners of ATI/AMD video cards have a choice between AMD's proprietary driver (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst/">catalyst</a></span><sup><small>AUR</small></sup>) and the open source driver (<a href="../en/ATI.html" title="ATI">ATI</a> for older or <a href="../en/AMDGPU.html" title="AMDGPU">AMDGPU</a> for newer cards). This article covers the proprietary driver.
</p>
<p>AMD's Linux driver package <i>catalyst</i> was previously named <i>fglrx</i> (<b>F</b>ire<b>GL</b> and <b>R</b>adeon <b>X</b>). Only the package name has changed, while the kernel module retains its original <i>fglrx.ko</i> filename. Therefore, any mention of fglrx below is specifically in reference to the <i>kernel module</i>, <b>not the package</b>.
</p>
<p><b>Catalyst packages are no longer offered in the official repositories.</b> In the past, Catalyst <a rel="nofollow" class="external text" href="https://www.archlinux.org/news/ati-catalyst-support-dropped/">has been dropped</a> from official Arch support because of dissatisfaction with the quality and speed of development. After a brief return they were dropped again in April 2013 and they have not returned since.
</p>
<p>Compared with the open source driver, Catalyst performs better in both 2D and 3D rendering, also having better power management, but it lacks efficient multi-head support. Supported devices are <a href="https://en.wikipedia.org/wiki/Radeon" class="extiw" title="wikipedia:Radeon">ATI/AMD Radeon</a> video cards with chipset R600 and newer (Radeon HD 2xxx and newer). See the Xorg <a rel="nofollow" class="external text" href="http://www.x.org/wiki/RadeonFeature/#index5h2">decoder ring</a> or <a href="https://en.wikipedia.org/wiki/List_of_AMD_graphics_processing_units" class="extiw" title="wikipedia:List of AMD graphics processing units">this table</a>, to translate <i>model</i> names (X1900, HD4850) to/from <i>chip</i> names (R580, RV770 respectively).
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Selecting_the_right_driver"><span class="tocnumber">1</span> <span class="toctext">Selecting the right driver</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#Installing_the_driver"><span class="tocnumber">2.1</span> <span class="toctext">Installing the driver</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Installing_from_the_unofficial_repository"><span class="tocnumber">2.1.1</span> <span class="toctext">Installing from the unofficial repository</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Installing_from_the_AUR"><span class="tocnumber">2.1.2</span> <span class="toctext">Installing from the AUR</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6">
<a href="#Configuring_the_driver"><span class="tocnumber">2.2</span> <span class="toctext">Configuring the driver</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Configuring_X"><span class="tocnumber">2.2.1</span> <span class="toctext">Configuring X</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Loading_the_module_at_boot"><span class="tocnumber">2.2.2</span> <span class="toctext">Loading the module at boot</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Disable_kernel_mode_setting"><span class="tocnumber">2.2.3</span> <span class="toctext">Disable kernel mode setting</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Checking_operation"><span class="tocnumber">2.2.4</span> <span class="toctext">Checking operation</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#Custom_kernels"><span class="tocnumber">2.3</span> <span class="toctext">Custom kernels</span></a></li>
<li class="toclevel-2 tocsection-12">
<a href="#PowerXpress_support"><span class="tocnumber">2.4</span> <span class="toctext">PowerXpress support</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Running_two_X_servers_.28one_using_the_Intel_driver.2C_another_one_using_fglrx.29_simultaneously"><span class="tocnumber">2.4.1</span> <span class="toctext">Running two X servers (one using the Intel driver, another one using fglrx) simultaneously</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Issues_with_PowerXpress_laptops_running_in_AMD_mode_.28pxp_switch_catalyst_amd.29_with_external_.2F_secondary_monitor"><span class="tocnumber">2.4.2</span> <span class="toctext">Issues with PowerXpress laptops running in AMD mode (pxp_switch_catalyst amd) with external / secondary monitor</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-15">
<a href="#Xorg_repositories"><span class="tocnumber">3</span> <span class="toctext">Xorg repositories</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#xorg117"><span class="tocnumber">3.1</span> <span class="toctext">xorg117</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#xorg116"><span class="tocnumber">3.2</span> <span class="toctext">xorg116</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#xorg115"><span class="tocnumber">3.3</span> <span class="toctext">xorg115</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#xorg114"><span class="tocnumber">3.4</span> <span class="toctext">xorg114</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#xorg113"><span class="tocnumber">3.5</span> <span class="toctext">xorg113</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#xorg112"><span class="tocnumber">3.6</span> <span class="toctext">xorg112</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22">
<a href="#Tools"><span class="tocnumber">4</span> <span class="toctext">Tools</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Catalyst-hook"><span class="tocnumber">4.1</span> <span class="toctext">Catalyst-hook</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Catalyst-generator"><span class="tocnumber">4.2</span> <span class="toctext">Catalyst-generator</span></a></li>
<li class="toclevel-2 tocsection-25">
<a href="#OpenCL_and_OpenGL_development"><span class="tocnumber">4.3</span> <span class="toctext">OpenCL and OpenGL development</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#amdapp-aparapi"><span class="tocnumber">4.3.1</span> <span class="toctext">amdapp-aparapi</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#amdapp-sdk_.28formerly_known_as_amdstream.29"><span class="tocnumber">4.3.2</span> <span class="toctext">amdapp-sdk (formerly known as amdstream)</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#amdapp-codexl"><span class="tocnumber">4.3.3</span> <span class="toctext">amdapp-codexl</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-29">
<a href="#Features"><span class="tocnumber">5</span> <span class="toctext">Features</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#Tear_Free_Rendering"><span class="tocnumber">5.1</span> <span class="toctext">Tear Free Rendering</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Video_acceleration"><span class="tocnumber">5.2</span> <span class="toctext">Video acceleration</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#GPU.2FMem_frequency.2C_Temperature.2C_Fan_speed.2C_Overclocking_utilities"><span class="tocnumber">5.3</span> <span class="toctext">GPU/Mem frequency, Temperature, Fan speed, Overclocking utilities</span></a></li>
<li class="toclevel-2 tocsection-33">
<a href="#Double_Screen_.28Dual_Head_.2F_Dual_Screen_.2F_Xinerama.29"><span class="tocnumber">5.4</span> <span class="toctext">Double Screen (Dual Head / Dual Screen / Xinerama)</span></a>
<ul>
<li class="toclevel-3 tocsection-34"><a href="#Introduction"><span class="tocnumber">5.4.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="#ATI_Catalyst_Control_Center"><span class="tocnumber">5.4.2</span> <span class="toctext">ATI Catalyst Control Center</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#Installation_2"><span class="tocnumber">5.4.3</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="#Configuration"><span class="tocnumber">5.4.4</span> <span class="toctext">Configuration</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-38"><a href="#Uninstallation"><span class="tocnumber">6</span> <span class="toctext">Uninstallation</span></a></li>
<li class="toclevel-1 tocsection-39">
<a href="#Troubleshooting"><span class="tocnumber">7</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-40"><a href="#Failed_to_start_atieventsd.service"><span class="tocnumber">7.1</span> <span class="toctext">Failed to start atieventsd.service</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Failed_to_open_fglrx_dri.so"><span class="tocnumber">7.2</span> <span class="toctext">Failed to open fglrx_dri.so</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#GDM_fails_to_start"><span class="tocnumber">7.3</span> <span class="toctext">GDM fails to start</span></a></li>
<li class="toclevel-2 tocsection-43">
<a href="#3D_Wine_applications_freeze"><span class="tocnumber">7.4</span> <span class="toctext">3D Wine applications freeze</span></a>
<ul>
<li class="toclevel-3 tocsection-44"><a href="#TLS"><span class="tocnumber">7.4.1</span> <span class="toctext">TLS</span></a></li>
<li class="toclevel-3 tocsection-45"><a href="#Compiz"><span class="tocnumber">7.4.2</span> <span class="toctext">Compiz</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-46"><a href="#Problems_with_video_colours"><span class="tocnumber">7.5</span> <span class="toctext">Problems with video colours</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="#KWin_and_composite"><span class="tocnumber">7.6</span> <span class="toctext">KWin and composite</span></a></li>
<li class="toclevel-2 tocsection-48">
<a href="#Black_screen_with_complete_lockups_and.2For_hangs_after_reboot_or_startx"><span class="tocnumber">7.7</span> <span class="toctext">Black screen with complete lockups and/or hangs after reboot or startx</span></a>
<ul>
<li class="toclevel-3 tocsection-49"><a href="#Faulty_ACPI_hardware_calls"><span class="tocnumber">7.7.1</span> <span class="toctext">Faulty ACPI hardware calls</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-50"><a href="#KDM_disappears_after_logout"><span class="tocnumber">7.8</span> <span class="toctext">KDM disappears after logout</span></a></li>
<li class="toclevel-2 tocsection-51"><a href="#Direct_Rendering_does_not_work"><span class="tocnumber">7.9</span> <span class="toctext">Direct Rendering does not work</span></a></li>
<li class="toclevel-2 tocsection-52">
<a href="#Hibernate.2FSleep_issues"><span class="tocnumber">7.10</span> <span class="toctext">Hibernate/Sleep issues</span></a>
<ul>
<li class="toclevel-3 tocsection-53"><a href="#Video_fails_to_resume_from_suspend2ram"><span class="tocnumber">7.10.1</span> <span class="toctext">Video fails to resume from suspend2ram</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-54"><a href="#System_freezes.2FHard_locks"><span class="tocnumber">7.11</span> <span class="toctext">System freezes/Hard locks</span></a></li>
<li class="toclevel-2 tocsection-55"><a href="#Hardware_conflicts"><span class="tocnumber">7.12</span> <span class="toctext">Hardware conflicts</span></a></li>
<li class="toclevel-2 tocsection-56"><a href="#Temporary_hangs_when_playing_video"><span class="tocnumber">7.13</span> <span class="toctext">Temporary hangs when playing video</span></a></li>
<li class="toclevel-2 tocsection-57"><a href="#.22aticonfig:_No_supported_adapters_detected.22"><span class="tocnumber">7.14</span> <span class="toctext">"aticonfig: No supported adapters detected"</span></a></li>
<li class="toclevel-2 tocsection-58"><a href="#WebGL_support_in_Chromium"><span class="tocnumber">7.15</span> <span class="toctext">WebGL support in Chromium</span></a></li>
<li class="toclevel-2 tocsection-59"><a href="#Lag.2Ffreezes_when_watching_flash_videos_via_Adobe.27s_flashplugin"><span class="tocnumber">7.16</span> <span class="toctext">Lag/freezes when watching flash videos via Adobe's flashplugin</span></a></li>
<li class="toclevel-2 tocsection-60"><a href="#Lag.2Fslow_windows_movement_in_GNOME3"><span class="tocnumber">7.17</span> <span class="toctext">Lag/slow windows movement in GNOME3</span></a></li>
<li class="toclevel-2 tocsection-61"><a href="#Not_using_full_screen_resolution_at_1920x1080_.28underscanning.2C_black_borders_around_the_screen.29"><span class="tocnumber">7.18</span> <span class="toctext">Not using full screen resolution at 1920x1080 (underscanning, black borders around the screen)</span></a></li>
<li class="toclevel-2 tocsection-62"><a href="#Dual_Screen_Setup:_general_problems_with_acceleration.2C_OpenGL.2C_compositing.2C_performance"><span class="tocnumber">7.19</span> <span class="toctext">Dual Screen Setup: general problems with acceleration, OpenGL, compositing, performance</span></a></li>
<li class="toclevel-2 tocsection-63"><a href="#Disabling_VariBright_feature"><span class="tocnumber">7.20</span> <span class="toctext">Disabling VariBright feature</span></a></li>
<li class="toclevel-2 tocsection-64"><a href="#Hybrid.2FPowerXpress:_turning_off_discrete_GPU"><span class="tocnumber">7.21</span> <span class="toctext">Hybrid/PowerXpress: turning off discrete GPU</span></a></li>
<li class="toclevel-2 tocsection-65"><a href="#Switching_from_X_session_to_TTYs_gives_a_blank_screen.2Flow_resolution_TTY"><span class="tocnumber">7.22</span> <span class="toctext">Switching from X session to TTYs gives a blank screen/low resolution TTY</span></a></li>
<li class="toclevel-2 tocsection-66"><a href="#Switching_from_X_session_to_TTYs_gives_a_black_screen_with_the_monitor_backlight_on"><span class="tocnumber">7.23</span> <span class="toctext">Switching from X session to TTYs gives a black screen with the monitor backlight on</span></a></li>
<li class="toclevel-2 tocsection-67"><a href="#Switching_to_TTYs_then_back_to_X_session_gives_a_black_screen_with_a_mouse_cursor"><span class="tocnumber">7.24</span> <span class="toctext">Switching to TTYs then back to X session gives a black screen with a mouse cursor</span></a></li>
<li class="toclevel-2 tocsection-68"><a href="#30_FPS_.2F_Tear-Free_.2F_V-Sync_bug"><span class="tocnumber">7.25</span> <span class="toctext">30 FPS / Tear-Free / V-Sync bug</span></a></li>
<li class="toclevel-2 tocsection-69"><a href="#Backlight_adjustment_does_not_work"><span class="tocnumber">7.26</span> <span class="toctext">Backlight adjustment does not work</span></a></li>
<li class="toclevel-2 tocsection-70"><a href="#Chromium_glitching_when_using_plasma"><span class="tocnumber">7.27</span> <span class="toctext">Chromium glitching when using plasma</span></a></li>
<li class="toclevel-2 tocsection-71">
<a href="#Xorg_crashes"><span class="tocnumber">7.28</span> <span class="toctext">Xorg crashes</span></a>
<ul>
<li class="toclevel-3 tocsection-72"><a href="#Unsupported_Xorg_Version"><span class="tocnumber">7.28.1</span> <span class="toctext">Unsupported Xorg Version</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-73"><a href="#See_also"><span class="tocnumber">8</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Selecting_the_right_driver">Selecting the right driver</span></h2>
<p>Depending on the card you have, find the right driver in <a href="../en/Xorg.html#ATI" title="Xorg">Xorg#ATI</a>. This page has instructions for <b>Catalyst</b> and <b>Catalyst legacy</b>.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>There are three ways of installing Catalyst on your system. One way is to use <a rel="nofollow" class="external text" href="https://aur.archlinux.org/account/Vi0l0/">Vi0L0's</a> (Arch's unofficial Catalyst maintainer) repository. This repository contains all the necessary packages. The second method you can use is the AUR; PKGBUILDs offered here are also made by Vi0L0 and are the same he uses to built packages for his repository. Lastly, you can install the driver directly from AMD.
</p>
<p>Before choosing the method you prefer, you will have to see which driver you need. Since Catalyst 12.4, AMD has separated its development for Radeon HD 2xxx, 3xxx and 4xxx cards into the <b>legacy</b> Catalyst driver. For Radeon HD 5xxx and newer, there is the regular Catalyst driver. Regardless of the driver you need, you will also need the Catalyst utilities.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>After the instructions for every method of installing, you will find general instructions <b>everyone</b> has to perform, regardless of the method you used.</div>
<h3><span class="mw-headline" id="Installing_the_driver">Installing the driver</span></h3>
<h4><span class="mw-headline" id="Installing_from_the_unofficial_repository">Installing from the unofficial repository</span></h4>
<p>If you do not fancy building the packages from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>, this is the way to go. The repository is maintained by our unofficial Catalyst maintainer, <a href="../User:Vi0L0.html" title="User:Vi0L0">Vi0l0</a>. All packages are signed and are considered safe to use. As you will see later on in this article, Vi0L0 is also responsible for many other packages that will help you get your system working with your ATI graphic cards. 
</p>
<p>Vi0L0 has three different Catalyst repositories, each having different drivers:
</p>
<ul>
<li> <a href="../en/Unofficial_user_repositories.html#catalyst" title="Unofficial user repositories">catalyst</a> for the regular Catalyst driver needed by Radeon HD 5xxx and up, it contains the latest (stable or beta) Catalyst release.</li>
<li> <i>catalyst-stable</i> for the regular Catalyst driver needed by Radeon HD 5xxx and up, with the latest stable driver.</li>
<li> <a href="../en/Unofficial_user_repositories.html#catalyst-hd234k" title="Unofficial user repositories">catalyst-hd234k</a> for the legacy Catalyst driver needed by Radeon HD 2xxx, 3xxx and 4xxx cards.</li>
</ul>
<p>To enable one of these, follow the instructions in <a href="../en/Unofficial_user_repositories.html" title="Unofficial user repositories">Unofficial user repositories</a>. Remember to add the chosen repository <b>above all other repositories</b> in <code>pacman.conf</code>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The <i>catalyst</i> and <i>catalyst-stable</i> repositories share the same URL. To enable <i>catalyst-stable</i>, follow the instructions for enabling <i>catalyst</i> and replace <code>[catalyst]</code> with <code>[catalyst-stable]</code> in <code>pacman.conf</code>. If you need to stick with an old version, there are also some versioned repositories using the same URL (for example <i>catalyst-stable-13.4</i>).</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>Because catalyst.wirephire.com will go down if a certain bandwidth limit is exceeded (this happened in the past) or may be too slow at your location, repository mirror is provided by goll at <a rel="nofollow" class="external autonumber" href="http://mirror.hactar.xyz/Vi0L0/">[1]</a> (DE). This mirror however come with no warranty and is not guaranteed to always be operational.
</div>
<p>Once you have added some Catalyst repository, update pacman's database and <a href="../en/Help:Reading.html#Installation_of_packages" title="Install" class="mw-redirect">install</a> these packages (see <a href="#Tools">#Tools</a> for more information):
</p>
<ul>
<li> <i>catalyst-hook</i>
</li>
<li> <i>catalyst-utils</i>
</li>
<li> <i>catalyst-libgl</i>
</li>
<li> <i>opencl-catalyst</i> - optional, needed for OpenCL support</li>
<li> <i>lib32-catalyst-utils</i> - optional, needed for 32-bit OpenGL support on 64-bit systems</li>
<li> <i>lib32-catalyst-libgl</i> - optional, needed for 32-bit OpenGL support on 64-bit systems</li>
<li> <i>lib32-opencl-catalyst</i> - optional, needed for 32-bit OpenCL support on 64-bit systems</li>
</ul>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If pacman asks you about removing <b>libgl</b> you can safely do so.</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>catalyst package was removed from Vi0L0's repository, its place was taken by catalyst-hook.</div>
<h4><span class="mw-headline" id="Installing_from_the_AUR">Installing from the AUR</span></h4>
<p>The second way to install Catalyst is from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>. If you want to build the packages specifically for your computer, this is the way to go. Note that this is also the most tedious way to install Catalyst; it requires the most work and also requires manual updates upon every kernel update.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>If you install the Catalyst package from the AUR, you will have to rebuild Catalyst every time the kernel is updated. Otherwise X <b>will</b> fail to start.</div>
<p>All packages mentioned above in Vi0L0's unofficial repository are also available on the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>:
</p>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst/">catalyst</a></span><sup><small>AUR</small></sup>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-generator/">catalyst-generator</a></span><sup><small>AUR</small></sup>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-hook/">catalyst-hook</a></span><sup><small>AUR</small></sup>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-utils/">catalyst-utils</a></span><sup><small>AUR</small></sup>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lib32-catalyst-utils/">lib32-catalyst-utils</a></span><sup><small>AUR</small></sup>
</li>
</ul>
<p>The AUR also holds some packages that are <b>not</b> found in any of the repositories. These packages contain the so-called <i>Catalyst-total</i> packages and the beta versions:
</p>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-total/">catalyst-total</a></span><sup><small>AUR</small></sup>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-total-hd234k/">catalyst-total-hd234k</a></span><sup><small>AUR</small></sup>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-test/">catalyst-test</a></span><sup><small>AUR</small></sup>
</li>
</ul>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-total/">catalyst-total</a></span><sup><small>AUR</small></sup> packages are made to make the lives of AUR users easier. It builds the driver, the kernel utilities and the 32 bit kernel utilities. It also builds the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-hook/">catalyst-hook</a></span><sup><small>AUR</small></sup> package, which is described in <a href="#Tools">#Tools</a>.
</p>
<h3><span class="mw-headline" id="Configuring_the_driver">Configuring the driver</span></h3>
<p>After you have installed the driver via your chosen method, you will have to configure X to work with Catalyst. Also, you will have to make sure the module gets loaded at boot. Also, one should disable <a href="../en/Kernel_mode_setting.html" title="Kernel mode setting">kernel mode setting</a>.
</p>
<h4><span class="mw-headline" id="Configuring_X">Configuring X</span></h4>
<p>To configure X, you will have to create an <code>xorg.conf</code> file. Catalyst provides its own <code>aticonfig</code> tool to create and/or modify this file.
It also can configure virtually every aspect of the card for it also accesses the <code>/etc/ati/amdpcsdb</code> file. For a complete list of <code>aticonfig</code> options, run:
</p>
<pre># aticonfig --help | less
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Use the <code>--output</code> option before committing to <code>/etc/X11/</code> as an <code>xorg.conf</code> file will override anything in <code>/etc/X11/xorg.conf.d/</code>
</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>To adhere to the new config location use <code># aticonfig [...] --output</code> to adapt the <code>Device</code> section to <code>/etc/X11/xorg.conf.d/20-radeon.conf</code>. The drawback is that many <code>aticonfig</code> options rely on an <code>xorg.conf</code>, and will be unavailable.</div>
<p>Now, to configure Catalyst. If you have only one monitor, run this:
</p>
<pre># aticonfig --initial
</pre>
<p>However, if you have two monitors and want to use both of them, you can run the command stated below. Note that this will generate a dual head configuration with the second screen located above the first screen.
</p>
<pre># aticonfig --initial=dual-head --screen-layout=above
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>See <a href="#Double_Screen_.28Dual_Head_.2F_Dual_Screen_.2F_Xinerama.29">#Double Screen (Dual Head / Dual Screen / Xinerama)</a> for more information on setting up dual monitors.</div>
<p>You can compare the generated file to one of the <a href="../en/Xorg.html#Sample_configurations" title="Xorg">Sample Xorg.conf</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" title="ArchWiki:Requests">broken link</a>: invalid section]</sup> examples listed on the Xorg page.
</p>
<p>Although the current Xorg versions auto-detect most options when started, you may want to specify some in case the defaults change between versions.
</p>
<p>Here is an example (with notes) <b>for reference</b>. Entries with <code>#</code> should be required, add entries with <code>##</code> as needed:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "ServerLayout"
        Identifier     "Arch"
        Screen      0  "Screen0" 0 0          # 0's are necessary.
EndSection
Section "Module"
        Load [...]
        [...]
EndSection
Section "Monitor"
        Identifier   "Monitor0"
        [...]
EndSection
Section "Device"
        Identifier  "Card0"
        Driver      "fglrx"                         # Essential.
        BusID       "PCI:1:0:0"                     # Recommended if autodetect fails.
        Option      "OpenGLOverlay" "0"             ##
        Option      "XAANoOffscreenPixmaps" "false" ##
EndSection
Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
        DefaultDepth    24
        SubSection "Display"
                Viewport   0 0
                Depth     24                        # Should not change from '24'
                Modes "1280x1024" "2048x1536"       ## 1st value=default resolution, 2nd=maximum.
                Virtual 1664 1200                   ## (x+64, y) to workaround potential OGL rect. artifacts/
        EndSubSection                               ## fixed in Catalyst 9.8
EndSection
Section "DRI"
        Mode 0666                                   # May help enable direct rendering.
EndSection</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>With <b>every</b> Catalyst update you should remove <code>amdpcsdb</code> file in this way: kill X, remove <code>/etc/ati/amdpcsdb</code>, start X and then run <code>amdcccle</code> - otherwise the version of Catalyst may display wrongly in <code>amdcccle</code>.</div>
<p><i>If you need more information on Catalyst, visit <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=57084">this thread</a>.</i>
</p>
<h4><span class="mw-headline" id="Loading_the_module_at_boot">Loading the module at boot</span></h4>
<p>We have to blacklist the <code>radeon</code> module to prevent it from auto-loading. To do so, blacklist <i>radeon</i> in <code>/etc/modprobe.d/modprobe.conf</code>. Also, make sure that it is not loaded by any file under <code>/etc/modules-load.d/</code>. For more information, see <a href="../en/Kernel_modules.html#Blacklisting" title="Kernel modules">kernel modules#Blacklisting</a>. 
</p>
<p>Then we will have to make sure that the <code>fglrx</code> module gets auto-loaded. Either add <code>fglrx</code> on a new line of an existing module file located under <code>/etc/modules-load.d/</code>, or create a new file and add <code>fglrx</code>.
</p>
<h4><span class="mw-headline" id="Disable_kernel_mode_setting">Disable kernel mode setting</span></h4>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Do not do this if you are using powerXpress technology (or hybrid AMD-Intel graphics) because Intel driver needs it.</div>
<p>Disabling kernel mode setting is important, as the Catalyst driver does not take advantage of <a href="../en/Kernel_mode_setting.html" title="KMS" class="mw-redirect">KMS</a>. If you do not deactivate KMS, your system might freeze when trying to switch to a TTY or even when shutting down via your DE.
</p>
<p>To disable kernel mode setting, add <code>nomodeset</code> to your <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<h4><span class="mw-headline" id="Checking_operation">Checking operation</span></h4>
<p>Assuming that a reboot to your login was successful, you can check if <code>fglrx</code> is running properly with the following commands:
</p>
<pre>$ lsmod | grep fglrx
</pre>
<p>If you get output, it works. Finally, run X manually with <code>$ startx</code> or by using a display manager (see <a href="../en/Xorg.html#Running" title="Xorg">Xorg#Running</a>).
</p>
<p>The following command should output your graphic card model name:
</p>
<pre>$ fglrxinfo
</pre>
<p>You can then verify that direct rendering is enabled by running the following command in a terminal:
</p>
<pre>$ glxinfo | grep "direct rendering"
</pre>
<p>If it says <code>"direct rendering: yes"</code> then you are good to go! If the <code>$ glxinfo</code> command is not found install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mesa-demos">mesa-demos</a></span> package.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>You can also use:
<pre>$ fgl_glxgears
</pre>
<p>as the fglrx alternative test to <code>glxgears</code>.
</p>
</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>In recent versions of Xorg, the paths of libs are changed. So, sometimes <code>libGL.so</code> cannot be correctly loaded even if it is installed. Check this if your GL is not working. Please read <a href="#Troubleshooting">#Troubleshooting</a> section for details.</div>
<h3><span class="mw-headline" id="Custom_kernels">Custom kernels</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If you are at all uncomfortable or inexperienced with making packages, read up the <a href="../en/Arch_Build_System.html" title="ABS" class="mw-redirect">ABS</a> wiki page first so things go smoothly.</div>
<p>To install catalyst for a custom kernel, you will need to build your own <code>catalyst-$kernel</code> package:
</p>
<ol>
<li> Obtain the <code>PKGBUILD</code> and <code>catalyst.install</code> files from <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">Catalyst</a>.</li>
<li> Editing the PKGBUILD. Two changes need to be made here:
<ol>
<li> Change <code>pkgname=catalyst</code> to <code>pkgname=catalyst-$kernel_name</code>, where <code>$kernel_name</code> is whatever you want (e.g. custom, mm, themostawesomekernelever).</li>
<li> Change the dependency of <code>linux</code> to <code>$kernel_name</code>.</li>
</ol>
</li>
<li> Build your package and install; run <code>makepkg -i</code> or <code>makepkg</code> followed by <code># pacman -U pkgname.pkg.tar.gz</code>
</li>
</ol>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>
<ul>
<li>If you run multiple kernels, you have to install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-utils/">catalyst-utils</a></span><sup><small>AUR</small></sup> packages for all kernels. They will not conflict with one another.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-generator/">catalyst-generator</a></span><sup><small>AUR</small></sup> is able to build <code>catalyst-{kernver}</code> packages for you so you do not actually need to perform all those steps manually. For more information, see <a href="#Tools">Tools section</a>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="PowerXpress_support">PowerXpress support</span></h3>
<p>PowerXpress technology allows switching notebooks with dual-graphic capability from integrated graphics (IGP) to discrete graphics either to increase battery life or to achieve better 3D rendering capabilities.
</p>
<p>To use such functionality on Arch you will have to:
</p>
<ul>
<li> Get and build <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-total/">catalyst-total</a></span><sup><small>AUR</small></sup> / <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-test/">catalyst-test</a></span><sup><small>AUR</small></sup> package from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>, or</li>
<li> Install <b>catalyst-libgl</b> alongside with <b>catalyst-utils</b> packages from the [catalyst] repository.</li>
</ul>
<p>To perform a switch into Intel's IGP you will also have to install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=mesa">mesa</a></span> package and Intel's drivers: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Catalyst sometimes has problems with newest intel drivers. If this is happening please downgrade <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> to the previous version found on <a href="../en/Arch_Linux_Archive.html" title="Arch Linux Archive">Arch Linux Archive</a> or maybe even from archive <a href="#Xorg_repositories">#Xorg repositories</a> alongside with xorg-server package(s).</div>
<p>Now you can switch between the integrated and the discrete GPU, using these commands:
</p>
<pre># aticonfig --px-igpu    #for integrated GPU
# aticonfig --px-dgpu    #for discrete GPU</pre>
<p>Just remember that fglrx needs <code>/etc/X11/xorg.conf</code> configured for AMD's card with <code>fglrx</code> inside.
</p>
<p>You can also use the <code>pxp_switch_catalyst</code> switching script that will perform some additional usefull operations:
</p>
<ul>
<li> Switching <code>xorg.conf</code> - it will rename <code>xorg.conf</code> into <code>xorg.conf.cat</code> (if there is fglrx inside) or <code>xorg.conf.oth</code> (if there is intel inside) and then it will create a symlink to <code>xorg.conf</code>, depending on what you chose.</li>
<li> Running <code>aticonfig --px-Xgpu</code>.</li>
<li> Running <code>switchlibGL</code>.</li>
<li> Adding/removing <code>fglrx</code> into/from <code>/etc/modules-load.d/catalyst.conf</code>.</li>
</ul>
<p>Usage:
</p>
<pre># pxp_switch_catalyst amd
# pxp_switch_catalyst intel</pre>
<p>If you have got problems when you try to run X on Intel's driver you may try to force "UXA" acceleration. Just make sure you got <code>Option "AccelMethod" "uxa"</code> in <code>xorg.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
        Identifier  "Intel Graphics"
        Driver      "intel"
        #Option      "AccelMethod"  "sna"
        <b>Option      "AccelMethod"  "uxa"</b>
        #Option      "AccelMethod"  "xaa"
EndSection</pre>
<h4><span class="mw-headline" id="Running_two_X_servers_.28one_using_the_Intel_driver.2C_another_one_using_fglrx.29_simultaneously">Running two X servers (one using the Intel driver, another one using fglrx) simultaneously</span></h4>
<p>Because fglrx is crash-prone (regarding PowerXpress), it could be a good idea to use the Intel driver in the main X server and have a secondary X server using fglrx when 3D acceleration is needed. However, simply switching to the discrete GPU from the integrated GPU using <code>aticonfig</code> or <code>amdcccle</code> will cause all sorts of weird bugs when starting the second X.
</p>
<p>To run two X servers at the same time (each using different drivers), you should firstly set up a fully working X with Catalyst and then move its <code>xorg.conf</code> to a temporary place (for example, <code>/etc/X11/xorg.conf.fglrx</code>. The next time X is started, it will use the Intel driver by default instead of fglrx.
</p>
<p>To start a second X server using fglrx, simply move <code>xorg.conf</code> back to the proper place (<code>/etc/X11/xorg.conf</code>) before starting X. This method even allows you to switch between running X sessions. When you are done using fglrx, move <code>xorg.conf</code> somewhere else again.
</p>
<p>The only disadvantage of this method is not having 3D acceleration using the Intel driver. 2D acceleration, however, is fully functional. Other than that, this will provide us with a completely stable desktop.
</p>
<h4><span class="mw-headline" id="Issues_with_PowerXpress_laptops_running_in_AMD_mode_.28pxp_switch_catalyst_amd.29_with_external_.2F_secondary_monitor">Issues with PowerXpress laptops running in AMD mode (pxp_switch_catalyst amd) with external / secondary monitor</span></h4>
<p>When using a PowerXpress laptop in AMD-only mode (ie, setting the discrete card to render everything) you sometimes run into issues with artifacting/duplicating between displays. This is a known issue, and seems to effect 7xxxM series cards.
</p>
<p>The artifacting disappears when you transform one of the monitors by either rotating or scaling. So you can use xrandr to fix this:
</p>
<pre>xrandr --output HDMI1 --left-of LVDS1 --primary --scale 1x1 --output LVDS1 --scale 1.0001x1.0001</pre>
<h2><span class="mw-headline" id="Xorg_repositories">Xorg repositories</span></h2>
<p>Catalyst is notorious for its slow update process. As such, it is common that a new Xorg version is pushed down from upstream that will break compatibility for Catalyst. This means that Catalyst users either have to build Xorg packages on their own, or use a backported repository that only contains the Xorg packages that should be held back. Vi0L0 has stepped in to fulfil this task and provides several backported repositories. 
</p>
<p>To enable one of these, follow the instructions in <a href="../en/Unofficial_user_repositories.html" title="Unofficial user repositories">Unofficial user repositories</a> (use the same PGP key as for the <a href="../en/Unofficial_user_repositories.html#catalyst" title="Unofficial user repositories">catalyst</a> repository). Remember to add the chosen repository <b>above all other repositories</b> in <code>pacman.conf</code>, even above your <i>catalyst</i> repository, should you use one.
</p>
<h3><span class="mw-headline" id="xorg117">xorg117</span></h3>
<p>Catalyst does not support xorg-server 1.18
</p>
<pre>
[xorg117]
Server = http://catalyst.wirephire.com/repo/xorg117/$arch
## Mirrors, if the primary server does not work or is too slow:
#Server = http://mirror.hactar.xyz/Vi0L0/xorg117/$arch
</pre>
<h3><span class="mw-headline" id="xorg116">xorg116</span></h3>
<p>Catalyst &lt; 15.7 does not support xorg-server 1.17
</p>
<pre>
[xorg116]
Server = http://catalyst.wirephire.com/repo/xorg116/$arch
## Mirrors, if the primary server does not work or is too slow:
#Server = http://mirror.hactar.xyz/Vi0L0/xorg116/$arch
</pre>
<h3><span class="mw-headline" id="xorg115">xorg115</span></h3>
<p>Catalyst &lt; 14.9 does not support xorg-server 1.16
</p>
<pre>
[xorg115]
Server = http://catalyst.wirephire.com/repo/xorg115/$arch
## Mirrors, if the primary server does not work or is too slow:
#Server = http://mirror.hactar.xyz/Vi0L0/xorg115/$arch
</pre>
<h3><span class="mw-headline" id="xorg114">xorg114</span></h3>
<p>Catalyst &lt; 14.1 does not support xorg-server 1.15.
</p>
<pre>
[xorg114]
Server = http://catalyst.wirephire.com/repo/xorg114/$arch
## Mirrors, if the primary server does not work or is too slow:
#Server = http://mirror.hactar.xyz/Vi0L0/xorg114/$arch
</pre>
<h3><span class="mw-headline" id="xorg113">xorg113</span></h3>
<p>Catalyst &lt; 13.6 does not support xorg-server 1.14.
</p>
<pre>
[xorg113]
Server = http://catalyst.wirephire.com/repo/xorg113/$arch
## Mirrors, if the primary server does not work or is too slow:
#Server = http://mirror.hactar.xyz/Vi0L0/xorg113/$arch
</pre>
<h3><span class="mw-headline" id="xorg112">xorg112</span></h3>
<p>Catalyst &lt; 12.10 and Catalyst Legacy do not support xorg-server 1.13.
</p>
<pre>
[xorg112]
Server = http://catalyst.wirephire.com/repo/xorg112/$arch
## Mirrors, if the primary server does not work or is too slow:
#Server = http://mirror.hactar.xyz/Vi0L0/xorg112/$arch
</pre>
<h2><span class="mw-headline" id="Tools">Tools</span></h2>
<h3><span class="mw-headline" id="Catalyst-hook">Catalyst-hook</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/Catalyst-hook/">Catalyst-hook</a></span><sup><small>AUR</small></sup> is a <a href="../en/Systemd.html" title="Systemd">systemd</a> service that will automatically rebuild the <code>fglrx</code> modules while the system shuts down or reboots, but only if it is necessary (e.g. after an update).
</p>
<p>Before using this package make sure that both the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/groups/x86_64/base-devel/">base-devel</a></span> group and the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=linux-headers">linux-headers</a></span> package (the one specific to the kernel you use) are installed.
</p>
<p>To enable the automatic update, enable the <code>catalyst-hook.service</code>:
</p>
<pre># systemctl enable catalyst-hook
# systemctl start catalyst-hook
</pre>
<p>You can also use this package to build the <code>fglrx</code> module manually. Simply run the <code>catalyst_build_module</code> script after the kernel has been updated:
</p>
<pre># catalyst_build_module all
</pre>
<p><b>A few more technical details:</b>
</p>
<p>The <code>catalyst-hook.service</code> is stopping the systemd "river" and is forcing systemd to wait until catalyst-hook finishes its job.
</p>
<p>The <code>catalyst-hook.service</code> is calling the <code>catalyst_build_module check</code> function which checks if fglrx rebuilds are really necessary.
</p>
<p>The <code>check</code> function is checking if the <code>fglrx</code> module exists, if it:
</p>
<ul><li>does not exist, it will build it;</li></ul>
<ul><li>does exist, it will compare the two values to be sure that a rebuild is necessary.</li></ul>
<p>These values are md5sums of the <code>/usr/lib/modules/&lt;kernel_version&gt;/build/Module.symvers</code> file (because I, Vi0L0, noticed that this file is unique and different for every kernel's release). The first value is the md5sum of the existing <code>Module.symvers</code> file. The second value is the md5sum of the <code>Module.symvers</code> file which existed in a moment of the <code>fglrx</code> module creation. This value was compiled into the <code>fglrx</code> module by a <code>catalyst_build_module</code> script.
</p>
<p>If the values are different, it will compile the new <code>fglrx</code> module.
</p>
<p>The check is checking the whole <code>/usr/lib/modules/</code> directory and building modules for all of the installed kernels if it is necessary. If the build or rebuild is not necessary, the whole process takes only some milliseconds to complete before it gets killed by systemd.
</p>
<h3><span class="mw-headline" id="Catalyst-generator">Catalyst-generator</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-generator/">catalyst-generator</a></span><sup><small>AUR</small></sup> is a package that is able to build and install the <code>fglrx</code> module packed into pacman compliant <code>catalyst-${kernver}</code> packages. The basic difference from <a href="#Catalyst-hook">#Catalyst-hook</a> is that you will have to trigger this command manually, whereas Catalyst-hook will do this automatically at boot when a new kernel got installed.
</p>
<p>It creates <code>catalyst-${kernver}</code> packages using <a href="../en/Makepkg.html" title="Makepkg">makepkg</a> and installs them with <a href="../en/Pacman.html" title="Pacman">pacman</a>. <code>${kernver}</code> is the kernel version for which each package was built (e.g. catalyst-2.6.35-ARCH package was built for 2.6.35-ARCH kernel).
</p>
<p>To build and install <code>catalyst-${kernver}</code> package for a currently booted kernel as an unprivileged user (non-root; safer way), use <code>catalyst_build_module</code>. You will be asked for your root password to proceed to package installation.
</p>
<p>A short summary on how to use this package:
</p>
<ol>
<li> As root: <code>catalyst_build_module remove</code>. This will remove all unused <code>catalyst-{kernver}</code> packages.</li>
<li> As unprivileged user: <code>catalyst_build_module ${kernver}</code>, where <code>${kernver}</code> is the version of the kernel to which you just updated. For example: <code>catalyst_build_module 2.6.36-ARCH</code>. You can also build <code>catalyst-{kernver}</code> for all installed kernels by using <code>catalyst_build_module all</code>.</li>
<li> If you want to remove <code>catalyst-generator</code>, it is best to run this as root before removing catalyst-generator: <code>catalyst_build_module remove_all</code>. <b>This will remove all <code>catalyst-{kernver}</code> packages from the system.</b>
</li>
</ol>
<p><code>Catalyst-generator</code> is not able to remove all those <code>catalyst-{kernver}</code> packages automatically while being removed because there can not be more than one instance of pacman running. If you forget to run <code># catalyst_build_module remove_all</code> before using <code># pacman -R catalyst-generator</code> catalyst-generator will tell you which <code>catalyst-{kernver}</code> packages you will have to remove manually after removing catalyst-generator itself.
</p>
<p>Catalyst-generator is most safe and KISS-friendly solution because:
</p>
<ol>
<li> you can use unprivileged user to build the package;</li>
<li> it is building modules in a fakeroot environment;</li>
<li> it is not throwing files here and there, <a href="../en/Pacman.html" title="Pacman">pacman</a> always knows where they are;</li>
<li> all you have to do is to remember to use it</li>
</ol>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If you see those warnings:
<pre><b>WARNING:</b> Package contains reference to $srcdir
</pre>
<pre><b>WARNING:</b> '.pkg' is not a valid archive extension.
</pre>
while building <code>catalyst-{kernver}</code> package, do not be concerned, it is normal.</div>
<h3><span class="mw-headline" id="OpenCL_and_OpenGL_development">OpenCL and OpenGL development</span></h3>
<p>Since years AMD is working on tools for OpenCL and OpenGL developement.
</p>
<p>Now under the banner of <b>"Heterogeneous Computing"</b> AMD is providing even more of them, fortunately most of their computing tools are available also for Linux.
</p>
<p>In the AUR and the [catalyst] repositories you will find packages that represent the most important work from AMD, namely:
</p>
<ul>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdapp-aparapi/">amdapp-aparapi</a></span><sup><small>AUR</small></sup>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdapp-sdk/">amdapp-sdk</a></span><sup><small>AUR</small></sup>
</li>
<li> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdapp-codexl/">amdapp-codexl</a></span><sup><small>AUR</small></sup>
</li>
</ul>
<p>APP shortcut stands for Accelerated Parallel Processing.
</p>
<h4><span class="mw-headline" id="amdapp-aparapi">amdapp-aparapi</span></h4>
<p>AMD's Aparapi is an API for expressing data parallel workloads in Java and a runtime component capable of converting the Java bytecode of compatible workloads into OpenCL so that it can be executed on a variety of GPU devices. If Aparapi can’t execute on the GPU, it will execute in a Java thread pool.
</p>
<p>You can find more information about Aparapi <a rel="nofollow" class="external text" href="http://developer.amd.com/tools/heterogeneous-computing/aparapi/">here</a>.
</p>
<h4><span class="mw-headline" id="amdapp-sdk_.28formerly_known_as_amdstream.29">amdapp-sdk (formerly known as amdstream)</span></h4>
<p>The AMD APP Software Development Kit (SDK) is a complete development platform created by AMD to allow you to quickly and easily develop applications accelerated by AMD APP technology. The SDK provides samples, documentation and other materials to quickly get you started leveraging accelerated compute using OpenCL, Bolt, or C++ AMP in your C/C++ application.
</p>
<p>Since version 2.8 amdapp-sdk is providing aparapiUtil as well as aparapi's samples. A package is available on the [catalyst] repository; it depends on the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdapp-aparapi/">amdapp-aparapi</a></span><sup><small>AUR</small></sup> package. The AUR's package will let you decide whether you want aparapi's additions or not.
</p>
<p>Version 2.8 does not provide Profiler functionality, it has been moved to CodeXL.
</p>
<p>You can find more information about AMD APP SDK <a rel="nofollow" class="external text" href="http://developer.amd.com/tools/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/">here</a>.
</p>
<h4><span class="mw-headline" id="amdapp-codexl">amdapp-codexl</span></h4>
<p>CodeXL is an OpenCL and OpenGL Debugger and Profiler, with a static OpenCL kernel analyzer. It is a GUI application written atop of the well known <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gdebugger/">gdebugger</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/gdebugger">aur-mirror</a>]</sup> and is available only for x86_64 systems.
</p>
<p>You can find more informations about CodeXL <a rel="nofollow" class="external text" href="http://developer.amd.com/tools/heterogeneous-computing/codexl/">here</a>.
</p>
<h2><span class="mw-headline" id="Features">Features</span></h2>
<h3><span class="mw-headline" id="Tear_Free_Rendering">Tear Free Rendering</span></h3>
<p>Presented in <b>Catalyst 11.1</b>, the <i>Tear Free Desktop</i> feature reduces tearing in 2D, 3D and video applications. This likely adds triple-buffering and v-sync. Do note that it requires additional GPU processing.
</p>
<p>To enable 'Tear Free Desktop' run <code>amdcccle</code> and go to: <code>Display Options</code> → <code>Tear Free</code>.
</p>
<p>Or run:
</p>
<pre># aticonfig --set-pcs-u32=DDX,EnableTearFreeDesktop,1
</pre>
<p>To disable, again use <code>amdcccle</code> or run:
</p>
<pre># aticonfig --del-pcs-key=DDX,EnableTearFreeDesktop
</pre>
<h3><span class="mw-headline" id="Video_acceleration">Video acceleration</span></h3>
<p><b><a href="https://en.wikipedia.org/wiki/Video_Acceleration_API" class="extiw" title="wikipedia:Video Acceleration API">Video Acceleration API</a> (VA API)</b> is an open source software library (libVA) and API specification which provides GPU acceleration for video processing on Linux/UNIX based operating systems. The process works by enabling hardware accelerated video decode at various entry-points (VLD, IDCT, Motion Compensation, deblocking) for common encoding standards (MPEG-2, MPEG-4 ASP/H.263, MPEG-4 AVC/H.264, and VC-1/WMV3).
</p>
<p>VA-API gained a proprietary backend (in November 2009) called <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xvba-video/">xvba-video</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/xvba-video">aur-mirror</a>]</sup>, that allows VA-API programmed applications to take advantage of AMD Radeons UVD2 chipsets via the <a href="https://en.wikipedia.org/wiki/XvBA" class="extiw" title="wikipedia:XvBA">XvBA (X-Video Bitstream Acceleration API designed by AMD)</a> library.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>No need to install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xvba-video/">xvba-video</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/xvba-video">aur-mirror</a>]</sup> package when using <code>catalyst-test</code> or <code>catalyst-total</code>, because a symlink is being used instead.</div>
<p>XvBA support and xvba-video is still under development, however it is <b>working very well in most cases</b>. Build (or install from Vi0L0's repo) the proprietary <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xvba-video/">xvba-video</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/xvba-video">aur-mirror</a>]</sup> package, or if you have problems with that version, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libva-xvba-driver/">libva-xvba-driver</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" title="ArchWiki:Requests">broken link</a>: archived in <a rel="nofollow" class="external text" href="https://github.com/felixonmars/aur3-mirror/tree/master/libva-xvba-driver">aur-mirror</a>]</sup>; and also install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mplayer-vaapi/">mplayer-vaapi</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=libva">libva</a></span>. Then just set your video player to use vaapi:gl as video output:
</p>
<pre>$ mplayer -vo vaapi:gl movie.avi
</pre>
<p>These options can be added to your mplayer configuration file, see <a href="../en/MPlayer.html" title="MPlayer">MPlayer</a>.
</p>
<p>For <b>smplayer</b>:
</p>
<pre>Options → Preferences → General → Video (tab) → Output driver: User Defined : vaapi:gl
Options → Preferences → General → Video (tab) → Double buffering <b>on</b>
Options → Preferences → General → General → Screenshots → Turn screenshots <b>off</b>
Options → Preferences → Performance → Threads for decoding: <b>1</b> (to turn off -lavdopts parameter)
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If Tear Free Desktop is enabled it is better to use:
<pre>Options → Preferences → General → Video (tab) → Output driver: vaapi
</pre>
<p>If Video Output <b>vaapi:gl</b> is not working - please check:
</p>
<pre><b>vaapi</b>, <b>vaapi:gl2</b> or simply <b>xv(0 - AMD Radeon <a href="https://en.wikipedia.org/wiki/Avivo" class="extiw" title="wikipedia:Avivo">AVIVO Video</a>)</b>.
</pre>
</div>
<p>For <b>VLC</b>:
</p>
<pre>Tools → Preferences → Input &amp; Codecs → Use GPU accelerated decoding
</pre>
<p>It might help to enable v-sync in <b>amdcccle</b>:
</p>
<pre>3D → More Settings → Wait for vertical refresh = Always On
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>If you are using <b>Compiz/KWin</b>, the only way to <b>avoid video flickering</b> is to watch videos in <b>full-screen</b> and only when <b>Unredirect Fullscreen is off</b>.
In <b>compiz</b> you need to set <b>Redirected Direct Rendering</b> in General Options of ccsm. If it is still flickering, try to disable this option in CCSM. It is off by default in <b>KWin</b>, but if you see flickering try to turn "Suspend desktop effects for fullscreen windows" on or off in <code>System Settings</code> → <code>Desktop Effects</code> → <code>Advanced</code>.</div>
<h3><span class="mw-headline" id="GPU.2FMem_frequency.2C_Temperature.2C_Fan_speed.2C_Overclocking_utilities">GPU/Mem frequency, Temperature, Fan speed, Overclocking utilities</span></h3>
<p>You can get the GPU/Mem clocks with: <code>$ aticonfig --od-getclocks</code>.
</p>
<p>You can get the fan speed with: <code>$ aticonfig --pplib-cmd "get fanspeed 0"</code>
</p>
<p>You can get the temperature with: <code>$ aticonfig --odgt</code>
</p>
<p>To set the fanspeed with: <code>$ aticonfig --pplib-cmd "set fanspeed 0 50"</code> Query Index: 50, Speed in percent
</p>
<p>To overclock and/or underclock it is easier to use a GUI, like <b>ATi Overclocking Utility</b>, which is very simple and requires qt to work. It might be out of date/old, but you can get it <a rel="nofollow" class="external text" href="http://kde-apps.org/content/show.php/ATI+Overclock?content=47796">here</a>.
</p>
<p>Another, more complex utility to perform such operations is <b>AMDOverdriveCtrl</b>. Its homepage is <a rel="nofollow" class="external text" href="http://sourceforge.net/projects/amdovdrvctrl">here</a> and you can build <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdoverdrivectrl/">amdoverdrivectrl</a></span><sup><small>AUR</small></sup> from the AUR or from Vi0L0's unofficial repositories.
</p>
<h3><span class="mw-headline" id="Double_Screen_.28Dual_Head_.2F_Dual_Screen_.2F_Xinerama.29">Double Screen (Dual Head / Dual Screen / Xinerama)</span></h3>
<h4><span class="mw-headline" id="Introduction">Introduction</span></h4>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong> you should know that there is not one specific solution because each setup differs and needs its own configuration. That is why you will have to adapt the steps below to your own needs. It is possible that you have to try more than once. Therefore, you should save your working <code>/etc/X11/xorg.conf</code> <b>before</b> you start modifying and be able to recover from a command-line environment.</div>
<ul><li> In this chapter, we will describe the installation of two different-sized screens on only one graphics card with two different output ports (DVI + HDMI) using a "BIG Desktop" configuration.</li></ul>
<ul><li> The Xinerama solution has some inconveniences, especially because it is not compatible with XrandR. For that very reason, you should not use this solution, because XrandR is a must for our later configuration.</li></ul>
<ul><li> The Dual Head solution would allow you to have 2 different sessions (one for each screen). It could be what you want, but you will not be able to move windows from one screen to another. If you have only one screen, you will have to define the mouse inside your Xorg session for each of the two sessions inside the Server Layout section.</li></ul>
<p><a rel="nofollow" class="external text" href="http://support.amd.com/us/kbarticles/Pages/1105-HowCanIConfigureMultip.aspx">ATI Documentation</a>
</p>
<h4><span class="mw-headline" id="ATI_Catalyst_Control_Center">ATI Catalyst Control Center</span></h4>
<p>The GUI tool shipped by ATI is very useful and we will try to use it as much as we can. To launch it, open a terminal and use the following command:
</p>
<pre>$ {kdesu/gksu} amdcccle
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>Do <b>not</b> use sudo directly with a GUI. Sudo gives you admin rights with user account information. Instead, use <i>gksu</i> (GNOME) or <i>kdesu</i> (KDE).</div>
<h4><span class="mw-headline" id="Installation_2">Installation</span></h4>
<p>Before we start, make sure that your hardware is plugged in correctly, that power is on and that you know your hardware characteristics (screen dimensions, sizes, refreshment rates, etc.) Normally, both screens are recognized during boot time but not necessarily identified properly, especially if you are not using any Xorg base configuration file (<code>/etc/X11/xorg.conf</code>) but relying on the hot-plugging feature.
</p>
<p>The first step is to make sure that you screens will be recognized by your DE and by X. For this, you need to generate a basic Xorg configuration file for your two screens:
</p>
<pre># aticonfig --initial --desktop-setup=horizontal --overlay-on=1
</pre>
<p>or
</p>
<pre># aticonfig --initial=dual-head --screen-layout=left
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong><code>overlay</code> is important because it allows you to have 1 pixel (or more) shared between the 2 screens.</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>For the other possible and available options, do not hesitate to type <code>aticonfig --help</code> inside a terminal to display all available command lines.</div>
<p>Now you should have a basic Xorg configuration file that you can edit to add your screen resolutions. It is important to use the precise resolution, especially if you have screens of different sizes. These resolutions have to be added in the "Screen" section:
</p>
<pre>SubSection "Display"
    Depth     24
    Modes     "X-resolution screen 1xY-resolution screen 1" "Xresolution screen 2xY-resolution screen 2"
EndSubSection
</pre>
<p>From now on, instead of editing the <code>xorg.conf</code> file manually, let us use the ATI GUI tool. Restart X to be sure that your two screens are properly supported and that the resolutions are properly recognized (Screens must be independent, not mirrored).
</p>
<h4><span class="mw-headline" id="Configuration">Configuration</span></h4>
<p>Now you will only have to launch the ATI control center with root privileges, go to the display menu and choose how you would like to set your configuration (small arrow of the drop down menu). A last restart of X and you should be done!
</p>
<p>Before you restart X, do not hesitate to verify your new <code>xorg.conf</code> file. At this stage, inside the "Display" sub-section of the "Screen" section, you should see a "Virtual" command line, of which the resolution should be the sum of both screens. The "Server Layout" section says all the rest.
</p>
<h2><span class="mw-headline" id="Uninstallation">Uninstallation</span></h2>
<p>If for any reason this driver is not working for you or if you simply want to try out the open source driver, remove the <code>catalyst</code> and <code>catalyst-utils</code> packages. Also you should remove <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-generator/">catalyst-generator</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-hook/">catalyst-hook</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lib32-catalyst-utils/">lib32-catalyst-utils</a></span><sup><small>AUR</small></sup> packages if they have been installed on your system.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>
<ul>
<li>You may need to use <code># pacman -Rdd</code> to remove <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-utils/">catalyst-utils</a></span><sup><small>AUR</small></sup> (and/or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lib32-catalyst-utils/">lib32-catalyst-utils</a></span><sup><small>AUR</small></sup>) because that package contains <i>gl</i> related files and many of your installed packages depend on them. These dependencies will be satisfied again when you install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-ati">xf86-video-ati</a></span>.</li>
<li>You may need to remove <code>/etc/profile.d/ati-flgrx.sh</code> and <code>/etc/profile.d/lib32-catalyst</code> (if it exists on your system), otherwise <code>r600_dri.so</code> will fail to load and you would not have 3D support.</li>
</ul>
</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>You should remove unofficial repositories from your <code>/etc/pacman.conf</code> and run <code># pacman -Syu</code>, because those repositories include out-dated Xorg packages to allow use of <code>catalyst</code> and the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xf86-video-ati">xf86-video-ati</a></span> package needs up-to-date Xorg packages from the <a href="../en/Official_repositories.html" title="Official repositories">Official repositories</a>.</div>
<p>Also follow these steps:
</p>
<ul>
<li> If you have the <code>/etc/modprobe.d/blacklist-radeon.conf</code> file remove it or comment the line <code>blacklist radeon</code> in that file.</li>
<li> If you have a file in <code>/etc/modules-load.d</code> to load the <code>fglrx</code> module on boot, remove it or comment the line containing <code>fglrx</code>.</li>
<li> Make sure to remove or backup <code>/etc/X11/xorg.conf</code>.</li>
<li> If you have installed the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst-hook/">catalyst-hook</a></span><sup><small>AUR</small></sup> package, make sure to disable the systemd service.</li>
<li> If you used the <code>nomodeset</code> option in your <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> and plan to use KMS, remove it.</li>
<li> <b>Reboot</b> before installing another driver.</li>
</ul>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>If you can still boot to command-line, then the problem probably lies in <code>/etc/X11/xorg.conf</code>
</p>
<p>You can parse the whole <code>/var/log/Xorg.0.log</code> or, for clues:
</p>
<pre>$ grep '(EE)' /var/log/Xorg.0.log
$ grep '(WW)' /var/log/Xorg.0.log
</pre>
<p>If you are still confused about what is going on, search the forums first.  Then post a message in the <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1166052#p1166052/">thread specific to ATI/AMD</a>. Provide the information from <code>xorg.conf</code> and both commands mentioned above.
</p>
<h3><span class="mw-headline" id="Failed_to_start_atieventsd.service">Failed to start atieventsd.service</span></h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=acpid">acpid</a></span> from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>. Start and enable the acpid <a href="../en/Daemons.html" title="Daemon" class="mw-redirect">service</a>.
</p>
<p>If the service still fails to start, edit <code>/usr/lib/systemd/system/atieventsd.service</code> and change <code>acpid.socket</code> to <code>acpid.service</code>.
</p>
<h3><span class="mw-headline" id="Failed_to_open_fglrx_dri.so">Failed to open fglrx_dri.so</span></h3>
<p>Create a symlink from <code>/usr/lib/xorg/modules/dri/fglrx_dri.so</code> to <code>/usr/X11R6/lib64/modules/dri/fglrx_dri.so</code> (or other requested path)
</p>
<pre># mkdir -p /usr/X11R6/lib64/modules/dri
# ln -s /usr/lib/xorg/modules/dri/fglrx_dri.so /usr/X11R6/lib64/modules/dri/fglrx_dri.so
</pre>
<h3><span class="mw-headline" id="GDM_fails_to_start">GDM fails to start</span></h3>
<p>Downgrade the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=xorg-server">xorg-server</a></span> package or try to use another <a href="../en/Display_manager.html" title="Display manager">display manager</a> like <a href="../en/LightDM.html" title="LightDM">LightDM</a>.
</p>
<h3><span class="mw-headline" id="3D_Wine_applications_freeze">3D Wine applications freeze</span></h3>
<p>If you use a 3D Wine application and it hangs, watch out for the following workarounds.
</p>
<h4><span class="mw-headline" id="TLS">TLS</span></h4>
<p>One source of problems is TLS. To disable it, either use <code>aticonfig</code> or edit <code>/etc/X11/xorg.conf</code>. To use <code>aticonfig</code>:
</p>
<pre># aticonfig --tls=off
</pre>
<p>Or, to edit <code>/etc/X11/xorg.conf</code>; first open the file in an editor as root and then add <code>Option "UseFastTLS" "off"</code> to the <i>Device</i> section of this file. 
</p>
<p>After applying either of the solutions, restart X for it to take effect.
</p>
<h4><span class="mw-headline" id="Compiz">Compiz</span></h4>
<p>In case you are using compiz as the windows compositer, disable it. For instance, if you are using XFCE as your desktop environment, open a terminal and execute:
</p>
<pre>$ xfwm4 --replace &amp;
</pre>
<h3><span class="mw-headline" id="Problems_with_video_colours">Problems with video colours</span></h3>
<p>You may still use <code>vaapi:gl</code> to avoid video flickering, but without video acceleration:
</p>
<ul><li> Run <b>mplayer</b> without <code>-vo vaapi</code> switch.</li></ul>
<ul><li> Run <b>smplayer</b> remove <code>-vo vaapi</code> from Options → Preferences → Advanced → Options for MPlayer → Options: -vo vaapi</li></ul>
<p>Plus for <b>smplayer</b> you may now safely turn screenshots on.
</p>
<h3><span class="mw-headline" id="KWin_and_composite">KWin and composite</span></h3>
<p>You may use XRender if the rendering with OpenGL is slow. However, XRender might also be slower than OpenGL depending on your card.
XRender also solves artefact issues in some cases, for instance when resizing Konsole.
</p>
<h3><span class="mw-headline" id="Black_screen_with_complete_lockups_and.2For_hangs_after_reboot_or_startx">Black screen with complete lockups and/or hangs after reboot or startx</span></h3>
<p>Ensure you have added the <code>nomodeset</code> option to the kernel options line in your bootloader (see <a href="#Disable_kernel_mode_setting">#Disable kernel mode setting</a>). Make sure that Catalyst is compatible with your installed Xorg version and used Linux kernel version.
</p>
<p>If you are using the legacy driver (<code>catalyst-hd234k</code>) and get a black screen, try downgrading xorg-server to 1.12 by using the <a href="#xorg112">#xorg112</a> repository.
</p>
<h4><span class="mw-headline" id="Faulty_ACPI_hardware_calls">Faulty ACPI hardware calls</span></h4>
<p>It is possible that fglrx does not cooperate well with the system's ACPI hardware calls, so it auto-disables itself and there is no screen output.
</p>
<p>If so, try to run this:
</p>
<pre>$ aticonfig --acpi-services=off
</pre>
<h3><span class="mw-headline" id="KDM_disappears_after_logout">KDM disappears after logout</span></h3>
<p>If you are running Catalyst proprietary driver and you get a console (tty1) instead of the expected KDM greeting when you log out, you must instruct KDM to restart the X server after each logout. Uncomment the following line under the section titled <code>[X-:*-Core]</code>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/config/kdm/kdmrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">TerminateServer=True</pre>
<p>KDM should now appear when you log out of KDE.
</p>
<h3><span class="mw-headline" id="Direct_Rendering_does_not_work">Direct Rendering does not work</span></h3>
<p>This problem may occur when using the proprietary <b>Catalyst</b> driver.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;">
<strong> Warning: </strong>This error would also appear if you have not <b>rebooted</b> your system after the installation or upgrade of catalyst. The system needs to load the fglrx.ko module in order to make the driver work.</div>
<p>If you have problem with direct rendering, run:
</p>
<pre>$ LIBGL_DEBUG=verbose glxinfo &gt; /dev/null
</pre>
<p>at the command prompt. At the very start of the output, it will usually give you a nice error message saying why you do not have direct rendering.
</p>
<p>Common errors and their solutions, are:
</p>
<pre>libGL error: XF86DRIQueryDirectRenderingCapable returned false
</pre>
<ul><li> Ensure that you are loading the correct agp modules for your AGP chipset before you load the <code>fglrx</code> kernel module. To determine which agp modules you will need, run <code># hwdetect --show-agp</code>. Then open your <code>/etc/modules-load.d/fglrx.conf</code> and add the agp module on a line <b>before</b> the <code>fglrx</code> line.</li></ul>
<pre>libGL error: failed to open DRM: Operation not permitted
libGL error: reverting to (slow) indirect rendering
</pre>
<pre>libGL: OpenDriver: trying /usr/lib/xorg/modules/dri//fglrx_dri.so
libGL error: dlopen /usr/lib/xorg/modules/dri//fglrx_dri.so failed
(/usr/lib/xorg/modules/dri//fglrx_dri.so: cannot open shared object file: No such file or directory)
libGL error: unable to find driver: fglrx_dri.so
</pre>
<ul><li> Something has not been installed correctly. If the paths in the error message are <code>/usr/X11R6/lib/modules/dri/fglrx_dri.so</code>, then ensure you have logged completely out of your system, then back in. If you are using a graphical login manager (gdm, kdm, xdm), ensure that <code>/etc/profile</code> is sourced every time you log in. This is usually accomplished by adding <code>source /etc/profile</code> into <code>~/.xsession</code> or <code>~/.xinitrc</code>, but this may vary between login managers.</li></ul>
<ul><li> If the paths above in your error message <i>are</i> <code>/usr/lib/xorg/modules/dri/fglrx_dri.so</code>, then something has not been correctly installed. Try reinstalling the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/catalyst/">catalyst</a></span><sup><small>AUR</small></sup> package.</li></ul>
<p>Errors such as:
</p>
<pre>fglrx: libGL version undetermined - OpenGL module is using glapi fallback
</pre>
<p>could be caused by having multiple versions of <code>libGL.so</code> on your system. The command below should return the following output:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ locate libGL.s</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
/usr/lib/libGL.so
/usr/lib/libGL.so.1
/usr/lib/libGL.so.1.2</pre>
<p>These are the only three libGL.so files you should have on your system. If you have any more (e.g. <code>/usr/X11R6/lib/libGL.so.1.2</code>), then remove them. This should fix your problem.
</p>
<p>You might not get any error to indicate that this is a problem. If you are using X11R7, make sure you do <b>not</b> have these files on your system:
</p>
<pre>/usr/X11R6/lib/libGL.so.1.2
/usr/X11R6/lib/libGL.so.1
</pre>
<h3><span class="mw-headline" id="Hibernate.2FSleep_issues">Hibernate/Sleep issues</span></h3>
<h4><span class="mw-headline" id="Video_fails_to_resume_from_suspend2ram">Video fails to resume from suspend2ram</span></h4>
<p>ATI's proprietary Catalyst driver cannot resume from suspend if the framebuffer is enabled. To disable the framebuffer, add <code>vga=0</code> to your kernel <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<p>To see where you need to add this with other bootloaders, see <a href="#Disable_kernel_mode_setting">#Disable kernel mode setting</a>.
</p>
<h3><span class="mw-headline" id="System_freezes.2FHard_locks">System freezes/Hard locks</span></h3>
<ul><li> The <code>radeonfb</code> framebuffer drivers have been known in the past to cause problems of this nature. If your kernel has radeonfb support compiled in, you may want to try a different kernel and see if this helps.</li></ul>
<ul><li> If you experience system freezes when exiting your DE (shut down, suspend, switching to tty etc.) you probably forgot to deactivate KMS. (See <a href="#Disable_kernel_mode_setting">#Disable kernel mode setting</a>)</li></ul>
<h3><span class="mw-headline" id="Hardware_conflicts">Hardware conflicts</span></h3>
<p>Radeon cards used in conjunction with some versions of the nForce3 chipset (e.g. nForce 3 250Gb) will not have 3D acceleration. Currently the cause of this issue is unknown, but some sources indicate that it may be possible to get acceleration with this combination of hardware by booting Windows with the drivers from nVIDIA and then rebooting the system. This can be verified by getting output something similar to this (using an nForce3-based system):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ dmesg | grep agp</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
agpgart: Detected AGP bridge 0
agpgart: Setting up Nforce3 AGP.
agpgart: aperture base &gt; 4G
</pre>
<p>and also if issuing the following command gets you the following output:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ tail -n 100 /var/log/Xorg.0.log | grep agp</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
(EE) fglrx(0): [agp] unable to acquire AGP, error "xf86_ENODEV"</pre>
<p>you have this bug.
</p>
<p>Some sources indicate that in some situations, downgrading the motherboard BIOS may help, but this cannot be verified in all cases. Also, <b>a bad BIOS downgrade can render your hardware useless, so beware.</b>
</p>
<p>See <a rel="nofollow" class="external text" href="http://bugzilla.kernel.org/show_bug.cgi?id=6350">this bugreport</a> for more information and a potential fix.
</p>
<h3><span class="mw-headline" id="Temporary_hangs_when_playing_video">Temporary hangs when playing video</span></h3>
<p>This problem may occur when using the proprietary Catalyst.
</p>
<p>If you experience temporary hangs lasting from a few seconds to several minutes occuring randomly during playback with mplayer, check the system logs for output like:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/log/messages.log</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Nov 28 18:31:56 pandemonium [&lt;c01c64a6&gt;] ? proc_get_sb+0xc6/0x160
Nov 28 18:31:56 pandemonium [&lt;c01c64a6&gt;] ? proc_get_sb+0xc6/0x160
Nov 28 18:31:56 pandemonium [&lt;f8bc628c&gt;] ? ip_firegl_ioctl+0x1c/0x30 [fglrx]
Nov 28 18:31:56 pandemonium [&lt;c01c64a6&gt;] ? proc_get_sb+0xc6/0x160
Nov 28 18:31:56 pandemonium [&lt;c0197038&gt;] ? vfs_ioctl+0x78/0x90
Nov 28 18:31:56 pandemonium [&lt;c01970b7&gt;] ? do_vfs_ioctl+0x67/0x2f0
Nov 28 18:31:56 pandemonium [&lt;c01973a6&gt;] ? sys_ioctl+0x66/0x70
Nov 28 18:31:56 pandemonium [&lt;c0103ef3&gt;] ? sysenter_do_call+0x12/0x33
Nov 28 18:31:56 pandemonium [&lt;c01c64a6&gt;] ? proc_get_sb+0xc6/0x160
Nov 28 18:31:56 pandemonium =======================</pre>
<p>Adding the <code>nopat</code> and/or <code>nomodeset</code> <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> should work.
</p>
<h3><span class="mw-headline" id=".22aticonfig:_No_supported_adapters_detected.22">"aticonfig: No supported adapters detected"</span></h3>
<p>If you get the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># aticonfig --initial</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
aticonfig: No supported adapters detected
</pre>
<p>It may still be possible to get Catalyst working by manually setting the device in your your <code>etc/X11/xorg.conf</code> file or by copying an older working <code>/etc/ati/control</code> file (preferred - this also fixes the watermark issue).
</p>
<p>To get an older control file, download a previous version of fglrx from AMD and run it with <code>--extract driver</code> parameter. You will find the control file in <code>driver/common/etc/ati/control</code>. Copy the extracted file over the system file and restart Xorg. You can try different versions of the file.
</p>
<p>To set your model in <code>xorg.conf</code>, edit the device section of <code>/etc/X11/xorg.conf</code> to:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
Section "Device"
        Identifier "ATI radeon <b>****</b>"
        Driver     "fglrx"
EndSection
</pre>
<p>Where <code>****</code> should be replaced with your device's marketing number (e.g. 6870 for the HD 6870 and 6310 for the E-350 APU).
</p>
<p>Xorg will start and it is possible to use <code>amdcccle</code> instead of <code>aticonfig</code>. There will be an "AMD Unsupported hardware" watermark.
</p>
<p>You can remove this watermark using the following script:
</p>
<pre>#!/bin/sh
DRIVER=/usr/lib/xorg/modules/drivers/fglrx_drv.so
for x in $(objdump -d $DRIVER|awk '/call/&amp;&amp;/EnableLogo/{print "\\x"$2"\\x"$3"\\x"$4"\\x"$5"\\x"$6}'); do
   sed -i "s/$x/\x90\x90\x90\x90\x90/g" $DRIVER
done
</pre>
<p>and then reboot your machine.
</p>
<h3><span class="mw-headline" id="WebGL_support_in_Chromium">WebGL support in Chromium</span></h3>
<p>Google has blacklisted Linux's Catalyst driver from supporting webGL in their Chromium/Chrome browsers. See <a href="../en/Chromium.html#WebGL" title="Chromium">Chromium#WebGL</a> for details.
</p>
<h3><span class="mw-headline" id="Lag.2Ffreezes_when_watching_flash_videos_via_Adobe.27s_flashplugin">Lag/freezes when watching flash videos via Adobe's flashplugin</span></h3>
<p>Edit:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/adobe/mms.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#EnableLinuxHWVideoDecode=1
OverrideGPUValidation=true</pre>
<p>If you are using KDE make sure that "Suspend desktop effects for fullscreen windows" is unchecked under <code>System Settings</code> → <code>Desktop Effects</code> → <code>Advanced</code>.
</p>
<h3><span class="mw-headline" id="Lag.2Fslow_windows_movement_in_GNOME3">Lag/slow windows movement in GNOME3</span></h3>
<p>You can try this solution, it has been reported to work for many people.
</p>
<p>Add this line into <code>~/.profile</code> or into <code>/etc/profile</code>:
</p>
<pre>export CLUTTER_VBLANK=none
</pre>
<p>Restart X server or reboot your system.
</p>
<h3><span class="mw-headline" id="Not_using_full_screen_resolution_at_1920x1080_.28underscanning.2C_black_borders_around_the_screen.29">Not using full screen resolution at 1920x1080 (underscanning, black borders around the screen)</span></h3>
<p>This usually happens when you use a HDMI connection to connect your monitor/TV to your computer.
</p>
<p>Seemed to be a feature by AMD/ATI to work with all HDTVs that could be adjusted via the amdccle.
</p>
<p>Using the amdcccle GUI you can select the affected display, go to adjustments, and set underscan to 0% (aticonfig defaults to 15% underscan). It is possible as well that the underscan slider will not show under the display's adjustments, as sometimes in (at least) version 14.10.
</p>
<p>The problem is that the settings will not persist after restarting X server or rebooting or wake up or might even revert after changing TTYs.
</p>
<p>For the changes to become permanent, you will need to adjust the underscan settings manually using "aticonfig" via console (as root) or manually edit the file <code>/etc/ati/amdpcsdb</code> (as root)
</p>
<p><b>using aticonfig method:</b>
</p>
<pre># aticonfig --set-pcs-u32=MCIL,DigitalHDTVDefaultUnderscan,0
</pre>
<p>After changing the settings, reboot.
</p>
<p>For newer version (for example, 12.11), if Catalyst control center repeatedly fails to save the overscan setting you can also try:
</p>
<pre># aticonfig --set-pcs-u32=MCIL,TVEnableOverscan,0
</pre>
<p><b>Manually editing /etc/ati/amdpcsdb method:</b>
</p>
<p>Add the following line anywhere under the following header <code>[AMDPCSROOT/SYSTEM/MCIL]</code>
</p>
<pre># DigitalHDTVDefaultUnderscan=V0
</pre>
<p>For newer version (for example, 12.11), if Catalyst control center repeatedly fails to save the overscan setting you can also try:
locate under <code>[AMDPCSROOT/SYSTEM/MCIL]</code> the following line 
</p>
<pre># TVEnableOverscan=V1
</pre>
<p>and change it to
</p>
<pre># TVEnableOverscan=V0
</pre>
<p>After changing the settings, reboot.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>You might find that the file <code>/etc/ati/amdpcsdb</code> will be overwritten and revert no matter what you do as user or as root even with log in/log out/reboot, ergo the modification will not stick.
<p>For the amd database file not to be overwritten you have to modify it without the fglrx driver running.
</p>
This can be made by rebooting in any "safe mode" that will not use the driver or directly booting into console mode</div>
<p><b>Workaround:</b>
For whatever reason you can find yourself not wanting to touch ATI's config files you can circumvent the problem by forcing the panel's position and resolution:
as user:
</p>
<pre># aticonfig --set-dispattrib=DISPLAYTYPE,positionX:0
# aticonfig --set-dispattrib=DISPLAYTYPE,positionY:0
# aticonfig --set-dispattrib=DISPLAYTYPE,sizeX:1920
# aticonfig --set-dispattrib=DISPLAYTYPE,sizeY:1080
</pre>
<p><code>DISPLAYTYPE</code> will be the name of the monitor you want to change its attributes, for example "dfp9".
To get the name of your <code>DISPLAYTYPE</code> run the following command:
</p>
<pre># xrandr --current
</pre>
<p>Should RandR be not enabled use:
</p>
<pre># aticonfig --query-monitor
</pre>
<p>Using the display switch or DISPLAY variable set to the appropriate display/screen (:0.1 for example) might be necessary.
</p>
<p>That will show you which displays are connected and disconnected and its properties
</p>
<p>This workaround will not persist but it is a quick fix that will show that the panel works just fine and that the above solutions are to be put into place.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong><code>aticonfig --set-pcs-val=MCIL,DigitalHDTVDefaultUnderscan,0</code> should not be used on newer versions of the driver as it is deprecated and will be soon removed as stated by ATI.</div>
<p>Try <code>aticonfig --help | grep set-pcs-val</code> to read ATI's notice
</p>
<h3><span class="mw-headline" id="Dual_Screen_Setup:_general_problems_with_acceleration.2C_OpenGL.2C_compositing.2C_performance">Dual Screen Setup: general problems with acceleration, OpenGL, compositing, performance</span></h3>
<p>Try to disable xinerama and xrandr12. Check out ie. this way:
</p>
<p>Type those commands:
</p>
<pre># aticonfig --initial
# aticonfig --set-pcs-str="DDX,EnableRandR12,FALSE"
</pre>
<p>Then reboot your system. In <code>/etc/X11/xorg.conf</code> check that xinerama is disabled, if it is not, disable it and reboot your system.
</p>
<p>Next run <code>amdcccle</code> and pick up amdcccle → display manager → multi-display → multidisplay desktop with display(s) 2.
</p>
<p>Reboot again and set up your display layout whatever you desire.
</p>
<h3><span class="mw-headline" id="Disabling_VariBright_feature">Disabling VariBright feature</span></h3>
<p><a rel="nofollow" class="external text" href="http://support.hp.com/vn-en/document/c02848104">Vari-Bright</a> is a feature designed to save power by dynamically adjusting how much power the display panel uses.
Enter the following command to disable VariBright:
</p>
<pre># aticonfig --set-pcs-u32=MCIL,PP_UserVariBrightEnable,0
</pre>
<h3><span class="mw-headline" id="Hybrid.2FPowerXpress:_turning_off_discrete_GPU">Hybrid/PowerXpress: turning off discrete GPU</span></h3>
<p>When you are using packages with powerXpress support and you are switching to integrated GPU you may notice that discrete GPU is still working, consuming power and making your system's temperature higher. 
</p>
<p>Sometimes ie. when your integrated GPU is intel's one you can use <code>vgaswitcheroo</code> to turn the discrete GPU off.
Sometimes unfortunately, it is not working.
</p>
<p>Then you may check out <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/?O=0&amp;K=acpi_call">acpi_call</a>. MrDeepPurple has prepared the script which he is using to perform 'turn off' task. He is calling script via systemd service while booting and resuming his system.
Here is his script:
</p>
<pre>#!/bin/sh
libglx=$(/usr/lib/fglrx/switchlibglx query)
modprobe acpi_call
if [ "$libglx" = "intel" ]; then
    echo '\_SB.PCI0.PEG0.PEGP._OFF' &gt; /proc/acpi/call
fi
</pre>
<h3><span class="mw-headline" id="Switching_from_X_session_to_TTYs_gives_a_blank_screen.2Flow_resolution_TTY">Switching from X session to TTYs gives a blank screen/low resolution TTY</span></h3>
<p>Workaround for this "feature", which appeared in catalyst 13.2 betas, is to use <code>vga=</code> kernel option, like <code>vga=792</code>.
You can get the list of supported resolutions with the
</p>
<pre>$ hwinfo --framebuffer
</pre>
<p>command. Get the one that corresponds to your wanted resolution, and copy-paste it into kernel line of your bootloader, so it could look like ie. <code>vga=0x03d4</code>
</p>
<h3><span class="mw-headline" id="Switching_from_X_session_to_TTYs_gives_a_black_screen_with_the_monitor_backlight_on">Switching from X session to TTYs gives a black screen with the monitor backlight on</span></h3>
<p>Use <a href="../en/Uvesafb.html" title="Uvesafb">uvesafb</a> as your framebuffer driver. Moreover with <code>uvesafb</code> it is also possible to set whatever resolution for the TTY.
</p>
<h3><span class="mw-headline" id="Switching_to_TTYs_then_back_to_X_session_gives_a_black_screen_with_a_mouse_cursor">Switching to TTYs then back to X session gives a black screen with a mouse cursor</span></h3>
<p>If you experience this bug, try adding
</p>
<pre>Option      "XAANoOffscreenPixmaps" "true"
</pre>
<p>to the 'Device' section of your xorg.conf file.
</p>
<p>Also, make sure you have a <a href="../en/Polkit.html#Authentication_agents" title="Polkit">polkit authentication agent</a> installed and running, as this behavior can happen when a program is asking for a password, but does not have an authentication agent installed to display the password dialog box.
</p>
<h3><span class="mw-headline" id="30_FPS_.2F_Tear-Free_.2F_V-Sync_bug">30 FPS / Tear-Free / V-Sync bug</span></h3>
<p>Bug introduced in Catalyst 13.6 beta, not fixed till now (13.9).
</p>
<p>After enabling "Tear-Free" functionality every freshly started OpenGL application is lagging, often generates only 30 FPS, it also touches composited desktop.
</p>
<p>Workaround is pretty simple and was found by M132. Here are the steps, do everything in "AMD Catalyst Control Center" (amdcccle) application:
</p>
<pre>1. Enable Tear-Free, it will set 3D V-Sync option to "Always on".
2. Set 3D V-Sync to "Always Off".
3. Make sure Tear-Free is still on.
4. Restart X / Re-login.
</pre>
<p>It is working well on KDE 4.11.x, but in case of problems M132 suggests: "Try disabling "Detect refresh rate" and specify monitor's refresh rate in the Composite plugin."
</p>
<h3><span class="mw-headline" id="Backlight_adjustment_does_not_work">Backlight adjustment does not work</span></h3>
<p>If you have a problem with backlight adjustment, you can try the following command: 
</p>
<pre># aticonfig --set-pcs-u32=MCIL,PP_PhmUseDummyBackEnd,1
</pre>
<p>Some users reported that this can decrease FPS. To restore defaults, run:
</p>
<pre># aticonfig --set-pcs-u32=MCIL,PP_PhmUseDummyBackEnd,0
</pre>
<p><a rel="nofollow" class="external text" href="http://ati.cchtml.com/show_bug.cgi?id=711">Read more about this bug</a>
</p>
<h3><span class="mw-headline" id="Chromium_glitching_when_using_plasma">Chromium glitching when using plasma</span></h3>
<p>Add --disable-gpu execute option to the chromium, ie. to /usr/share/applications/chromium.desktop file, like here:
</p>
<pre># cat /usr/share/applications/chromium.desktop | grep -i exec
Exec=chromium %U --disable-gpu
</pre>
<h3><span class="mw-headline" id="Xorg_crashes">Xorg crashes</span></h3>
<h4><span class="mw-headline" id="Unsupported_Xorg_Version">Unsupported Xorg Version</span></h4>
<p>When having a supported Linux kernel version but an unsupported Xorg version, you might get this error message and Xorg will crash
</p>
<pre>(WW) fglrx: No matching Device section for instance (BusID PCI:0@0:17:0) found
(...)
/usr/bin/Xorg.bin: symbol lookup error: /usr/lib/xorg/modules/drivers/fglrx_drv.so: undefined symbol: GlxInitVisuals2D
xinit: giving up
xinit: unable to connect to X server: Connection refused
xinit: server error
</pre>
<p>For example: fglrx 15.20.3 does not support Xorg 1.17.
</p>
<p>To solve this, you should downgrade Xorg. A helpful list of steps can be found on <a rel="nofollow" class="external autonumber" href="https://gist.github.com/anonymous/9ea8d3774f7afce3a605">[2]</a>
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external text" href="http://wiki.cchtml.com/index.php/Main_Page">Unofficial Wiki for the ATI Linux Driver</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://ati.cchtml.com/query.cgi">Unofficial ATI Linux Driver Bugzilla</a>
</li>
</ul>

</div>
<div id="catlinks" class="catlinks">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../en/Category:X_server.html" title="Category:X server">X server</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
