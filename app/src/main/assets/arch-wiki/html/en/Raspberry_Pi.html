<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Raspberry Pi - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style></style>
<meta name="generator" content="MediaWiki 1.26.4">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Raspberry_Pi skin-archlinux action-view">

		<div id="globalWrapper" style="width: 100%">
		<div id="column-content">
			<div id="content" class="mw-body" role="main" style="margin: 0.5em; margin-bottom:0; margin-top:0">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Raspberry Pi</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="contentSub"></div>
										<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p>From <a href="https://en.wikipedia.org/wiki/Raspberry_Pi" class="extiw" title="wikipedia:Raspberry Pi">Wikipedia</a>:
</p>
<dl><dd>The Raspberry Pi is a series of credit card-sized single-board computers developed in the UK by the Raspberry Pi Foundation with the intention of promoting the teaching of basic computer science in schools.</dd></dl>
<p>The original models, released in 2012, are based on the Broadcom SoC BCM2835 (<a href="https://en.wikipedia.org/wiki/ARM11" class="extiw" title="wikipedia:ARM11">ARM11 architecture</a>). The Raspberry Pi 2, released in 2015, is shipped with a BCM2836 SoC (quad-core <a href="https://en.wikipedia.org/wiki/ARM_Cortex-A7" class="extiw" title="wikipedia:ARM Cortex-A7">ARM Cortex-A7 architecture</a>). In February 2016, the Pi 3 was launched which contains a BCM2837 SoC (quad-core <a href="https://en.wikipedia.org/wiki/ARM_Cortex-A53" class="extiw" title="wikipedia:ARM Cortex-A53">ARM Cortex-A53 architecture</a>) and built in WiFi and Bluetooth.
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Article_preface"><span class="tocnumber">1</span> <span class="toctext">Article preface</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#System_architecture"><span class="tocnumber">2</span> <span class="toctext">System architecture</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#SD_card_performance"><span class="tocnumber">3</span> <span class="toctext">SD card performance</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Enable_fsck_on_boot"><span class="tocnumber">3.1</span> <span class="toctext">Enable fsck on boot</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Installing_Arch_Linux_ARM"><span class="tocnumber">4</span> <span class="toctext">Installing Arch Linux ARM</span></a></li>
<li class="toclevel-1 tocsection-6">
<a href="#Network"><span class="tocnumber">5</span> <span class="toctext">Network</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Configure_WLAN_without_ethernet"><span class="tocnumber">5.1</span> <span class="toctext">Configure WLAN without ethernet</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Audio"><span class="tocnumber">6</span> <span class="toctext">Audio</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Caveats_for_HDMI_audio"><span class="tocnumber">6.1</span> <span class="toctext">Caveats for HDMI audio</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Caveats_for_Analogue_audio"><span class="tocnumber">6.2</span> <span class="toctext">Caveats for Analogue audio</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11">
<a href="#Video"><span class="tocnumber">7</span> <span class="toctext">Video</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#HDMI_.2F_analog_TV-Out"><span class="tocnumber">7.1</span> <span class="toctext">HDMI / analog TV-Out</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Caveats_for_analog_TV-Out"><span class="tocnumber">7.2</span> <span class="toctext">Caveats for analog TV-Out</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#X.org_driver"><span class="tocnumber">7.3</span> <span class="toctext">X.org driver</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15">
<a href="#Onboard_hardware_sensors"><span class="tocnumber">8</span> <span class="toctext">Onboard hardware sensors</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Temperature"><span class="tocnumber">8.1</span> <span class="toctext">Temperature</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Voltage"><span class="tocnumber">8.2</span> <span class="toctext">Voltage</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Lightweight_monitoring_suite"><span class="tocnumber">8.3</span> <span class="toctext">Lightweight monitoring suite</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Overclocking.2Funderclocking"><span class="tocnumber">9</span> <span class="toctext">Overclocking/underclocking</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#Serial_console"><span class="tocnumber">10</span> <span class="toctext">Serial console</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Raspberry_Pi_camera_module"><span class="tocnumber">11</span> <span class="toctext">Raspberry Pi camera module</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#Hardware_random_number_generator"><span class="tocnumber">12</span> <span class="toctext">Hardware random number generator</span></a></li>
<li class="toclevel-1 tocsection-23">
<a href="#GPIO"><span class="tocnumber">13</span> <span class="toctext">GPIO</span></a>
<ul>
<li class="toclevel-2 tocsection-24"><a href="#SPI"><span class="tocnumber">13.1</span> <span class="toctext">SPI</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Python"><span class="tocnumber">13.2</span> <span class="toctext">Python</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#I2C"><span class="tocnumber">14</span> <span class="toctext">I2C</span></a></li>
<li class="toclevel-1 tocsection-27"><a href="#Compiling_on_the_RPi"><span class="tocnumber">15</span> <span class="toctext">Compiling on the RPi</span></a></li>
<li class="toclevel-1 tocsection-28"><a href="#QEMU_chroot"><span class="tocnumber">16</span> <span class="toctext">QEMU chroot</span></a></li>
<li class="toclevel-1 tocsection-29"><a href="#See_also"><span class="tocnumber">17</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Article_preface">Article preface</span></h2>
<p>This article is not meant to be an exhaustive setup guide and assumes that the reader has setup an Arch system before.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>Support for the ARM architecture is provided on <a rel="nofollow" class="external free" href="http://archlinuxarm.org">http://archlinuxarm.org</a> not through posts to the official Arch Linux Forum.  Any posts related to ARM specific issues will be promptly closed per the <a href="../en/Code_of_conduct.html#Arch_Linux_distribution_support_.2Aonly.2A" title="Code of conduct">Code of conduct#Arch Linux distribution support *only*</a> policy.</div>
<h2><span class="mw-headline" id="System_architecture">System architecture</span></h2>
<p>The Raspberry Pi is an ARM-based device and therefore needs binaries compiled for this architecture. These binaries are provided by the <a rel="nofollow" class="external text" href="http://archlinuxarm.org/about">Arch Linux ARM project</a> which ports Arch Linux to ARM-based devices. They also have a separate community and forum on their website, while original forum does <i>not</i> support ARM specific issues.
With the introduction of the Raspberry Pi 2 the packages needed now depend on which architecture the devices has:
</p>
<ul>
<li> ARMv6 (BCM2835): Raspberry Pi Model A, A+, B, B+, Zero</li>
<li> ARMv7 (BCM2836): Raspberry Pi 2 (based on Model B+)</li>
<li> ARMv8 (BCM2837): Raspberry Pi 3</li>
</ul>
<h2><span class="mw-headline" id="SD_card_performance">SD card performance</span></h2>
<p>System responsiveness, particularly during operations involving disk I/O such as updating the system, can be adversely affected by poor quality/slow SD media.  This is characterized by <a rel="nofollow" class="external text" href="http://archlinuxarm.org/forum/viewtopic.php?f=64&amp;t=9467">frequent, often extended pauses</a> as pacman writes out files to the file system.  The pauses are not due to saturation of the RPi or RPi2 bus, but are likely the bottle-neck due to a slow SD (or micro SD) card. See the <a href="../en/Benchmarking.html#Flash_media" title="Benchmarking">Benchmarking#Flash media</a> for more.
</p>
<p>Performance and system responsiveness can be generally improved by making adjustments to the system configuration. See <a href="../en/Improving_performance.html" title="Improving performance">Improving performance</a>.
</p>
<h3><span class="mw-headline" id="Enable_fsck_on_boot">Enable fsck on boot</span></h3>
<p>Follow <a href="../en/Fsck.html#Boot_time_checking" title="Fsck">fsck#Boot time checking</a>. Remember that kernel parameters are specified in <code>/boot/cmdline.txt</code>.
</p>
<h2><span class="mw-headline" id="Installing_Arch_Linux_ARM">Installing Arch Linux ARM</span></h2>
<p>See the <a rel="nofollow" class="external text" href="http://archlinuxarm.org/platforms/armv6/raspberry-pi">Arch Linux ARM Pi documentation</a> or <a rel="nofollow" class="external text" href="http://archlinuxarm.org/platforms/armv7/broadcom/raspberry-pi-2">Arch Linux ARM Pi2 documentation</a> or <a rel="nofollow" class="external text" href="https://archlinuxarm.org/platforms/armv8/broadcom/raspberry-pi-3">Arch Linux ARM Pi3 documentation</a>.
</p>
<h2><span class="mw-headline" id="Network">Network</span></h2>
<p>The fresh install comes preconfigured to use the onboard NIC in dhcp mode via <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a>. This should allow access to an official installation through <a href="../en/Secure_Shell.html" title="Secure Shell">Secure Shell</a>. The default hostname is <b>alarmpi</b>. The root user's password is "root" and it is highly recommended to change the password and optionally set up <a href="../en/SSH_keys.html" title="SSH keys">SSH keys</a>.
</p>
<h3><span class="mw-headline" id="Configure_WLAN_without_ethernet">Configure WLAN without ethernet</span></h3>
<p>Users needing to establish a wireless internet connection will need to use a wireless daemon such as <a href="../en/WPA_supplicant.html" title="WPA supplicant">WPA supplicant</a>. See also <a href="../en/Wireless_network_configuration.html" title="Wireless network configuration">Wireless network configuration</a>.
</p>
<h2><span class="mw-headline" id="Audio">Audio</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> should supply the needed programs to use onboard sound. Default volume can be adjusted using <code>alsamixer</code>. 
</p>
<p>A key change with Linux kernel version 4.4.x for ARM related to ALSA and to the needed sound module: in order to use tools such as <code>alsamixer</code> with the current kernel, users <i>must</i> modify <code>/boot/config.txt</code> to contain the following line: 
</p>
<pre>dtparam=audio=on
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>Ensure that the sole source "PCM" is not muted (denoted by <code>MM</code> if muted, press <code>M</code> to unmute).</div>
<p>Select an audio source for output:
</p>
<pre>$ amixer cset numid=3 <i>x</i>
</pre>
<p>Where <code><i>x</i></code> corresponds to:
</p>
<ul>
<li>0 for Auto</li>
<li>1 for Analog out</li>
<li>2 for HDMI</li>
</ul>
<h3><span class="mw-headline" id="Caveats_for_HDMI_audio">Caveats for HDMI audio</span></h3>
<p>Some applications require a setting in <code>/boot/config.txt</code> to force audio over HDMI:
</p>
<pre>hdmi_drive=2
</pre>
<h3><span class="mw-headline" id="Caveats_for_Analogue_audio">Caveats for Analogue audio</span></h3>
<p>Sometimes audio from the 3.5mm analogue output can be terribly distorted. Adding the following to <code>/boot/config.txt</code> may fix the problem.
</p>
<pre>audio_pwm_mode=2
</pre>
<h2><span class="mw-headline" id="Video">Video</span></h2>
<h3><span class="mw-headline" id="HDMI_.2F_analog_TV-Out">HDMI / analog TV-Out</span></h3>
<p>With the default configuration,  the Raspberry Pi uses HDMI video if a  <a href="https://en.wikipedia.org/wiki/HDMI" class="extiw" title="wikipedia:HDMI">HDMI</a> monitor is connected.  Otherwise, it uses analog TV-Out (also known as composite output or RCA)
</p>
<p>To turn the HDMI or analog TV-Out on or off, have a look at
</p>
<pre>/opt/vc/bin/tvservice
</pre>
<p>Use the <i>-s</i> parameter to check the status; the <i>-o</i> parameter to turn the display off and <i>-p</i> parameter to power on HDMI with preferred settings.
</p>
<p>Adjustments are likely required to correct proper overscan/underscan and are easily achieved in <code>boot/config.txt</code> in which many tweaks are set.  To fix, simply uncomment the corresponding lines and setup per the commented instructions:
</p>
<pre># uncomment the following to adjust overscan. Use positive numbers if console
# goes off screen, and negative if there is too much border
#overscan_left=16
overscan_right=8
overscan_top=-16
overscan_bottom=-16
</pre>
<p>Or simply disable overscan if the TV/monitor has a "fit to screen" option.
</p>
<pre>disable_overscan=1
</pre>
<p>Users wishing to use the analog video out should consult <a rel="nofollow" class="external text" href="https://raw.github.com/Evilpaul/RPi-config/master/config.txt">this</a> config file which contains options for non-NTSC outputs.
</p>
<p>A reboot is needed for new settings to take effect.
</p>
<h3><span class="mw-headline" id="Caveats_for_analog_TV-Out">Caveats for analog TV-Out</span></h3>
<p>Since Raspberry Pi 1 Model B+ and Raspberry Pi 2 Model B, the composite video socket was removed, with the replacement of composite signal through the 3.5mm video/audio jack. Some RCA cables do not follow the same standard as Raspberry Pi, in which case connect the red or white audio plug for video.<a rel="nofollow" class="external autonumber" href="http://www.raspberrypi-spy.co.uk/2014/07/raspberry-pi-model-b-3-5mm-audiovideo-jack/">[1]</a>
</p>
<h3><span class="mw-headline" id="X.org_driver">X.org driver</span></h3>
<p>The X.org driver for Raspberry Pi can be <a href="../en/Help:Reading.html#Installation_of_packages" title="Installed" class="mw-redirect">installed</a> with the <i>xf86-video-fbdev</i> or <i>xf86-video-fbturbo-git</i> package.
</p>
<h2><span class="mw-headline" id="Onboard_hardware_sensors">Onboard hardware sensors</span></h2>
<h3><span class="mw-headline" id="Temperature">Temperature</span></h3>
<p>Temperatures sensors can be queried with utils in the <i>raspberrypi-firmware-tools</i> package.  The RPi offers a sensor on the BCM2835 SoC (CPU/GPU):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ /opt/vc/bin/vcgencmd measure_temp</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">temp=49.8'C</pre>
<p>Alternatively, simply read from the file system:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /sys/class/thermal/thermal_zone0/temp</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">49768</pre>
<p>For human readable output:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ awk '{printf "%3.1f°C\n", $1/1000}' /sys/class/thermal/thermal_zone0/temp</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">54.1°C</pre>
<h3><span class="mw-headline" id="Voltage">Voltage</span></h3>
<p>Four different voltages can be monitored via <code>/opt/vc/bin/vcgencmd</code> as well:
</p>
<pre>$ /opt/vc/bin/vcgencmd measure_volts <i>&lt;id&gt;</i>
</pre>
<p>Where <code><i>&lt;id&gt;</i></code> is:
</p>
<ul>
<li>core for core voltage</li>
<li>sdram_c for sdram Core voltage</li>
<li>sdram_i for sdram I/O voltage</li>
<li>sdram_p for sdram PHY voltage</li>
</ul>
<h3><span class="mw-headline" id="Lightweight_monitoring_suite">Lightweight monitoring suite</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/monitorix/">monitorix</a></span><sup><small>AUR</small></sup> has specific support for the RPi since v3.2.0 through the <code>raspberrypi = y</code> setting in <code>/etc/monitorix/monitorix.conf</code>.  Temperature, voltages, and frequencies are logged; screenshots available <a rel="nofollow" class="external text" href="http://www.monitorix.org/screenshots.html">here</a>.
</p>
<h2><span class="mw-headline" id="Overclocking.2Funderclocking">Overclocking/underclocking</span></h2>
<p>The RPi can be overclocked by editing <code>/boot/config.txt</code>, for example:
</p>
<pre>arm_freq=800
arm_freq_min=100
core_freq=300
core_freq_min=75
sdram_freq=400
over_voltage=0
</pre>
<p>The optional <code>*_min</code> lines define the minimum frequency to be used for the given component. When the system is not under load, the frequencies will drop down to the minimum value. Consult the <a rel="nofollow" class="external text" href="http://elinux.org/RPiconfig#Overclocking">Overclocking</a> article on elinux for additional options and examples.
</p>
<p>A reboot is needed for new settings to take effect.
</p>
<p>The overclocked setting for CPU clock applies only when the governor throttles up the CPU, i.e. under load. To query the current frequency of the CPU:
</p>
<pre>$ cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq
</pre>
<p>See <a href="../en/CPU_frequency_scaling.html" title="CPU frequency scaling">CPU frequency scaling</a> for details on scaling governors.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;">
<strong> Tip: </strong>The following script will show all frequencies set on the RPi:
<pre>
#/bin/bash
for src in arm core h264 isp v3d uart pwm emmc pixel vec hdmi dpi ; do
    echo -e "$src:\t$(/opt/vc/bin/vcgencmd  measure_clock $src)"
done
</pre>
</div>
<h2><span class="mw-headline" id="Serial_console">Serial console</span></h2>
<p>Edit the default <code>/boot/cmdline.txt</code>, change <code>loglevel</code> to <code>5</code> to see boot messages:
</p>
<pre>loglevel=5
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>The Pi3 requires <code>enable_uart=1</code> be added to <code>/boot/cmdline.txt</code> in order to display boot messages.</div>
<p>If the default speed of 115200 does not work properly, try changing it to 38400:
</p>
<pre>console=ttyAMA0,38400 kgdboc=ttyAMA0,38400
</pre>
<p><a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">Start</a> and <a href="../en/Systemd.html#Using_units" title="Enable" class="mw-redirect">enable</a> the <code>getty@ttyAMA0</code> systemd service on the Pi.
</p>
<p>Creating the proper service link:
</p>
<pre># ln -s /usr/lib/systemd/system/serial-getty@.service /etc/systemd/system/getty.target.wants/serial-getty@ttyAMA0.service
</pre>
<p>From a PC, connect:
</p>
<pre># screen /dev/ttyUSB0 38400
</pre>
<h2><span class="mw-headline" id="Raspberry_Pi_camera_module">Raspberry Pi camera module</span></h2>
<p>The commands for the camera module are included as part of the <i>raspberrypi-firmware-tools</i> package - which is installed by default.
</p>
<pre>$ /opt/vc/bin/raspistill
$ /opt/vc/bin/raspivid
</pre>
<p>Append to <code>/boot/config.txt</code>:
</p>
<pre>gpu_mem=128
start_file=start_x.elf
fixup_file=fixup_x.dat
</pre>
<p>Optionally
</p>
<pre>disable_camera_led=1
</pre>
<p>The following is a common error:
</p>
<pre>mmal: mmal_vc_component_enable: failed to enable component: ENOSPC
mmal: camera component couldn't be enabled
mmal: main: Failed to create camera component
mmal: Failed to run camera app. Please check for firmware updates
</pre>
<p>which can be corrected by setting these values in <code>/boot/config.txt</code>:
</p>
<pre>cma_lwm=
cma_hwm=
cma_offline_start=
</pre>
<p>Another common error:
</p>
<pre>mmal: mmal_vc_component_create: failed to create component 'vc.ril.camera' (1:ENOMEM)
mmal: mmal_component_create_core: could not create component 'vc.ril.camera' (1)
mmal: Failed to create camera component
mmal: main: Failed to create camera component
mmal: Only 64M of gpu_mem is configured. Try running "sudo raspi-config" and ensure that "memory_split" has a value of 128 or greater
</pre>
<p>can be corrected by adding the following line:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/blacklist.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">blacklist i2c_bcm2708</pre>
<p>In order to use standard applications (those that look for <code>/dev/video0</code>) the V4L2 driver must be loaded.  This can be done automatically at boot by creating an autoload file such as the following.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/rpi-camera.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">bcm2835-v4l2</pre>
<h2><span class="mw-headline" id="Hardware_random_number_generator">Hardware random number generator</span></h2>
<p>Arch Linux ARM for the Raspberry Pi had the <code>bcm2708-rng</code> module set to load at boot (see <a rel="nofollow" class="external text" href="http://archlinuxarm.org/forum/viewtopic.php?f=31&amp;t=4993#p27708">this</a>); starting with kernel 4.4.7 the <code>bcm2835_rng</code> module replaces the former on Raspberry Pi 2 and Raspberry Pi 3 units.
</p>
<p>Install the <i>rng-tools</i> and tell the Hardware RNG Entropy Gatherer Daemon (<i>rngd</i>) where to find the hardware random number generator.
</p>
<p>This can be done by editing <code>/etc/conf.d/rngd</code>:
</p>
<pre>RNGD_OPTS="-o /dev/random -r /dev/hwrng"
</pre>
<p>and enabling and <a href="../en/Systemd.html#Using_units" title="Start" class="mw-redirect">starting</a> the <i>rngd</i> service.
</p>
<p>If <a href="../en/Haveged.html" title="Haveged">haveged</a> is running, it should be stopped and disabled, as it might compete with <i>rngd</i> and is only preferred when there is no hardware random number generator available.
</p>
<p>Once completed, this change ensures that data from the hardware random number generator is fed into the kernel's entropy pool at <code>/dev/random</code>. To check the available entropy, run:
</p>
<pre># cat /proc/sys/kernel/random/entropy_avail
</pre>
<p>The number it reports should be around 3000, whereas before setting up <i>rngd</i> it would have been closer to 1000.
</p>
<h2><span class="mw-headline" id="GPIO">GPIO</span></h2>
<h3><span class="mw-headline" id="SPI">SPI</span></h3>
<p>To enable the <code>/dev/spidev*</code> devices, uncomment the following line:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/config.txt</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">device_tree_param=spi=on</pre>
<h3><span class="mw-headline" id="Python">Python</span></h3>
<p>To be able to use the GPIO pins from Python, use the <a rel="nofollow" class="external text" href="https://pypi.python.org/pypi/RPi.GPIO">RPi.GPIO</a> library. Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python-raspberry-gpio/">python-raspberry-gpio</a></span><sup><small>AUR</small></sup> package.
</p>
<h2><span class="mw-headline" id="I2C">I2C</span></h2>
<p>Install <i>i2c-tools</i> and <i>lm_sensors</i> packages.
</p>
<p>Configure the bootloader to enable the i2c hardware by appending <code>/boot/config.txt</code>:
</p>
<pre> dtparam=i2c_arm=on
</pre>
<p>Configure the <code>i2c-dev</code> and <code>i2c-bcm2708</code> (if not blacklisted for the camera) modules to be loaded at boot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/raspberrypi.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">i2c-dev
i2c-bcm2708</pre>
<p>Reboot the Raspberry Pi and issue the following command to get the hardware address:
</p>
<pre> i2cdetect -y 0
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>When using the I2C1 port instead of I2C0, one will need to run <code>i2cdetect -y 1</code> instead and replace <code>i2c-0</code> with <code>i2c-1</code> in the following steps.</div>
<p>Now we need to tell Linux to instantiate the device. Change the hardware address to the address found in the previous step with '0x' as prefix (e.g. 0x48) and choose a device name:
</p>
<pre> echo &lt;devicename&gt; &lt;hardware address&gt; &gt;/sys/class/i2c-adapter/i2c-0/new_device
</pre>
<p>Check the dmesg command for a new entry:
</p>
<pre> i2c-0: new_device: Instantiated device ds1621 at 0x48
</pre>
<p>Finally, read the sensor output:
</p>
<pre> sensors
</pre>
<h2><span class="mw-headline" id="Compiling_on_the_RPi">Compiling on the RPi</span></h2>
<p>Compiling can be very slow on a RPi.  <a href="../en/Distcc.html" title="Distcc">Distcc</a> can greatly improve compilation times if other nodes are on the network.  For users with x86_64 or i686 boxes, <a href="../en/Distcc.html#Arch_ARM" title="Distcc">Distcc#Arch ARM</a> describes the proper setup for distcc to use these resources.
</p>
<h2><span class="mw-headline" id="QEMU_chroot">QEMU chroot</span></h2>
<p>Sometimes it is easier to work directly on a disk image instead of the real Raspberry Pi. This can be achieved by mounting an SD card containing the RPi root partition and chrooting into it. From the chroot it should be possible to run <i>pacman</i> and install more packages, compile large libraries etc. Since the executables are for the ARM architecture, the translation to x86 needs to be performed by <a href="../en/QEMU.html" title="QEMU">QEMU</a>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;">
<strong> Note: </strong>As of January 2016, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=make">make</a></span> won't run in QEMU for ARM so it is not possible to build packages this way.  Follow the <a rel="nofollow" class="external text" href="https://archlinuxarm.org/wiki/Distcc_Cross-Compiling">guide on the Arch Linux ARM website</a> to build a cross-compiler if building ARM packages is needed.</div>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/binfmt-support/">binfmt-support</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/qemu-user-static/">qemu-user-static</a></span><sup><small>AUR</small></sup> from the <a href="../en/Arch_User_Repository.html" title="AUR" class="mw-redirect">AUR</a>.
</p>
<p>Make sure that the ARM to x86 translation is active:
</p>
<pre># update-binfmts --importdir /var/lib/binfmts/ --import
# update-binfmts --display qemu-arm
</pre>
<p>If ARM to x86 translation is not active, enable it using update-binfmts:
</p>
<pre># update-binfmts --enable qemu-arm
</pre>
<p>Mount the SD card to <code>mnt/</code> (the device name may be different).
</p>
<pre># mkdir mnt
# mount /dev/mmcblk0p2 mnt
</pre>
<p>Copy the QEMU executable, which will handle the translation from ARM, to the SD card root:
</p>
<pre># cp /usr/bin/qemu-arm-static mnt/usr/bin
</pre>
<p>Finally chroot into the SD card root as described in <a href="../en/Change_root.html#Using_chroot" title="Change root">Change root#Using chroot</a>, keeping in mind that <code>qemu-arm-static</code> needs to be called in the <code>chroot</code> command i.e.:
</p>
<pre># chroot /mnt/arch /usr/bin/qemu-arm-static /bin/bash
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external text" href="https://www.raspberrypi.org">Raspberry Pi</a> - Official website</li>
<li> <a rel="nofollow" class="external text" href="http://elinux.org/RPiconfig">RPi Config</a> - Excellent source of info relating to under-the-hood tweaks.</li>
<li> <a rel="nofollow" class="external text" href="http://elinux.org/RPI_vcgencmd_usage">RPi vcgencmd usage</a> - Overview of firmware command vcgencmd.</li>
<li> <a rel="nofollow" class="external text" href="http://archpi.dabase.com/">Arch Linux ARM on Raspberry PI</a> - A FAQ style site with hints and tips for running Arch Linux on the RPi</li>
</ul>

</div>
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:ARM_architecture.html" title="Category:ARM architecture">ARM architecture</a></li></ul>
</div></div>					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
Extracted from <a href="https://wiki.archlinux.org"> ArchWiki </a> and licensed under <a href="http://www.gnu.org/copyleft/fdl.html"> GDL >= 1.3</a>
		</div>
		</div>
		</body>
</html>
